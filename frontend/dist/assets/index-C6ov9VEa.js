(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(n){if(n.ep)return;n.ep=!0;const u=r(n);fetch(n.href,u)}})();function Uu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hc={exports:{}},$s={},uc={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=Symbol.for("react.element"),Wu=Symbol.for("react.portal"),$u=Symbol.for("react.fragment"),Vu=Symbol.for("react.strict_mode"),Ku=Symbol.for("react.profiler"),qu=Symbol.for("react.provider"),Xu=Symbol.for("react.context"),Gu=Symbol.for("react.forward_ref"),Yu=Symbol.for("react.suspense"),Qu=Symbol.for("react.memo"),Ju=Symbol.for("react.lazy"),qa=Symbol.iterator;function Zu(e){return e===null||typeof e!="object"?null:(e=qa&&e[qa]||e["@@iterator"],typeof e=="function"?e:null)}var dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fc=Object.assign,pc={};function Ir(e,t,r){this.props=e,this.context=t,this.refs=pc,this.updater=r||dc}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _c(){}_c.prototype=Ir.prototype;function qo(e,t,r){this.props=e,this.context=t,this.refs=pc,this.updater=r||dc}var Xo=qo.prototype=new _c;Xo.constructor=qo;fc(Xo,Ir.prototype);Xo.isPureReactComponent=!0;var Xa=Array.isArray,gc=Object.prototype.hasOwnProperty,Go={current:null},mc={key:!0,ref:!0,__self:!0,__source:!0};function vc(e,t,r){var i,n={},u=null,m=null;if(t!=null)for(i in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(u=""+t.key),t)gc.call(t,i)&&!mc.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];n.children=c}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:Ai,type:e,key:u,ref:m,props:n,_owner:Go.current}}function ed(e,t){return{$$typeof:Ai,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ai}function td(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ga=/\/+/g;function fn(e,t){return typeof e=="object"&&e!==null&&e.key!=null?td(""+e.key):t.toString(36)}function is(e,t,r,i,n){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(u){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Ai:case Wu:m=!0}}if(m)return m=e,n=n(m),e=i===""?"."+fn(m,0):i,Xa(n)?(r="",e!=null&&(r=e.replace(Ga,"$&/")+"/"),is(n,t,r,"",function(f){return f})):n!=null&&(Yo(n)&&(n=ed(n,r+(!n.key||m&&m.key===n.key?"":(""+n.key).replace(Ga,"$&/")+"/")+e)),t.push(n)),1;if(m=0,i=i===""?".":i+":",Xa(e))for(var a=0;a<e.length;a++){u=e[a];var c=i+fn(u,a);m+=is(u,t,r,c,n)}else if(c=Zu(e),typeof c=="function")for(e=c.call(e),a=0;!(u=e.next()).done;)u=u.value,c=i+fn(u,a++),m+=is(u,t,r,c,n);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function ji(e,t,r){if(e==null)return e;var i=[],n=0;return is(e,i,"","",function(u){return t.call(r,u,n++)}),i}function rd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Pe={current:null},ss={transition:null},id={ReactCurrentDispatcher:Pe,ReactCurrentBatchConfig:ss,ReactCurrentOwner:Go};function yc(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:ji,forEach:function(e,t,r){ji(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ji(e,function(){t++}),t},toArray:function(e){return ji(e,function(t){return t})||[]},only:function(e){if(!Yo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=Ir;ee.Fragment=$u;ee.Profiler=Ku;ee.PureComponent=qo;ee.StrictMode=Vu;ee.Suspense=Yu;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=id;ee.act=yc;ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=fc({},e.props),n=e.key,u=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,m=Go.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)gc.call(t,c)&&!mc.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:Ai,type:e.type,key:n,ref:u,props:i,_owner:m}};ee.createContext=function(e){return e={$$typeof:Xu,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qu,_context:e},e.Consumer=e};ee.createElement=vc;ee.createFactory=function(e){var t=vc.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Gu,render:e}};ee.isValidElement=Yo;ee.lazy=function(e){return{$$typeof:Ju,_payload:{_status:-1,_result:e},_init:rd}};ee.memo=function(e,t){return{$$typeof:Qu,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=ss.transition;ss.transition={};try{e()}finally{ss.transition=t}};ee.unstable_act=yc;ee.useCallback=function(e,t){return Pe.current.useCallback(e,t)};ee.useContext=function(e){return Pe.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Pe.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Pe.current.useEffect(e,t)};ee.useId=function(){return Pe.current.useId()};ee.useImperativeHandle=function(e,t,r){return Pe.current.useImperativeHandle(e,t,r)};ee.useInsertionEffect=function(e,t){return Pe.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Pe.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Pe.current.useMemo(e,t)};ee.useReducer=function(e,t,r){return Pe.current.useReducer(e,t,r)};ee.useRef=function(e){return Pe.current.useRef(e)};ee.useState=function(e){return Pe.current.useState(e)};ee.useSyncExternalStore=function(e,t,r){return Pe.current.useSyncExternalStore(e,t,r)};ee.useTransition=function(){return Pe.current.useTransition()};ee.version="18.3.1";uc.exports=ee;var Q=uc.exports;const sd=Uu(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Q,od=Symbol.for("react.element"),ad=Symbol.for("react.fragment"),ld=Object.prototype.hasOwnProperty,cd=nd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hd={key:!0,ref:!0,__self:!0,__source:!0};function Sc(e,t,r){var i,n={},u=null,m=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(m=t.ref);for(i in t)ld.call(t,i)&&!hd.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:od,type:e,key:u,ref:m,props:n,_owner:cd.current}}$s.Fragment=ad;$s.jsx=Sc;$s.jsxs=Sc;hc.exports=$s;var R=hc.exports,$n={},wc={exports:{}},Ve={},Cc={exports:{}},xc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(H,b){var D=H.length;H.push(b);e:for(;0<D;){var B=D-1>>>1,I=H[B];if(0<n(I,b))H[B]=b,H[D]=I,D=B;else break e}}function r(H){return H.length===0?null:H[0]}function i(H){if(H.length===0)return null;var b=H[0],D=H.pop();if(D!==b){H[0]=D;e:for(var B=0,I=H.length,V=I>>>1;B<V;){var N=2*(B+1)-1,K=H[N],W=N+1,M=H[W];if(0>n(K,D))W<I&&0>n(M,K)?(H[B]=M,H[W]=D,B=W):(H[B]=K,H[N]=D,B=N);else if(W<I&&0>n(M,D))H[B]=M,H[W]=D,B=W;else break e}}return b}function n(H,b){var D=H.sortIndex-b.sortIndex;return D!==0?D:H.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var m=Date,a=m.now();e.unstable_now=function(){return m.now()-a}}var c=[],f=[],v=1,d=null,_=3,S=!1,x=!1,g=!1,h=typeof setTimeout=="function"?setTimeout:null,l=typeof clearTimeout=="function"?clearTimeout:null,s=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function o(H){for(var b=r(f);b!==null;){if(b.callback===null)i(f);else if(b.startTime<=H)i(f),b.sortIndex=b.expirationTime,t(c,b);else break;b=r(f)}}function p(H){if(g=!1,o(H),!x)if(r(c)!==null)x=!0,U(w);else{var b=r(f);b!==null&&q(p,b.startTime-H)}}function w(H,b){x=!1,g&&(g=!1,l(y),y=-1),S=!0;var D=_;try{for(o(b),d=r(c);d!==null&&(!(d.expirationTime>b)||H&&!P());){var B=d.callback;if(typeof B=="function"){d.callback=null,_=d.priorityLevel;var I=B(d.expirationTime<=b);b=e.unstable_now(),typeof I=="function"?d.callback=I:d===r(c)&&i(c),o(b)}else i(c);d=r(c)}if(d!==null)var V=!0;else{var N=r(f);N!==null&&q(p,N.startTime-b),V=!1}return V}finally{d=null,_=D,S=!1}}var C=!1,k=null,y=-1,E=5,T=-1;function P(){return!(e.unstable_now()-T<E)}function O(){if(k!==null){var H=e.unstable_now();T=H;var b=!0;try{b=k(!0,H)}finally{b?A():(C=!1,k=null)}}else C=!1}var A;if(typeof s=="function")A=function(){s(O)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,z=j.port2;j.port1.onmessage=O,A=function(){z.postMessage(null)}}else A=function(){h(O,0)};function U(H){k=H,C||(C=!0,A())}function q(H,b){y=h(function(){H(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(H){H.callback=null},e.unstable_continueExecution=function(){x||S||(x=!0,U(w))},e.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<H?Math.floor(1e3/H):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(H){switch(_){case 1:case 2:case 3:var b=3;break;default:b=_}var D=_;_=b;try{return H()}finally{_=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(H,b){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var D=_;_=H;try{return b()}finally{_=D}},e.unstable_scheduleCallback=function(H,b,D){var B=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?B+D:B):D=B,H){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=D+I,H={id:v++,callback:b,priorityLevel:H,startTime:D,expirationTime:I,sortIndex:-1},D>B?(H.sortIndex=D,t(f,H),r(c)===null&&H===r(f)&&(g?(l(y),y=-1):g=!0,q(p,D-B))):(H.sortIndex=I,t(c,H),x||S||(x=!0,U(w))),H},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(H){var b=_;return function(){var D=_;_=b;try{return H.apply(this,arguments)}finally{_=D}}}})(xc);Cc.exports=xc;var ud=Cc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd=Q,$e=ud;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var kc=new Set,pi={};function lr(e,t){Dr(e,t),Dr(e+"Capture",t)}function Dr(e,t){for(pi[e]=t,e=0;e<t.length;e++)kc.add(t[e])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vn=Object.prototype.hasOwnProperty,fd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ya={},Qa={};function pd(e){return Vn.call(Qa,e)?!0:Vn.call(Ya,e)?!1:fd.test(e)?Qa[e]=!0:(Ya[e]=!0,!1)}function _d(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gd(e,t,r,i){if(t===null||typeof t>"u"||_d(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Oe(e,t,r,i,n,u,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=m}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ee[e]=new Oe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ee[t]=new Oe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ee[e]=new Oe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ee[e]=new Oe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ee[e]=new Oe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ee[e]=new Oe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ee[e]=new Oe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ee[e]=new Oe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ee[e]=new Oe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qo=/[\-:]([a-z])/g;function Jo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qo,Jo);Ee[t]=new Oe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qo,Jo);Ee[t]=new Oe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qo,Jo);Ee[t]=new Oe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ee[e]=new Oe(e,1,!1,e.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new Oe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ee[e]=new Oe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zo(e,t,r,i){var n=Ee.hasOwnProperty(t)?Ee[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gd(t,r,n,i)&&(r=null),i||n===null?pd(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Et=dd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hi=Symbol.for("react.element"),ur=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),ea=Symbol.for("react.strict_mode"),Kn=Symbol.for("react.profiler"),bc=Symbol.for("react.provider"),Ec=Symbol.for("react.context"),ta=Symbol.for("react.forward_ref"),qn=Symbol.for("react.suspense"),Xn=Symbol.for("react.suspense_list"),ra=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),Lc=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function $r(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,pn;function Zr(e){if(pn===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);pn=t&&t[1]||""}return`
`+pn+e}var _n=!1;function gn(e,t){if(!e||_n)return"";_n=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var i=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){i=f}e.call(t.prototype)}else{try{throw Error()}catch(f){i=f}e()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var n=f.stack.split(`
`),u=i.stack.split(`
`),m=n.length-1,a=u.length-1;1<=m&&0<=a&&n[m]!==u[a];)a--;for(;1<=m&&0<=a;m--,a--)if(n[m]!==u[a]){if(m!==1||a!==1)do if(m--,a--,0>a||n[m]!==u[a]){var c=`
`+n[m].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=m&&0<=a);break}}}finally{_n=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zr(e):""}function md(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=gn(e.type,!1),e;case 11:return e=gn(e.type.render,!1),e;case 1:return e=gn(e.type,!0),e;default:return""}}function Gn(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dr:return"Fragment";case ur:return"Portal";case Kn:return"Profiler";case ea:return"StrictMode";case qn:return"Suspense";case Xn:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ec:return(e.displayName||"Context")+".Consumer";case bc:return(e._context.displayName||"Context")+".Provider";case ta:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ra:return t=e.displayName||null,t!==null?t:Gn(e.type)||"Memo";case Tt:t=e._payload,e=e._init;try{return Gn(e(t))}catch{}}return null}function vd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gn(t);case 8:return t===ea?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yd(e){var t=Rc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(m){i=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fi(e){e._valueTracker||(e._valueTracker=yd(e))}function Dc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Rc(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function Ss(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Yn(e,t){var r=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Za(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Vt(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Tc(e,t){t=t.checked,t!=null&&Zo(e,"checked",t,!1)}function Qn(e,t){Tc(e,t);var r=Vt(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Jn(e,t.type,r):t.hasOwnProperty("defaultValue")&&Jn(e,t.type,Vt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function el(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Jn(e,t,r){(t!=="number"||Ss(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ei=Array.isArray;function xr(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Vt(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Zn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(X(92));if(ei(r)){if(1<r.length)throw Error(X(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vt(r)}}function Ac(e,t){var r=Vt(t.value),i=Vt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function rl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Bc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function eo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Bc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zi,Pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _i(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sd=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(e){Sd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),si[t]=si[e]})});function Oc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||si.hasOwnProperty(e)&&si[e]?(""+t).trim():t+"px"}function Mc(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=Oc(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var wd=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function to(e,t){if(t){if(wd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function ro(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var io=null;function ia(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var so=null,kr=null,br=null;function il(e){if(e=Oi(e)){if(typeof so!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Gs(t),so(e.stateNode,e.type,t))}}function Ic(e){kr?br?br.push(e):br=[e]:kr=e}function Nc(){if(kr){var e=kr,t=br;if(br=kr=null,il(e),t)for(e=0;e<t.length;e++)il(t[e])}}function jc(e,t){return e(t)}function Hc(){}var mn=!1;function Fc(e,t,r){if(mn)return e(t,r);mn=!0;try{return jc(e,t,r)}finally{mn=!1,(kr!==null||br!==null)&&(Hc(),Nc())}}function gi(e,t){var r=e.stateNode;if(r===null)return null;var i=Gs(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(X(231,t,typeof r));return r}var no=!1;if(Ct)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){no=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{no=!1}function Cd(e,t,r,i,n,u,m,a,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(v){this.onError(v)}}var ni=!1,ws=null,Cs=!1,oo=null,xd={onError:function(e){ni=!0,ws=e}};function kd(e,t,r,i,n,u,m,a,c){ni=!1,ws=null,Cd.apply(xd,arguments)}function bd(e,t,r,i,n,u,m,a,c){if(kd.apply(this,arguments),ni){if(ni){var f=ws;ni=!1,ws=null}else throw Error(X(198));Cs||(Cs=!0,oo=f)}}function cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function zc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sl(e){if(cr(e)!==e)throw Error(X(188))}function Ed(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(X(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var u=n.alternate;if(u===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===u.child){for(u=n.child;u;){if(u===r)return sl(n),e;if(u===i)return sl(n),t;u=u.sibling}throw Error(X(188))}if(r.return!==i.return)r=n,i=u;else{for(var m=!1,a=n.child;a;){if(a===r){m=!0,r=n,i=u;break}if(a===i){m=!0,i=n,r=u;break}a=a.sibling}if(!m){for(a=u.child;a;){if(a===r){m=!0,r=u,i=n;break}if(a===i){m=!0,i=u,r=n;break}a=a.sibling}if(!m)throw Error(X(189))}}if(r.alternate!==i)throw Error(X(190))}if(r.tag!==3)throw Error(X(188));return r.stateNode.current===r?e:t}function Uc(e){return e=Ed(e),e!==null?Wc(e):null}function Wc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wc(e);if(t!==null)return t;e=e.sibling}return null}var $c=$e.unstable_scheduleCallback,nl=$e.unstable_cancelCallback,Ld=$e.unstable_shouldYield,Rd=$e.unstable_requestPaint,me=$e.unstable_now,Dd=$e.unstable_getCurrentPriorityLevel,sa=$e.unstable_ImmediatePriority,Vc=$e.unstable_UserBlockingPriority,xs=$e.unstable_NormalPriority,Td=$e.unstable_LowPriority,Kc=$e.unstable_IdlePriority,Vs=null,ft=null;function Ad(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Vs,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:Od,Bd=Math.log,Pd=Math.LN2;function Od(e){return e>>>=0,e===0?32:31-(Bd(e)/Pd|0)|0}var Ui=64,Wi=4194304;function ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ks(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,u=e.pingedLanes,m=r&268435455;if(m!==0){var a=m&~n;a!==0?i=ti(a):(u&=m,u!==0&&(i=ti(u)))}else m=r&~n,m!==0?i=ti(m):u!==0&&(i=ti(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,u=t&-t,n>=u||n===16&&(u&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-ot(t),n=1<<r,i|=e[r],t&=~n;return i}function Md(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Id(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,u=e.pendingLanes;0<u;){var m=31-ot(u),a=1<<m,c=n[m];c===-1?(!(a&r)||a&i)&&(n[m]=Md(a,t)):c<=t&&(e.expiredLanes|=a),u&=~a}}function ao(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qc(){var e=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),e}function vn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function Nd(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-ot(r),u=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~u}}function na(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-ot(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var se=0;function Xc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gc,oa,Yc,Qc,Jc,lo=!1,$i=[],It=null,Nt=null,jt=null,mi=new Map,vi=new Map,Bt=[],jd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ol(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vi.delete(t.pointerId)}}function Kr(e,t,r,i,n,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:u,targetContainers:[n]},t!==null&&(t=Oi(t),t!==null&&oa(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Hd(e,t,r,i,n){switch(t){case"focusin":return It=Kr(It,e,t,r,i,n),!0;case"dragenter":return Nt=Kr(Nt,e,t,r,i,n),!0;case"mouseover":return jt=Kr(jt,e,t,r,i,n),!0;case"pointerover":var u=n.pointerId;return mi.set(u,Kr(mi.get(u)||null,e,t,r,i,n)),!0;case"gotpointercapture":return u=n.pointerId,vi.set(u,Kr(vi.get(u)||null,e,t,r,i,n)),!0}return!1}function Zc(e){var t=Jt(e.target);if(t!==null){var r=cr(t);if(r!==null){if(t=r.tag,t===13){if(t=zc(r),t!==null){e.blockedOn=t,Jc(e.priority,function(){Yc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ns(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=co(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);io=i,r.target.dispatchEvent(i),io=null}else return t=Oi(r),t!==null&&oa(t),e.blockedOn=r,!1;t.shift()}return!0}function al(e,t,r){ns(e)&&r.delete(t)}function Fd(){lo=!1,It!==null&&ns(It)&&(It=null),Nt!==null&&ns(Nt)&&(Nt=null),jt!==null&&ns(jt)&&(jt=null),mi.forEach(al),vi.forEach(al)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,lo||(lo=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,Fd)))}function yi(e){function t(n){return qr(n,e)}if(0<$i.length){qr($i[0],e);for(var r=1;r<$i.length;r++){var i=$i[r];i.blockedOn===e&&(i.blockedOn=null)}}for(It!==null&&qr(It,e),Nt!==null&&qr(Nt,e),jt!==null&&qr(jt,e),mi.forEach(t),vi.forEach(t),r=0;r<Bt.length;r++)i=Bt[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Bt.length&&(r=Bt[0],r.blockedOn===null);)Zc(r),r.blockedOn===null&&Bt.shift()}var Er=Et.ReactCurrentBatchConfig,bs=!0;function zd(e,t,r,i){var n=se,u=Er.transition;Er.transition=null;try{se=1,aa(e,t,r,i)}finally{se=n,Er.transition=u}}function Ud(e,t,r,i){var n=se,u=Er.transition;Er.transition=null;try{se=4,aa(e,t,r,i)}finally{se=n,Er.transition=u}}function aa(e,t,r,i){if(bs){var n=co(e,t,r,i);if(n===null)Rn(e,t,i,Es,r),ol(e,i);else if(Hd(n,e,t,r,i))i.stopPropagation();else if(ol(e,i),t&4&&-1<jd.indexOf(e)){for(;n!==null;){var u=Oi(n);if(u!==null&&Gc(u),u=co(e,t,r,i),u===null&&Rn(e,t,i,Es,r),u===n)break;n=u}n!==null&&i.stopPropagation()}else Rn(e,t,i,null,r)}}var Es=null;function co(e,t,r,i){if(Es=null,e=ia(i),e=Jt(e),e!==null)if(t=cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=zc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Es=e,null}function eh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dd()){case sa:return 1;case Vc:return 4;case xs:case Td:return 16;case Kc:return 536870912;default:return 16}default:return 16}}var Ot=null,la=null,os=null;function th(){if(os)return os;var e,t=la,r=t.length,i,n="value"in Ot?Ot.value:Ot.textContent,u=n.length;for(e=0;e<r&&t[e]===n[e];e++);var m=r-e;for(i=1;i<=m&&t[r-i]===n[u-i];i++);return os=n.slice(e,1<i?1-i:void 0)}function as(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function ll(){return!1}function Ke(e){function t(r,i,n,u,m){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(u):u[a]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Vi:ll,this.isPropagationStopped=ll,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),t}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Ke(Nr),Pi=fe({},Nr,{view:0,detail:0}),Wd=Ke(Pi),yn,Sn,Xr,Ks=fe({},Pi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xr&&(Xr&&e.type==="mousemove"?(yn=e.screenX-Xr.screenX,Sn=e.screenY-Xr.screenY):Sn=yn=0,Xr=e),yn)},movementY:function(e){return"movementY"in e?e.movementY:Sn}}),cl=Ke(Ks),$d=fe({},Ks,{dataTransfer:0}),Vd=Ke($d),Kd=fe({},Pi,{relatedTarget:0}),wn=Ke(Kd),qd=fe({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xd=Ke(qd),Gd=fe({},Nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yd=Ke(Gd),Qd=fe({},Nr,{data:0}),hl=Ke(Qd),Jd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ef[e])?!!t[e]:!1}function ha(){return tf}var rf=fe({},Pi,{key:function(e){if(e.key){var t=Jd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sf=Ke(rf),nf=fe({},Ks,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Ke(nf),of=fe({},Pi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),af=Ke(of),lf=fe({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Ke(lf),hf=fe({},Ks,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uf=Ke(hf),df=[9,13,27,32],ua=Ct&&"CompositionEvent"in window,oi=null;Ct&&"documentMode"in document&&(oi=document.documentMode);var ff=Ct&&"TextEvent"in window&&!oi,rh=Ct&&(!ua||oi&&8<oi&&11>=oi),dl=" ",fl=!1;function ih(e,t){switch(e){case"keyup":return df.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function pf(e,t){switch(e){case"compositionend":return sh(t);case"keypress":return t.which!==32?null:(fl=!0,dl);case"textInput":return e=t.data,e===dl&&fl?null:e;default:return null}}function _f(e,t){if(fr)return e==="compositionend"||!ua&&ih(e,t)?(e=th(),os=la=Ot=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rh&&t.locale!=="ko"?null:t.data;default:return null}}var gf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gf[e.type]:t==="textarea"}function nh(e,t,r,i){Ic(i),t=Ls(t,"onChange"),0<t.length&&(r=new ca("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ai=null,Si=null;function mf(e){gh(e,0)}function qs(e){var t=gr(e);if(Dc(t))return e}function vf(e,t){if(e==="change")return t}var oh=!1;if(Ct){var Cn;if(Ct){var xn="oninput"in document;if(!xn){var _l=document.createElement("div");_l.setAttribute("oninput","return;"),xn=typeof _l.oninput=="function"}Cn=xn}else Cn=!1;oh=Cn&&(!document.documentMode||9<document.documentMode)}function gl(){ai&&(ai.detachEvent("onpropertychange",ah),Si=ai=null)}function ah(e){if(e.propertyName==="value"&&qs(Si)){var t=[];nh(t,Si,e,ia(e)),Fc(mf,t)}}function yf(e,t,r){e==="focusin"?(gl(),ai=t,Si=r,ai.attachEvent("onpropertychange",ah)):e==="focusout"&&gl()}function Sf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qs(Si)}function wf(e,t){if(e==="click")return qs(t)}function Cf(e,t){if(e==="input"||e==="change")return qs(t)}function xf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:xf;function wi(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!Vn.call(t,n)||!lt(e[n],t[n]))return!1}return!0}function ml(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vl(e,t){var r=ml(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ml(r)}}function lh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ch(){for(var e=window,t=Ss();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ss(e.document)}return t}function da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kf(e){var t=ch(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&lh(r.ownerDocument.documentElement,r)){if(i!==null&&da(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,u=Math.min(i.start,n);i=i.end===void 0?u:Math.min(i.end,n),!e.extend&&u>i&&(n=i,i=u,u=n),n=vl(r,u);var m=vl(r,i);n&&m&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var bf=Ct&&"documentMode"in document&&11>=document.documentMode,pr=null,ho=null,li=null,uo=!1;function yl(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;uo||pr==null||pr!==Ss(i)||(i=pr,"selectionStart"in i&&da(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),li&&wi(li,i)||(li=i,i=Ls(ho,"onSelect"),0<i.length&&(t=new ca("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=pr)))}function Ki(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _r={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},kn={},hh={};Ct&&(hh=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function Xs(e){if(kn[e])return kn[e];if(!_r[e])return e;var t=_r[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hh)return kn[e]=t[r];return e}var uh=Xs("animationend"),dh=Xs("animationiteration"),fh=Xs("animationstart"),ph=Xs("transitionend"),_h=new Map,Sl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){_h.set(e,t),lr(t,[e])}for(var bn=0;bn<Sl.length;bn++){var En=Sl[bn],Ef=En.toLowerCase(),Lf=En[0].toUpperCase()+En.slice(1);qt(Ef,"on"+Lf)}qt(uh,"onAnimationEnd");qt(dh,"onAnimationIteration");qt(fh,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(ph,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rf=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function wl(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,bd(i,t,void 0,e),e.currentTarget=null}function gh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var m=i.length-1;0<=m;m--){var a=i[m],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==u&&n.isPropagationStopped())break e;wl(n,a,f),u=c}else for(m=0;m<i.length;m++){if(a=i[m],c=a.instance,f=a.currentTarget,a=a.listener,c!==u&&n.isPropagationStopped())break e;wl(n,a,f),u=c}}}if(Cs)throw e=oo,Cs=!1,oo=null,e}function ae(e,t){var r=t[mo];r===void 0&&(r=t[mo]=new Set);var i=e+"__bubble";r.has(i)||(mh(t,e,2,!1),r.add(i))}function Ln(e,t,r){var i=0;t&&(i|=4),mh(r,e,i,t)}var qi="_reactListening"+Math.random().toString(36).slice(2);function Ci(e){if(!e[qi]){e[qi]=!0,kc.forEach(function(r){r!=="selectionchange"&&(Rf.has(r)||Ln(r,!1,e),Ln(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qi]||(t[qi]=!0,Ln("selectionchange",!1,t))}}function mh(e,t,r,i){switch(eh(t)){case 1:var n=zd;break;case 4:n=Ud;break;default:n=aa}r=n.bind(null,t,r,e),n=void 0,!no||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Rn(e,t,r,i,n){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(m===4)for(m=i.return;m!==null;){var c=m.tag;if((c===3||c===4)&&(c=m.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;m=m.return}for(;a!==null;){if(m=Jt(a),m===null)return;if(c=m.tag,c===5||c===6){i=u=m;continue e}a=a.parentNode}}i=i.return}Fc(function(){var f=u,v=ia(r),d=[];e:{var _=_h.get(e);if(_!==void 0){var S=ca,x=e;switch(e){case"keypress":if(as(r)===0)break e;case"keydown":case"keyup":S=sf;break;case"focusin":x="focus",S=wn;break;case"focusout":x="blur",S=wn;break;case"beforeblur":case"afterblur":S=wn;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=af;break;case uh:case dh:case fh:S=Xd;break;case ph:S=cf;break;case"scroll":S=Wd;break;case"wheel":S=uf;break;case"copy":case"cut":case"paste":S=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=ul}var g=(t&4)!==0,h=!g&&e==="scroll",l=g?_!==null?_+"Capture":null:_;g=[];for(var s=f,o;s!==null;){o=s;var p=o.stateNode;if(o.tag===5&&p!==null&&(o=p,l!==null&&(p=gi(s,l),p!=null&&g.push(xi(s,p,o)))),h)break;s=s.return}0<g.length&&(_=new S(_,x,null,r,v),d.push({event:_,listeners:g}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",_&&r!==io&&(x=r.relatedTarget||r.fromElement)&&(Jt(x)||x[xt]))break e;if((S||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,S?(x=r.relatedTarget||r.toElement,S=f,x=x?Jt(x):null,x!==null&&(h=cr(x),x!==h||x.tag!==5&&x.tag!==6)&&(x=null)):(S=null,x=f),S!==x)){if(g=cl,p="onMouseLeave",l="onMouseEnter",s="mouse",(e==="pointerout"||e==="pointerover")&&(g=ul,p="onPointerLeave",l="onPointerEnter",s="pointer"),h=S==null?_:gr(S),o=x==null?_:gr(x),_=new g(p,s+"leave",S,r,v),_.target=h,_.relatedTarget=o,p=null,Jt(v)===f&&(g=new g(l,s+"enter",x,r,v),g.target=o,g.relatedTarget=h,p=g),h=p,S&&x)t:{for(g=S,l=x,s=0,o=g;o;o=hr(o))s++;for(o=0,p=l;p;p=hr(p))o++;for(;0<s-o;)g=hr(g),s--;for(;0<o-s;)l=hr(l),o--;for(;s--;){if(g===l||l!==null&&g===l.alternate)break t;g=hr(g),l=hr(l)}g=null}else g=null;S!==null&&Cl(d,_,S,g,!1),x!==null&&h!==null&&Cl(d,h,x,g,!0)}}e:{if(_=f?gr(f):window,S=_.nodeName&&_.nodeName.toLowerCase(),S==="select"||S==="input"&&_.type==="file")var w=vf;else if(pl(_))if(oh)w=Cf;else{w=Sf;var C=yf}else(S=_.nodeName)&&S.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(w=wf);if(w&&(w=w(e,f))){nh(d,w,r,v);break e}C&&C(e,_,f),e==="focusout"&&(C=_._wrapperState)&&C.controlled&&_.type==="number"&&Jn(_,"number",_.value)}switch(C=f?gr(f):window,e){case"focusin":(pl(C)||C.contentEditable==="true")&&(pr=C,ho=f,li=null);break;case"focusout":li=ho=pr=null;break;case"mousedown":uo=!0;break;case"contextmenu":case"mouseup":case"dragend":uo=!1,yl(d,r,v);break;case"selectionchange":if(bf)break;case"keydown":case"keyup":yl(d,r,v)}var k;if(ua)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else fr?ih(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(rh&&r.locale!=="ko"&&(fr||y!=="onCompositionStart"?y==="onCompositionEnd"&&fr&&(k=th()):(Ot=v,la="value"in Ot?Ot.value:Ot.textContent,fr=!0)),C=Ls(f,y),0<C.length&&(y=new hl(y,e,null,r,v),d.push({event:y,listeners:C}),k?y.data=k:(k=sh(r),k!==null&&(y.data=k)))),(k=ff?pf(e,r):_f(e,r))&&(f=Ls(f,"onBeforeInput"),0<f.length&&(v=new hl("onBeforeInput","beforeinput",null,r,v),d.push({event:v,listeners:f}),v.data=k))}gh(d,t)})}function xi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ls(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,u=n.stateNode;n.tag===5&&u!==null&&(n=u,u=gi(e,r),u!=null&&i.unshift(xi(e,u,n)),u=gi(e,t),u!=null&&i.push(xi(e,u,n))),e=e.return}return i}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cl(e,t,r,i,n){for(var u=t._reactName,m=[];r!==null&&r!==i;){var a=r,c=a.alternate,f=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&f!==null&&(a=f,n?(c=gi(r,u),c!=null&&m.unshift(xi(r,c,a))):n||(c=gi(r,u),c!=null&&m.push(xi(r,c,a)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var Df=/\r\n?/g,Tf=/\u0000|\uFFFD/g;function xl(e){return(typeof e=="string"?e:""+e).replace(Df,`
`).replace(Tf,"")}function Xi(e,t,r){if(t=xl(t),xl(e)!==t&&r)throw Error(X(425))}function Rs(){}var fo=null,po=null;function _o(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var go=typeof setTimeout=="function"?setTimeout:void 0,Af=typeof clearTimeout=="function"?clearTimeout:void 0,kl=typeof Promise=="function"?Promise:void 0,Bf=typeof queueMicrotask=="function"?queueMicrotask:typeof kl<"u"?function(e){return kl.resolve(null).then(e).catch(Pf)}:go;function Pf(e){setTimeout(function(){throw e})}function Dn(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),yi(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);yi(t)}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function bl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jr=Math.random().toString(36).slice(2),dt="__reactFiber$"+jr,ki="__reactProps$"+jr,xt="__reactContainer$"+jr,mo="__reactEvents$"+jr,Of="__reactListeners$"+jr,Mf="__reactHandles$"+jr;function Jt(e){var t=e[dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xt]||r[dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=bl(e);e!==null;){if(r=e[dt])return r;e=bl(e)}return t}e=r,r=e.parentNode}return null}function Oi(e){return e=e[dt]||e[xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Gs(e){return e[ki]||null}var vo=[],mr=-1;function Xt(e){return{current:e}}function le(e){0>mr||(e.current=vo[mr],vo[mr]=null,mr--)}function ne(e,t){mr++,vo[mr]=e.current,e.current=t}var Kt={},Te=Xt(Kt),je=Xt(!1),ir=Kt;function Tr(e,t){var r=e.type.contextTypes;if(!r)return Kt;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},u;for(u in r)n[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function He(e){return e=e.childContextTypes,e!=null}function Ds(){le(je),le(Te)}function El(e,t,r){if(Te.current!==Kt)throw Error(X(168));ne(Te,t),ne(je,r)}function vh(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(X(108,vd(e)||"Unknown",n));return fe({},r,i)}function Ts(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kt,ir=Te.current,ne(Te,e),ne(je,je.current),!0}function Ll(e,t,r){var i=e.stateNode;if(!i)throw Error(X(169));r?(e=vh(e,t,ir),i.__reactInternalMemoizedMergedChildContext=e,le(je),le(Te),ne(Te,e)):le(je),ne(je,r)}var vt=null,Ys=!1,Tn=!1;function yh(e){vt===null?vt=[e]:vt.push(e)}function If(e){Ys=!0,yh(e)}function Gt(){if(!Tn&&vt!==null){Tn=!0;var e=0,t=se;try{var r=vt;for(se=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}vt=null,Ys=!1}catch(n){throw vt!==null&&(vt=vt.slice(e+1)),$c(sa,Gt),n}finally{se=t,Tn=!1}}return null}var vr=[],yr=0,As=null,Bs=0,Xe=[],Ge=0,sr=null,yt=1,St="";function Yt(e,t){vr[yr++]=Bs,vr[yr++]=As,As=e,Bs=t}function Sh(e,t,r){Xe[Ge++]=yt,Xe[Ge++]=St,Xe[Ge++]=sr,sr=e;var i=yt;e=St;var n=32-ot(i)-1;i&=~(1<<n),r+=1;var u=32-ot(t)+n;if(30<u){var m=n-n%5;u=(i&(1<<m)-1).toString(32),i>>=m,n-=m,yt=1<<32-ot(t)+n|r<<n|i,St=u+e}else yt=1<<u|r<<n|i,St=e}function fa(e){e.return!==null&&(Yt(e,1),Sh(e,1,0))}function pa(e){for(;e===As;)As=vr[--yr],vr[yr]=null,Bs=vr[--yr],vr[yr]=null;for(;e===sr;)sr=Xe[--Ge],Xe[Ge]=null,St=Xe[--Ge],Xe[Ge]=null,yt=Xe[--Ge],Xe[Ge]=null}var We=null,Ue=null,ce=!1,nt=null;function wh(e,t){var r=Qe(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Rl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,We=e,Ue=Ht(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,We=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sr!==null?{id:yt,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qe(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,We=e,Ue=null,!0):!1;default:return!1}}function yo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function So(e){if(ce){var t=Ue;if(t){var r=t;if(!Rl(e,t)){if(yo(e))throw Error(X(418));t=Ht(r.nextSibling);var i=We;t&&Rl(e,t)?wh(i,r):(e.flags=e.flags&-4097|2,ce=!1,We=e)}}else{if(yo(e))throw Error(X(418));e.flags=e.flags&-4097|2,ce=!1,We=e}}}function Dl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;We=e}function Gi(e){if(e!==We)return!1;if(!ce)return Dl(e),ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_o(e.type,e.memoizedProps)),t&&(t=Ue)){if(yo(e))throw Ch(),Error(X(418));for(;t;)wh(e,t),t=Ht(t.nextSibling)}if(Dl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Ht(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=We?Ht(e.stateNode.nextSibling):null;return!0}function Ch(){for(var e=Ue;e;)e=Ht(e.nextSibling)}function Ar(){Ue=We=null,ce=!1}function _a(e){nt===null?nt=[e]:nt.push(e)}var Nf=Et.ReactCurrentBatchConfig;function Gr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(X(309));var i=r.stateNode}if(!i)throw Error(X(147,e));var n=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(m){var a=n.refs;m===null?delete a[u]:a[u]=m},t._stringRef=u,t)}if(typeof e!="string")throw Error(X(284));if(!r._owner)throw Error(X(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tl(e){var t=e._init;return t(e._payload)}function xh(e){function t(l,s){if(e){var o=l.deletions;o===null?(l.deletions=[s],l.flags|=16):o.push(s)}}function r(l,s){if(!e)return null;for(;s!==null;)t(l,s),s=s.sibling;return null}function i(l,s){for(l=new Map;s!==null;)s.key!==null?l.set(s.key,s):l.set(s.index,s),s=s.sibling;return l}function n(l,s){return l=Wt(l,s),l.index=0,l.sibling=null,l}function u(l,s,o){return l.index=o,e?(o=l.alternate,o!==null?(o=o.index,o<s?(l.flags|=2,s):o):(l.flags|=2,s)):(l.flags|=1048576,s)}function m(l){return e&&l.alternate===null&&(l.flags|=2),l}function a(l,s,o,p){return s===null||s.tag!==6?(s=Nn(o,l.mode,p),s.return=l,s):(s=n(s,o),s.return=l,s)}function c(l,s,o,p){var w=o.type;return w===dr?v(l,s,o.props.children,p,o.key):s!==null&&(s.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tt&&Tl(w)===s.type)?(p=n(s,o.props),p.ref=Gr(l,s,o),p.return=l,p):(p=ps(o.type,o.key,o.props,null,l.mode,p),p.ref=Gr(l,s,o),p.return=l,p)}function f(l,s,o,p){return s===null||s.tag!==4||s.stateNode.containerInfo!==o.containerInfo||s.stateNode.implementation!==o.implementation?(s=jn(o,l.mode,p),s.return=l,s):(s=n(s,o.children||[]),s.return=l,s)}function v(l,s,o,p,w){return s===null||s.tag!==7?(s=rr(o,l.mode,p,w),s.return=l,s):(s=n(s,o),s.return=l,s)}function d(l,s,o){if(typeof s=="string"&&s!==""||typeof s=="number")return s=Nn(""+s,l.mode,o),s.return=l,s;if(typeof s=="object"&&s!==null){switch(s.$$typeof){case Hi:return o=ps(s.type,s.key,s.props,null,l.mode,o),o.ref=Gr(l,null,s),o.return=l,o;case ur:return s=jn(s,l.mode,o),s.return=l,s;case Tt:var p=s._init;return d(l,p(s._payload),o)}if(ei(s)||$r(s))return s=rr(s,l.mode,o,null),s.return=l,s;Yi(l,s)}return null}function _(l,s,o,p){var w=s!==null?s.key:null;if(typeof o=="string"&&o!==""||typeof o=="number")return w!==null?null:a(l,s,""+o,p);if(typeof o=="object"&&o!==null){switch(o.$$typeof){case Hi:return o.key===w?c(l,s,o,p):null;case ur:return o.key===w?f(l,s,o,p):null;case Tt:return w=o._init,_(l,s,w(o._payload),p)}if(ei(o)||$r(o))return w!==null?null:v(l,s,o,p,null);Yi(l,o)}return null}function S(l,s,o,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return l=l.get(o)||null,a(s,l,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Hi:return l=l.get(p.key===null?o:p.key)||null,c(s,l,p,w);case ur:return l=l.get(p.key===null?o:p.key)||null,f(s,l,p,w);case Tt:var C=p._init;return S(l,s,o,C(p._payload),w)}if(ei(p)||$r(p))return l=l.get(o)||null,v(s,l,p,w,null);Yi(s,p)}return null}function x(l,s,o,p){for(var w=null,C=null,k=s,y=s=0,E=null;k!==null&&y<o.length;y++){k.index>y?(E=k,k=null):E=k.sibling;var T=_(l,k,o[y],p);if(T===null){k===null&&(k=E);break}e&&k&&T.alternate===null&&t(l,k),s=u(T,s,y),C===null?w=T:C.sibling=T,C=T,k=E}if(y===o.length)return r(l,k),ce&&Yt(l,y),w;if(k===null){for(;y<o.length;y++)k=d(l,o[y],p),k!==null&&(s=u(k,s,y),C===null?w=k:C.sibling=k,C=k);return ce&&Yt(l,y),w}for(k=i(l,k);y<o.length;y++)E=S(k,l,y,o[y],p),E!==null&&(e&&E.alternate!==null&&k.delete(E.key===null?y:E.key),s=u(E,s,y),C===null?w=E:C.sibling=E,C=E);return e&&k.forEach(function(P){return t(l,P)}),ce&&Yt(l,y),w}function g(l,s,o,p){var w=$r(o);if(typeof w!="function")throw Error(X(150));if(o=w.call(o),o==null)throw Error(X(151));for(var C=w=null,k=s,y=s=0,E=null,T=o.next();k!==null&&!T.done;y++,T=o.next()){k.index>y?(E=k,k=null):E=k.sibling;var P=_(l,k,T.value,p);if(P===null){k===null&&(k=E);break}e&&k&&P.alternate===null&&t(l,k),s=u(P,s,y),C===null?w=P:C.sibling=P,C=P,k=E}if(T.done)return r(l,k),ce&&Yt(l,y),w;if(k===null){for(;!T.done;y++,T=o.next())T=d(l,T.value,p),T!==null&&(s=u(T,s,y),C===null?w=T:C.sibling=T,C=T);return ce&&Yt(l,y),w}for(k=i(l,k);!T.done;y++,T=o.next())T=S(k,l,y,T.value,p),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?y:T.key),s=u(T,s,y),C===null?w=T:C.sibling=T,C=T);return e&&k.forEach(function(O){return t(l,O)}),ce&&Yt(l,y),w}function h(l,s,o,p){if(typeof o=="object"&&o!==null&&o.type===dr&&o.key===null&&(o=o.props.children),typeof o=="object"&&o!==null){switch(o.$$typeof){case Hi:e:{for(var w=o.key,C=s;C!==null;){if(C.key===w){if(w=o.type,w===dr){if(C.tag===7){r(l,C.sibling),s=n(C,o.props.children),s.return=l,l=s;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tt&&Tl(w)===C.type){r(l,C.sibling),s=n(C,o.props),s.ref=Gr(l,C,o),s.return=l,l=s;break e}r(l,C);break}else t(l,C);C=C.sibling}o.type===dr?(s=rr(o.props.children,l.mode,p,o.key),s.return=l,l=s):(p=ps(o.type,o.key,o.props,null,l.mode,p),p.ref=Gr(l,s,o),p.return=l,l=p)}return m(l);case ur:e:{for(C=o.key;s!==null;){if(s.key===C)if(s.tag===4&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){r(l,s.sibling),s=n(s,o.children||[]),s.return=l,l=s;break e}else{r(l,s);break}else t(l,s);s=s.sibling}s=jn(o,l.mode,p),s.return=l,l=s}return m(l);case Tt:return C=o._init,h(l,s,C(o._payload),p)}if(ei(o))return x(l,s,o,p);if($r(o))return g(l,s,o,p);Yi(l,o)}return typeof o=="string"&&o!==""||typeof o=="number"?(o=""+o,s!==null&&s.tag===6?(r(l,s.sibling),s=n(s,o),s.return=l,l=s):(r(l,s),s=Nn(o,l.mode,p),s.return=l,l=s),m(l)):r(l,s)}return h}var Br=xh(!0),kh=xh(!1),Ps=Xt(null),Os=null,Sr=null,ga=null;function ma(){ga=Sr=Os=null}function va(e){var t=Ps.current;le(Ps),e._currentValue=t}function wo(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Lr(e,t){Os=e,ga=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ne=!0),e.firstContext=null)}function Ze(e){var t=e._currentValue;if(ga!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(Os===null)throw Error(X(308));Sr=e,Os.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Zt=null;function ya(e){Zt===null?Zt=[e]:Zt.push(e)}function bh(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,ya(t)):(r.next=n.next,n.next=r),t.interleaved=r,kt(e,i)}function kt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var At=!1;function Sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Eh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ft(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ie&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,kt(e,r)}return n=i.interleaved,n===null?(t.next=t,ya(i)):(t.next=n.next,n.next=t),i.interleaved=t,kt(e,r)}function ls(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,na(e,r)}}function Al(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?n=u=m:u=u.next=m,r=r.next}while(r!==null);u===null?n=u=t:u=u.next=t}else n=u=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ms(e,t,r,i){var n=e.updateQueue;At=!1;var u=n.firstBaseUpdate,m=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var c=a,f=c.next;c.next=null,m===null?u=f:m.next=f,m=c;var v=e.alternate;v!==null&&(v=v.updateQueue,a=v.lastBaseUpdate,a!==m&&(a===null?v.firstBaseUpdate=f:a.next=f,v.lastBaseUpdate=c))}if(u!==null){var d=n.baseState;m=0,v=f=c=null,a=u;do{var _=a.lane,S=a.eventTime;if((i&_)===_){v!==null&&(v=v.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,g=a;switch(_=t,S=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(S,d,_);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,_=typeof x=="function"?x.call(S,d,_):x,_==null)break e;d=fe({},d,_);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,_=n.effects,_===null?n.effects=[a]:_.push(a))}else S={eventTime:S,lane:_,tag:a.tag,payload:a.payload,callback:a.callback,next:null},v===null?(f=v=S,c=d):v=v.next=S,m|=_;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;_=a,a=_.next,_.next=null,n.lastBaseUpdate=_,n.shared.pending=null}}while(!0);if(v===null&&(c=d),n.baseState=c,n.firstBaseUpdate=f,n.lastBaseUpdate=v,t=n.shared.interleaved,t!==null){n=t;do m|=n.lane,n=n.next;while(n!==t)}else u===null&&(n.shared.lanes=0);or|=m,e.lanes=m,e.memoizedState=d}}function Bl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(X(191,n));n.call(i)}}}var Mi={},pt=Xt(Mi),bi=Xt(Mi),Ei=Xt(Mi);function er(e){if(e===Mi)throw Error(X(174));return e}function wa(e,t){switch(ne(Ei,t),ne(bi,e),ne(pt,Mi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:eo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=eo(t,e)}le(pt),ne(pt,t)}function Pr(){le(pt),le(bi),le(Ei)}function Lh(e){er(Ei.current);var t=er(pt.current),r=eo(t,e.type);t!==r&&(ne(bi,e),ne(pt,r))}function Ca(e){bi.current===e&&(le(pt),le(bi))}var ue=Xt(0);function Is(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var An=[];function xa(){for(var e=0;e<An.length;e++)An[e]._workInProgressVersionPrimary=null;An.length=0}var cs=Et.ReactCurrentDispatcher,Bn=Et.ReactCurrentBatchConfig,nr=0,de=null,Se=null,Ce=null,Ns=!1,ci=!1,Li=0,jf=0;function Le(){throw Error(X(321))}function ka(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lt(e[r],t[r]))return!1;return!0}function ba(e,t,r,i,n,u){if(nr=u,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=e===null||e.memoizedState===null?Uf:Wf,e=r(i,n),ci){u=0;do{if(ci=!1,Li=0,25<=u)throw Error(X(301));u+=1,Ce=Se=null,t.updateQueue=null,cs.current=$f,e=r(i,n)}while(ci)}if(cs.current=js,t=Se!==null&&Se.next!==null,nr=0,Ce=Se=de=null,Ns=!1,t)throw Error(X(300));return e}function Ea(){var e=Li!==0;return Li=0,e}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?de.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function et(){if(Se===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Ce===null?de.memoizedState:Ce.next;if(t!==null)Ce=t,Se=e;else{if(e===null)throw Error(X(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ce===null?de.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function Ri(e,t){return typeof t=="function"?t(e):t}function Pn(e){var t=et(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var i=Se,n=i.baseQueue,u=r.pending;if(u!==null){if(n!==null){var m=n.next;n.next=u.next,u.next=m}i.baseQueue=n=u,r.pending=null}if(n!==null){u=n.next,i=i.baseState;var a=m=null,c=null,f=u;do{var v=f.lane;if((nr&v)===v)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:e(i,f.action);else{var d={lane:v,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=d,m=i):c=c.next=d,de.lanes|=v,or|=v}f=f.next}while(f!==null&&f!==u);c===null?m=i:c.next=a,lt(i,t.memoizedState)||(Ne=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=c,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do u=n.lane,de.lanes|=u,or|=u,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function On(e){var t=et(),r=t.queue;if(r===null)throw Error(X(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,u=t.memoizedState;if(n!==null){r.pending=null;var m=n=n.next;do u=e(u,m.action),m=m.next;while(m!==n);lt(u,t.memoizedState)||(Ne=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,i]}function Rh(){}function Dh(e,t){var r=de,i=et(),n=t(),u=!lt(i.memoizedState,n);if(u&&(i.memoizedState=n,Ne=!0),i=i.queue,La(Bh.bind(null,r,i,e),[e]),i.getSnapshot!==t||u||Ce!==null&&Ce.memoizedState.tag&1){if(r.flags|=2048,Di(9,Ah.bind(null,r,i,n,t),void 0,null),xe===null)throw Error(X(349));nr&30||Th(r,t,n)}return n}function Th(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ah(e,t,r,i){t.value=r,t.getSnapshot=i,Ph(t)&&Oh(e)}function Bh(e,t,r){return r(function(){Ph(t)&&Oh(e)})}function Ph(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lt(e,r)}catch{return!0}}function Oh(e){var t=kt(e,1);t!==null&&at(t,e,1,-1)}function Pl(e){var t=ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},t.queue=e,e=e.dispatch=zf.bind(null,de,e),[t.memoizedState,e]}function Di(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Mh(){return et().memoizedState}function hs(e,t,r,i){var n=ut();de.flags|=e,n.memoizedState=Di(1|t,r,void 0,i===void 0?null:i)}function Qs(e,t,r,i){var n=et();i=i===void 0?null:i;var u=void 0;if(Se!==null){var m=Se.memoizedState;if(u=m.destroy,i!==null&&ka(i,m.deps)){n.memoizedState=Di(t,r,u,i);return}}de.flags|=e,n.memoizedState=Di(1|t,r,u,i)}function Ol(e,t){return hs(8390656,8,e,t)}function La(e,t){return Qs(2048,8,e,t)}function Ih(e,t){return Qs(4,2,e,t)}function Nh(e,t){return Qs(4,4,e,t)}function jh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Hh(e,t,r){return r=r!=null?r.concat([e]):null,Qs(4,4,jh.bind(null,t,e),r)}function Ra(){}function Fh(e,t){var r=et();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ka(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function zh(e,t){var r=et();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ka(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Uh(e,t,r){return nr&21?(lt(r,t)||(r=qc(),de.lanes|=r,or|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ne=!0),e.memoizedState=r)}function Hf(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var i=Bn.transition;Bn.transition={};try{e(!1),t()}finally{se=r,Bn.transition=i}}function Wh(){return et().memoizedState}function Ff(e,t,r){var i=Ut(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},$h(e))Vh(t,r);else if(r=bh(e,t,r,i),r!==null){var n=Be();at(r,e,i,n),Kh(r,t,i)}}function zf(e,t,r){var i=Ut(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if($h(e))Vh(t,n);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,a=u(m,r);if(n.hasEagerState=!0,n.eagerState=a,lt(a,m)){var c=t.interleaved;c===null?(n.next=n,ya(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=bh(e,t,n,i),r!==null&&(n=Be(),at(r,e,i,n),Kh(r,t,i))}}function $h(e){var t=e.alternate;return e===de||t!==null&&t===de}function Vh(e,t){ci=Ns=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Kh(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,na(e,r)}}var js={readContext:Ze,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},Uf={readContext:Ze,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:Ze,useEffect:Ol,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,hs(4194308,4,jh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var r=ut();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ut();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ff.bind(null,de,e),[i.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:Pl,useDebugValue:Ra,useDeferredValue:function(e){return ut().memoizedState=e},useTransition:function(){var e=Pl(!1),t=e[0];return e=Hf.bind(null,e[1]),ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=de,n=ut();if(ce){if(r===void 0)throw Error(X(407));r=r()}else{if(r=t(),xe===null)throw Error(X(349));nr&30||Th(i,t,r)}n.memoizedState=r;var u={value:r,getSnapshot:t};return n.queue=u,Ol(Bh.bind(null,i,u,e),[e]),i.flags|=2048,Di(9,Ah.bind(null,i,u,r,t),void 0,null),r},useId:function(){var e=ut(),t=xe.identifierPrefix;if(ce){var r=St,i=yt;r=(i&~(1<<32-ot(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Li++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wf={readContext:Ze,useCallback:Fh,useContext:Ze,useEffect:La,useImperativeHandle:Hh,useInsertionEffect:Ih,useLayoutEffect:Nh,useMemo:zh,useReducer:Pn,useRef:Mh,useState:function(){return Pn(Ri)},useDebugValue:Ra,useDeferredValue:function(e){var t=et();return Uh(t,Se.memoizedState,e)},useTransition:function(){var e=Pn(Ri)[0],t=et().memoizedState;return[e,t]},useMutableSource:Rh,useSyncExternalStore:Dh,useId:Wh,unstable_isNewReconciler:!1},$f={readContext:Ze,useCallback:Fh,useContext:Ze,useEffect:La,useImperativeHandle:Hh,useInsertionEffect:Ih,useLayoutEffect:Nh,useMemo:zh,useReducer:On,useRef:Mh,useState:function(){return On(Ri)},useDebugValue:Ra,useDeferredValue:function(e){var t=et();return Se===null?t.memoizedState=e:Uh(t,Se.memoizedState,e)},useTransition:function(){var e=On(Ri)[0],t=et().memoizedState;return[e,t]},useMutableSource:Rh,useSyncExternalStore:Dh,useId:Wh,unstable_isNewReconciler:!1};function rt(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Co(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:fe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Js={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Be(),n=Ut(e),u=wt(i,n);u.payload=t,r!=null&&(u.callback=r),t=Ft(e,u,n),t!==null&&(at(t,e,n,i),ls(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Be(),n=Ut(e),u=wt(i,n);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=Ft(e,u,n),t!==null&&(at(t,e,n,i),ls(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),i=Ut(e),n=wt(r,i);n.tag=2,t!=null&&(n.callback=t),t=Ft(e,n,i),t!==null&&(at(t,e,i,r),ls(t,e,i))}};function Ml(e,t,r,i,n,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,m):t.prototype&&t.prototype.isPureReactComponent?!wi(r,i)||!wi(n,u):!0}function qh(e,t,r){var i=!1,n=Kt,u=t.contextType;return typeof u=="object"&&u!==null?u=Ze(u):(n=He(t)?ir:Te.current,i=t.contextTypes,u=(i=i!=null)?Tr(e,n):Kt),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Js,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),t}function Il(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Js.enqueueReplaceState(t,t.state,null)}function xo(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Sa(e);var u=t.contextType;typeof u=="object"&&u!==null?n.context=Ze(u):(u=He(t)?ir:Te.current,n.context=Tr(e,u)),n.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(Co(e,t,u,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Js.enqueueReplaceState(n,n.state,null),Ms(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var r="",i=t;do r+=md(i),i=i.return;while(i);var n=r}catch(u){n=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:n,digest:null}}function Mn(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ko(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Vf=typeof WeakMap=="function"?WeakMap:Map;function Xh(e,t,r){r=wt(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Fs||(Fs=!0,Oo=i),ko(e,t)},r}function Gh(e,t,r){r=wt(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){ko(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){ko(e,t),typeof i!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function Nl(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Vf;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=np.bind(null,e,t,r),t.then(e,e))}function jl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hl(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wt(-1,1),t.tag=2,Ft(r,t,1))),r.lanes|=1),e)}var Kf=Et.ReactCurrentOwner,Ne=!1;function Ae(e,t,r,i){t.child=e===null?kh(t,null,r,i):Br(t,e.child,r,i)}function Fl(e,t,r,i,n){r=r.render;var u=t.ref;return Lr(t,n),i=ba(e,t,r,i,u,n),r=Ea(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,bt(e,t,n)):(ce&&r&&fa(t),t.flags|=1,Ae(e,t,i,n),t.child)}function zl(e,t,r,i,n){if(e===null){var u=r.type;return typeof u=="function"&&!Ia(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,Yh(e,t,u,i,n)):(e=ps(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&n)){var m=u.memoizedProps;if(r=r.compare,r=r!==null?r:wi,r(m,i)&&e.ref===t.ref)return bt(e,t,n)}return t.flags|=1,e=Wt(u,i),e.ref=t.ref,e.return=t,t.child=e}function Yh(e,t,r,i,n){if(e!==null){var u=e.memoizedProps;if(wi(u,i)&&e.ref===t.ref)if(Ne=!1,t.pendingProps=i=u,(e.lanes&n)!==0)e.flags&131072&&(Ne=!0);else return t.lanes=e.lanes,bt(e,t,n)}return bo(e,t,r,i,n)}function Qh(e,t,r){var i=t.pendingProps,n=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Cr,ze),ze|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(Cr,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:r,ne(Cr,ze),ze|=i}else u!==null?(i=u.baseLanes|r,t.memoizedState=null):i=r,ne(Cr,ze),ze|=i;return Ae(e,t,n,r),t.child}function Jh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function bo(e,t,r,i,n){var u=He(r)?ir:Te.current;return u=Tr(t,u),Lr(t,n),r=ba(e,t,r,i,u,n),i=Ea(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,bt(e,t,n)):(ce&&i&&fa(t),t.flags|=1,Ae(e,t,r,n),t.child)}function Ul(e,t,r,i,n){if(He(r)){var u=!0;Ts(t)}else u=!1;if(Lr(t,n),t.stateNode===null)us(e,t),qh(t,r,i),xo(t,r,i,n),i=!0;else if(e===null){var m=t.stateNode,a=t.memoizedProps;m.props=a;var c=m.context,f=r.contextType;typeof f=="object"&&f!==null?f=Ze(f):(f=He(r)?ir:Te.current,f=Tr(t,f));var v=r.getDerivedStateFromProps,d=typeof v=="function"||typeof m.getSnapshotBeforeUpdate=="function";d||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(a!==i||c!==f)&&Il(t,m,i,f),At=!1;var _=t.memoizedState;m.state=_,Ms(t,i,m,n),c=t.memoizedState,a!==i||_!==c||je.current||At?(typeof v=="function"&&(Co(t,r,v,i),c=t.memoizedState),(a=At||Ml(t,r,a,i,_,c,f))?(d||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),m.props=i,m.state=c,m.context=f,i=a):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,Eh(e,t),a=t.memoizedProps,f=t.type===t.elementType?a:rt(t.type,a),m.props=f,d=t.pendingProps,_=m.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ze(c):(c=He(r)?ir:Te.current,c=Tr(t,c));var S=r.getDerivedStateFromProps;(v=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(a!==d||_!==c)&&Il(t,m,i,c),At=!1,_=t.memoizedState,m.state=_,Ms(t,i,m,n);var x=t.memoizedState;a!==d||_!==x||je.current||At?(typeof S=="function"&&(Co(t,r,S,i),x=t.memoizedState),(f=At||Ml(t,r,f,i,_,x,c)||!1)?(v||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,x,c),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,x,c)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=x),m.props=i,m.state=x,m.context=c,i=f):(typeof m.componentDidUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),i=!1)}return Eo(e,t,r,i,u,n)}function Eo(e,t,r,i,n,u){Jh(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return n&&Ll(t,r,!1),bt(e,t,u);i=t.stateNode,Kf.current=t;var a=m&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=Br(t,e.child,null,u),t.child=Br(t,null,a,u)):Ae(e,t,a,u),t.memoizedState=i.state,n&&Ll(t,r,!0),t.child}function Zh(e){var t=e.stateNode;t.pendingContext?El(e,t.pendingContext,t.pendingContext!==t.context):t.context&&El(e,t.context,!1),wa(e,t.containerInfo)}function Wl(e,t,r,i,n){return Ar(),_a(n),t.flags|=256,Ae(e,t,r,i),t.child}var Lo={dehydrated:null,treeContext:null,retryLane:0};function Ro(e){return{baseLanes:e,cachePool:null,transitions:null}}function eu(e,t,r){var i=t.pendingProps,n=ue.current,u=!1,m=(t.flags&128)!==0,a;if((a=m)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ne(ue,n&1),e===null)return So(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=i.children,e=i.fallback,u?(i=t.mode,u=t.child,m={mode:"hidden",children:m},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=m):u=tn(m,i,0,null),e=rr(e,i,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Ro(r),t.memoizedState=Lo,e):Da(t,m));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return qf(e,t,m,i,a,n,r);if(u){u=i.fallback,m=t.mode,n=e.child,a=n.sibling;var c={mode:"hidden",children:i.children};return!(m&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=Wt(n,c),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?u=Wt(a,u):(u=rr(u,m,r,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,m=e.child.memoizedState,m=m===null?Ro(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},u.memoizedState=m,u.childLanes=e.childLanes&~r,t.memoizedState=Lo,i}return u=e.child,e=u.sibling,i=Wt(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Da(e,t){return t=tn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qi(e,t,r,i){return i!==null&&_a(i),Br(t,e.child,null,r),e=Da(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qf(e,t,r,i,n,u,m){if(r)return t.flags&256?(t.flags&=-257,i=Mn(Error(X(422))),Qi(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,n=t.mode,i=tn({mode:"visible",children:i.children},n,0,null),u=rr(u,n,m,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&Br(t,e.child,null,m),t.child.memoizedState=Ro(m),t.memoizedState=Lo,u);if(!(t.mode&1))return Qi(e,t,m,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,u=Error(X(419)),i=Mn(u,i,void 0),Qi(e,t,m,i)}if(a=(m&e.childLanes)!==0,Ne||a){if(i=xe,i!==null){switch(m&-m){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|m)?0:n,n!==0&&n!==u.retryLane&&(u.retryLane=n,kt(e,n),at(i,e,n,-1))}return Ma(),i=Mn(Error(X(421))),Qi(e,t,m,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=op.bind(null,e),n._reactRetry=t,null):(e=u.treeContext,Ue=Ht(n.nextSibling),We=t,ce=!0,nt=null,e!==null&&(Xe[Ge++]=yt,Xe[Ge++]=St,Xe[Ge++]=sr,yt=e.id,St=e.overflow,sr=t),t=Da(t,i.children),t.flags|=4096,t)}function $l(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),wo(e.return,t,r)}function In(e,t,r,i,n){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=r,u.tailMode=n)}function tu(e,t,r){var i=t.pendingProps,n=i.revealOrder,u=i.tail;if(Ae(e,t,i.children,r),i=ue.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$l(e,r,t);else if(e.tag===19)$l(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ne(ue,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Is(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),In(t,!1,n,r,u);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Is(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}In(t,!0,r,null,u);break;case"together":In(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function us(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function bt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,r=Wt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xf(e,t,r){switch(t.tag){case 3:Zh(t),Ar();break;case 5:Lh(t);break;case 1:He(t.type)&&Ts(t);break;case 4:wa(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;ne(Ps,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ne(ue,ue.current&1),t.flags|=128,null):r&t.child.childLanes?eu(e,t,r):(ne(ue,ue.current&1),e=bt(e,t,r),e!==null?e.sibling:null);ne(ue,ue.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return tu(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ne(ue,ue.current),i)break;return null;case 22:case 23:return t.lanes=0,Qh(e,t,r)}return bt(e,t,r)}var ru,Do,iu,su;ru=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Do=function(){};iu=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,er(pt.current);var u=null;switch(r){case"input":n=Yn(e,n),i=Yn(e,i),u=[];break;case"select":n=fe({},n,{value:void 0}),i=fe({},i,{value:void 0}),u=[];break;case"textarea":n=Zn(e,n),i=Zn(e,i),u=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=Rs)}to(r,i);var m;r=null;for(f in n)if(!i.hasOwnProperty(f)&&n.hasOwnProperty(f)&&n[f]!=null)if(f==="style"){var a=n[f];for(m in a)a.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(pi.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in i){var c=i[f];if(a=n!=null?n[f]:void 0,i.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(m in a)!a.hasOwnProperty(m)||c&&c.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in c)c.hasOwnProperty(m)&&a[m]!==c[m]&&(r||(r={}),r[m]=c[m])}else r||(u||(u=[]),u.push(f,r)),r=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(u=u||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(u=u||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(pi.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&ae("scroll",e),u||a===c||(u=[])):(u=u||[]).push(f,c))}r&&(u=u||[]).push("style",r);var f=u;(t.updateQueue=f)&&(t.flags|=4)}};su=function(e,t,r,i){r!==i&&(t.flags|=4)};function Yr(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Gf(e,t,r){var i=t.pendingProps;switch(pa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return He(t.type)&&Ds(),Re(t),null;case 3:return i=t.stateNode,Pr(),le(je),le(Te),xa(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nt!==null&&(No(nt),nt=null))),Do(e,t),Re(t),null;case 5:Ca(t);var n=er(Ei.current);if(r=t.type,e!==null&&t.stateNode!=null)iu(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(X(166));return Re(t),null}if(e=er(pt.current),Gi(t)){i=t.stateNode,r=t.type;var u=t.memoizedProps;switch(i[dt]=t,i[ki]=u,e=(t.mode&1)!==0,r){case"dialog":ae("cancel",i),ae("close",i);break;case"iframe":case"object":case"embed":ae("load",i);break;case"video":case"audio":for(n=0;n<ri.length;n++)ae(ri[n],i);break;case"source":ae("error",i);break;case"img":case"image":case"link":ae("error",i),ae("load",i);break;case"details":ae("toggle",i);break;case"input":Za(i,u),ae("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},ae("invalid",i);break;case"textarea":tl(i,u),ae("invalid",i)}to(r,u),n=null;for(var m in u)if(u.hasOwnProperty(m)){var a=u[m];m==="children"?typeof a=="string"?i.textContent!==a&&(u.suppressHydrationWarning!==!0&&Xi(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(u.suppressHydrationWarning!==!0&&Xi(i.textContent,a,e),n=["children",""+a]):pi.hasOwnProperty(m)&&a!=null&&m==="onScroll"&&ae("scroll",i)}switch(r){case"input":Fi(i),el(i,u,!0);break;case"textarea":Fi(i),rl(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=Rs)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Bc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(r,{is:i.is}):(e=m.createElement(r),r==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,r),e[dt]=t,e[ki]=i,ru(e,t,!1,!1),t.stateNode=e;e:{switch(m=ro(r,i),r){case"dialog":ae("cancel",e),ae("close",e),n=i;break;case"iframe":case"object":case"embed":ae("load",e),n=i;break;case"video":case"audio":for(n=0;n<ri.length;n++)ae(ri[n],e);n=i;break;case"source":ae("error",e),n=i;break;case"img":case"image":case"link":ae("error",e),ae("load",e),n=i;break;case"details":ae("toggle",e),n=i;break;case"input":Za(e,i),n=Yn(e,i),ae("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=fe({},i,{value:void 0}),ae("invalid",e);break;case"textarea":tl(e,i),n=Zn(e,i),ae("invalid",e);break;default:n=i}to(r,n),a=n;for(u in a)if(a.hasOwnProperty(u)){var c=a[u];u==="style"?Mc(e,c):u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pc(e,c)):u==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_i(e,c):typeof c=="number"&&_i(e,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pi.hasOwnProperty(u)?c!=null&&u==="onScroll"&&ae("scroll",e):c!=null&&Zo(e,u,c,m))}switch(r){case"input":Fi(e),el(e,i,!1);break;case"textarea":Fi(e),rl(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Vt(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?xr(e,!!i.multiple,u,!1):i.defaultValue!=null&&xr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=Rs)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)su(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(X(166));if(r=er(Ei.current),er(pt.current),Gi(t)){if(i=t.stateNode,r=t.memoizedProps,i[dt]=t,(u=i.nodeValue!==r)&&(e=We,e!==null))switch(e.tag){case 3:Xi(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xi(i.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[dt]=t,t.stateNode=i}return Re(t),null;case 13:if(le(ue),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ce&&Ue!==null&&t.mode&1&&!(t.flags&128))Ch(),Ar(),t.flags|=98560,u=!1;else if(u=Gi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(X(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(X(317));u[dt]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),u=!1}else nt!==null&&(No(nt),nt=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ue.current&1?we===0&&(we=3):Ma())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return Pr(),Do(e,t),e===null&&Ci(t.stateNode.containerInfo),Re(t),null;case 10:return va(t.type._context),Re(t),null;case 17:return He(t.type)&&Ds(),Re(t),null;case 19:if(le(ue),u=t.memoizedState,u===null)return Re(t),null;if(i=(t.flags&128)!==0,m=u.rendering,m===null)if(i)Yr(u,!1);else{if(we!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=Is(e),m!==null){for(t.flags|=128,Yr(u,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)u=r,e=i,u.flags&=14680066,m=u.alternate,m===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,e=m.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ne(ue,ue.current&1|2),t.child}e=e.sibling}u.tail!==null&&me()>Mr&&(t.flags|=128,i=!0,Yr(u,!1),t.lanes=4194304)}else{if(!i)if(e=Is(m),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!ce)return Re(t),null}else 2*me()-u.renderingStartTime>Mr&&r!==1073741824&&(t.flags|=128,i=!0,Yr(u,!1),t.lanes=4194304);u.isBackwards?(m.sibling=t.child,t.child=m):(r=u.last,r!==null?r.sibling=m:t.child=m,u.last=m)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=me(),t.sibling=null,r=ue.current,ne(ue,i?r&1|2:r&1),t):(Re(t),null);case 22:case 23:return Oa(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ze&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Yf(e,t){switch(pa(t),t.tag){case 1:return He(t.type)&&Ds(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Pr(),le(je),le(Te),xa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ca(t),null;case 13:if(le(ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return le(ue),null;case 4:return Pr(),null;case 10:return va(t.type._context),null;case 22:case 23:return Oa(),null;case 24:return null;default:return null}}var Ji=!1,De=!1,Qf=typeof WeakSet=="function"?WeakSet:Set,J=null;function wr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ge(e,t,i)}else r.current=null}function To(e,t,r){try{r()}catch(i){ge(e,t,i)}}var Vl=!1;function Jf(e,t){if(fo=bs,e=ch(),da(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var m=0,a=-1,c=-1,f=0,v=0,d=e,_=null;t:for(;;){for(var S;d!==r||n!==0&&d.nodeType!==3||(a=m+n),d!==u||i!==0&&d.nodeType!==3||(c=m+i),d.nodeType===3&&(m+=d.nodeValue.length),(S=d.firstChild)!==null;)_=d,d=S;for(;;){if(d===e)break t;if(_===r&&++f===n&&(a=m),_===u&&++v===i&&(c=m),(S=d.nextSibling)!==null)break;d=_,_=d.parentNode}d=S}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(po={focusedElem:e,selectionRange:r},bs=!1,J=t;J!==null;)if(t=J,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,J=e;else for(;J!==null;){t=J;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,h=x.memoizedState,l=t.stateNode,s=l.getSnapshotBeforeUpdate(t.elementType===t.type?g:rt(t.type,g),h);l.__reactInternalSnapshotBeforeUpdate=s}break;case 3:var o=t.stateNode.containerInfo;o.nodeType===1?o.textContent="":o.nodeType===9&&o.documentElement&&o.removeChild(o.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(p){ge(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,J=e;break}J=t.return}return x=Vl,Vl=!1,x}function hi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var u=n.destroy;n.destroy=void 0,u!==void 0&&To(t,r,u)}n=n.next}while(n!==i)}}function Zs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Ao(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function nu(e){var t=e.alternate;t!==null&&(e.alternate=null,nu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dt],delete t[ki],delete t[mo],delete t[Of],delete t[Mf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return e.tag===5||e.tag===3||e.tag===4}function Kl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Bo(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Rs));else if(i!==4&&(e=e.child,e!==null))for(Bo(e,t,r),e=e.sibling;e!==null;)Bo(e,t,r),e=e.sibling}function Po(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Po(e,t,r),e=e.sibling;e!==null;)Po(e,t,r),e=e.sibling}var ke=null,it=!1;function Dt(e,t,r){for(r=r.child;r!==null;)au(e,t,r),r=r.sibling}function au(e,t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Vs,r)}catch{}switch(r.tag){case 5:De||wr(r,t);case 6:var i=ke,n=it;ke=null,Dt(e,t,r),ke=i,it=n,ke!==null&&(it?(e=ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ke.removeChild(r.stateNode));break;case 18:ke!==null&&(it?(e=ke,r=r.stateNode,e.nodeType===8?Dn(e.parentNode,r):e.nodeType===1&&Dn(e,r),yi(e)):Dn(ke,r.stateNode));break;case 4:i=ke,n=it,ke=r.stateNode.containerInfo,it=!0,Dt(e,t,r),ke=i,it=n;break;case 0:case 11:case 14:case 15:if(!De&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var u=n,m=u.destroy;u=u.tag,m!==void 0&&(u&2||u&4)&&To(r,t,m),n=n.next}while(n!==i)}Dt(e,t,r);break;case 1:if(!De&&(wr(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){ge(r,t,a)}Dt(e,t,r);break;case 21:Dt(e,t,r);break;case 22:r.mode&1?(De=(i=De)||r.memoizedState!==null,Dt(e,t,r),De=i):Dt(e,t,r);break;default:Dt(e,t,r)}}function ql(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Qf),t.forEach(function(i){var n=ap.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function tt(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var u=e,m=t,a=m;e:for(;a!==null;){switch(a.tag){case 5:ke=a.stateNode,it=!1;break e;case 3:ke=a.stateNode.containerInfo,it=!0;break e;case 4:ke=a.stateNode.containerInfo,it=!0;break e}a=a.return}if(ke===null)throw Error(X(160));au(u,m,n),ke=null,it=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(f){ge(n,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lu(t,e),t=t.sibling}function lu(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tt(t,e),ht(e),i&4){try{hi(3,e,e.return),Zs(3,e)}catch(g){ge(e,e.return,g)}try{hi(5,e,e.return)}catch(g){ge(e,e.return,g)}}break;case 1:tt(t,e),ht(e),i&512&&r!==null&&wr(r,r.return);break;case 5:if(tt(t,e),ht(e),i&512&&r!==null&&wr(r,r.return),e.flags&32){var n=e.stateNode;try{_i(n,"")}catch(g){ge(e,e.return,g)}}if(i&4&&(n=e.stateNode,n!=null)){var u=e.memoizedProps,m=r!==null?r.memoizedProps:u,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&u.type==="radio"&&u.name!=null&&Tc(n,u),ro(a,m);var f=ro(a,u);for(m=0;m<c.length;m+=2){var v=c[m],d=c[m+1];v==="style"?Mc(n,d):v==="dangerouslySetInnerHTML"?Pc(n,d):v==="children"?_i(n,d):Zo(n,v,d,f)}switch(a){case"input":Qn(n,u);break;case"textarea":Ac(n,u);break;case"select":var _=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!u.multiple;var S=u.value;S!=null?xr(n,!!u.multiple,S,!1):_!==!!u.multiple&&(u.defaultValue!=null?xr(n,!!u.multiple,u.defaultValue,!0):xr(n,!!u.multiple,u.multiple?[]:"",!1))}n[ki]=u}catch(g){ge(e,e.return,g)}}break;case 6:if(tt(t,e),ht(e),i&4){if(e.stateNode===null)throw Error(X(162));n=e.stateNode,u=e.memoizedProps;try{n.nodeValue=u}catch(g){ge(e,e.return,g)}}break;case 3:if(tt(t,e),ht(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{yi(t.containerInfo)}catch(g){ge(e,e.return,g)}break;case 4:tt(t,e),ht(e);break;case 13:tt(t,e),ht(e),n=e.child,n.flags&8192&&(u=n.memoizedState!==null,n.stateNode.isHidden=u,!u||n.alternate!==null&&n.alternate.memoizedState!==null||(Ba=me())),i&4&&ql(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(De=(f=De)||v,tt(t,e),De=f):tt(t,e),ht(e),i&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!v&&e.mode&1)for(J=e,v=e.child;v!==null;){for(d=J=v;J!==null;){switch(_=J,S=_.child,_.tag){case 0:case 11:case 14:case 15:hi(4,_,_.return);break;case 1:wr(_,_.return);var x=_.stateNode;if(typeof x.componentWillUnmount=="function"){i=_,r=_.return;try{t=i,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){ge(i,r,g)}}break;case 5:wr(_,_.return);break;case 22:if(_.memoizedState!==null){Gl(d);continue}}S!==null?(S.return=_,J=S):Gl(d)}v=v.sibling}e:for(v=null,d=e;;){if(d.tag===5){if(v===null){v=d;try{n=d.stateNode,f?(u=n.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(a=d.stateNode,c=d.memoizedProps.style,m=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Oc("display",m))}catch(g){ge(e,e.return,g)}}}else if(d.tag===6){if(v===null)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(g){ge(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;v===d&&(v=null),d=d.return}v===d&&(v=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tt(t,e),ht(e),i&4&&ql(e);break;case 21:break;default:tt(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ou(r)){var i=r;break e}r=r.return}throw Error(X(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(_i(n,""),i.flags&=-33);var u=Kl(e);Po(e,u,n);break;case 3:case 4:var m=i.stateNode.containerInfo,a=Kl(e);Bo(e,a,m);break;default:throw Error(X(161))}}catch(c){ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zf(e,t,r){J=e,cu(e)}function cu(e,t,r){for(var i=(e.mode&1)!==0;J!==null;){var n=J,u=n.child;if(n.tag===22&&i){var m=n.memoizedState!==null||Ji;if(!m){var a=n.alternate,c=a!==null&&a.memoizedState!==null||De;a=Ji;var f=De;if(Ji=m,(De=c)&&!f)for(J=n;J!==null;)m=J,c=m.child,m.tag===22&&m.memoizedState!==null?Yl(n):c!==null?(c.return=m,J=c):Yl(n);for(;u!==null;)J=u,cu(u),u=u.sibling;J=n,Ji=a,De=f}Xl(e)}else n.subtreeFlags&8772&&u!==null?(u.return=n,J=u):Xl(e)}}function Xl(e){for(;J!==null;){var t=J;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||Zs(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!De)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:rt(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Bl(t,u,i);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Bl(t,m,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var v=f.memoizedState;if(v!==null){var d=v.dehydrated;d!==null&&yi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}De||t.flags&512&&Ao(t)}catch(_){ge(t,t.return,_)}}if(t===e){J=null;break}if(r=t.sibling,r!==null){r.return=t.return,J=r;break}J=t.return}}function Gl(e){for(;J!==null;){var t=J;if(t===e){J=null;break}var r=t.sibling;if(r!==null){r.return=t.return,J=r;break}J=t.return}}function Yl(e){for(;J!==null;){var t=J;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Zs(4,t)}catch(c){ge(t,r,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(c){ge(t,n,c)}}var u=t.return;try{Ao(t)}catch(c){ge(t,u,c)}break;case 5:var m=t.return;try{Ao(t)}catch(c){ge(t,m,c)}}}catch(c){ge(t,t.return,c)}if(t===e){J=null;break}var a=t.sibling;if(a!==null){a.return=t.return,J=a;break}J=t.return}}var ep=Math.ceil,Hs=Et.ReactCurrentDispatcher,Ta=Et.ReactCurrentOwner,Je=Et.ReactCurrentBatchConfig,ie=0,xe=null,ve=null,be=0,ze=0,Cr=Xt(0),we=0,Ti=null,or=0,en=0,Aa=0,ui=null,Ie=null,Ba=0,Mr=1/0,mt=null,Fs=!1,Oo=null,zt=null,Zi=!1,Mt=null,zs=0,di=0,Mo=null,ds=-1,fs=0;function Be(){return ie&6?me():ds!==-1?ds:ds=me()}function Ut(e){return e.mode&1?ie&2&&be!==0?be&-be:Nf.transition!==null?(fs===0&&(fs=qc()),fs):(e=se,e!==0||(e=window.event,e=e===void 0?16:eh(e.type)),e):1}function at(e,t,r,i){if(50<di)throw di=0,Mo=null,Error(X(185));Bi(e,r,i),(!(ie&2)||e!==xe)&&(e===xe&&(!(ie&2)&&(en|=r),we===4&&Pt(e,be)),Fe(e,i),r===1&&ie===0&&!(t.mode&1)&&(Mr=me()+500,Ys&&Gt()))}function Fe(e,t){var r=e.callbackNode;Id(e,t);var i=ks(e,e===xe?be:0);if(i===0)r!==null&&nl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&nl(r),t===1)e.tag===0?If(Ql.bind(null,e)):yh(Ql.bind(null,e)),Bf(function(){!(ie&6)&&Gt()}),r=null;else{switch(Xc(i)){case 1:r=sa;break;case 4:r=Vc;break;case 16:r=xs;break;case 536870912:r=Kc;break;default:r=xs}r=mu(r,hu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hu(e,t){if(ds=-1,fs=0,ie&6)throw Error(X(327));var r=e.callbackNode;if(Rr()&&e.callbackNode!==r)return null;var i=ks(e,e===xe?be:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Us(e,i);else{t=i;var n=ie;ie|=2;var u=du();(xe!==e||be!==t)&&(mt=null,Mr=me()+500,tr(e,t));do try{ip();break}catch(a){uu(e,a)}while(!0);ma(),Hs.current=u,ie=n,ve!==null?t=0:(xe=null,be=0,t=we)}if(t!==0){if(t===2&&(n=ao(e),n!==0&&(i=n,t=Io(e,n))),t===1)throw r=Ti,tr(e,0),Pt(e,i),Fe(e,me()),r;if(t===6)Pt(e,i);else{if(n=e.current.alternate,!(i&30)&&!tp(n)&&(t=Us(e,i),t===2&&(u=ao(e),u!==0&&(i=u,t=Io(e,u))),t===1))throw r=Ti,tr(e,0),Pt(e,i),Fe(e,me()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(X(345));case 2:Qt(e,Ie,mt);break;case 3:if(Pt(e,i),(i&130023424)===i&&(t=Ba+500-me(),10<t)){if(ks(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Be(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=go(Qt.bind(null,e,Ie,mt),t);break}Qt(e,Ie,mt);break;case 4:if(Pt(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var m=31-ot(i);u=1<<m,m=t[m],m>n&&(n=m),i&=~u}if(i=n,i=me()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ep(i/1960))-i,10<i){e.timeoutHandle=go(Qt.bind(null,e,Ie,mt),i);break}Qt(e,Ie,mt);break;case 5:Qt(e,Ie,mt);break;default:throw Error(X(329))}}}return Fe(e,me()),e.callbackNode===r?hu.bind(null,e):null}function Io(e,t){var r=ui;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=Us(e,t),e!==2&&(t=Ie,Ie=r,t!==null&&No(t)),e}function No(e){Ie===null?Ie=e:Ie.push.apply(Ie,e)}function tp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],u=n.getSnapshot;n=n.value;try{if(!lt(u(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Pt(e,t){for(t&=~Aa,t&=~en,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),i=1<<r;e[r]=-1,t&=~i}}function Ql(e){if(ie&6)throw Error(X(327));Rr();var t=ks(e,0);if(!(t&1))return Fe(e,me()),null;var r=Us(e,t);if(e.tag!==0&&r===2){var i=ao(e);i!==0&&(t=i,r=Io(e,i))}if(r===1)throw r=Ti,tr(e,0),Pt(e,t),Fe(e,me()),r;if(r===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qt(e,Ie,mt),Fe(e,me()),null}function Pa(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Mr=me()+500,Ys&&Gt())}}function ar(e){Mt!==null&&Mt.tag===0&&!(ie&6)&&Rr();var t=ie;ie|=1;var r=Je.transition,i=se;try{if(Je.transition=null,se=1,e)return e()}finally{se=i,Je.transition=r,ie=t,!(ie&6)&&Gt()}}function Oa(){ze=Cr.current,le(Cr)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Af(r)),ve!==null)for(r=ve.return;r!==null;){var i=r;switch(pa(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ds();break;case 3:Pr(),le(je),le(Te),xa();break;case 5:Ca(i);break;case 4:Pr();break;case 13:le(ue);break;case 19:le(ue);break;case 10:va(i.type._context);break;case 22:case 23:Oa()}r=r.return}if(xe=e,ve=e=Wt(e.current,null),be=ze=t,we=0,Ti=null,Aa=en=or=0,Ie=ui=null,Zt!==null){for(t=0;t<Zt.length;t++)if(r=Zt[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,u=r.pending;if(u!==null){var m=u.next;u.next=n,i.next=m}r.pending=i}Zt=null}return e}function uu(e,t){do{var r=ve;try{if(ma(),cs.current=js,Ns){for(var i=de.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Ns=!1}if(nr=0,Ce=Se=de=null,ci=!1,Li=0,Ta.current=null,r===null||r.return===null){we=1,Ti=t,ve=null;break}e:{var u=e,m=r.return,a=r,c=t;if(t=be,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,v=a,d=v.tag;if(!(v.mode&1)&&(d===0||d===11||d===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var S=jl(m);if(S!==null){S.flags&=-257,Hl(S,m,a,u,t),S.mode&1&&Nl(u,f,t),t=S,c=f;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){Nl(u,f,t),Ma();break e}c=Error(X(426))}}else if(ce&&a.mode&1){var h=jl(m);if(h!==null){!(h.flags&65536)&&(h.flags|=256),Hl(h,m,a,u,t),_a(Or(c,a));break e}}u=c=Or(c,a),we!==4&&(we=2),ui===null?ui=[u]:ui.push(u),u=m;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var l=Xh(u,c,t);Al(u,l);break e;case 1:a=c;var s=u.type,o=u.stateNode;if(!(u.flags&128)&&(typeof s.getDerivedStateFromError=="function"||o!==null&&typeof o.componentDidCatch=="function"&&(zt===null||!zt.has(o)))){u.flags|=65536,t&=-t,u.lanes|=t;var p=Gh(u,a,t);Al(u,p);break e}}u=u.return}while(u!==null)}pu(r)}catch(w){t=w,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function du(){var e=Hs.current;return Hs.current=js,e===null?js:e}function Ma(){(we===0||we===3||we===2)&&(we=4),xe===null||!(or&268435455)&&!(en&268435455)||Pt(xe,be)}function Us(e,t){var r=ie;ie|=2;var i=du();(xe!==e||be!==t)&&(mt=null,tr(e,t));do try{rp();break}catch(n){uu(e,n)}while(!0);if(ma(),ie=r,Hs.current=i,ve!==null)throw Error(X(261));return xe=null,be=0,we}function rp(){for(;ve!==null;)fu(ve)}function ip(){for(;ve!==null&&!Ld();)fu(ve)}function fu(e){var t=gu(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?pu(e):ve=t,Ta.current=null}function pu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Yf(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{we=6,ve=null;return}}else if(r=Gf(r,t,ze),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);we===0&&(we=5)}function Qt(e,t,r){var i=se,n=Je.transition;try{Je.transition=null,se=1,sp(e,t,r,i)}finally{Je.transition=n,se=i}return null}function sp(e,t,r,i){do Rr();while(Mt!==null);if(ie&6)throw Error(X(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(Nd(e,u),e===xe&&(ve=xe=null,be=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zi||(Zi=!0,mu(xs,function(){return Rr(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Je.transition,Je.transition=null;var m=se;se=1;var a=ie;ie|=4,Ta.current=null,Jf(e,r),lu(r,e),kf(po),bs=!!fo,po=fo=null,e.current=r,Zf(r),Rd(),ie=a,se=m,Je.transition=u}else e.current=r;if(Zi&&(Zi=!1,Mt=e,zs=n),u=e.pendingLanes,u===0&&(zt=null),Ad(r.stateNode),Fe(e,me()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(Fs)throw Fs=!1,e=Oo,Oo=null,e;return zs&1&&e.tag!==0&&Rr(),u=e.pendingLanes,u&1?e===Mo?di++:(di=0,Mo=e):di=0,Gt(),null}function Rr(){if(Mt!==null){var e=Xc(zs),t=Je.transition,r=se;try{if(Je.transition=null,se=16>e?16:e,Mt===null)var i=!1;else{if(e=Mt,Mt=null,zs=0,ie&6)throw Error(X(331));var n=ie;for(ie|=4,J=e.current;J!==null;){var u=J,m=u.child;if(J.flags&16){var a=u.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(J=f;J!==null;){var v=J;switch(v.tag){case 0:case 11:case 15:hi(8,v,u)}var d=v.child;if(d!==null)d.return=v,J=d;else for(;J!==null;){v=J;var _=v.sibling,S=v.return;if(nu(v),v===f){J=null;break}if(_!==null){_.return=S,J=_;break}J=S}}}var x=u.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var h=g.sibling;g.sibling=null,g=h}while(g!==null)}}J=u}}if(u.subtreeFlags&2064&&m!==null)m.return=u,J=m;else e:for(;J!==null;){if(u=J,u.flags&2048)switch(u.tag){case 0:case 11:case 15:hi(9,u,u.return)}var l=u.sibling;if(l!==null){l.return=u.return,J=l;break e}J=u.return}}var s=e.current;for(J=s;J!==null;){m=J;var o=m.child;if(m.subtreeFlags&2064&&o!==null)o.return=m,J=o;else e:for(m=s;J!==null;){if(a=J,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Zs(9,a)}}catch(w){ge(a,a.return,w)}if(a===m){J=null;break e}var p=a.sibling;if(p!==null){p.return=a.return,J=p;break e}J=a.return}}if(ie=n,Gt(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Vs,e)}catch{}i=!0}return i}finally{se=r,Je.transition=t}}return!1}function Jl(e,t,r){t=Or(r,t),t=Xh(e,t,1),e=Ft(e,t,1),t=Be(),e!==null&&(Bi(e,1,t),Fe(e,t))}function ge(e,t,r){if(e.tag===3)Jl(e,e,r);else for(;t!==null;){if(t.tag===3){Jl(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zt===null||!zt.has(i))){e=Or(r,e),e=Gh(t,e,1),t=Ft(t,e,1),e=Be(),t!==null&&(Bi(t,1,e),Fe(t,e));break}}t=t.return}}function np(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,xe===e&&(be&r)===r&&(we===4||we===3&&(be&130023424)===be&&500>me()-Ba?tr(e,0):Aa|=r),Fe(e,t)}function _u(e,t){t===0&&(e.mode&1?(t=Wi,Wi<<=1,!(Wi&130023424)&&(Wi=4194304)):t=1);var r=Be();e=kt(e,t),e!==null&&(Bi(e,t,r),Fe(e,r))}function op(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),_u(e,r)}function ap(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(t),_u(e,r)}var gu;gu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||je.current)Ne=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ne=!1,Xf(e,t,r);Ne=!!(e.flags&131072)}else Ne=!1,ce&&t.flags&1048576&&Sh(t,Bs,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;us(e,t),e=t.pendingProps;var n=Tr(t,Te.current);Lr(t,r),n=ba(null,t,i,e,n,r);var u=Ea();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(i)?(u=!0,Ts(t)):u=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Sa(t),n.updater=Js,t.stateNode=n,n._reactInternals=t,xo(t,i,e,r),t=Eo(null,t,i,!0,u,r)):(t.tag=0,ce&&u&&fa(t),Ae(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(us(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=cp(i),e=rt(i,e),n){case 0:t=bo(null,t,i,e,r);break e;case 1:t=Ul(null,t,i,e,r);break e;case 11:t=Fl(null,t,i,e,r);break e;case 14:t=zl(null,t,i,rt(i.type,e),r);break e}throw Error(X(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),bo(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),Ul(e,t,i,n,r);case 3:e:{if(Zh(t),e===null)throw Error(X(387));i=t.pendingProps,u=t.memoizedState,n=u.element,Eh(e,t),Ms(t,i,null,r);var m=t.memoizedState;if(i=m.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){n=Or(Error(X(423)),t),t=Wl(e,t,i,r,n);break e}else if(i!==n){n=Or(Error(X(424)),t),t=Wl(e,t,i,r,n);break e}else for(Ue=Ht(t.stateNode.containerInfo.firstChild),We=t,ce=!0,nt=null,r=kh(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ar(),i===n){t=bt(e,t,r);break e}Ae(e,t,i,r)}t=t.child}return t;case 5:return Lh(t),e===null&&So(t),i=t.type,n=t.pendingProps,u=e!==null?e.memoizedProps:null,m=n.children,_o(i,n)?m=null:u!==null&&_o(i,u)&&(t.flags|=32),Jh(e,t),Ae(e,t,m,r),t.child;case 6:return e===null&&So(t),null;case 13:return eu(e,t,r);case 4:return wa(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Br(t,null,i,r):Ae(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),Fl(e,t,i,n,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,u=t.memoizedProps,m=n.value,ne(Ps,i._currentValue),i._currentValue=m,u!==null)if(lt(u.value,m)){if(u.children===n.children&&!je.current){t=bt(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var a=u.dependencies;if(a!==null){m=u.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(u.tag===1){c=wt(-1,r&-r),c.tag=2;var f=u.updateQueue;if(f!==null){f=f.shared;var v=f.pending;v===null?c.next=c:(c.next=v.next,v.next=c),f.pending=c}}u.lanes|=r,c=u.alternate,c!==null&&(c.lanes|=r),wo(u.return,r,t),a.lanes|=r;break}c=c.next}}else if(u.tag===10)m=u.type===t.type?null:u.child;else if(u.tag===18){if(m=u.return,m===null)throw Error(X(341));m.lanes|=r,a=m.alternate,a!==null&&(a.lanes|=r),wo(m,r,t),m=u.sibling}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===t){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}Ae(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Lr(t,r),n=Ze(n),i=i(n),t.flags|=1,Ae(e,t,i,r),t.child;case 14:return i=t.type,n=rt(i,t.pendingProps),n=rt(i.type,n),zl(e,t,i,n,r);case 15:return Yh(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),us(e,t),t.tag=1,He(i)?(e=!0,Ts(t)):e=!1,Lr(t,r),qh(t,i,n),xo(t,i,n,r),Eo(null,t,i,!0,e,r);case 19:return tu(e,t,r);case 22:return Qh(e,t,r)}throw Error(X(156,t.tag))};function mu(e,t){return $c(e,t)}function lp(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,t,r,i){return new lp(e,t,r,i)}function Ia(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cp(e){if(typeof e=="function")return Ia(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ta)return 11;if(e===ra)return 14}return 2}function Wt(e,t){var r=e.alternate;return r===null?(r=Qe(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ps(e,t,r,i,n,u){var m=2;if(i=e,typeof e=="function")Ia(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case dr:return rr(r.children,n,u,t);case ea:m=8,n|=8;break;case Kn:return e=Qe(12,r,t,n|2),e.elementType=Kn,e.lanes=u,e;case qn:return e=Qe(13,r,t,n),e.elementType=qn,e.lanes=u,e;case Xn:return e=Qe(19,r,t,n),e.elementType=Xn,e.lanes=u,e;case Lc:return tn(r,n,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bc:m=10;break e;case Ec:m=9;break e;case ta:m=11;break e;case ra:m=14;break e;case Tt:m=16,i=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Qe(m,r,t,n),t.elementType=e,t.type=i,t.lanes=u,t}function rr(e,t,r,i){return e=Qe(7,e,i,t),e.lanes=r,e}function tn(e,t,r,i){return e=Qe(22,e,i,t),e.elementType=Lc,e.lanes=r,e.stateNode={isHidden:!1},e}function Nn(e,t,r){return e=Qe(6,e,null,t),e.lanes=r,e}function jn(e,t,r){return t=Qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hp(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vn(0),this.expirationTimes=vn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vn(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Na(e,t,r,i,n,u,m,a,c){return e=new hp(e,t,r,a,c),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Qe(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sa(u),e}function up(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function vu(e){if(!e)return Kt;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var r=e.type;if(He(r))return vh(e,r,t)}return t}function yu(e,t,r,i,n,u,m,a,c){return e=Na(r,i,!0,e,n,u,m,a,c),e.context=vu(null),r=e.current,i=Be(),n=Ut(r),u=wt(i,n),u.callback=t??null,Ft(r,u,n),e.current.lanes=n,Bi(e,n,i),Fe(e,i),e}function rn(e,t,r,i){var n=t.current,u=Be(),m=Ut(n);return r=vu(r),t.context===null?t.context=r:t.pendingContext=r,t=wt(u,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ft(n,t,m),e!==null&&(at(e,n,m,u),ls(e,n,m)),m}function Ws(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ja(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}function dp(){return null}var Su=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ha(e){this._internalRoot=e}sn.prototype.render=Ha.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));rn(e,t,null,null)};sn.prototype.unmount=Ha.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ar(function(){rn(null,e,null,null)}),t[xt]=null}};function sn(e){this._internalRoot=e}sn.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&t!==0&&t<Bt[r].priority;r++);Bt.splice(r,0,e),r===0&&Zc(e)}};function Fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function nn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ec(){}function fp(e,t,r,i,n){if(n){if(typeof i=="function"){var u=i;i=function(){var f=Ws(m);u.call(f)}}var m=yu(t,i,e,0,null,!1,!1,"",ec);return e._reactRootContainer=m,e[xt]=m.current,Ci(e.nodeType===8?e.parentNode:e),ar(),m}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var f=Ws(c);a.call(f)}}var c=Na(e,0,!1,null,null,!1,!1,"",ec);return e._reactRootContainer=c,e[xt]=c.current,Ci(e.nodeType===8?e.parentNode:e),ar(function(){rn(t,c,r,i)}),c}function on(e,t,r,i,n){var u=r._reactRootContainer;if(u){var m=u;if(typeof n=="function"){var a=n;n=function(){var c=Ws(m);a.call(c)}}rn(t,m,e,n)}else m=fp(r,t,e,n,i);return Ws(m)}Gc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ti(t.pendingLanes);r!==0&&(na(t,r|1),Fe(t,me()),!(ie&6)&&(Mr=me()+500,Gt()))}break;case 13:ar(function(){var i=kt(e,1);if(i!==null){var n=Be();at(i,e,1,n)}}),ja(e,1)}};oa=function(e){if(e.tag===13){var t=kt(e,134217728);if(t!==null){var r=Be();at(t,e,134217728,r)}ja(e,134217728)}};Yc=function(e){if(e.tag===13){var t=Ut(e),r=kt(e,t);if(r!==null){var i=Be();at(r,e,t,i)}ja(e,t)}};Qc=function(){return se};Jc=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};so=function(e,t,r){switch(t){case"input":if(Qn(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=Gs(i);if(!n)throw Error(X(90));Dc(i),Qn(i,n)}}}break;case"textarea":Ac(e,r);break;case"select":t=r.value,t!=null&&xr(e,!!r.multiple,t,!1)}};jc=Pa;Hc=ar;var pp={usingClientEntryPoint:!1,Events:[Oi,gr,Gs,Ic,Nc,Pa]},Qr={findFiberByHostInstance:Jt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Et.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uc(e),e===null?null:e.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||dp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!es.isDisabled&&es.supportsFiber)try{Vs=es.inject(_p),ft=es}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pp;Ve.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fa(t))throw Error(X(200));return up(e,t,null,r)};Ve.createRoot=function(e,t){if(!Fa(e))throw Error(X(299));var r=!1,i="",n=Su;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Na(e,1,!1,null,null,r,!1,i,n),e[xt]=t.current,Ci(e.nodeType===8?e.parentNode:e),new Ha(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Uc(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return ar(e)};Ve.hydrate=function(e,t,r){if(!nn(t))throw Error(X(200));return on(null,e,t,!0,r)};Ve.hydrateRoot=function(e,t,r){if(!Fa(e))throw Error(X(405));var i=r!=null&&r.hydratedSources||null,n=!1,u="",m=Su;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=yu(t,null,e,1,r??null,n,!1,u,m),e[xt]=t.current,Ci(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new sn(t)};Ve.render=function(e,t,r){if(!nn(t))throw Error(X(200));return on(null,e,t,!1,r)};Ve.unmountComponentAtNode=function(e){if(!nn(e))throw Error(X(40));return e._reactRootContainer?(ar(function(){on(null,null,e,!1,function(){e._reactRootContainer=null,e[xt]=null})}),!0):!1};Ve.unstable_batchedUpdates=Pa;Ve.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!nn(r))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return on(e,t,r,!1,i)};Ve.version="18.3.1-next-f1338f8080-20240426";function wu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wu)}catch(e){console.error(e)}}wu(),wc.exports=Ve;var gp=wc.exports,tc=gp;$n.createRoot=tc.createRoot,$n.hydrateRoot=tc.hydrateRoot;const gt=Object.create(null);gt.open="0";gt.close="1";gt.ping="2";gt.pong="3";gt.message="4";gt.upgrade="5";gt.noop="6";const _s=Object.create(null);Object.keys(gt).forEach(e=>{_s[gt[e]]=e});const jo={type:"error",data:"parser error"},Cu=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",xu=typeof ArrayBuffer=="function",ku=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,za=({type:e,data:t},r,i)=>Cu&&t instanceof Blob?r?i(t):rc(t,i):xu&&(t instanceof ArrayBuffer||ku(t))?r?i(t):rc(new Blob([t]),i):i(gt[e]+(t||"")),rc=(e,t)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];t("b"+(i||""))},r.readAsDataURL(e)};function ic(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Hn;function mp(e,t){if(Cu&&e.data instanceof Blob)return e.data.arrayBuffer().then(ic).then(t);if(xu&&(e.data instanceof ArrayBuffer||ku(e.data)))return t(ic(e.data));za(e,!1,r=>{Hn||(Hn=new TextEncoder),t(Hn.encode(r))})}const sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ii=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<sc.length;e++)ii[sc.charCodeAt(e)]=e;const vp=e=>{let t=e.length*.75,r=e.length,i,n=0,u,m,a,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),v=new Uint8Array(f);for(i=0;i<r;i+=4)u=ii[e.charCodeAt(i)],m=ii[e.charCodeAt(i+1)],a=ii[e.charCodeAt(i+2)],c=ii[e.charCodeAt(i+3)],v[n++]=u<<2|m>>4,v[n++]=(m&15)<<4|a>>2,v[n++]=(a&3)<<6|c&63;return f},yp=typeof ArrayBuffer=="function",Ua=(e,t)=>{if(typeof e!="string")return{type:"message",data:bu(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:Sp(e.substring(1),t)}:_s[r]?e.length>1?{type:_s[r],data:e.substring(1)}:{type:_s[r]}:jo},Sp=(e,t)=>{if(yp){const r=vp(e);return bu(r,t)}else return{base64:!0,data:e}},bu=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Eu="",wp=(e,t)=>{const r=e.length,i=new Array(r);let n=0;e.forEach((u,m)=>{za(u,!1,a=>{i[m]=a,++n===r&&t(i.join(Eu))})})},Cp=(e,t)=>{const r=e.split(Eu),i=[];for(let n=0;n<r.length;n++){const u=Ua(r[n],t);if(i.push(u),u.type==="error")break}return i};function xp(){return new TransformStream({transform(e,t){mp(e,r=>{const i=r.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const u=new DataView(n.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{n=new Uint8Array(9);const u=new DataView(n.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let Fn;function ts(e){return e.reduce((t,r)=>t+r.length,0)}function rs(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function kp(e,t){Fn||(Fn=new TextDecoder);const r=[];let i=0,n=-1,u=!1;return new TransformStream({transform(m,a){for(r.push(m);;){if(i===0){if(ts(r)<1)break;const c=rs(r,1);u=(c[0]&128)===128,n=c[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(ts(r)<2)break;const c=rs(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),i=3}else if(i===2){if(ts(r)<8)break;const c=rs(r,8),f=new DataView(c.buffer,c.byteOffset,c.length),v=f.getUint32(0);if(v>Math.pow(2,21)-1){a.enqueue(jo);break}n=v*Math.pow(2,32)+f.getUint32(4),i=3}else{if(ts(r)<n)break;const c=rs(r,n);a.enqueue(Ua(u?c:Fn.decode(c),t)),i=0}if(n===0||n>e){a.enqueue(jo);break}}}})}const Lu=4;function ye(e){if(e)return bp(e)}function bp(e){for(var t in ye.prototype)e[t]=ye.prototype[t];return e}ye.prototype.on=ye.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ye.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ye.prototype.off=ye.prototype.removeListener=ye.prototype.removeAllListeners=ye.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===t||i.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ye.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,t)}return this};ye.prototype.emitReserved=ye.prototype.emit;ye.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ye.prototype.hasListeners=function(e){return!!this.listeners(e).length};const an=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Ye=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ep="arraybuffer";function Ru(e,...t){return t.reduce((r,i)=>(e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}const Lp=Ye.setTimeout,Rp=Ye.clearTimeout;function ln(e,t){t.useNativeTimers?(e.setTimeoutFn=Lp.bind(Ye),e.clearTimeoutFn=Rp.bind(Ye)):(e.setTimeoutFn=Ye.setTimeout.bind(Ye),e.clearTimeoutFn=Ye.clearTimeout.bind(Ye))}const Dp=1.33;function Tp(e){return typeof e=="string"?Ap(e):Math.ceil((e.byteLength||e.size)*Dp)}function Ap(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function Du(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Bp(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Pp(e){let t={},r=e.split("&");for(let i=0,n=r.length;i<n;i++){let u=r[i].split("=");t[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return t}class Op extends Error{constructor(t,r,i){super(t),this.description=r,this.context=i,this.type="TransportError"}}class Wa extends ye{constructor(t){super(),this.writable=!1,ln(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,i){return super.emitReserved("error",new Op(t,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ua(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Bp(t);return r.length?"?"+r:""}}class Mp extends Wa{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Cp(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,wp(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Du()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Tu=!1;try{Tu=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ip=Tu;function Np(){}class jp extends Mp{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,r){const i=this.request({method:"POST",data:t});i.on("success",r),i.on("error",(n,u)=>{this.onError("xhr post error",n,u)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=t}}class _t extends ye{constructor(t,r,i){super(),this.createRequest=t,ln(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const r=Ru(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=_t.requestsCount++,_t.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Np,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete _t.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}_t.requestsCount=0;_t.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",nc);else if(typeof addEventListener=="function"){const e="onpagehide"in Ye?"pagehide":"unload";addEventListener(e,nc,!1)}}function nc(){for(let e in _t.requests)_t.requests.hasOwnProperty(e)&&_t.requests[e].abort()}const Hp=function(){const e=Au({xdomain:!1});return e&&e.responseType!==null}();class Fp extends jp{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=Hp&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new _t(Au,this.uri(),t)}}function Au(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ip))return new XMLHttpRequest}catch{}if(!t)try{return new Ye[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Bu=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class zp extends Wa{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,i=Bu?{}:Ru(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;za(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}n&&an(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Du()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const zn=Ye.WebSocket||Ye.MozWebSocket;class Up extends zp{createSocket(t,r,i){return Bu?new zn(t,r,i):r?new zn(t,r):new zn(t)}doWrite(t,r){this.ws.send(r)}}class Wp extends Wa{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=kp(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),n=xp();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const u=()=>{i.read().then(({done:a,value:c})=>{a||(this.onPacket(c),u())}).catch(a=>{})};u();const m={type:"open"};this.query.sid&&(m.data=`{"sid":"${this.query.sid}"}`),this._writer.write(m).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;this._writer.write(i).then(()=>{n&&an(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const $p={websocket:Up,webtransport:Wp,polling:Fp},Vp=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Kp=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ho(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");r!=-1&&i!=-1&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let n=Vp.exec(e||""),u={},m=14;for(;m--;)u[Kp[m]]=n[m]||"";return r!=-1&&i!=-1&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=qp(u,u.path),u.queryKey=Xp(u,u.query),u}function qp(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Xp(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,u){n&&(r[n]=u)}),r}const Fo=typeof addEventListener=="function"&&typeof removeEventListener=="function",gs=[];Fo&&addEventListener("offline",()=>{gs.forEach(e=>e())},!1);class $t extends ye{constructor(t,r){if(super(),this.binaryType=Ep,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const i=Ho(t);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=Ho(r.host).host);ln(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Pp(this.opts.query)),Fo&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Lu,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&$t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",$t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(r+=Tp(n)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,an(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,i){return this._sendPacket("message",t,r,i),this}send(t,r,i){return this._sendPacket("message",t,r,i),this}_sendPacket(t,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:t,data:r,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if($t.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fo&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=gs.indexOf(this._offlineEventListener);i!==-1&&gs.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}$t.protocol=Lu;class Gp extends $t{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),i=!1;$t.priorWebsocketSuccess=!1;const n=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;$t.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=r.name,this.emitReserved("upgradeError",_)}}))};function u(){i||(i=!0,v(),r.close(),r=null)}const m=d=>{const _=new Error("probe error: "+d);_.transport=r.name,u(),this.emitReserved("upgradeError",_)};function a(){m("transport closed")}function c(){m("socket closed")}function f(d){r&&d.name!==r.name&&u()}const v=()=>{r.removeListener("open",n),r.removeListener("error",m),r.removeListener("close",a),this.off("close",c),this.off("upgrading",f)};r.once("open",n),r.once("error",m),r.once("close",a),this.once("close",c),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}}let Yp=class extends Gp{constructor(t,r={}){const i=typeof t=="object"?t:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>$p[n]).filter(n=>!!n)),super(t,i)}};function Qp(e,t="",r){let i=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),i=Ho(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+t,i.href=i.protocol+"://"+u+(r&&r.port===i.port?"":":"+i.port),i}const Jp=typeof ArrayBuffer=="function",Zp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Pu=Object.prototype.toString,e_=typeof Blob=="function"||typeof Blob<"u"&&Pu.call(Blob)==="[object BlobConstructor]",t_=typeof File=="function"||typeof File<"u"&&Pu.call(File)==="[object FileConstructor]";function $a(e){return Jp&&(e instanceof ArrayBuffer||Zp(e))||e_&&e instanceof Blob||t_&&e instanceof File}function ms(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,i=e.length;r<i;r++)if(ms(e[r]))return!0;return!1}if($a(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ms(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&ms(e[r]))return!0;return!1}function r_(e){const t=[],r=e.data,i=e;return i.data=zo(r,t),i.attachments=t.length,{packet:i,buffers:t}}function zo(e,t){if(!e)return e;if($a(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=zo(e[i],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=zo(e[i],t));return r}return e}function i_(e,t){return e.data=Uo(e.data,t),delete e.attachments,e}function Uo(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Uo(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Uo(e[r],t));return e}const s_=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],n_=5;var te;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(te||(te={}));class o_{constructor(t){this.replacer=t}encode(t){return(t.type===te.EVENT||t.type===te.ACK)&&ms(t)?this.encodeAsBinary({type:t.type===te.EVENT?te.BINARY_EVENT:te.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===te.BINARY_EVENT||t.type===te.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=r_(t),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}}function oc(e){return Object.prototype.toString.call(e)==="[object Object]"}class Va extends ye{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const i=r.type===te.BINARY_EVENT;i||r.type===te.BINARY_ACK?(r.type=i?te.EVENT:te.ACK,this.reconstructor=new a_(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if($a(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const i={type:Number(t.charAt(0))};if(te[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===te.BINARY_EVENT||i.type===te.BINARY_ACK){const u=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const m=t.substring(u,r);if(m!=Number(m)||t.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(m)}if(t.charAt(r+1)==="/"){const u=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););i.nsp=t.substring(u,r)}else i.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const u=r+1;for(;++r;){const m=t.charAt(r);if(m==null||Number(m)!=m){--r;break}if(r===t.length)break}i.id=Number(t.substring(u,r+1))}if(t.charAt(++r)){const u=this.tryParse(t.substr(r));if(Va.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case te.CONNECT:return oc(r);case te.DISCONNECT:return r===void 0;case te.CONNECT_ERROR:return typeof r=="string"||oc(r);case te.EVENT:case te.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&s_.indexOf(r[0])===-1);case te.ACK:case te.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class a_{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=i_(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const l_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Va,Encoder:o_,get PacketType(){return te},protocol:n_},Symbol.toStringTag,{value:"Module"}));function st(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const c_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ou extends ye{constructor(t,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[st(t,"open",this.onopen.bind(this)),st(t,"packet",this.onpacket.bind(this)),st(t,"error",this.onerror.bind(this)),st(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var i,n,u;if(c_.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const m={type:te.EVENT,data:r};if(m.options={},m.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,d=r.pop();this._registerAckCallback(v,d),m.id=v}const a=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(m),this.packet(m)):this.sendBuffer.push(m)),this.flags={},this}_registerAckCallback(t,r){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},n),m=(...a)=>{this.io.clearTimeoutFn(u),r.apply(this,a)};m.withError=!0,this.acks[t]=m}emitWithAck(t,...r){return new Promise((i,n)=>{const u=(m,a)=>m?n(m):i(a);u.withError=!0,r.push(u),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...u)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case te.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case te.EVENT:case te.BINARY_EVENT:this.onevent(t);break;case te.ACK:case te.BINARY_ACK:this.onack(t);break;case te.DISCONNECT:this.ondisconnect();break;case te.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let i=!1;return function(...n){i||(i=!0,r.packet({type:te.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,t.data)}}}function Hr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Hr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Hr.prototype.reset=function(){this.attempts=0};Hr.prototype.setMin=function(e){this.ms=e};Hr.prototype.setMax=function(e){this.max=e};Hr.prototype.setJitter=function(e){this.jitter=e};class Wo extends ye{constructor(t,r){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,ln(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Hr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||l_;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Yp(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=st(r,"open",function(){i.onopen(),t&&t()}),u=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},m=st(r,"error",u);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{n(),u(new Error("timeout")),r.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(m),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(st(t,"ping",this.onping.bind(this)),st(t,"data",this.ondata.bind(this)),st(t,"error",this.onerror.bind(this)),st(t,"close",this.onclose.bind(this)),st(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){an(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Ou(this,t,r),this.nsps[t]=i),i}_destroy(t){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let i=0;i<r.length;i++)this.engine.write(r[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Jr={};function fi(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Qp(e,t.path||"/socket.io"),i=r.source,n=r.id,u=r.path,m=Jr[n]&&u in Jr[n].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||m;let c;return a?c=new Wo(i,t):(Jr[n]||(Jr[n]=new Wo(i,t)),c=Jr[n]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(fi,{Manager:Wo,Socket:Ou,io:fi,connect:fi});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),oe=(e,t)=>{const r=Q.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:u=2,absoluteStrokeWidth:m,className:a="",children:c,...f},v)=>Q.createElement("svg",{ref:v,...h_,width:n,height:n,stroke:i,strokeWidth:m?Number(u)*24/Number(n):u,className:["lucide",`lucide-${u_(e)}`,a].join(" "),...f},[...t.map(([d,_])=>Q.createElement(d,_)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=oe("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=oe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=oe("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=oe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=oe("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=oe("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=oe("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=oe("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=oe("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=oe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=oe("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=oe("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=oe("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=oe("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=oe("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vo=oe("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=oe("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=oe("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=oe("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=oe("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=oe("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=oe("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=oe("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=oe("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=oe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A_=oe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),B_=({onLogin:e,error:t})=>{const[r,i]=Q.useState(""),[n,u]=Q.useState(""),[m,a]=Q.useState(!1),[c,f]=Q.useState(!1),v=x=>/^[a-z][a-z0-9_-]{0,7}$/.test(x)&&!x.endsWith("-"),d=x=>x.length>=6&&/[a-zA-Z]/.test(x)&&/[0-9]/.test(x);Q.useEffect(()=>{const x=localStorage.getItem("linux-credentials");if(x)try{const{username:g,password:h,rememberMe:l}=JSON.parse(x);l&&(i(g||""),u(h||""),f(!0))}catch(g){console.error("读取保存的账号信息失败:",g),localStorage.removeItem("linux-credentials")}},[]);const _=async x=>{if(x.preventDefault(),!(!r.trim()||!n.trim())&&v(r)&&d(n)){a(!0);try{if(c){const g={username:r,password:n,rememberMe:!0};localStorage.setItem("linux-credentials",JSON.stringify(g))}else localStorage.removeItem("linux-credentials");await e(r,n)}finally{a(!1)}}},S=r&&n&&v(r)&&d(n);return R.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:R.jsxs("form",{onSubmit:_,className:"space-y-4",children:[R.jsxs("div",{children:[R.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"用户名"}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:R.jsx(T_,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),R.jsx("input",{type:"text",id:"username",value:r,onChange:x=>i(x.target.value.toLowerCase()),placeholder:"输入你的用户名",maxLength:8,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-linux-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 ${r&&!S?"border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600"}`,disabled:m,autoComplete:"username",autoFocus:!0})]}),R.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[R.jsx("p",{children:"用户名规则："}),R.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[R.jsx("li",{children:"只能包含小写字母、数字、下划线、连字符"}),R.jsx("li",{children:"必须以字母开头，长度1-8字符"}),R.jsx("li",{children:"不能以连字符结尾"})]})]}),r&&!v(r)&&R.jsxs("div",{className:"mt-2 flex items-center text-sm text-red-600 dark:text-red-400",children:[R.jsx(Un,{size:16,className:"mr-1"}),"用户名格式不正确"]})]}),R.jsxs("div",{children:[R.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"密码"}),R.jsxs("div",{className:"relative",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:R.jsx(S_,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),R.jsx("input",{type:"password",id:"password",value:n,onChange:x=>u(x.target.value),placeholder:"设置你的密码",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-linux-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 ${n&&!d(n)?"border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600"}`,disabled:m,autoComplete:"new-password"})]}),R.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[R.jsx("p",{children:"密码规则："}),R.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[R.jsx("li",{children:"至少6位字符"}),R.jsx("li",{children:"必须包含字母和数字"})]})]}),n&&!d(n)&&R.jsxs("div",{className:"mt-2 flex items-center text-sm text-red-600 dark:text-red-400",children:[R.jsx(Un,{size:16,className:"mr-1"}),"密码格式不正确"]})]}),R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center",children:[R.jsx("input",{id:"remember-me",type:"checkbox",checked:c,onChange:x=>f(x.target.checked),className:"h-4 w-4 text-linux-600 focus:ring-linux-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),R.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"记住账号密码"})]}),localStorage.getItem("linux-credentials")&&R.jsx("button",{type:"button",onClick:()=>{confirm("确定要清除保存的账号信息吗？")&&(localStorage.removeItem("linux-credentials"),i(""),u(""),f(!1),alert("账号信息已清除"))},className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline",children:"清除保存的账号"})]}),t&&R.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:R.jsxs("div",{className:"flex items-center text-sm text-red-600 dark:text-red-400",children:[R.jsx(Un,{size:16,className:"mr-2"}),t]})}),R.jsx("button",{type:"submit",disabled:!S||m,className:`w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white transition-colors ${S&&!m?"bg-linux-600 hover:bg-linux-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-linux-500":"bg-gray-300 cursor-not-allowed"}`,children:m?R.jsxs(R.Fragment,{children:[R.jsx("div",{className:"loading-spinner mr-2"}),"连接中..."]}):R.jsxs(R.Fragment,{children:["创建我的容器",R.jsx(d_,{size:16,className:"ml-2"})]})})]})})};var Mu={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(globalThis,()=>(()=>{var r={4567:function(m,a,c){var f=this&&this.__decorate||function(s,o,p,w){var C,k=arguments.length,y=k<3?o:w===null?w=Object.getOwnPropertyDescriptor(o,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,o,p,w);else for(var E=s.length-1;E>=0;E--)(C=s[E])&&(y=(k<3?C(y):k>3?C(o,p,y):C(o,p))||y);return k>3&&y&&Object.defineProperty(o,p,y),y},v=this&&this.__param||function(s,o){return function(p,w){o(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const d=c(9042),_=c(9924),S=c(844),x=c(4725),g=c(2585),h=c(3656);let l=a.AccessibilityManager=class extends S.Disposable{constructor(s,o,p,w){super(),this._terminal=s,this._coreBrowserService=p,this._renderService=w,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,h.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(s){for(let o=0;o<s;o++)this._handleChar(" ")}_handleChar(s){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==s&&(this._charsToAnnounce+=s):this._charsToAnnounce+=s,s===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(s){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(s)||this._charsToConsume.push(s)}_refreshRows(s,o){this._liveRegionDebouncer.refresh(s,o,this._terminal.rows)}_renderRows(s,o){const p=this._terminal.buffer,w=p.lines.length.toString();for(let C=s;C<=o;C++){const k=p.lines.get(p.ydisp+C),y=[],E=(k==null?void 0:k.translateToString(!0,void 0,void 0,y))||"",T=(p.ydisp+C+1).toString(),P=this._rowElements[C];P&&(E.length===0?(P.innerText=" ",this._rowColumns.set(P,[0,1])):(P.textContent=E,this._rowColumns.set(P,y)),P.setAttribute("aria-posinset",T),P.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(s,o){const p=s.target,w=this._rowElements[o===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(o===0?"1":`${this._terminal.buffer.lines.length}`)||s.relatedTarget!==w)return;let C,k;if(o===0?(C=p,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(C=this._rowElements.shift(),k=p,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),o===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(o===0?-1:1),this._rowElements[o===0?1:this._rowElements.length-2].focus(),s.preventDefault(),s.stopImmediatePropagation()}_handleSelectionChange(){var E;if(this._rowElements.length===0)return;const s=document.getSelection();if(!s)return;if(s.isCollapsed)return void(this._rowContainer.contains(s.anchorNode)&&this._terminal.clearSelection());if(!s.anchorNode||!s.focusNode)return void console.error("anchorNode and/or focusNode are null");let o={node:s.anchorNode,offset:s.anchorOffset},p={node:s.focusNode,offset:s.focusOffset};if((o.node.compareDocumentPosition(p.node)&Node.DOCUMENT_POSITION_PRECEDING||o.node===p.node&&o.offset>p.offset)&&([o,p]=[p,o]),o.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(o={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(o.node))return;const w=this._rowElements.slice(-1)[0];if(p.node.compareDocumentPosition(w)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(p={node:w,offset:((E=w.textContent)==null?void 0:E.length)??0}),!this._rowContainer.contains(p.node))return;const C=({node:T,offset:P})=>{const O=T instanceof Text?T.parentNode:T;let A=parseInt(O==null?void 0:O.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(O);if(!j)return console.warn("columns is null. Race condition?"),null;let z=P<j.length?j[P]:j.slice(-1)[0]+1;return z>=this._terminal.cols&&(++A,z=0),{row:A,column:z}},k=C(o),y=C(p);if(k&&y){if(k.row>y.row||k.row===y.row&&k.column>=y.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(y.row-k.row)*this._terminal.cols-k.column+y.column)}}_handleResize(s){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let o=this._rowContainer.children.length;o<this._terminal.rows;o++)this._rowElements[o]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[o]);for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const s=this._coreBrowserService.mainDocument.createElement("div");return s.setAttribute("role","listitem"),s.tabIndex=-1,this._refreshRowDimensions(s),s}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let s=0;s<this._terminal.rows;s++)this._refreshRowDimensions(this._rowElements[s])}}_refreshRowDimensions(s){s.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=l=f([v(1,g.IInstantiationService),v(2,x.ICoreBrowserService),v(3,x.IRenderService)],l)},3614:(m,a)=>{function c(_){return _.replace(/\r?\n/g,"\r")}function f(_,S){return S?"\x1B[200~"+_+"\x1B[201~":_}function v(_,S,x,g){_=f(_=c(_),x.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),x.triggerDataEvent(_,!0),S.value=""}function d(_,S,x){const g=x.getBoundingClientRect(),h=_.clientX-g.left-10,l=_.clientY-g.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${h}px`,S.style.top=`${l}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=c,a.bracketTextForPaste=f,a.copyHandler=function(_,S){_.clipboardData&&_.clipboardData.setData("text/plain",S.selectionText),_.preventDefault()},a.handlePasteEvent=function(_,S,x,g){_.stopPropagation(),_.clipboardData&&v(_.clipboardData.getData("text/plain"),S,x,g)},a.paste=v,a.moveTextAreaUnderMouseCursor=d,a.rightClickHandler=function(_,S,x,g,h){d(_,S,x),h&&g.rightClickSelect(_),S.value=g.selectionText,S.select()}},7239:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const f=c(1505);a.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(v,d,_){this._css.set(v,d,_)}getCss(v,d){return this._css.get(v,d)}setColor(v,d,_){this._color.set(v,d,_)}getColor(v,d){return this._color.get(v,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(c,f,v,d){c.addEventListener(f,v,d);let _=!1;return{dispose:()=>{_||(_=!0,c.removeEventListener(f,v,d))}}}},3551:function(m,a,c){var f=this&&this.__decorate||function(l,s,o,p){var w,C=arguments.length,k=C<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,p);else for(var y=l.length-1;y>=0;y--)(w=l[y])&&(k=(C<3?w(k):C>3?w(s,o,k):w(s,o))||k);return C>3&&k&&Object.defineProperty(s,o,k),k},v=this&&this.__param||function(l,s){return function(o,p){s(o,p,l)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const d=c(3656),_=c(8460),S=c(844),x=c(2585),g=c(4725);let h=a.Linkifier=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(l,s,o,p,w){super(),this._element=l,this._mouseService=s,this._renderService=o,this._bufferService=p,this._linkProviderService=w,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(l){this._lastMouseEvent=l;const s=this._positionFromMouseEvent(l,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const o=l.composedPath();for(let p=0;p<o.length;p++){const w=o[p];if(w.classList.contains("xterm"))break;if(w.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(l){if(this._activeLine!==l.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(l,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,l)||(this._clearCurrentLink(),this._askForLink(l,!0))}_askForLink(l,s){var p,w;this._activeProviderReplies&&s||((p=this._activeProviderReplies)==null||p.forEach(C=>{C==null||C.forEach(k=>{k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=l.y);let o=!1;for(const[C,k]of this._linkProviderService.linkProviders.entries())s?(w=this._activeProviderReplies)!=null&&w.get(C)&&(o=this._checkLinkProviderResult(C,l,o)):k.provideLinks(l.y,y=>{var T,P;if(this._isMouseOut)return;const E=y==null?void 0:y.map(O=>({link:O}));(T=this._activeProviderReplies)==null||T.set(C,E),o=this._checkLinkProviderResult(C,l,o),((P=this._activeProviderReplies)==null?void 0:P.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(l.y,this._activeProviderReplies)})}_removeIntersectingLinks(l,s){const o=new Set;for(let p=0;p<s.size;p++){const w=s.get(p);if(w)for(let C=0;C<w.length;C++){const k=w[C],y=k.link.range.start.y<l?0:k.link.range.start.x,E=k.link.range.end.y>l?this._bufferService.cols:k.link.range.end.x;for(let T=y;T<=E;T++){if(o.has(T)){w.splice(C--,1);break}o.add(T)}}}}_checkLinkProviderResult(l,s,o){var C;if(!this._activeProviderReplies)return o;const p=this._activeProviderReplies.get(l);let w=!1;for(let k=0;k<l;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(w=!0);if(!w&&p){const k=p.find(y=>this._linkAtPosition(y.link,s));k&&(o=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!o)for(let k=0;k<this._activeProviderReplies.size;k++){const y=(C=this._activeProviderReplies.get(k))==null?void 0:C.find(E=>this._linkAtPosition(E.link,s));if(y){o=!0,this._handleNewLink(y);break}}return o}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(l){if(!this._currentLink)return;const s=this._positionFromMouseEvent(l,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(l,this._currentLink.link.text)}_clearCurrentLink(l,s){this._currentLink&&this._lastMouseEvent&&(!l||!s||this._currentLink.link.range.start.y>=l&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(l){if(!this._lastMouseEvent)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(l.link,s)&&(this._currentLink=l,this._currentLink.state={decorations:{underline:l.link.decorations===void 0||l.link.decorations.underline,pointerCursor:l.link.decorations===void 0||l.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,l.link,this._lastMouseEvent),l.link.decorations={},Object.defineProperties(l.link.decorations,{pointerCursor:{get:()=>{var o,p;return(p=(o=this._currentLink)==null?void 0:o.state)==null?void 0:p.decorations.pointerCursor},set:o=>{var p;(p=this._currentLink)!=null&&p.state&&this._currentLink.state.decorations.pointerCursor!==o&&(this._currentLink.state.decorations.pointerCursor=o,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",o))}},underline:{get:()=>{var o,p;return(p=(o=this._currentLink)==null?void 0:o.state)==null?void 0:p.decorations.underline},set:o=>{var p,w,C;(p=this._currentLink)!=null&&p.state&&((C=(w=this._currentLink)==null?void 0:w.state)==null?void 0:C.decorations.underline)!==o&&(this._currentLink.state.decorations.underline=o,this._currentLink.state.isHovered&&this._fireUnderlineEvent(l.link,o))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(o=>{if(!this._currentLink)return;const p=o.start===0?0:o.start+1+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.ydisp+1+o.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=w&&(this._clearCurrentLink(p,w),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(l,s,o){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&l.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(o,s.text)}_fireUnderlineEvent(l,s){const o=l.range,p=this._bufferService.buffer.ydisp,w=this._createLinkUnderlineEvent(o.start.x-1,o.start.y-p-1,o.end.x,o.end.y-p-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(w)}_linkLeave(l,s,o){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&l.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(o,s.text)}_linkAtPosition(l,s){const o=l.range.start.y*this._bufferService.cols+l.range.start.x,p=l.range.end.y*this._bufferService.cols+l.range.end.x,w=s.y*this._bufferService.cols+s.x;return o<=w&&w<=p}_positionFromMouseEvent(l,s,o){const p=o.getCoords(l,s,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(l,s,o,p,w){return{x1:l,y1:s,x2:o,y2:p,cols:this._bufferService.cols,fg:w}}};a.Linkifier=h=f([v(1,g.IMouseService),v(2,g.IRenderService),v(3,x.IBufferService),v(4,g.ILinkProviderService)],h)},9042:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(m,a,c){var f=this&&this.__decorate||function(g,h,l,s){var o,p=arguments.length,w=p<3?h:s===null?s=Object.getOwnPropertyDescriptor(h,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,h,l,s);else for(var C=g.length-1;C>=0;C--)(o=g[C])&&(w=(p<3?o(w):p>3?o(h,l,w):o(h,l))||w);return p>3&&w&&Object.defineProperty(h,l,w),w},v=this&&this.__param||function(g,h){return function(l,s){h(l,s,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const d=c(511),_=c(2585);let S=a.OscLinkProvider=class{constructor(g,h,l){this._bufferService=g,this._optionsService=h,this._oscLinkService=l}provideLinks(g,h){var E;const l=this._bufferService.buffer.lines.get(g-1);if(!l)return void h(void 0);const s=[],o=this._optionsService.rawOptions.linkHandler,p=new d.CellData,w=l.getTrimmedLength();let C=-1,k=-1,y=!1;for(let T=0;T<w;T++)if(k!==-1||l.hasContent(T)){if(l.loadCell(T,p),p.hasExtendedAttrs()&&p.extended.urlId){if(k===-1){k=T,C=p.extended.urlId;continue}y=p.extended.urlId!==C}else k!==-1&&(y=!0);if(y||k!==-1&&T===w-1){const P=(E=this._oscLinkService.getLinkData(C))==null?void 0:E.uri;if(P){const O={start:{x:k+1,y:g},end:{x:T+(y||T!==w-1?0:1),y:g}};let A=!1;if(!(o!=null&&o.allowNonHttpProtocols))try{const j=new URL(P);["http:","https:"].includes(j.protocol)||(A=!0)}catch{A=!0}A||s.push({text:P,range:O,activate:(j,z)=>o?o.activate(j,z,O):x(0,z),hover:(j,z)=>{var U;return(U=o==null?void 0:o.hover)==null?void 0:U.call(o,j,z,O)},leave:(j,z)=>{var U;return(U=o==null?void 0:o.leave)==null?void 0:U.call(o,j,z,O)}})}y=!1,p.hasExtendedAttrs()&&p.extended.urlId?(k=T,C=p.extended.urlId):(k=-1,C=-1)}}h(s)}};function x(g,h){if(confirm(`Do you want to navigate to ${h}?

WARNING: This link could potentially be dangerous`)){const l=window.open();if(l){try{l.opener=null}catch{}l.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=S=f([v(0,_.IBufferService),v(1,_.IOptionsService),v(2,_.IOscLinkService)],S)},6193:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(c,f){this._renderCallback=c,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(c,f,v){this._rowCount=v,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},3236:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const f=c(3614),v=c(3656),d=c(3551),_=c(9042),S=c(3730),x=c(1680),g=c(3107),h=c(5744),l=c(2950),s=c(1296),o=c(428),p=c(4269),w=c(5114),C=c(8934),k=c(3230),y=c(9312),E=c(4725),T=c(6731),P=c(8055),O=c(8969),A=c(8460),j=c(844),z=c(6114),U=c(8437),q=c(2584),H=c(7399),b=c(5941),D=c(9074),B=c(2585),I=c(5435),V=c(4567),N=c(779);class K extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(M={}){super(M),this.browser=z,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(D.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(N.LinkProviderService),this._instantiationService.setService(E.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((L,$)=>this.refresh(L,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(L=>this._reportWindowsOptions(L))),this.register(this._inputHandler.onColor(L=>this._handleColorEvent(L))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(L=>this._afterResize(L.cols,L.rows))),this.register((0,j.toDisposable)(()=>{var L,$;this._customKeyEventHandler=void 0,($=(L=this.element)==null?void 0:L.parentNode)==null||$.removeChild(this.element)}))}_handleColorEvent(M){if(this._themeService)for(const L of M){let $,F="";switch(L.index){case 256:$="foreground",F="10";break;case 257:$="background",F="11";break;case 258:$="cursor",F="12";break;default:$="ansi",F="4;"+L.index}switch(L.type){case 0:const Y=P.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[L.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${q.C0.ESC}]${F};${(0,b.toRgbString)(Y)}${q.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(G=>G.ansi[L.index]=P.channels.toColor(...L.color));else{const G=$;this._themeService.modifyColors(re=>re[G]=P.channels.toColor(...L.color))}break;case 2:this._themeService.restoreColor(L.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(M){M?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(M){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var M;return(M=this.textarea)==null?void 0:M.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(q.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const M=this.buffer.ybase+this.buffer.y,L=this.buffer.lines.get(M);if(!L)return;const $=Math.min(this.buffer.x,this.cols-1),F=this._renderService.dimensions.css.cell.height,Y=L.getWidth($),G=this._renderService.dimensions.css.cell.width*Y,re=this.buffer.y*this._renderService.dimensions.css.cell.height,pe=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=pe+"px",this.textarea.style.top=re+"px",this.textarea.style.width=G+"px",this.textarea.style.height=F+"px",this.textarea.style.lineHeight=F+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",L=>{this.hasSelection()&&(0,f.copyHandler)(L,this._selectionService)}));const M=L=>(0,f.handlePasteEvent)(L,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",M)),this.register((0,v.addDisposableDomListener)(this.element,"paste",M)),z.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",L=>{L.button===2&&(0,f.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",L=>{(0,f.rightClickHandler)(L,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),z.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",L=>{L.button===1&&(0,f.moveTextAreaUnderMouseCursor)(L,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",M=>this._keyUp(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",M=>this._keyDown(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",M=>this._keyPress(M),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",M=>this._compositionHelper.compositionupdate(M))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",M=>this._inputEvent(M),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(M){var $;if(!M)throw new Error("Terminal requires a parent element.");if(M.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),(($=this.element)==null?void 0:$.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=M.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),M.appendChild(this.element);const L=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),L.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",F=>this.updateCursorStyle(F))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),L.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),z.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,M.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(E.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(o.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(E.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(E.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(E.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(E.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(l.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(E.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(L);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(x.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(E.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(V.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const M=this,L=this.element;function $(G){const re=M._mouseService.getMouseReportCoords(G,M.screenElement);if(!re)return!1;let pe,_e;switch(G.overrideType||G.type){case"mousemove":_e=32,G.buttons===void 0?(pe=3,G.button!==void 0&&(pe=G.button<3?G.button:3)):pe=1&G.buttons?0:4&G.buttons?1:2&G.buttons?2:3;break;case"mouseup":_e=0,pe=G.button<3?G.button:3;break;case"mousedown":_e=1,pe=G.button<3?G.button:3;break;case"wheel":if(M._customWheelEventHandler&&M._customWheelEventHandler(G)===!1||M.viewport.getLinesScrolled(G)===0)return!1;_e=G.deltaY<0?0:1,pe=4;break;default:return!1}return!(_e===void 0||pe===void 0||pe>4)&&M.coreMouseService.triggerMouseEvent({col:re.col,row:re.row,x:re.x,y:re.y,button:pe,action:_e,ctrl:G.ctrlKey,alt:G.altKey,shift:G.shiftKey})}const F={mouseup:null,wheel:null,mousedrag:null,mousemove:null},Y={mouseup:G=>($(G),G.buttons||(this._document.removeEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.removeEventListener("mousemove",F.mousedrag)),this.cancel(G)),wheel:G=>($(G),this.cancel(G,!0)),mousedrag:G=>{G.buttons&&$(G)},mousemove:G=>{G.buttons||$(G)}};this.register(this.coreMouseService.onProtocolChange(G=>{G?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(G)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&G?F.mousemove||(L.addEventListener("mousemove",Y.mousemove),F.mousemove=Y.mousemove):(L.removeEventListener("mousemove",F.mousemove),F.mousemove=null),16&G?F.wheel||(L.addEventListener("wheel",Y.wheel,{passive:!1}),F.wheel=Y.wheel):(L.removeEventListener("wheel",F.wheel),F.wheel=null),2&G?F.mouseup||(F.mouseup=Y.mouseup):(this._document.removeEventListener("mouseup",F.mouseup),F.mouseup=null),4&G?F.mousedrag||(F.mousedrag=Y.mousedrag):(this._document.removeEventListener("mousemove",F.mousedrag),F.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(L,"mousedown",G=>{if(G.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(G))return $(G),F.mouseup&&this._document.addEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.addEventListener("mousemove",F.mousedrag),this.cancel(G)})),this.register((0,v.addDisposableDomListener)(L,"wheel",G=>{if(!F.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(G)===!1)return!1;if(!this.buffer.hasScrollback){const re=this.viewport.getLinesScrolled(G);if(re===0)return;const pe=q.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(G.deltaY<0?"A":"B");let _e="";for(let Me=0;Me<Math.abs(re);Me++)_e+=pe;return this.coreService.triggerDataEvent(_e,!0),this.cancel(G,!0)}return this.viewport.handleWheel(G)?this.cancel(G):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(L,"touchstart",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(G),this.cancel(G)},{passive:!0})),this.register((0,v.addDisposableDomListener)(L,"touchmove",G=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(G)?void 0:this.cancel(G)},{passive:!1}))}refresh(M,L){var $;($=this._renderService)==null||$.refreshRows(M,L)}updateCursorStyle(M){var L;(L=this._selectionService)!=null&&L.shouldColumnSelect(M)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(M,L,$=0){var F;$===1?(super.scrollLines(M,L,$),this.refresh(0,this.rows-1)):(F=this.viewport)==null||F.scrollLines(M)}paste(M){(0,f.paste)(M,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(M){this._customKeyEventHandler=M}attachCustomWheelEventHandler(M){this._customWheelEventHandler=M}registerLinkProvider(M){return this._linkProviderService.registerLinkProvider(M)}registerCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const L=this._characterJoinerService.register(M);return this.refresh(0,this.rows-1),L}deregisterCharacterJoiner(M){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(M)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(M){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+M)}registerDecoration(M){return this._decorationService.registerDecoration(M)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(M,L,$){this._selectionService.setSelection(M,L,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var M;(M=this._selectionService)==null||M.clearSelection()}selectAll(){var M;(M=this._selectionService)==null||M.selectAll()}selectLines(M,L){var $;($=this._selectionService)==null||$.selectLines(M,L)}_keyDown(M){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;const L=this.browser.isMac&&this.options.macOptionIsMeta&&M.altKey;if(!L&&!this._compositionHelper.keydown(M))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;L||M.key!=="Dead"&&M.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,H.evaluateKeyboardEvent)(M,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(M),$.type===3||$.type===2){const F=this.rows-1;return this.scrollLines($.type===2?-F:F),this.cancel(M,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,M)||($.cancel&&this.cancel(M,!0),!$.key||!!(M.key&&!M.ctrlKey&&!M.altKey&&!M.metaKey&&M.key.length===1&&M.key.charCodeAt(0)>=65&&M.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==q.C0.ETX&&$.key!==q.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||M.altKey||M.ctrlKey?this.cancel(M,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(M,L){const $=M.isMac&&!this.options.macOptionIsMeta&&L.altKey&&!L.ctrlKey&&!L.metaKey||M.isWindows&&L.altKey&&L.ctrlKey&&!L.metaKey||M.isWindows&&L.getModifierState("AltGraph");return L.type==="keypress"?$:$&&(!L.keyCode||L.keyCode>47)}_keyUp(M){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1||(function(L){return L.keyCode===16||L.keyCode===17||L.keyCode===18}(M)||this.focus(),this.updateCursorStyle(M),this._keyPressHandled=!1)}_keyPress(M){let L;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(M)===!1)return!1;if(this.cancel(M),M.charCode)L=M.charCode;else if(M.which===null||M.which===void 0)L=M.keyCode;else{if(M.which===0||M.charCode===0)return!1;L=M.which}return!(!L||(M.altKey||M.ctrlKey||M.metaKey)&&!this._isThirdLevelShift(this.browser,M)||(L=String.fromCharCode(L),this._onKey.fire({key:L,domEvent:M}),this._showCursor(),this.coreService.triggerDataEvent(L,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(M){if(M.data&&M.inputType==="insertText"&&(!M.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const L=M.data;return this.coreService.triggerDataEvent(L,!0),this.cancel(M),!0}return!1}resize(M,L){M!==this.cols||L!==this.rows?super.resize(M,L):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(M,L){var $,F;($=this._charSizeService)==null||$.measure(),(F=this.viewport)==null||F.syncScrollArea(!0)}clear(){var M;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let L=1;L<this.rows;L++)this.buffer.lines.push(this.buffer.getBlankLine(U.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(M=this.viewport)==null||M.reset(),this.refresh(0,this.rows-1)}}reset(){var L,$;this.options.rows=this.rows,this.options.cols=this.cols;const M=this._customKeyEventHandler;this._setup(),super.reset(),(L=this._selectionService)==null||L.reset(),this._decorationService.reset(),($=this.viewport)==null||$.reset(),this._customKeyEventHandler=M,this.refresh(0,this.rows-1)}clearTextureAtlas(){var M;(M=this._renderService)==null||M.clearTextureAtlas()}_reportFocus(){var M;(M=this.element)!=null&&M.classList.contains("focus")?this.coreService.triggerDataEvent(q.C0.ESC+"[I"):this.coreService.triggerDataEvent(q.C0.ESC+"[O")}_reportWindowsOptions(M){if(this._renderService)switch(M){case I.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const L=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[4;${$};${L}t`);break;case I.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const F=this._renderService.dimensions.css.cell.width.toFixed(0),Y=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${q.C0.ESC}[6;${Y};${F}t`)}}cancel(M,L){if(this.options.cancelEvents||L)return M.preventDefault(),M.stopPropagation(),!1}}a.Terminal=K},9924:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(c,f=1e3){this._renderCallback=c,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,f,v){this._rowCount=v,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=d-this._lastRefreshMs,S=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,f)}}},1680:function(m,a,c){var f=this&&this.__decorate||function(l,s,o,p){var w,C=arguments.length,k=C<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,p);else for(var y=l.length-1;y>=0;y--)(w=l[y])&&(k=(C<3?w(k):C>3?w(s,o,k):w(s,o))||k);return C>3&&k&&Object.defineProperty(s,o,k),k},v=this&&this.__param||function(l,s){return function(o,p){s(o,p,l)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const d=c(3656),_=c(4725),S=c(8460),x=c(844),g=c(2585);let h=a.Viewport=class extends x.Disposable{constructor(l,s,o,p,w,C,k,y){super(),this._viewportElement=l,this._scrollArea=s,this._bufferService=o,this._optionsService=p,this._charSizeService=w,this._renderService=C,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(E=>this._renderDimensions=E)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(E=>this._handleThemeChange(E))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(l){this._viewportElement.style.backgroundColor=l.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(l){if(l)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const l=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==l&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=l),this._refreshAnimationFrame=null}syncScrollArea(l=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(l);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(l)}_handleScroll(l){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const l=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(l*(this._smoothScrollState.target-this._smoothScrollState.origin)),l<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(l,s){const o=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&o<this._lastRecordedBufferHeight)||(l.cancelable&&l.preventDefault(),!1)}handleWheel(l){const s=this._getPixelsScrolled(l);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(l,s))}scrollLines(l){if(l!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const s=l*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:l,suppressScrollEvent:!1})}_getPixelsScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let s=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(l,s){var y;let o,p="";const w=[],C=s??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let E=l;E<C;E++){const T=k.get(E);if(!T)continue;const P=(y=k.get(E+1))==null?void 0:y.isWrapped;if(p+=T.translateToString(!P),!P||E===k.length-1){const O=document.createElement("div");O.textContent=p,w.push(O),p.length>0&&(o=O),p=""}}return{bufferElements:w,cursorElement:o}}getLinesScrolled(l){if(l.deltaY===0||l.shiftKey)return 0;let s=this._applyScrollModifier(l.deltaY,l);return l.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):l.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(l,s){const o=this._optionsService.rawOptions.fastScrollModifier;return o==="alt"&&s.altKey||o==="ctrl"&&s.ctrlKey||o==="shift"&&s.shiftKey?l*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:l*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(l){this._lastTouchY=l.touches[0].pageY}handleTouchMove(l){const s=this._lastTouchY-l.touches[0].pageY;return this._lastTouchY=l.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(l,s))}};a.Viewport=h=f([v(2,g.IBufferService),v(3,g.IOptionsService),v(4,_.ICharSizeService),v(5,_.IRenderService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],h)},3107:function(m,a,c){var f=this&&this.__decorate||function(g,h,l,s){var o,p=arguments.length,w=p<3?h:s===null?s=Object.getOwnPropertyDescriptor(h,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,h,l,s);else for(var C=g.length-1;C>=0;C--)(o=g[C])&&(w=(p<3?o(w):p>3?o(h,l,w):o(h,l))||w);return p>3&&w&&Object.defineProperty(h,l,w),w},v=this&&this.__param||function(g,h){return function(l,s){h(l,s,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const d=c(4725),_=c(844),S=c(2585);let x=a.BufferDecorationRenderer=class extends _.Disposable{constructor(g,h,l,s,o){super(),this._screenElement=g,this._bufferService=h,this._coreBrowserService=l,this._decorationService=s,this._renderService=o,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,_.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){var s;const h=this._coreBrowserService.mainDocument.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((s=g==null?void 0:g.options)==null?void 0:s.layer)==="top"),h.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const l=g.options.x??0;return l&&l>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(g,h),h}_refreshStyle(g){const h=g.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let l=this._decorationElements.get(g);l||(l=this._createElement(g),g.element=l,this._decorationElements.set(g,l),this._container.appendChild(l),g.onDispose(()=>{this._decorationElements.delete(g),l.remove()})),l.style.top=h*this._renderService.dimensions.css.cell.height+"px",l.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(l)}}_refreshXPosition(g,h=g.element){if(!h)return;const l=g.options.x??0;(g.options.anchor||"left")==="right"?h.style.right=l?l*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=l?l*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){var h;(h=this._decorationElements.get(g))==null||h.remove(),this._decorationElements.delete(g),g.dispose()}};a.BufferDecorationRenderer=x=f([v(1,S.IBufferService),v(2,d.ICoreBrowserService),v(3,S.IDecorationService),v(4,d.IRenderService)],x)},5871:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const f of this._zones)if(f.color===c.options.overviewRulerOptions.color&&f.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,c.marker.line))return;if(this._lineAdjacentToZone(f,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(f,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,f){return f>=c.startBufferLine&&f<=c.endBufferLine}_lineAdjacentToZone(c,f,v){return f>=c.startBufferLine-this._linePadding[v||"full"]&&f<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,f){c.startBufferLine=Math.min(c.startBufferLine,f),c.endBufferLine=Math.max(c.endBufferLine,f)}}},5744:function(m,a,c){var f=this&&this.__decorate||function(o,p,w,C){var k,y=arguments.length,E=y<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,w):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,p,w,C);else for(var T=o.length-1;T>=0;T--)(k=o[T])&&(E=(y<3?k(E):y>3?k(p,w,E):k(p,w))||E);return y>3&&E&&Object.defineProperty(p,w,E),E},v=this&&this.__param||function(o,p){return function(w,C){p(w,C,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const d=c(5871),_=c(4725),S=c(844),x=c(2585),g={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0};let s=a.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(o,p,w,C,k,y,E){var P;super(),this._viewportElement=o,this._screenElement=p,this._bufferService=w,this._decorationService=C,this._renderService=k,this._optionsService=y,this._coreBrowserService=E,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(P=this._viewportElement.parentElement)==null||P.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var O;(O=this._canvas)==null||O.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const o=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=o,h.center=p,h.right=o,this._refreshDrawHeightConstants(),l.full=0,l.left=0,l.center=h.left,l.right=h.left+h.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const o=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(o,12),6)*this._coreBrowserService.dpr);g.left=p,g.center=p,g.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const o=this._colorZoneStore.zones;for(const p of o)p.position!=="full"&&this._renderColorZone(p);for(const p of o)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(o){this._ctx.fillStyle=o.color,this._ctx.fillRect(l[o.position||"full"],Math.round((this._canvas.height-1)*(o.startBufferLine/this._bufferService.buffers.active.lines.length)-g[o.position||"full"]/2),h[o.position||"full"],Math.round((this._canvas.height-1)*((o.endBufferLine-o.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[o.position||"full"]))}_queueRefresh(o,p){this._shouldUpdateDimensions=o||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=s=f([v(2,x.IBufferService),v(3,x.IDecorationService),v(4,_.IRenderService),v(5,x.IOptionsService),v(6,_.ICoreBrowserService)],s)},2950:function(m,a,c){var f=this&&this.__decorate||function(g,h,l,s){var o,p=arguments.length,w=p<3?h:s===null?s=Object.getOwnPropertyDescriptor(h,l):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,h,l,s);else for(var C=g.length-1;C>=0;C--)(o=g[C])&&(w=(p<3?o(w):p>3?o(h,l,w):o(h,l))||w);return p>3&&w&&Object.defineProperty(h,l,w),w},v=this&&this.__param||function(g,h){return function(l,s){h(l,s,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const d=c(4725),_=c(2585),S=c(2584);let x=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,h,l,s,o,p){this._textarea=g,this._compositionView=h,this._bufferService=l,this._optionsService=s,this._coreService=o,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let l;this._isSendingComposition=!1,h.start+=this._dataAlreadySent.length,l=this._isComposing?this._textarea.value.substring(h.start,h.end):this._textarea.value.substring(h.start),l.length>0&&this._coreService.triggerDataEvent(l,!0)}},0)}else{this._isSendingComposition=!1;const h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const h=this._textarea.value,l=h.replace(g,"");this._dataAlreadySent=l,h.length>g.length?this._coreService.triggerDataEvent(l,!0):h.length<g.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):h.length===g.length&&h!==g&&this._coreService.triggerDataEvent(h,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),l=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,o=h*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=o+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=l+"px",this._compositionView.style.lineHeight=l+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=o+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=x=f([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,_.ICoreService),v(5,d.IRenderService)],x)},9806:(m,a)=>{function c(f,v,d){const _=d.getBoundingClientRect(),S=f.getComputedStyle(d),x=parseInt(S.getPropertyValue("padding-left")),g=parseInt(S.getPropertyValue("padding-top"));return[v.clientX-_.left-x,v.clientY-_.top-g]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=c,a.getCoords=function(f,v,d,_,S,x,g,h,l){if(!x)return;const s=c(f,v,d);return s?(s[0]=Math.ceil((s[0]+(l?g/2:0))/g),s[1]=Math.ceil(s[1]/h),s[0]=Math.min(Math.max(s[0],1),_+(l?1:0)),s[1]=Math.min(Math.max(s[1],1),S),s):void 0}},9504:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const f=c(2584);function v(h,l,s,o){const p=h-d(h,s),w=l-d(l,s),C=Math.abs(p-w)-function(k,y,E){let T=0;const P=k-d(k,E),O=y-d(y,E);for(let A=0;A<Math.abs(P-O);A++){const j=_(k,y)==="A"?-1:1,z=E.buffer.lines.get(P+j*A);z!=null&&z.isWrapped&&T++}return T}(h,l,s);return g(C,x(_(h,l),o))}function d(h,l){let s=0,o=l.buffer.lines.get(h),p=o==null?void 0:o.isWrapped;for(;p&&h>=0&&h<l.rows;)s++,o=l.buffer.lines.get(--h),p=o==null?void 0:o.isWrapped;return s}function _(h,l){return h>l?"A":"B"}function S(h,l,s,o,p,w){let C=h,k=l,y="";for(;C!==s||k!==o;)C+=p?1:-1,p&&C>w.cols-1?(y+=w.buffer.translateBufferLineToString(k,!1,h,C),C=0,h=0,k++):!p&&C<0&&(y+=w.buffer.translateBufferLineToString(k,!1,0,h+1),C=w.cols-1,h=C,k--);return y+w.buffer.translateBufferLineToString(k,!1,h,C)}function x(h,l){const s=l?"O":"[";return f.C0.ESC+s+h}function g(h,l){h=Math.floor(h);let s="";for(let o=0;o<h;o++)s+=l;return s}a.moveToCellSequence=function(h,l,s,o){const p=s.buffer.x,w=s.buffer.y;if(!s.buffer.hasScrollback)return function(y,E,T,P,O,A){return v(E,P,O,A).length===0?"":g(S(y,E,y,E-d(E,O),!1,O).length,x("D",A))}(p,w,0,l,s,o)+v(w,l,s,o)+function(y,E,T,P,O,A){let j;j=v(E,P,O,A).length>0?P-d(P,O):E;const z=P,U=function(q,H,b,D,B,I){let V;return V=v(b,D,B,I).length>0?D-d(D,B):H,q<b&&V<=D||q>=b&&V<D?"C":"D"}(y,E,T,P,O,A);return g(S(y,j,T,z,U==="C",O).length,x(U,A))}(p,w,h,l,s,o);let C;if(w===l)return C=p>h?"D":"C",g(Math.abs(p-h),x(C,o));C=w>l?"D":"C";const k=Math.abs(w-l);return g(function(y,E){return E.cols-y}(w>l?h:p,s)+(k-1)*s.cols+1+((w>l?p:h)-1),x(C,o))}},1296:function(m,a,c){var f=this&&this.__decorate||function(A,j,z,U){var q,H=arguments.length,b=H<3?j:U===null?U=Object.getOwnPropertyDescriptor(j,z):U;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(A,j,z,U);else for(var D=A.length-1;D>=0;D--)(q=A[D])&&(b=(H<3?q(b):H>3?q(j,z,b):q(j,z))||b);return H>3&&b&&Object.defineProperty(j,z,b),b},v=this&&this.__param||function(A,j){return function(z,U){j(z,U,A)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const d=c(3787),_=c(2550),S=c(2223),x=c(6171),g=c(6052),h=c(4725),l=c(8055),s=c(8460),o=c(844),p=c(2585),w="xterm-dom-renderer-owner-",C="xterm-rows",k="xterm-fg-",y="xterm-bg-",E="xterm-focus",T="xterm-selection";let P=1,O=a.DomRenderer=class extends o.Disposable{constructor(A,j,z,U,q,H,b,D,B,I,V,N,K){super(),this._terminal=A,this._document=j,this._element=z,this._screenElement=U,this._viewportElement=q,this._helperContainer=H,this._linkifier2=b,this._charSizeService=B,this._optionsService=I,this._bufferService=V,this._coreBrowserService=N,this._themeService=K,this._terminalClass=P++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,x.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(W=>this._injectCss(W))),this._injectCss(this._themeService.colors),this._rowFactory=D.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(w+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(W=>this._handleLinkHover(W))),this.register(this._linkifier2.onHideLinkUnderline(W=>this._handleLinkLeave(W))),this.register((0,o.toDisposable)(()=>{this._element.classList.remove(w+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const z of this._rowElements)z.style.width=`${this.dimensions.css.canvas.width}px`,z.style.height=`${this.dimensions.css.cell.height}px`,z.style.lineHeight=`${this.dimensions.css.cell.height}px`,z.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${C} .xterm-dim { color: ${l.color.multiplyOpacity(A.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const z=`blink_underline_${this._terminalClass}`,U=`blink_bar_${this._terminalClass}`,q=`blink_block_${this._terminalClass}`;j+=`@keyframes ${z} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${U} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${q} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,j+=`${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${z} 1s step-end infinite;}${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${C}.${E} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${q} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[H,b]of A.ansi.entries())j+=`${this._terminalSelector} .${k}${H} { color: ${b.css}; }${this._terminalSelector} .${k}${H}.xterm-dim { color: ${l.color.multiplyOpacity(b,.5).css}; }${this._terminalSelector} .${y}${H} { background-color: ${b.css}; }`;j+=`${this._terminalSelector} .${k}${S.INVERTED_DEFAULT_COLOR} { color: ${l.color.opaque(A.background).css}; }${this._terminalSelector} .${k}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${l.color.multiplyOpacity(l.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${y}${S.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,j){for(let z=this._rowElements.length;z<=j;z++){const U=this._document.createElement("div");this._rowContainer.appendChild(U),this._rowElements.push(U)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,j){this._refreshRowElements(A,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(E),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(E),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,j,z){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,j,z),this.renderRows(0,this._bufferService.rows-1),!A||!j)return;this._selectionRenderModel.update(this._terminal,A,j,z);const U=this._selectionRenderModel.viewportStartRow,q=this._selectionRenderModel.viewportEndRow,H=this._selectionRenderModel.viewportCappedStartRow,b=this._selectionRenderModel.viewportCappedEndRow;if(H>=this._bufferService.rows||b<0)return;const D=this._document.createDocumentFragment();if(z){const B=A[0]>j[0];D.appendChild(this._createSelectionElement(H,B?j[0]:A[0],B?A[0]:j[0],b-H+1))}else{const B=U===H?A[0]:0,I=H===q?j[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(H,B,I));const V=b-H-1;if(D.appendChild(this._createSelectionElement(H+1,0,this._bufferService.cols,V)),H!==b){const N=q===b?j[0]:this._bufferService.cols;D.appendChild(this._createSelectionElement(b,0,N))}}this._selectionContainer.appendChild(D)}_createSelectionElement(A,j,z,U=1){const q=this._document.createElement("div"),H=j*this.dimensions.css.cell.width;let b=this.dimensions.css.cell.width*(z-j);return H+b>this.dimensions.css.canvas.width&&(b=this.dimensions.css.canvas.width-H),q.style.height=U*this.dimensions.css.cell.height+"px",q.style.top=A*this.dimensions.css.cell.height+"px",q.style.left=`${H}px`,q.style.width=`${b}px`,q}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,j){const z=this._bufferService.buffer,U=z.ybase+z.y,q=Math.min(z.x,this._bufferService.cols-1),H=this._optionsService.rawOptions.cursorBlink,b=this._optionsService.rawOptions.cursorStyle,D=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=A;B<=j;B++){const I=B+z.ydisp,V=this._rowElements[B],N=z.lines.get(I);if(!V||!N)break;V.replaceChildren(...this._rowFactory.createRow(N,I,I===U,b,D,q,H,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${w}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,j,z,U,q,H){z<0&&(A=0),U<0&&(j=0);const b=this._bufferService.rows-1;z=Math.max(Math.min(z,b),0),U=Math.max(Math.min(U,b),0),q=Math.min(q,this._bufferService.cols);const D=this._bufferService.buffer,B=D.ybase+D.y,I=Math.min(D.x,q-1),V=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,K=this._optionsService.rawOptions.cursorInactiveStyle;for(let W=z;W<=U;++W){const M=W+D.ydisp,L=this._rowElements[W],$=D.lines.get(M);if(!L||!$)break;L.replaceChildren(...this._rowFactory.createRow($,M,M===B,N,K,I,V,this.dimensions.css.cell.width,this._widthCache,H?W===z?A:0:-1,H?(W===U?j:q)-1:-1))}}};a.DomRenderer=O=f([v(7,p.IInstantiationService),v(8,h.ICharSizeService),v(9,p.IOptionsService),v(10,p.IBufferService),v(11,h.ICoreBrowserService),v(12,h.IThemeService)],O)},3787:function(m,a,c){var f=this&&this.__decorate||function(C,k,y,E){var T,P=arguments.length,O=P<3?k:E===null?E=Object.getOwnPropertyDescriptor(k,y):E;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(C,k,y,E);else for(var A=C.length-1;A>=0;A--)(T=C[A])&&(O=(P<3?T(O):P>3?T(k,y,O):T(k,y))||O);return P>3&&O&&Object.defineProperty(k,y,O),O},v=this&&this.__param||function(C,k){return function(y,E){k(y,E,C)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const d=c(2223),_=c(643),S=c(511),x=c(2585),g=c(8055),h=c(4725),l=c(4269),s=c(6171),o=c(3734);let p=a.DomRendererRowFactory=class{constructor(C,k,y,E,T,P,O){this._document=C,this._characterJoinerService=k,this._optionsService=y,this._coreBrowserService=E,this._coreService=T,this._decorationService=P,this._themeService=O,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,k,y){this._selectionStart=C,this._selectionEnd=k,this._columnSelectMode=y}createRow(C,k,y,E,T,P,O,A,j,z,U){const q=[],H=this._characterJoinerService.getJoinedCharacters(k),b=this._themeService.colors;let D,B=C.getNoBgTrimmedLength();y&&B<P+1&&(B=P+1);let I=0,V="",N=0,K=0,W=0,M=!1,L=0,$=!1,F=0;const Y=[],G=z!==-1&&U!==-1;for(let re=0;re<B;re++){C.loadCell(re,this._workCell);let pe=this._workCell.getWidth();if(pe===0)continue;let _e=!1,Me=re,Z=this._workCell;if(H.length>0&&re===H[0][0]){_e=!0;const he=H.shift();Z=new l.JoinedCellData(this._workCell,C.translateToString(!0,he[0],he[1]),he[1]-he[0]),Me=he[1]-1,pe=Z.getWidth()}const Fr=this._isCellInSelection(re,k),cn=y&&re===P,hn=G&&re>=z&&re<=U;let un=!1;this._decorationService.forEachDecorationAtCell(re,k,void 0,he=>{un=!0});let Ii=Z.getChars()||_.WHITESPACE_CELL_CHAR;if(Ii===" "&&(Z.isUnderline()||Z.isOverline())&&(Ii=" "),F=pe*A-j.get(Ii,Z.isBold(),Z.isItalic()),D){if(I&&(Fr&&$||!Fr&&!$&&Z.bg===N)&&(Fr&&$&&b.selectionForeground||Z.fg===K)&&Z.extended.ext===W&&hn===M&&F===L&&!cn&&!_e&&!un){Z.isInvisible()?V+=_.WHITESPACE_CELL_CHAR:V+=Ii,I++;continue}I&&(D.textContent=V),D=this._document.createElement("span"),I=0,V=""}else D=this._document.createElement("span");if(N=Z.bg,K=Z.fg,W=Z.extended.ext,M=hn,L=F,$=Fr,_e&&P>=re&&P<=Me&&(P=re),!this._coreService.isCursorHidden&&cn&&this._coreService.isCursorInitialized){if(Y.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&Y.push("xterm-cursor-blink"),Y.push(E==="bar"?"xterm-cursor-bar":E==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":Y.push("xterm-cursor-outline");break;case"block":Y.push("xterm-cursor-block");break;case"bar":Y.push("xterm-cursor-bar");break;case"underline":Y.push("xterm-cursor-underline")}}if(Z.isBold()&&Y.push("xterm-bold"),Z.isItalic()&&Y.push("xterm-italic"),Z.isDim()&&Y.push("xterm-dim"),V=Z.isInvisible()?_.WHITESPACE_CELL_CHAR:Z.getChars()||_.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(Y.push(`xterm-underline-${Z.extended.underlineStyle}`),V===" "&&(V=" "),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())D.style.textDecorationColor=`rgb(${o.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let he=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&he<8&&(he+=8),D.style.textDecorationColor=b.ansi[he].css}Z.isOverline()&&(Y.push("xterm-overline"),V===" "&&(V=" ")),Z.isStrikethrough()&&Y.push("xterm-strikethrough"),hn&&(D.style.textDecoration="underline");let qe=Z.getFgColor(),zr=Z.getFgColorMode(),ct=Z.getBgColor(),Ur=Z.getBgColorMode();const dn=!!Z.isInverse();if(dn){const he=qe;qe=ct,ct=he;const zu=zr;zr=Ur,Ur=zu}let Lt,Ni,Rt,Wr=!1;switch(this._decorationService.forEachDecorationAtCell(re,k,void 0,he=>{he.options.layer!=="top"&&Wr||(he.backgroundColorRGB&&(Ur=50331648,ct=he.backgroundColorRGB.rgba>>8&16777215,Lt=he.backgroundColorRGB),he.foregroundColorRGB&&(zr=50331648,qe=he.foregroundColorRGB.rgba>>8&16777215,Ni=he.foregroundColorRGB),Wr=he.options.layer==="top")}),!Wr&&Fr&&(Lt=this._coreBrowserService.isFocused?b.selectionBackgroundOpaque:b.selectionInactiveBackgroundOpaque,ct=Lt.rgba>>8&16777215,Ur=50331648,Wr=!0,b.selectionForeground&&(zr=50331648,qe=b.selectionForeground.rgba>>8&16777215,Ni=b.selectionForeground)),Wr&&Y.push("xterm-decoration-top"),Ur){case 16777216:case 33554432:Rt=b.ansi[ct],Y.push(`xterm-bg-${ct}`);break;case 50331648:Rt=g.channels.toColor(ct>>16,ct>>8&255,255&ct),this._addStyle(D,`background-color:#${w((ct>>>0).toString(16),"0",6)}`);break;default:dn?(Rt=b.foreground,Y.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):Rt=b.background}switch(Lt||Z.isDim()&&(Lt=g.color.multiplyOpacity(Rt,.5)),zr){case 16777216:case 33554432:Z.isBold()&&qe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(qe+=8),this._applyMinimumContrast(D,Rt,b.ansi[qe],Z,Lt,void 0)||Y.push(`xterm-fg-${qe}`);break;case 50331648:const he=g.channels.toColor(qe>>16&255,qe>>8&255,255&qe);this._applyMinimumContrast(D,Rt,he,Z,Lt,Ni)||this._addStyle(D,`color:#${w(qe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(D,Rt,b.foreground,Z,Lt,Ni)||dn&&Y.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}Y.length&&(D.className=Y.join(" "),Y.length=0),cn||_e||un?D.textContent=V:I++,F!==this.defaultSpacing&&(D.style.letterSpacing=`${F}px`),q.push(D),re=Me}return D&&I&&(D.textContent=V),q}_applyMinimumContrast(C,k,y,E,T,P){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.treatGlyphAsBackgroundColor)(E.getCode()))return!1;const O=this._getContrastCache(E);let A;if(T||P||(A=O.getColor(k.rgba,y.rgba)),A===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(E.isDim()?2:1);A=g.color.ensureContrastRatio(T||k,P||y,j),O.setColor((T||k).rgba,(P||y).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,k){C.setAttribute("style",`${C.getAttribute("style")||""}${k};`)}_isCellInSelection(C,k){const y=this._selectionStart,E=this._selectionEnd;return!(!y||!E)&&(this._columnSelectMode?y[0]<=E[0]?C>=y[0]&&k>=y[1]&&C<E[0]&&k<=E[1]:C<y[0]&&k>=y[1]&&C>=E[0]&&k<=E[1]:k>y[1]&&k<E[1]||y[1]===E[1]&&k===y[1]&&C>=y[0]&&C<E[0]||y[1]<E[1]&&k===E[1]&&C<E[0]||y[1]<E[1]&&k===y[1]&&C>=y[0])}};function w(C,k,y){for(;C.length<y;)C=k+C;return C}a.DomRendererRowFactory=p=f([v(1,h.ICharacterJoinerService),v(2,x.IOptionsService),v(3,h.ICoreBrowserService),v(4,x.ICoreService),v(5,x.IDecorationService),v(6,h.IThemeService)],p)},2550:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(c,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=c.createElement("span");v.classList.add("xterm-char-measure-element");const d=c.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const _=c.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const S=c.createElement("span");S.classList.add("xterm-char-measure-element"),S.style.fontWeight="bold",S.style.fontStyle="italic",this._measureElements=[v,d,_,S],this._container.appendChild(v),this._container.appendChild(d),this._container.appendChild(_),this._container.appendChild(S),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,f,v,d){c===this._font&&f===this._fontSize&&v===this._weight&&d===this._weightBold||(this._font=c,this._fontSize=f,this._weight=v,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(c,f,v){let d=0;if(!f&&!v&&c.length===1&&(d=c.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const x=this._measure(c,0);return x>0&&(this._flat[d]=x),x}let _=c;f&&(_+="B"),v&&(_+="I");let S=this._holey.get(_);if(S===void 0){let x=0;f&&(x|=1),v&&(x|=2),S=this._measure(c,x),S>0&&this._holey.set(_,S)}return S}_measure(c,f){const v=this._measureElements[f];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const f=c(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(m,a)=>{function c(v){return 57508<=v&&v<=57558}function f(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},a.isPowerlineGlyph=c,a.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},a.isEmoji=f,a.allowRescaling=function(v,d,_,S){return d===1&&_>Math.ceil(1.5*S)&&v!==void 0&&v>255&&!f(v)&&!c(v)&&!function(x){return 57344<=x&&x<=63743}(v)},a.treatGlyphAsBackgroundColor=function(v){return c(v)||function(d){return 9472<=d&&d<=9631}(v)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(v,d,_=0){return(v-(2*Math.round(d)-_))%(2*Math.round(d))}},6052:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,d,_,S=!1){if(this.selectionStart=d,this.selectionEnd=_,!d||!_||d[0]===_[0]&&d[1]===_[1])return void this.clear();const x=v.buffers.active.ydisp,g=d[1]-x,h=_[1]-x,l=Math.max(g,0),s=Math.min(h,v.rows-1);l>=v.rows||s<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=g,this.viewportEndRow=h,this.viewportCappedStartRow=l,this.viewportCappedEndRow=s,this.startCol=d[0],this.endCol=_[0])}isCellSelected(v,d,_){return!!this.hasSelection&&(_-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&_>=this.viewportCappedStartRow&&d<this.endCol&&_<=this.viewportCappedEndRow:d<this.startCol&&_>=this.viewportCappedStartRow&&d>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&d>=this.startCol)}}a.createSelectionRenderModel=function(){return new c}},456:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,f=this.selectionEnd;return!(!c||!f)&&(c[1]>f[1]||c[1]===f[1]&&c[0]>f[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(m,a,c){var f=this&&this.__decorate||function(s,o,p,w){var C,k=arguments.length,y=k<3?o:w===null?w=Object.getOwnPropertyDescriptor(o,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,o,p,w);else for(var E=s.length-1;E>=0;E--)(C=s[E])&&(y=(k<3?C(y):k>3?C(o,p,y):C(o,p))||y);return k>3&&y&&Object.defineProperty(o,p,y),y},v=this&&this.__param||function(s,o){return function(p,w){o(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const d=c(2585),_=c(8460),S=c(844);let x=a.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,o,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new l(this._optionsService))}catch{this._measureStrategy=this.register(new h(s,o,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};a.CharSizeService=x=f([v(2,d.IOptionsService)],x);class g extends S.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(o,p){o!==void 0&&o>0&&p!==void 0&&p>0&&(this._result.width=o,this._result.height=p)}}class h extends g{constructor(o,p,w){super(),this._document=o,this._parentElement=p,this._optionsService=w,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class l extends g{constructor(o){super(),this._optionsService=o,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const p=this._ctx.measureText("W");if(!("width"in p&&"fontBoundingBoxAscent"in p&&"fontBoundingBoxDescent"in p))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const o=this._ctx.measureText("W");return this._validateAndSet(o.width,o.fontBoundingBoxAscent+o.fontBoundingBoxDescent),this._result}}},4269:function(m,a,c){var f=this&&this.__decorate||function(l,s,o,p){var w,C=arguments.length,k=C<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,o):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(l,s,o,p);else for(var y=l.length-1;y>=0;y--)(w=l[y])&&(k=(C<3?w(k):C>3?w(s,o,k):w(s,o))||k);return C>3&&k&&Object.defineProperty(s,o,k),k},v=this&&this.__param||function(l,s){return function(o,p){s(o,p,l)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const d=c(3734),_=c(643),S=c(511),x=c(2585);class g extends d.AttributeData{constructor(s,o,p){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=o,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=g;let h=a.CharacterJoinerService=class Iu{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(s){const o={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(o),o.id}deregister(s){for(let o=0;o<this._characterJoiners.length;o++)if(this._characterJoiners[o].id===s)return this._characterJoiners.splice(o,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];const o=this._bufferService.buffer.lines.get(s);if(!o||o.length===0)return[];const p=[],w=o.translateToString(!0);let C=0,k=0,y=0,E=o.getFg(0),T=o.getBg(0);for(let P=0;P<o.getTrimmedLength();P++)if(o.loadCell(P,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==E||this._workCell.bg!==T){if(P-C>1){const O=this._getJoinedRanges(w,y,k,o,C);for(let A=0;A<O.length;A++)p.push(O[A])}C=P,y=k,E=this._workCell.fg,T=this._workCell.bg}k+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const P=this._getJoinedRanges(w,y,k,o,C);for(let O=0;O<P.length;O++)p.push(P[O])}return p}_getJoinedRanges(s,o,p,w,C){const k=s.substring(o,p);let y=[];try{y=this._characterJoiners[0].handler(k)}catch(E){console.error(E)}for(let E=1;E<this._characterJoiners.length;E++)try{const T=this._characterJoiners[E].handler(k);for(let P=0;P<T.length;P++)Iu._mergeRanges(y,T[P])}catch(T){console.error(T)}return this._stringRangesToCellRanges(y,w,C),y}_stringRangesToCellRanges(s,o,p){let w=0,C=!1,k=0,y=s[w];if(y){for(let E=p;E<this._bufferService.cols;E++){const T=o.getWidth(E),P=o.getString(E).length||_.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!C&&y[0]<=k&&(y[0]=E,C=!0),y[1]<=k){if(y[1]=E,y=s[++w],!y)break;y[0]<=k?(y[0]=E,C=!0):C=!1}k+=P}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(s,o){let p=!1;for(let w=0;w<s.length;w++){const C=s[w];if(p){if(o[1]<=C[0])return s[w-1][1]=o[1],s;if(o[1]<=C[1])return s[w-1][1]=Math.max(o[1],C[1]),s.splice(w,1),s;s.splice(w,1),w--}else{if(o[1]<=C[0])return s.splice(w,0,o),s;if(o[1]<=C[1])return C[0]=Math.min(o[0],C[0]),s;o[0]<C[1]&&(C[0]=Math.min(o[0],C[0]),p=!0)}}return p?s[s.length-1][1]=o[1]:s.push(o),s}};a.CharacterJoinerService=h=f([v(0,x.IBufferService)],h)},5114:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const f=c(844),v=c(8460),d=c(3656);class _ extends f.Disposable{constructor(g,h,l){super(),this._textarea=g,this._window=h,this.mainDocument=l,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new S(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=_;class S extends f.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)==null||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const f=c(844);class v extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const S=this.linkProviders.indexOf(_);S!==-1&&this.linkProviders.splice(S,1)}}}}a.LinkProviderService=v},8934:function(m,a,c){var f=this&&this.__decorate||function(x,g,h,l){var s,o=arguments.length,p=o<3?g:l===null?l=Object.getOwnPropertyDescriptor(g,h):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(x,g,h,l);else for(var w=x.length-1;w>=0;w--)(s=x[w])&&(p=(o<3?s(p):o>3?s(g,h,p):s(g,h))||p);return o>3&&p&&Object.defineProperty(g,h,p),p},v=this&&this.__param||function(x,g){return function(h,l){g(h,l,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const d=c(4725),_=c(9806);let S=a.MouseService=class{constructor(x,g){this._renderService=x,this._charSizeService=g}getCoords(x,g,h,l,s){return(0,_.getCoords)(window,x,g,h,l,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(x,g){const h=(0,_.getCoordsRelativeToElement)(window,x,g);if(this._charSizeService.hasValidSize)return h[0]=Math.min(Math.max(h[0],0),this._renderService.dimensions.css.canvas.width-1),h[1]=Math.min(Math.max(h[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(h[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(h[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(h[0]),y:Math.floor(h[1])}}};a.MouseService=S=f([v(0,d.IRenderService),v(1,d.ICharSizeService)],S)},3230:function(m,a,c){var f=this&&this.__decorate||function(s,o,p,w){var C,k=arguments.length,y=k<3?o:w===null?w=Object.getOwnPropertyDescriptor(o,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,o,p,w);else for(var E=s.length-1;E>=0;E--)(C=s[E])&&(y=(k<3?C(y):k>3?C(o,p,y):C(o,p))||y);return k>3&&y&&Object.defineProperty(o,p,y),y},v=this&&this.__param||function(s,o){return function(p,w){o(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const d=c(6193),_=c(4725),S=c(8460),x=c(844),g=c(7226),h=c(2585);let l=a.RenderService=class extends x.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(s,o,p,w,C,k,y,E){super(),this._rowCount=s,this._charSizeService=w,this._renderer=this.register(new x.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new x.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((T,P)=>this._renderRows(T,P),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(E.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,o),this.register(y.onWindowChange(T=>this._registerIntersectionObserver(T,o)))}_registerIntersectionObserver(s,o){if("IntersectionObserver"in s){const p=new s.IntersectionObserver(w=>this._handleIntersectionChange(w[w.length-1]),{threshold:0});p.observe(o),this._observerDisposable.value=(0,x.toDisposable)(()=>p.disconnect())}}_handleIntersectionChange(s){this._isPaused=s.isIntersecting===void 0?s.intersectionRatio===0:!s.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(s,o,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(s,o,this._rowCount))}_renderRows(s,o){this._renderer.value&&(s=Math.min(s,this._rowCount-1),o=Math.min(o,this._rowCount-1),this._renderer.value.renderRows(s,o),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:s,end:o}),this._onRender.fire({start:s,end:o}),this._isNextRenderRedrawOnly=!0)}resize(s,o){this._rowCount=o,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(s){this._renderer.value=s,this._renderer.value&&(this._renderer.value.onRequestRedraw(o=>this.refreshRows(o.start,o.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(s){return this._renderDebouncer.addRefreshCallback(s)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var s,o;this._renderer.value&&((o=(s=this._renderer.value).clearTextureAtlas)==null||o.call(s),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(s,o){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var p;return(p=this._renderer.value)==null?void 0:p.handleResize(s,o)}):this._renderer.value.handleResize(s,o),this._fullRefresh())}handleCharSizeChanged(){var s;(s=this._renderer.value)==null||s.handleCharSizeChanged()}handleBlur(){var s;(s=this._renderer.value)==null||s.handleBlur()}handleFocus(){var s;(s=this._renderer.value)==null||s.handleFocus()}handleSelectionChanged(s,o,p){var w;this._selectionState.start=s,this._selectionState.end=o,this._selectionState.columnSelectMode=p,(w=this._renderer.value)==null||w.handleSelectionChanged(s,o,p)}handleCursorMove(){var s;(s=this._renderer.value)==null||s.handleCursorMove()}clear(){var s;(s=this._renderer.value)==null||s.clear()}};a.RenderService=l=f([v(2,h.IOptionsService),v(3,_.ICharSizeService),v(4,h.IDecorationService),v(5,h.IBufferService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],l)},9312:function(m,a,c){var f=this&&this.__decorate||function(y,E,T,P){var O,A=arguments.length,j=A<3?E:P===null?P=Object.getOwnPropertyDescriptor(E,T):P;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(y,E,T,P);else for(var z=y.length-1;z>=0;z--)(O=y[z])&&(j=(A<3?O(j):A>3?O(E,T,j):O(E,T))||j);return A>3&&j&&Object.defineProperty(E,T,j),j},v=this&&this.__param||function(y,E){return function(T,P){E(T,P,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const d=c(9806),_=c(9504),S=c(456),x=c(4725),g=c(8460),h=c(844),l=c(6114),s=c(4841),o=c(511),p=c(2585),w=" ",C=new RegExp(w,"g");let k=a.SelectionService=class extends h.Disposable{constructor(y,E,T,P,O,A,j,z,U){super(),this._element=y,this._screenElement=E,this._linkifier=T,this._bufferService=P,this._coreService=O,this._mouseService=A,this._optionsService=j,this._renderService=z,this._coreBrowserService=U,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new o.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=q=>this._handleMouseMove(q),this._mouseUpListener=q=>this._handleMouseUp(q),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(q=>this._handleTrim(q)),this.register(this._bufferService.buffers.onBufferActivate(q=>this._handleBufferActivate(q))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;return!(!y||!E||y[0]===E[0]&&y[1]===E[1])}get selectionText(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd;if(!y||!E)return"";const T=this._bufferService.buffer,P=[];if(this._activeSelectionMode===3){if(y[0]===E[0])return"";const O=y[0]<E[0]?y[0]:E[0],A=y[0]<E[0]?E[0]:y[0];for(let j=y[1];j<=E[1];j++){const z=T.translateBufferLineToString(j,!0,O,A);P.push(z)}}else{const O=y[1]===E[1]?E[0]:void 0;P.push(T.translateBufferLineToString(y[1],!0,y[0],O));for(let A=y[1]+1;A<=E[1]-1;A++){const j=T.lines.get(A),z=T.translateBufferLineToString(A,!0);j!=null&&j.isWrapped?P[P.length-1]+=z:P.push(z)}if(y[1]!==E[1]){const A=T.lines.get(E[1]),j=T.translateBufferLineToString(E[1],!0,0,E[0]);A&&A.isWrapped?P[P.length-1]+=j:P.push(j)}}return P.map(O=>O.replace(C," ")).join(l.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),l.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const E=this._getMouseBufferCoords(y),T=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!!(T&&P&&E)&&this._areCoordsInSelection(E,T,P)}isCellInSelection(y,E){const T=this._model.finalSelectionStart,P=this._model.finalSelectionEnd;return!(!T||!P)&&this._areCoordsInSelection([y,E],T,P)}_areCoordsInSelection(y,E,T){return y[1]>E[1]&&y[1]<T[1]||E[1]===T[1]&&y[1]===E[1]&&y[0]>=E[0]&&y[0]<T[0]||E[1]<T[1]&&y[1]===T[1]&&y[0]<T[0]||E[1]<T[1]&&y[1]===E[1]&&y[0]>=E[0]}_selectWordAtCursor(y,E){var O,A;const T=(A=(O=this._linkifier.currentLink)==null?void 0:O.link)==null?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const P=this._getMouseBufferCoords(y);return!!P&&(this._selectWordAt(P,E),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,E){this._model.clearSelection(),y=Math.max(y,0),E=Math.min(E,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,E],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const E=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(E)return E[0]--,E[1]--,E[1]+=this._bufferService.buffer.ydisp,E}_getMouseEventScrollAmount(y){let E=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return E>=0&&E<=T?0:(E>T&&(E-=T),E=Math.min(Math.max(E,-50),50),E/=50,E/Math.abs(E)+Math.round(14*E))}shouldForceSelection(y){return l.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const E=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);E&&E.length!==this._model.selectionStart[0]&&E.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const E=this._getMouseBufferCoords(y);E&&(this._activeSelectionMode=2,this._selectLineAt(E[1]))}shouldColumnSelect(y){return y.altKey&&!(l.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const E=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const P=T.lines.get(this._model.selectionEnd[1]);P&&P.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}E&&E[0]===this._model.selectionEnd[0]&&E[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const E=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&E<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const P=(0,_.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(P,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,E=this._model.finalSelectionEnd,T=!(!y||!E||y[0]===E[0]&&y[1]===E[1]);T?y&&E&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&E[0]===this._oldSelectionEnd[0]&&E[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,E,T)):this._oldHasSelection&&this._fireOnSelectionChange(y,E,T)}_fireOnSelectionChange(y,E,T){this._oldSelectionStart=y,this._oldSelectionEnd=E,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(E=>this._handleTrim(E))}_convertViewportColToCharacterIndex(y,E){let T=E;for(let P=0;E>=P;P++){const O=y.loadCell(P,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:O>1&&E!==P&&(T+=O-1)}return T}setSelection(y,E,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,E],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,E,T=!0,P=!0){if(y[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,A=O.lines.get(y[1]);if(!A)return;const j=O.translateBufferLineToString(y[1],!1);let z=this._convertViewportColToCharacterIndex(A,y[0]),U=z;const q=y[0]-z;let H=0,b=0,D=0,B=0;if(j.charAt(z)===" "){for(;z>0&&j.charAt(z-1)===" ";)z--;for(;U<j.length&&j.charAt(U+1)===" ";)U++}else{let N=y[0],K=y[0];A.getWidth(N)===0&&(H++,N--),A.getWidth(K)===2&&(b++,K++);const W=A.getString(K).length;for(W>1&&(B+=W-1,U+=W-1);N>0&&z>0&&!this._isCharWordSeparator(A.loadCell(N-1,this._workCell));){A.loadCell(N-1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===0?(H++,N--):M>1&&(D+=M-1,z-=M-1),z--,N--}for(;K<A.length&&U+1<j.length&&!this._isCharWordSeparator(A.loadCell(K+1,this._workCell));){A.loadCell(K+1,this._workCell);const M=this._workCell.getChars().length;this._workCell.getWidth()===2?(b++,K++):M>1&&(B+=M-1,U+=M-1),U++,K++}}U++;let I=z+q-H+D,V=Math.min(this._bufferService.cols,U-z+H+b-D-B);if(E||j.slice(z,U).trim()!==""){if(T&&I===0&&A.getCodePoint(0)!==32){const N=O.lines.get(y[1]-1);if(N&&A.isWrapped&&N.getCodePoint(this._bufferService.cols-1)!==32){const K=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(K){const W=this._bufferService.cols-K.start;I-=W,V+=W}}}if(P&&I+V===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const N=O.lines.get(y[1]+1);if(N!=null&&N.isWrapped&&N.getCodePoint(0)!==32){const K=this._getWordAt([0,y[1]+1],!1,!1,!0);K&&(V+=K.length)}}return{start:I,length:V}}}_selectWordAt(y,E){const T=this._getWordAt(y,E);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[T.start,y[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(y){const E=this._getWordAt(y,!0);if(E){let T=y[1];for(;E.start<0;)E.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;E.start+E.length>this._bufferService.cols;)E.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?E.start:E.start+E.length,T]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const E=this._bufferService.buffer.getWrappedRangeForLine(y),T={start:{x:0,y:E.first},end:{x:this._bufferService.cols-1,y:E.last}};this._model.selectionStart=[0,E.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(T,this._bufferService.cols)}};a.SelectionService=k=f([v(3,p.IBufferService),v(4,p.ICoreService),v(5,x.IMouseService),v(6,p.IOptionsService),v(7,x.IRenderService),v(8,x.ICoreBrowserService)],k)},4725:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const f=c(8343);a.ICharSizeService=(0,f.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),a.IMouseService=(0,f.createDecorator)("MouseService"),a.IRenderService=(0,f.createDecorator)("RenderService"),a.ISelectionService=(0,f.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,f.createDecorator)("ThemeService"),a.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(m,a,c){var f=this&&this.__decorate||function(k,y,E,T){var P,O=arguments.length,A=O<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,E):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(k,y,E,T);else for(var j=k.length-1;j>=0;j--)(P=k[j])&&(A=(O<3?P(A):O>3?P(y,E,A):P(y,E))||A);return O>3&&A&&Object.defineProperty(y,E,A),A},v=this&&this.__param||function(k,y){return function(E,T){y(E,T,k)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const d=c(7239),_=c(8055),S=c(8460),x=c(844),g=c(2585),h=_.css.toColor("#ffffff"),l=_.css.toColor("#000000"),s=_.css.toColor("#ffffff"),o=_.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let E=0;E<216;E++){const T=y[E/36%6|0],P=y[E/6%6|0],O=y[E%6];k.push({css:_.channels.toCss(T,P,O),rgba:_.channels.toRgba(T,P,O)})}for(let E=0;E<24;E++){const T=8+10*E;k.push({css:_.channels.toCss(T,T,T),rgba:_.channels.toRgba(T,T,T)})}return k})());let w=a.ThemeService=class extends x.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:l,cursor:s,cursorAccent:o,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:_.color.blend(l,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:_.color.blend(l,p),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const y=this._colors;if(y.foreground=C(k.foreground,h),y.background=C(k.background,l),y.cursor=C(k.cursor,s),y.cursorAccent=C(k.cursorAccent,o),y.selectionBackgroundTransparent=C(k.selectionBackground,p),y.selectionBackgroundOpaque=_.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=C(k.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=_.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=k.selectionForeground?C(k.selectionForeground,_.NULL_COLOR):void 0,y.selectionForeground===_.NULL_COLOR&&(y.selectionForeground=void 0),_.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=_.color.opacity(y.selectionBackgroundTransparent,.3)),_.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=_.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=a.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=C(k.black,a.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=C(k.red,a.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=C(k.green,a.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=C(k.yellow,a.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=C(k.blue,a.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=C(k.magenta,a.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=C(k.cyan,a.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=C(k.white,a.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=C(k.brightBlack,a.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=C(k.brightRed,a.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=C(k.brightGreen,a.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=C(k.brightYellow,a.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=C(k.brightBlue,a.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=C(k.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=C(k.brightCyan,a.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=C(k.brightWhite,a.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const E=Math.min(y.ansi.length-16,k.extendedAnsi.length);for(let T=0;T<E;T++)y.ansi[T+16]=C(k.extendedAnsi[T],a.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(k,y){if(k!==void 0)try{return _.css.toColor(k)}catch{}return y}a.ThemeService=w=f([v(0,g.IOptionsService)],w)},6349:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const f=c(8460),v=c(844);class d extends v.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const x=new Array(S);for(let g=0;g<Math.min(S,this.length);g++)x[g]=this._array[this._getCyclicIndex(g)];this._array=x,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let x=this._length;x<S;x++)this._array[x]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,x){this._array[this._getCyclicIndex(S)]=x}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,x,...g){if(x){for(let h=S;h<this._length-x;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+x)];this._length-=x,this.onDeleteEmitter.fire({index:S,amount:x})}for(let h=this._length-1;h>=S;h--)this._array[this._getCyclicIndex(h+g.length)]=this._array[this._getCyclicIndex(h)];for(let h=0;h<g.length;h++)this._array[this._getCyclicIndex(S+h)]=g[h];if(g.length&&this.onInsertEmitter.fire({index:S,amount:g.length}),this._length+g.length>this._maxLength){const h=this._length+g.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=g.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,x,g){if(!(x<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let l=x-1;l>=0;l--)this.set(S+l+g,this.get(S+l));const h=S+x+g-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let h=0;h<x;h++)this.set(S+h+g,this.get(S+h))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}a.CircularList=d},1439:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function c(f,v=5){if(typeof f!="object")return f;const d=Array.isArray(f)?[]:{};for(const _ in f)d[_]=v<=1?f[_]:f[_]&&c(f[_],v-1);return d}},8055:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let c=0,f=0,v=0,d=0;var _,S,x,g,h;function l(o){const p=o.toString(16);return p.length<2?"0"+p:p}function s(o,p){return o<p?(p+.05)/(o+.05):(o+.05)/(p+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(o){o.toCss=function(p,w,C,k){return k!==void 0?`#${l(p)}${l(w)}${l(C)}${l(k)}`:`#${l(p)}${l(w)}${l(C)}`},o.toRgba=function(p,w,C,k=255){return(p<<24|w<<16|C<<8|k)>>>0},o.toColor=function(p,w,C,k){return{css:o.toCss(p,w,C,k),rgba:o.toRgba(p,w,C,k)}}}(_||(a.channels=_={})),function(o){function p(w,C){return d=Math.round(255*C),[c,f,v]=h.toChannels(w.rgba),{css:_.toCss(c,f,v,d),rgba:_.toRgba(c,f,v,d)}}o.blend=function(w,C){if(d=(255&C.rgba)/255,d===1)return{css:C.css,rgba:C.rgba};const k=C.rgba>>24&255,y=C.rgba>>16&255,E=C.rgba>>8&255,T=w.rgba>>24&255,P=w.rgba>>16&255,O=w.rgba>>8&255;return c=T+Math.round((k-T)*d),f=P+Math.round((y-P)*d),v=O+Math.round((E-O)*d),{css:_.toCss(c,f,v),rgba:_.toRgba(c,f,v)}},o.isOpaque=function(w){return(255&w.rgba)==255},o.ensureContrastRatio=function(w,C,k){const y=h.ensureContrastRatio(w.rgba,C.rgba,k);if(y)return _.toColor(y>>24&255,y>>16&255,y>>8&255)},o.opaque=function(w){const C=(255|w.rgba)>>>0;return[c,f,v]=h.toChannels(C),{css:_.toCss(c,f,v),rgba:C}},o.opacity=p,o.multiplyOpacity=function(w,C){return d=255&w.rgba,p(w,d*C/255)},o.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(S||(a.color=S={})),function(o){let p,w;try{const C=document.createElement("canvas");C.width=1,C.height=1;const k=C.getContext("2d",{willReadFrequently:!0});k&&(p=k,p.globalCompositeOperation="copy",w=p.createLinearGradient(0,0,1,1))}catch{}o.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return c=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),_.toColor(c,f,v);case 5:return c=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),d=parseInt(C.slice(4,5).repeat(2),16),_.toColor(c,f,v,d);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const k=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return c=parseInt(k[1]),f=parseInt(k[2]),v=parseInt(k[3]),d=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),_.toColor(c,f,v,d);if(!p||!w)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=w,p.fillStyle=C,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[c,f,v,d]=p.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(c,f,v,d),css:C}}}(x||(a.css=x={})),function(o){function p(w,C,k){const y=w/255,E=C/255,T=k/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(E<=.03928?E/12.92:Math.pow((E+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}o.relativeLuminance=function(w){return p(w>>16&255,w>>8&255,255&w)},o.relativeLuminance2=p}(g||(a.rgb=g={})),function(o){function p(C,k,y){const E=C>>24&255,T=C>>16&255,P=C>>8&255;let O=k>>24&255,A=k>>16&255,j=k>>8&255,z=s(g.relativeLuminance2(O,A,j),g.relativeLuminance2(E,T,P));for(;z<y&&(O>0||A>0||j>0);)O-=Math.max(0,Math.ceil(.1*O)),A-=Math.max(0,Math.ceil(.1*A)),j-=Math.max(0,Math.ceil(.1*j)),z=s(g.relativeLuminance2(O,A,j),g.relativeLuminance2(E,T,P));return(O<<24|A<<16|j<<8|255)>>>0}function w(C,k,y){const E=C>>24&255,T=C>>16&255,P=C>>8&255;let O=k>>24&255,A=k>>16&255,j=k>>8&255,z=s(g.relativeLuminance2(O,A,j),g.relativeLuminance2(E,T,P));for(;z<y&&(O<255||A<255||j<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),A=Math.min(255,A+Math.ceil(.1*(255-A))),j=Math.min(255,j+Math.ceil(.1*(255-j))),z=s(g.relativeLuminance2(O,A,j),g.relativeLuminance2(E,T,P));return(O<<24|A<<16|j<<8|255)>>>0}o.blend=function(C,k){if(d=(255&k)/255,d===1)return k;const y=k>>24&255,E=k>>16&255,T=k>>8&255,P=C>>24&255,O=C>>16&255,A=C>>8&255;return c=P+Math.round((y-P)*d),f=O+Math.round((E-O)*d),v=A+Math.round((T-A)*d),_.toRgba(c,f,v)},o.ensureContrastRatio=function(C,k,y){const E=g.relativeLuminance(C>>8),T=g.relativeLuminance(k>>8);if(s(E,T)<y){if(T<E){const A=p(C,k,y),j=s(E,g.relativeLuminance(A>>8));if(j<y){const z=w(C,k,y);return j>s(E,g.relativeLuminance(z>>8))?A:z}return A}const P=w(C,k,y),O=s(E,g.relativeLuminance(P>>8));if(O<y){const A=p(C,k,y);return O>s(E,g.relativeLuminance(A>>8))?P:A}return P}},o.reduceLuminance=p,o.increaseLuminance=w,o.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(h||(a.rgba=h={})),a.toPaddedHex=l,a.contrastRatio=s},8969:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const f=c(844),v=c(2585),d=c(4348),_=c(7866),S=c(744),x=c(7302),g=c(6975),h=c(8460),l=c(1753),s=c(1480),o=c(7994),p=c(9282),w=c(5435),C=c(5981),k=c(2660);let y=!1;class E extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event(P=>{var O;(O=this._onScrollApi)==null||O.fire(P.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(P){for(const O in P)this.optionsService.options[O]=P[O]}constructor(P){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new x.OptionsService(P)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(l.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(o.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((O,A)=>this._inputHandler.parse(O,A))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(P,O){this._writeBuffer.write(P,O)}writeSync(P,O){this._logService.logLevel<=v.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(P,O)}input(P,O=!0){this.coreService.triggerDataEvent(P,O)}resize(P,O){isNaN(P)||isNaN(O)||(P=Math.max(P,S.MINIMUM_COLS),O=Math.max(O,S.MINIMUM_ROWS),this._bufferService.resize(P,O))}scroll(P,O=!1){this._bufferService.scroll(P,O)}scrollLines(P,O,A){this._bufferService.scrollLines(P,O,A)}scrollPages(P){this.scrollLines(P*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(P){const O=P-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(P,O){return this._inputHandler.registerEscHandler(P,O)}registerDcsHandler(P,O){return this._inputHandler.registerDcsHandler(P,O)}registerCsiHandler(P,O){return this._inputHandler.registerCsiHandler(P,O)}registerOscHandler(P,O){return this._inputHandler.registerOscHandler(P,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let P=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?P=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(P=!0),P?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const P=[];P.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),P.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const O of P)O.dispose()})}}}a.CoreTerminal=E},8460:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===c)return void this._listeners.splice(f,1)}}})),this._event}fire(c,f){const v=[];for(let d=0;d<this._listeners.length;d++)v.push(this._listeners[d]);for(let d=0;d<v.length;d++)v[d].call(void 0,c,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(c,f){return c(v=>f.fire(v))},a.runAndSubscribe=function(c,f){return f(void 0),c(v=>f(v))}},5435:function(m,a,c){var f=this&&this.__decorate||function(H,b,D,B){var I,V=arguments.length,N=V<3?b:B===null?B=Object.getOwnPropertyDescriptor(b,D):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(H,b,D,B);else for(var K=H.length-1;K>=0;K--)(I=H[K])&&(N=(V<3?I(N):V>3?I(b,D,N):I(b,D))||N);return V>3&&N&&Object.defineProperty(b,D,N),N},v=this&&this.__param||function(H,b){return function(D,B){b(D,B,H)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const d=c(2584),_=c(7116),S=c(2015),x=c(844),g=c(482),h=c(8437),l=c(8460),s=c(643),o=c(511),p=c(3734),w=c(2585),C=c(1480),k=c(6242),y=c(6351),E=c(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},P=131072;function O(H,b){if(H>24)return b.setWinLines||!1;switch(H){case 1:return!!b.restoreWin;case 2:return!!b.minimizeWin;case 3:return!!b.setWinPosition;case 4:return!!b.setWinSizePixels;case 5:return!!b.raiseWin;case 6:return!!b.lowerWin;case 7:return!!b.refreshWin;case 8:return!!b.setWinSizeChars;case 9:return!!b.maximizeWin;case 10:return!!b.fullscreenWin;case 11:return!!b.getWinState;case 13:return!!b.getWinPosition;case 14:return!!b.getWinSizePixels;case 15:return!!b.getScreenSizePixels;case 16:return!!b.getCellSizePixels;case 18:return!!b.getWinSizeChars;case 19:return!!b.getScreenSizeChars;case 20:return!!b.getIconTitle;case 21:return!!b.getWinTitle;case 22:return!!b.pushTitle;case 23:return!!b.popTitle;case 24:return!!b.setWinLines}return!1}var A;(function(H){H[H.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",H[H.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(a.WindowsOptionsReportType=A={}));let j=0;class z extends x.Disposable{getAttrData(){return this._curAttrData}constructor(b,D,B,I,V,N,K,W,M=new S.EscapeSequenceParser){super(),this._bufferService=b,this._charsetService=D,this._coreService=B,this._logService=I,this._optionsService=V,this._oscLinkService=N,this._coreMouseService=K,this._unicodeService=W,this._parser=M,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new o.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new l.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new l.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new l.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new l.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new l.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new l.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new l.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new l.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new l.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new l.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new l.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new l.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new U(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(L=>this._activeBuffer=L.activeBuffer)),this._parser.setCsiHandlerFallback((L,$)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(L),params:$.toArray()})}),this._parser.setEscHandlerFallback(L=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(L)})}),this._parser.setExecuteHandlerFallback(L=>{this._logService.debug("Unknown EXECUTE code: ",{code:L})}),this._parser.setOscHandlerFallback((L,$,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:L,action:$,data:F})}),this._parser.setDcsHandlerFallback((L,$,F)=>{$==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(L),action:$,payload:F})}),this._parser.setPrintHandler((L,$,F)=>this.print(L,$,F)),this._parser.registerCsiHandler({final:"@"},L=>this.insertChars(L)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},L=>this.scrollLeft(L)),this._parser.registerCsiHandler({final:"A"},L=>this.cursorUp(L)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},L=>this.scrollRight(L)),this._parser.registerCsiHandler({final:"B"},L=>this.cursorDown(L)),this._parser.registerCsiHandler({final:"C"},L=>this.cursorForward(L)),this._parser.registerCsiHandler({final:"D"},L=>this.cursorBackward(L)),this._parser.registerCsiHandler({final:"E"},L=>this.cursorNextLine(L)),this._parser.registerCsiHandler({final:"F"},L=>this.cursorPrecedingLine(L)),this._parser.registerCsiHandler({final:"G"},L=>this.cursorCharAbsolute(L)),this._parser.registerCsiHandler({final:"H"},L=>this.cursorPosition(L)),this._parser.registerCsiHandler({final:"I"},L=>this.cursorForwardTab(L)),this._parser.registerCsiHandler({final:"J"},L=>this.eraseInDisplay(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},L=>this.eraseInDisplay(L,!0)),this._parser.registerCsiHandler({final:"K"},L=>this.eraseInLine(L,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},L=>this.eraseInLine(L,!0)),this._parser.registerCsiHandler({final:"L"},L=>this.insertLines(L)),this._parser.registerCsiHandler({final:"M"},L=>this.deleteLines(L)),this._parser.registerCsiHandler({final:"P"},L=>this.deleteChars(L)),this._parser.registerCsiHandler({final:"S"},L=>this.scrollUp(L)),this._parser.registerCsiHandler({final:"T"},L=>this.scrollDown(L)),this._parser.registerCsiHandler({final:"X"},L=>this.eraseChars(L)),this._parser.registerCsiHandler({final:"Z"},L=>this.cursorBackwardTab(L)),this._parser.registerCsiHandler({final:"`"},L=>this.charPosAbsolute(L)),this._parser.registerCsiHandler({final:"a"},L=>this.hPositionRelative(L)),this._parser.registerCsiHandler({final:"b"},L=>this.repeatPrecedingCharacter(L)),this._parser.registerCsiHandler({final:"c"},L=>this.sendDeviceAttributesPrimary(L)),this._parser.registerCsiHandler({prefix:">",final:"c"},L=>this.sendDeviceAttributesSecondary(L)),this._parser.registerCsiHandler({final:"d"},L=>this.linePosAbsolute(L)),this._parser.registerCsiHandler({final:"e"},L=>this.vPositionRelative(L)),this._parser.registerCsiHandler({final:"f"},L=>this.hVPosition(L)),this._parser.registerCsiHandler({final:"g"},L=>this.tabClear(L)),this._parser.registerCsiHandler({final:"h"},L=>this.setMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"h"},L=>this.setModePrivate(L)),this._parser.registerCsiHandler({final:"l"},L=>this.resetMode(L)),this._parser.registerCsiHandler({prefix:"?",final:"l"},L=>this.resetModePrivate(L)),this._parser.registerCsiHandler({final:"m"},L=>this.charAttributes(L)),this._parser.registerCsiHandler({final:"n"},L=>this.deviceStatus(L)),this._parser.registerCsiHandler({prefix:"?",final:"n"},L=>this.deviceStatusPrivate(L)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},L=>this.softReset(L)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},L=>this.setCursorStyle(L)),this._parser.registerCsiHandler({final:"r"},L=>this.setScrollRegion(L)),this._parser.registerCsiHandler({final:"s"},L=>this.saveCursor(L)),this._parser.registerCsiHandler({final:"t"},L=>this.windowOptions(L)),this._parser.registerCsiHandler({final:"u"},L=>this.restoreCursor(L)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},L=>this.insertColumns(L)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},L=>this.deleteColumns(L)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},L=>this.selectProtected(L)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},L=>this.requestMode(L,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},L=>this.requestMode(L,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(L=>(this.setTitle(L),this.setIconName(L),!0))),this._parser.registerOscHandler(1,new k.OscHandler(L=>this.setIconName(L))),this._parser.registerOscHandler(2,new k.OscHandler(L=>this.setTitle(L))),this._parser.registerOscHandler(4,new k.OscHandler(L=>this.setOrReportIndexedColor(L))),this._parser.registerOscHandler(8,new k.OscHandler(L=>this.setHyperlink(L))),this._parser.registerOscHandler(10,new k.OscHandler(L=>this.setOrReportFgColor(L))),this._parser.registerOscHandler(11,new k.OscHandler(L=>this.setOrReportBgColor(L))),this._parser.registerOscHandler(12,new k.OscHandler(L=>this.setOrReportCursorColor(L))),this._parser.registerOscHandler(104,new k.OscHandler(L=>this.restoreIndexedColor(L))),this._parser.registerOscHandler(110,new k.OscHandler(L=>this.restoreFgColor(L))),this._parser.registerOscHandler(111,new k.OscHandler(L=>this.restoreBgColor(L))),this._parser.registerOscHandler(112,new k.OscHandler(L=>this.restoreCursorColor(L))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const L in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:L},()=>this.selectCharset("("+L)),this._parser.registerEscHandler({intermediates:")",final:L},()=>this.selectCharset(")"+L)),this._parser.registerEscHandler({intermediates:"*",final:L},()=>this.selectCharset("*"+L)),this._parser.registerEscHandler({intermediates:"+",final:L},()=>this.selectCharset("+"+L)),this._parser.registerEscHandler({intermediates:"-",final:L},()=>this.selectCharset("-"+L)),this._parser.registerEscHandler({intermediates:".",final:L},()=>this.selectCharset("."+L)),this._parser.registerEscHandler({intermediates:"/",final:L},()=>this.selectCharset("/"+L));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(L=>(this._logService.error("Parsing error: ",L),L)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((L,$)=>this.requestStatusString(L,$)))}_preserveStack(b,D,B,I){this._parseStack.paused=!0,this._parseStack.cursorStartX=b,this._parseStack.cursorStartY=D,this._parseStack.decodedLength=B,this._parseStack.position=I}_logSlowResolvingAsync(b){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([b,new Promise((D,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(D=>{if(D!=="#SLOW_TIMEOUT")throw D;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(b,D){let B,I=this._activeBuffer.x,V=this._activeBuffer.y,N=0;const K=this._parseStack.paused;if(K){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,D))return this._logSlowResolvingAsync(B),B;I=this._parseStack.cursorStartX,V=this._parseStack.cursorStartY,this._parseStack.paused=!1,b.length>P&&(N=this._parseStack.position+P)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof b=="string"?` "${b}"`:` "${Array.prototype.map.call(b,L=>String.fromCharCode(L)).join("")}"`),typeof b=="string"?b.split("").map(L=>L.charCodeAt(0)):b),this._parseBuffer.length<b.length&&this._parseBuffer.length<P&&(this._parseBuffer=new Uint32Array(Math.min(b.length,P))),K||this._dirtyRowTracker.clearRange(),b.length>P)for(let L=N;L<b.length;L+=P){const $=L+P<b.length?L+P:b.length,F=typeof b=="string"?this._stringDecoder.decode(b.substring(L,$),this._parseBuffer):this._utf8Decoder.decode(b.subarray(L,$),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,F))return this._preserveStack(I,V,F,L),this._logSlowResolvingAsync(B),B}else if(!K){const L=typeof b=="string"?this._stringDecoder.decode(b,this._parseBuffer):this._utf8Decoder.decode(b,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,L))return this._preserveStack(I,V,L,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===I&&this._activeBuffer.y===V||this._onCursorMove.fire();const W=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),M=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);M<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(M,this._bufferService.rows-1),Math.min(W,this._bufferService.rows-1))}print(b,D,B){let I,V;const N=this._charsetService.charset,K=this._optionsService.rawOptions.screenReaderMode,W=this._bufferService.cols,M=this._coreService.decPrivateModes.wraparound,L=this._coreService.modes.insertMode,$=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-D>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodepoint(this._activeBuffer.x-1,0,1,$);let Y=this._parser.precedingJoinState;for(let G=D;G<B;++G){if(I=b[G],I<127&&N){const Me=N[String.fromCharCode(I)];Me&&(I=Me.charCodeAt(0))}const re=this._unicodeService.charProperties(I,Y);V=C.UnicodeService.extractWidth(re);const pe=C.UnicodeService.extractShouldJoin(re),_e=pe?C.UnicodeService.extractWidth(Y):0;if(Y=re,K&&this._onA11yChar.fire((0,g.stringFromCodePoint)(I)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+V-_e>W){if(M){const Me=F;let Z=this._activeBuffer.x-_e;for(this._activeBuffer.x=_e,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),_e>0&&F instanceof h.BufferLine&&F.copyCellsFrom(Me,Z,0,_e,!1);Z<W;)Me.setCellFromCodepoint(Z++,0,1,$)}else if(this._activeBuffer.x=W-1,V===2)continue}if(pe&&this._activeBuffer.x){const Me=F.getWidth(this._activeBuffer.x-1)?1:2;F.addCodepointToCell(this._activeBuffer.x-Me,I,V);for(let Z=V-_e;--Z>=0;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}else if(L&&(F.insertCells(this._activeBuffer.x,V-_e,this._activeBuffer.getNullCell($)),F.getWidth(W-1)===2&&F.setCellFromCodepoint(W-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,$)),F.setCellFromCodepoint(this._activeBuffer.x++,I,V,$),V>0)for(;--V;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}this._parser.precedingJoinState=Y,this._activeBuffer.x<W&&B-D>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodepoint(this._activeBuffer.x,0,1,$),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(b,D){return b.final!=="t"||b.prefix||b.intermediates?this._parser.registerCsiHandler(b,D):this._parser.registerCsiHandler(b,B=>!O(B.params[0],this._optionsService.rawOptions.windowOptions)||D(B))}registerDcsHandler(b,D){return this._parser.registerDcsHandler(b,new y.DcsHandler(D))}registerEscHandler(b,D){return this._parser.registerEscHandler(b,D)}registerOscHandler(b,D){return this._parser.registerOscHandler(b,new k.OscHandler(D))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var b;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((b=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&b.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);D.hasWidth(this._activeBuffer.x)&&!D.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const b=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-b),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(b=this._bufferService.cols-1){this._activeBuffer.x=Math.min(b,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(b,D){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=b,this._activeBuffer.y=this._activeBuffer.scrollTop+D):(this._activeBuffer.x=b,this._activeBuffer.y=D),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(b,D){this._restrictCursor(),this._setCursor(this._activeBuffer.x+b,this._activeBuffer.y+D)}cursorUp(b){const D=this._activeBuffer.y-this._activeBuffer.scrollTop;return D>=0?this._moveCursor(0,-Math.min(D,b.params[0]||1)):this._moveCursor(0,-(b.params[0]||1)),!0}cursorDown(b){const D=this._activeBuffer.scrollBottom-this._activeBuffer.y;return D>=0?this._moveCursor(0,Math.min(D,b.params[0]||1)):this._moveCursor(0,b.params[0]||1),!0}cursorForward(b){return this._moveCursor(b.params[0]||1,0),!0}cursorBackward(b){return this._moveCursor(-(b.params[0]||1),0),!0}cursorNextLine(b){return this.cursorDown(b),this._activeBuffer.x=0,!0}cursorPrecedingLine(b){return this.cursorUp(b),this._activeBuffer.x=0,!0}cursorCharAbsolute(b){return this._setCursor((b.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(b){return this._setCursor(b.length>=2?(b.params[1]||1)-1:0,(b.params[0]||1)-1),!0}charPosAbsolute(b){return this._setCursor((b.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(b){return this._moveCursor(b.params[0]||1,0),!0}linePosAbsolute(b){return this._setCursor(this._activeBuffer.x,(b.params[0]||1)-1),!0}vPositionRelative(b){return this._moveCursor(0,b.params[0]||1),!0}hVPosition(b){return this.cursorPosition(b),!0}tabClear(b){const D=b.params[0];return D===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:D===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(b){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=b.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(b){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let D=b.params[0]||1;for(;D--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(b){const D=b.params[0];return D===1&&(this._curAttrData.bg|=536870912),D!==2&&D!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(b,D,B,I=!1,V=!1){const N=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);N.replaceCells(D,B,this._activeBuffer.getNullCell(this._eraseAttrData()),V),I&&(N.isWrapped=!1)}_resetBufferLine(b,D=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+b);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),D),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+b),B.isWrapped=!1)}eraseInDisplay(b,D=!1){let B;switch(this._restrictCursor(this._bufferService.cols),b.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);B<this._bufferService.rows;B++)this._resetBufferLine(B,D);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,D),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,D);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,D);this._dirtyRowTracker.markDirty(0);break;case 3:const I=this._activeBuffer.lines.length-this._bufferService.rows;I>0&&(this._activeBuffer.lines.trimStart(I),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-I,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-I,0),this._onScroll.fire(0))}return!0}eraseInLine(b,D=!1){switch(this._restrictCursor(this._bufferService.cols),b.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,D);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,D);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,D)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(b){this._restrictCursor();let D=b.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,V=this._bufferService.rows-1+this._activeBuffer.ybase-I+1;for(;D--;)this._activeBuffer.lines.splice(V-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(b){this._restrictCursor();let D=b.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let I;for(I=this._bufferService.rows-1-this._activeBuffer.scrollBottom,I=this._bufferService.rows-1+this._activeBuffer.ybase-I;D--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(I,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(b){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.insertCells(this._activeBuffer.x,b.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(b){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.deleteCells(this._activeBuffer.x,b.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(b){let D=b.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(b){let D=b.params[0]||1;for(;D--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=b.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=b.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(0,D,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=b.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.insertCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(b){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const D=b.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const I=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);I.deleteCells(this._activeBuffer.x,D,this._activeBuffer.getNullCell(this._eraseAttrData())),I.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(b){this._restrictCursor();const D=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return D&&(D.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(b.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(b){const D=this._parser.precedingJoinState;if(!D)return!0;const B=b.params[0]||1,I=C.UnicodeService.extractWidth(D),V=this._activeBuffer.x-I,N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(V),K=new Uint32Array(N.length*B);let W=0;for(let L=0;L<N.length;){const $=N.codePointAt(L)||0;K[W++]=$,L+=$>65535?2:1}let M=W;for(let L=1;L<B;++L)K.copyWithin(M,0,W),M+=W;return this.print(K,0,M),!0}sendDeviceAttributesPrimary(b){return b.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(b){return b.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(b.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(b){return(this._optionsService.rawOptions.termName+"").indexOf(b)===0}setMode(b){for(let D=0;D<b.length;D++)switch(b.params[D]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(b){for(let D=0;D<b.length;D++)switch(b.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(b){for(let D=0;D<b.length;D++)switch(b.params[D]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(b){for(let D=0;D<b.length;D++)switch(b.params[D]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),b.params[D]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(b,D){const B=this._coreService.decPrivateModes,{activeProtocol:I,activeEncoding:V}=this._coreMouseService,N=this._coreService,{buffers:K,cols:W}=this._bufferService,{active:M,alt:L}=K,$=this._optionsService.rawOptions,F=pe=>pe?1:2,Y=b.params[0];return G=Y,re=D?Y===2?4:Y===4?F(N.modes.insertMode):Y===12?3:Y===20?F($.convertEol):0:Y===1?F(B.applicationCursorKeys):Y===3?$.windowOptions.setWinLines?W===80?2:W===132?1:0:0:Y===6?F(B.origin):Y===7?F(B.wraparound):Y===8?3:Y===9?F(I==="X10"):Y===12?F($.cursorBlink):Y===25?F(!N.isCursorHidden):Y===45?F(B.reverseWraparound):Y===66?F(B.applicationKeypad):Y===67?4:Y===1e3?F(I==="VT200"):Y===1002?F(I==="DRAG"):Y===1003?F(I==="ANY"):Y===1004?F(B.sendFocus):Y===1005?4:Y===1006?F(V==="SGR"):Y===1015?4:Y===1016?F(V==="SGR_PIXELS"):Y===1048?1:Y===47||Y===1047||Y===1049?F(M===L):Y===2004?F(B.bracketedPasteMode):0,N.triggerDataEvent(`${d.C0.ESC}[${D?"":"?"}${G};${re}$y`),!0;var G,re}_updateAttrColor(b,D,B,I,V){return D===2?(b|=50331648,b&=-16777216,b|=p.AttributeData.fromColorRGB([B,I,V])):D===5&&(b&=-50331904,b|=33554432|255&B),b}_extractColor(b,D,B){const I=[0,0,-1,0,0,0];let V=0,N=0;do{if(I[N+V]=b.params[D+N],b.hasSubParams(D+N)){const K=b.getSubParams(D+N);let W=0;do I[1]===5&&(V=1),I[N+W+1+V]=K[W];while(++W<K.length&&W+N+1+V<I.length);break}if(I[1]===5&&N+V>=2||I[1]===2&&N+V>=5)break;I[1]&&(V=1)}while(++N+D<b.length&&N+V<I.length);for(let K=2;K<I.length;++K)I[K]===-1&&(I[K]=0);switch(I[0]){case 38:B.fg=this._updateAttrColor(B.fg,I[1],I[3],I[4],I[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,I[1],I[3],I[4],I[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,I[1],I[3],I[4],I[5])}return N}_processUnderline(b,D){D.extended=D.extended.clone(),(!~b||b>5)&&(b=1),D.extended.underlineStyle=b,D.fg|=268435456,b===0&&(D.fg&=-268435457),D.updateExtended()}_processSGR0(b){b.fg=h.DEFAULT_ATTR_DATA.fg,b.bg=h.DEFAULT_ATTR_DATA.bg,b.extended=b.extended.clone(),b.extended.underlineStyle=0,b.extended.underlineColor&=-67108864,b.updateExtended()}charAttributes(b){if(b.length===1&&b.params[0]===0)return this._processSGR0(this._curAttrData),!0;const D=b.length;let B;const I=this._curAttrData;for(let V=0;V<D;V++)B=b.params[V],B>=30&&B<=37?(I.fg&=-50331904,I.fg|=16777216|B-30):B>=40&&B<=47?(I.bg&=-50331904,I.bg|=16777216|B-40):B>=90&&B<=97?(I.fg&=-50331904,I.fg|=16777224|B-90):B>=100&&B<=107?(I.bg&=-50331904,I.bg|=16777224|B-100):B===0?this._processSGR0(I):B===1?I.fg|=134217728:B===3?I.bg|=67108864:B===4?(I.fg|=268435456,this._processUnderline(b.hasSubParams(V)?b.getSubParams(V)[0]:1,I)):B===5?I.fg|=536870912:B===7?I.fg|=67108864:B===8?I.fg|=1073741824:B===9?I.fg|=2147483648:B===2?I.bg|=134217728:B===21?this._processUnderline(2,I):B===22?(I.fg&=-134217729,I.bg&=-134217729):B===23?I.bg&=-67108865:B===24?(I.fg&=-268435457,this._processUnderline(0,I)):B===25?I.fg&=-536870913:B===27?I.fg&=-67108865:B===28?I.fg&=-1073741825:B===29?I.fg&=2147483647:B===39?(I.fg&=-67108864,I.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):B===49?(I.bg&=-67108864,I.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?V+=this._extractColor(b,V,I):B===53?I.bg|=1073741824:B===55?I.bg&=-1073741825:B===59?(I.extended=I.extended.clone(),I.extended.underlineColor=-1,I.updateExtended()):B===100?(I.fg&=-67108864,I.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,I.bg&=-67108864,I.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(b){switch(b.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const D=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${D};${B}R`)}return!0}deviceStatusPrivate(b){if(b.params[0]===6){const D=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${D};${B}R`)}return!0}softReset(b){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(b){const D=b.params[0]||1;switch(D){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=D%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(b){const D=b.params[0]||1;let B;return(b.length<2||(B=b.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>D&&(this._activeBuffer.scrollTop=D-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(b){if(!O(b.params[0],this._optionsService.rawOptions.windowOptions))return!0;const D=b.length>1?b.params[1]:0;switch(b.params[0]){case 14:D!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:D!==0&&D!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),D!==0&&D!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:D!==0&&D!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),D!==0&&D!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(b){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(b){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(b){return this._windowTitle=b,this._onTitleChange.fire(b),!0}setIconName(b){return this._iconName=b,!0}setOrReportIndexedColor(b){const D=[],B=b.split(";");for(;B.length>1;){const I=B.shift(),V=B.shift();if(/^\d+$/.exec(I)){const N=parseInt(I);if(q(N))if(V==="?")D.push({type:0,index:N});else{const K=(0,E.parseColor)(V);K&&D.push({type:1,index:N,color:K})}}}return D.length&&this._onColor.fire(D),!0}setHyperlink(b){const D=b.split(";");return!(D.length<2)&&(D[1]?this._createHyperlink(D[0],D[1]):!D[0]&&this._finishHyperlink())}_createHyperlink(b,D){this._getCurrentLinkId()&&this._finishHyperlink();const B=b.split(":");let I;const V=B.findIndex(N=>N.startsWith("id="));return V!==-1&&(I=B[V].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:I,uri:D}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(b,D){const B=b.split(";");for(let I=0;I<B.length&&!(D>=this._specialColors.length);++I,++D)if(B[I]==="?")this._onColor.fire([{type:0,index:this._specialColors[D]}]);else{const V=(0,E.parseColor)(B[I]);V&&this._onColor.fire([{type:1,index:this._specialColors[D],color:V}])}return!0}setOrReportFgColor(b){return this._setOrReportSpecialColor(b,0)}setOrReportBgColor(b){return this._setOrReportSpecialColor(b,1)}setOrReportCursorColor(b){return this._setOrReportSpecialColor(b,2)}restoreIndexedColor(b){if(!b)return this._onColor.fire([{type:2}]),!0;const D=[],B=b.split(";");for(let I=0;I<B.length;++I)if(/^\d+$/.exec(B[I])){const V=parseInt(B[I]);q(V)&&D.push({type:2,index:V})}return D.length&&this._onColor.fire(D),!0}restoreFgColor(b){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(b){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(b){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(b){return b.length!==2?(this.selectDefaultCharset(),!0):(b[0]==="/"||this._charsetService.setgCharset(T[b[0]],_.CHARSETS[b[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const b=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,b,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(b){return this._charsetService.setgLevel(b),!0}screenAlignmentPattern(){const b=new o.CellData;b.content=4194373,b.fg=this._curAttrData.fg,b.bg=this._curAttrData.bg,this._setCursor(0,0);for(let D=0;D<this._bufferService.rows;++D){const B=this._activeBuffer.ybase+this._activeBuffer.y+D,I=this._activeBuffer.lines.get(B);I&&(I.fill(b),I.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(b,D){const B=this._bufferService.buffer,I=this._optionsService.rawOptions;return(V=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${V}${d.C0.ESC}\\`),!0))(b==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:b==='"p'?'P1$r61;1"p':b==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:b==="m"?"P1$r0m":b===" q"?`P1$r${{block:2,underline:4,bar:6}[I.cursorStyle]-(I.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(b,D){this._dirtyRowTracker.markRangeDirty(b,D)}}a.InputHandler=z;let U=class{constructor(H){this._bufferService=H,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(H){H<this.start?this.start=H:H>this.end&&(this.end=H)}markRangeDirty(H,b){H>b&&(j=H,H=b,b=j),H<this.start&&(this.start=H),b>this.end&&(this.end=b)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function q(H){return 0<=H&&H<256}U=f([v(0,w.IBufferService)],U)},844:(m,a)=>{function c(f){for(const v of f)v.dispose();f.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const v=this._disposables.indexOf(f);v!==-1&&this._disposables.splice(v,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var v;this._isDisposed||f===this._value||((v=this._value)==null||v.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},a.toDisposable=function(f){return{dispose:f}},a.disposeArray=c,a.getDisposeArrayDisposable=function(f){return{dispose:()=>c(f)}}},1505:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,d,_){this._data[v]||(this._data[v]={}),this._data[v][d]=_}get(v,d){return this._data[v]?this._data[v][d]:void 0}clear(){this._data={}}}a.TwoKeyMap=c,a.FourKeyMap=class{constructor(){this._data=new c}set(f,v,d,_,S){this._data.get(f,v)||this._data.set(f,v,new c),this._data.get(f,v).set(d,_,S)}get(f,v,d,_){var S;return(S=this._data.get(f,v))==null?void 0:S.get(d,_)}clear(){this._data.clear()}}},6114:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof process<"u"&&"title"in process;const c=a.isNode?"node":navigator.userAgent,f=a.isNode?"node":navigator.platform;a.isFirefox=c.includes("Firefox"),a.isLegacyEdge=c.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(c),a.getSafariVersion=function(){if(!a.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),a.isIpad=f==="iPad",a.isIphone=f==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),a.isLinux=f.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(c)},6106:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let c=0;a.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(c=this._search(this._getKey(f)),this._array.splice(c,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const v=this._getKey(f);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===f)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(f){if(this._array.length!==0&&(c=this._search(f),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===f))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===f)}forEachByKey(f,v){if(this._array.length!==0&&(c=this._search(f),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===f))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===f)}values(){return[...this._array].values()}_search(f){let v=0,d=this._array.length-1;for(;d>=v;){let _=v+d>>1;const S=this._getKey(this._array[_]);if(S>f)d=_-1;else{if(!(S<f)){for(;_>0&&this._getKey(this._array[_-1])===f;)_--;return _}v=_+1}}return v}}},7226:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const f=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let x=0,g=0,h=S.timeRemaining(),l=0;for(;this._i<this._tasks.length;){if(x=Date.now(),this._tasks[this._i]()||this._i++,x=Math.max(1,Date.now()-x),g=Math.max(x,g),l=S.timeRemaining(),1.5*g>l)return h-x<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(h-x))}ms`),void this._start();h=l}this.clear()}}class d extends v{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const x=Date.now()+S;return{timeRemaining:()=>Math.max(0,x-Date.now())}}}a.PriorityTaskQueue=d,a.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:d,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const f=c(643);a.updateWindowsModeWrappedState=function(v){const d=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),_=d==null?void 0:d.get(v.cols-1),S=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);S&&_&&(S.isWrapped=_[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&_[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new c;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=c;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,_=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=_}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=f},9092:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const f=c(6349),v=c(7226),d=c(3734),_=c(8437),S=c(4634),x=c(511),g=c(643),h=c(4863),l=c(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(s,o,p){this._hasScrollback=s,this._optionsService=o,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=l.DEFAULT_CHARSET,this.markers=[],this._nullCell=x.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=x.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,o){return new _.BufferLine(this._bufferService.cols,this.getNullCell(s),o)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;const o=s+this._optionsService.rawOptions.scrollback;return o>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:o}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=_.DEFAULT_ATTR_DATA);let o=this._rows;for(;o--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,o){const p=this.getNullCell(_.DEFAULT_ATTR_DATA);let w=0;const C=this._getCorrectBufferLength(o);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<s)for(let y=0;y<this.lines.length;y++)w+=+this.lines.get(y).resize(s,p);let k=0;if(this._rows<o)for(let y=this._rows;y<o;y++)this.lines.length<o+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(s,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(s,p)));else for(let y=this._rows;y>o;y--)this.lines.length>o+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const y=this.lines.length-C;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=C}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,o-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=o-1,this._isReflowEnabled&&(this._reflow(s,o),this._cols>s))for(let k=0;k<this.lines.length;k++)w+=+this.lines.get(k).resize(s,p);this._cols=s,this._rows=o,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let o=0;for(;this._memoryCleanupPosition<this.lines.length;)if(o+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),o>100)return!0;return s}get _isReflowEnabled(){const s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,o){this._cols!==s&&(s>this._cols?this._reflowLarger(s,o):this._reflowSmaller(s,o))}_reflowLarger(s,o){const p=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(p.length>0){const w=(0,S.reflowLargerCreateNewLayout)(this.lines,p);(0,S.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(s,o,w.countRemoved)}}_reflowLargerAdjustViewport(s,o,p){const w=this.getNullCell(_.DEFAULT_ATTR_DATA);let C=p;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<o&&this.lines.push(new _.BufferLine(s,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(s,o){const p=this.getNullCell(_.DEFAULT_ATTR_DATA),w=[];let C=0;for(let k=this.lines.length-1;k>=0;k--){let y=this.lines.get(k);if(!y||!y.isWrapped&&y.getTrimmedLength()<=s)continue;const E=[y];for(;y.isWrapped&&k>0;)y=this.lines.get(--k),E.unshift(y);const T=this.ybase+this.y;if(T>=k&&T<k+E.length)continue;const P=E[E.length-1].getTrimmedLength(),O=(0,S.reflowSmallerGetNewLineLengths)(E,this._cols,s),A=O.length-E.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const z=[];for(let B=0;B<A;B++){const I=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);z.push(I)}z.length>0&&(w.push({start:k+E.length+C,newLines:z}),C+=z.length),E.push(...z);let U=O.length-1,q=O[U];q===0&&(U--,q=O[U]);let H=E.length-A-1,b=P;for(;H>=0;){const B=Math.min(b,q);if(E[U]===void 0)break;if(E[U].copyCellsFrom(E[H],b-B,q-B,B,!0),q-=B,q===0&&(U--,q=O[U]),b-=B,b===0){H--;const I=Math.max(H,0);b=(0,S.getWrappedLineTrimmedLength)(E,I,this._cols)}}for(let B=0;B<E.length;B++)O[B]<s&&E[B].setCell(O[B],p);let D=A-j;for(;D-- >0;)this.ybase===0?this.y<o-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-o&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+o-1)}if(w.length>0){const k=[],y=[];for(let U=0;U<this.lines.length;U++)y.push(this.lines.get(U));const E=this.lines.length;let T=E-1,P=0,O=w[P];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let U=Math.min(this.lines.maxLength-1,E+C-1);U>=0;U--)if(O&&O.start>T+A){for(let q=O.newLines.length-1;q>=0;q--)this.lines.set(U--,O.newLines[q]);U++,k.push({index:T+1,amount:O.newLines.length}),A+=O.newLines.length,O=w[++P]}else this.lines.set(U,y[T--]);let j=0;for(let U=k.length-1;U>=0;U--)k[U].index+=j,this.lines.onInsertEmitter.fire(k[U]),j+=k[U].amount;const z=Math.max(0,E+C-this.lines.maxLength);z>0&&this.lines.onTrimEmitter.fire(z)}}translateBufferLineToString(s,o,p=0,w){const C=this.lines.get(s);return C?C.translateToString(o,p,w):""}getWrappedRangeForLine(s){let o=s,p=s;for(;o>0&&this.lines.get(o).isWrapped;)o--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:o,last:p}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let o=0;o<this.markers.length;o++)this.markers[o].line===s&&(this.markers[o].dispose(),this.markers.splice(o--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){const o=new h.Marker(s);return this.markers.push(o),o.register(this.lines.onTrim(p=>{o.line-=p,o.line<0&&o.dispose()})),o.register(this.lines.onInsert(p=>{o.line>=p.index&&(o.line+=p.amount)})),o.register(this.lines.onDelete(p=>{o.line>=p.index&&o.line<p.index+p.amount&&o.dispose(),o.line>p.index&&(o.line-=p.amount)})),o.register(o.onDispose(()=>this._removeMarker(o))),o}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const f=c(3734),v=c(511),d=c(643),_=c(482);a.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let S=0;class x{constructor(h,l,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);const o=l||v.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let p=0;p<h;++p)this.setCell(p,o);this.length=h}get(h){const l=this._data[3*h+0],s=2097151&l;return[this._data[3*h+1],2097152&l?this._combined[h]:s?(0,_.stringFromCodePoint)(s):"",l>>22,2097152&l?this._combined[h].charCodeAt(this._combined[h].length-1):s]}set(h,l){this._data[3*h+1]=l[d.CHAR_DATA_ATTR_INDEX],l[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=l[1],this._data[3*h+0]=2097152|h|l[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=l[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|l[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(h){return this._data[3*h+0]>>22}hasWidth(h){return 12582912&this._data[3*h+0]}getFg(h){return this._data[3*h+1]}getBg(h){return this._data[3*h+2]}hasContent(h){return 4194303&this._data[3*h+0]}getCodePoint(h){const l=this._data[3*h+0];return 2097152&l?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&l}isCombined(h){return 2097152&this._data[3*h+0]}getString(h){const l=this._data[3*h+0];return 2097152&l?this._combined[h]:2097151&l?(0,_.stringFromCodePoint)(2097151&l):""}isProtected(h){return 536870912&this._data[3*h+2]}loadCell(h,l){return S=3*h,l.content=this._data[S+0],l.fg=this._data[S+1],l.bg=this._data[S+2],2097152&l.content&&(l.combinedData=this._combined[h]),268435456&l.bg&&(l.extended=this._extendedAttrs[h]),l}setCell(h,l){2097152&l.content&&(this._combined[h]=l.combinedData),268435456&l.bg&&(this._extendedAttrs[h]=l.extended),this._data[3*h+0]=l.content,this._data[3*h+1]=l.fg,this._data[3*h+2]=l.bg}setCellFromCodepoint(h,l,s,o){268435456&o.bg&&(this._extendedAttrs[h]=o.extended),this._data[3*h+0]=l|s<<22,this._data[3*h+1]=o.fg,this._data[3*h+2]=o.bg}addCodepointToCell(h,l,s){let o=this._data[3*h+0];2097152&o?this._combined[h]+=(0,_.stringFromCodePoint)(l):2097151&o?(this._combined[h]=(0,_.stringFromCodePoint)(2097151&o)+(0,_.stringFromCodePoint)(l),o&=-2097152,o|=2097152):o=l|4194304,s&&(o&=-12582913,o|=s<<22),this._data[3*h+0]=o}insertCells(h,l,s){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,s),l<this.length-h){const o=new v.CellData;for(let p=this.length-h-l-1;p>=0;--p)this.setCell(h+l+p,this.loadCell(h+p,o));for(let p=0;p<l;++p)this.setCell(h+p,s)}else for(let o=h;o<this.length;++o)this.setCell(o,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(h,l,s){if(h%=this.length,l<this.length-h){const o=new v.CellData;for(let p=0;p<this.length-h-l;++p)this.setCell(h+p,this.loadCell(h+l+p,o));for(let p=this.length-l;p<this.length;++p)this.setCell(p,s)}else for(let o=h;o<this.length;++o)this.setCell(o,s);h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,s),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodepoint(h,0,1,s)}replaceCells(h,l,s,o=!1){if(o)for(h&&this.getWidth(h-1)===2&&!this.isProtected(h-1)&&this.setCellFromCodepoint(h-1,0,1,s),l<this.length&&this.getWidth(l-1)===2&&!this.isProtected(l)&&this.setCellFromCodepoint(l,0,1,s);h<l&&h<this.length;)this.isProtected(h)||this.setCell(h,s),h++;else for(h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,s),l<this.length&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l,0,1,s);h<l&&h<this.length;)this.setCell(h++,s)}resize(h,l){if(h===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const s=3*h;if(h>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{const o=new Uint32Array(s);o.set(this._data),this._data=o}for(let o=this.length;o<h;++o)this.setCell(o,l)}else{this._data=this._data.subarray(0,s);const o=Object.keys(this._combined);for(let w=0;w<o.length;w++){const C=parseInt(o[w],10);C>=h&&delete this._combined[C]}const p=Object.keys(this._extendedAttrs);for(let w=0;w<p.length;w++){const C=parseInt(p[w],10);C>=h&&delete this._extendedAttrs[C]}}return this.length=h,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const h=new Uint32Array(this._data.length);return h.set(this._data),this._data=h,1}return 0}fill(h,l=!1){if(l)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,h);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,h)}}copyFrom(h){this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={};for(const l in h._combined)this._combined[l]=h._combined[l];this._extendedAttrs={};for(const l in h._extendedAttrs)this._extendedAttrs[l]=h._extendedAttrs[l];this.isWrapped=h.isWrapped}clone(){const h=new x(0);h._data=new Uint32Array(this._data),h.length=this.length;for(const l in this._combined)h._combined[l]=this._combined[l];for(const l in this._extendedAttrs)h._extendedAttrs[l]=this._extendedAttrs[l];return h.isWrapped=this.isWrapped,h}getTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0}getNoBgTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0]||50331648&this._data[3*h+2])return h+(this._data[3*h+0]>>22);return 0}copyCellsFrom(h,l,s,o,p){const w=h._data;if(p)for(let k=o-1;k>=0;k--){for(let y=0;y<3;y++)this._data[3*(s+k)+y]=w[3*(l+k)+y];268435456&w[3*(l+k)+2]&&(this._extendedAttrs[s+k]=h._extendedAttrs[l+k])}else for(let k=0;k<o;k++){for(let y=0;y<3;y++)this._data[3*(s+k)+y]=w[3*(l+k)+y];268435456&w[3*(l+k)+2]&&(this._extendedAttrs[s+k]=h._extendedAttrs[l+k])}const C=Object.keys(h._combined);for(let k=0;k<C.length;k++){const y=parseInt(C[k],10);y>=l&&(this._combined[y-l+s]=h._combined[y])}}translateToString(h,l,s,o){l=l??0,s=s??this.length,h&&(s=Math.min(s,this.getTrimmedLength())),o&&(o.length=0);let p="";for(;l<s;){const w=this._data[3*l+0],C=2097151&w,k=2097152&w?this._combined[l]:C?(0,_.stringFromCodePoint)(C):d.WHITESPACE_CELL_CHAR;if(p+=k,o)for(let y=0;y<k.length;++y)o.push(l);l+=w>>22||1}return o&&o.push(l),p}}a.BufferLine=x},4841:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(c,f){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return f*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(m,a)=>{function c(f,v,d){if(v===f.length-1)return f[v].getTrimmedLength();const _=!f[v].hasContent(d-1)&&f[v].getWidth(d-1)===1,S=f[v+1].getWidth(0)===2;return _&&S?d-1:d}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(f,v,d,_,S){const x=[];for(let g=0;g<f.length-1;g++){let h=g,l=f.get(++h);if(!l.isWrapped)continue;const s=[f.get(g)];for(;h<f.length&&l.isWrapped;)s.push(l),l=f.get(++h);if(_>=g&&_<h){g+=s.length-1;continue}let o=0,p=c(s,o,v),w=1,C=0;for(;w<s.length;){const y=c(s,w,v),E=y-C,T=d-p,P=Math.min(E,T);s[o].copyCellsFrom(s[w],C,p,P,!1),p+=P,p===d&&(o++,p=0),C+=P,C===y&&(w++,C=0),p===0&&o!==0&&s[o-1].getWidth(d-1)===2&&(s[o].copyCellsFrom(s[o-1],d-1,p++,1,!1),s[o-1].setCell(d-1,S))}s[o].replaceCells(p,d,S);let k=0;for(let y=s.length-1;y>0&&(y>o||s[y].getTrimmedLength()===0);y--)k++;k>0&&(x.push(g+s.length-k),x.push(k)),g+=s.length-1}return x},a.reflowLargerCreateNewLayout=function(f,v){const d=[];let _=0,S=v[_],x=0;for(let g=0;g<f.length;g++)if(S===g){const h=v[++_];f.onDeleteEmitter.fire({index:g-x,amount:h}),g+=h-1,x+=h,S=v[++_]}else d.push(g);return{layout:d,countRemoved:x}},a.reflowLargerApplyNewLayout=function(f,v){const d=[];for(let _=0;_<v.length;_++)d.push(f.get(v[_]));for(let _=0;_<d.length;_++)f.set(_,d[_]);f.length=v.length},a.reflowSmallerGetNewLineLengths=function(f,v,d){const _=[],S=f.map((l,s)=>c(f,s,v)).reduce((l,s)=>l+s);let x=0,g=0,h=0;for(;h<S;){if(S-h<d){_.push(S-h);break}x+=d;const l=c(f,g,v);x>l&&(x-=l,g++);const s=f[g].getWidth(x-1)===2;s&&x--;const o=s?d-1:d;_.push(o),h+=o}return _},a.getWrappedLineTrimmedLength=c},5295:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const f=c(8460),v=c(844),d=c(9092);class _ extends v.Disposable{constructor(x,g){super(),this._optionsService=x,this._bufferService=g,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(x){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(x),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(x,g){this._normal.resize(x,g),this._alt.resize(x,g),this.setupTabStops(x)}setupTabStops(x){this._normal.setupTabStops(x),this._alt.setupTabStops(x)}}a.BufferSet=_},511:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const f=c(482),v=c(643),d=c(3734);class _ extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(x){const g=new _;return g.setFromCharData(x),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(x){this.fg=x[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(x[v.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(x[v.CHAR_DATA_CHAR_INDEX].length===2){const h=x[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){const l=x[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=l&&l<=57343?this.content=1024*(h-55296)+l-56320+65536|x[v.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=x[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|x[v.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=x[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|x[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=_},643:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const f=c(8460),v=c(844);class d{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}a.Marker=d,d._nextId=1},7116:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},a.CHARSETS.A={"#":"£"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},a.CHARSETS.C=a.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},a.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},a.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},a.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},a.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},a.CHARSETS.E=a.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},a.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},a.CHARSETS.H=a.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},a.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(m,a)=>{var c,f,v;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(c||(a.C0=c={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(f||(a.C1=f={})),function(d){d.ST=`${c.ESC}\\`}(v||(a.C1_ESCAPED=v={}))},7399:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const f=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(d,_,S,x){const g={type:0,cancel:!1,key:void 0},h=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?g.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?g.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?g.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(g.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:g.key=d.ctrlKey?"\b":f.C0.DEL,d.altKey&&(g.key=f.C0.ESC+g.key);break;case 9:if(d.shiftKey){g.key=f.C0.ESC+"[Z";break}g.key=f.C0.HT,g.cancel=!0;break;case 13:g.key=d.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,g.cancel=!0;break;case 27:g.key=f.C0.ESC,d.altKey&&(g.key=f.C0.ESC+f.C0.ESC),g.cancel=!0;break;case 37:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"D",g.key===f.C0.ESC+"[1;3D"&&(g.key=f.C0.ESC+(S?"b":"[1;5D"))):g.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"C",g.key===f.C0.ESC+"[1;3C"&&(g.key=f.C0.ESC+(S?"f":"[1;5C"))):g.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"A",S||g.key!==f.C0.ESC+"[1;3A"||(g.key=f.C0.ESC+"[1;5A")):g.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"B",S||g.key!==f.C0.ESC+"[1;3B"||(g.key=f.C0.ESC+"[1;5B")):g.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(g.key=f.C0.ESC+"[2~");break;case 46:g.key=h?f.C0.ESC+"[3;"+(h+1)+"~":f.C0.ESC+"[3~";break;case 36:g.key=h?f.C0.ESC+"[1;"+(h+1)+"H":_?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:g.key=h?f.C0.ESC+"[1;"+(h+1)+"F":_?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:d.shiftKey?g.type=2:d.ctrlKey?g.key=f.C0.ESC+"[5;"+(h+1)+"~":g.key=f.C0.ESC+"[5~";break;case 34:d.shiftKey?g.type=3:d.ctrlKey?g.key=f.C0.ESC+"[6;"+(h+1)+"~":g.key=f.C0.ESC+"[6~";break;case 112:g.key=h?f.C0.ESC+"[1;"+(h+1)+"P":f.C0.ESC+"OP";break;case 113:g.key=h?f.C0.ESC+"[1;"+(h+1)+"Q":f.C0.ESC+"OQ";break;case 114:g.key=h?f.C0.ESC+"[1;"+(h+1)+"R":f.C0.ESC+"OR";break;case 115:g.key=h?f.C0.ESC+"[1;"+(h+1)+"S":f.C0.ESC+"OS";break;case 116:g.key=h?f.C0.ESC+"[15;"+(h+1)+"~":f.C0.ESC+"[15~";break;case 117:g.key=h?f.C0.ESC+"[17;"+(h+1)+"~":f.C0.ESC+"[17~";break;case 118:g.key=h?f.C0.ESC+"[18;"+(h+1)+"~":f.C0.ESC+"[18~";break;case 119:g.key=h?f.C0.ESC+"[19;"+(h+1)+"~":f.C0.ESC+"[19~";break;case 120:g.key=h?f.C0.ESC+"[20;"+(h+1)+"~":f.C0.ESC+"[20~";break;case 121:g.key=h?f.C0.ESC+"[21;"+(h+1)+"~":f.C0.ESC+"[21~";break;case 122:g.key=h?f.C0.ESC+"[23;"+(h+1)+"~":f.C0.ESC+"[23~";break;case 123:g.key=h?f.C0.ESC+"[24;"+(h+1)+"~":f.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(S&&!x||!d.altKey||d.metaKey)!S||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?g.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(g.key=f.C0.US),d.key==="@"&&(g.key=f.C0.NUL)):d.keyCode===65&&(g.type=1);else{const l=v[d.keyCode],s=l==null?void 0:l[d.shiftKey?1:0];if(s)g.key=f.C0.ESC+s;else if(d.keyCode>=65&&d.keyCode<=90){const o=d.ctrlKey?d.keyCode-64:d.keyCode+32;let p=String.fromCharCode(o);d.shiftKey&&(p=p.toUpperCase()),g.key=f.C0.ESC+p}else if(d.keyCode===32)g.key=f.C0.ESC+(d.ctrlKey?f.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let o=d.code.slice(3,4);d.shiftKey||(o=o.toLowerCase()),g.key=f.C0.ESC+o,g.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?g.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?g.key=f.C0.NUL:d.keyCode>=51&&d.keyCode<=55?g.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?g.key=f.C0.DEL:d.keyCode===219?g.key=f.C0.ESC:d.keyCode===220?g.key=f.C0.FS:d.keyCode===221&&(g.key=f.C0.GS)}return g}},482:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},a.utf32ToString=function(c,f=0,v=c.length){let d="";for(let _=f;_<v;++_){let S=c[_];S>65535?(S-=65536,d+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):d+=String.fromCharCode(S)}return d},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,f){const v=c.length;if(!v)return 0;let d=0,_=0;if(this._interim){const S=c.charCodeAt(_++);56320<=S&&S<=57343?f[d++]=1024*(this._interim-55296)+S-56320+65536:(f[d++]=this._interim,f[d++]=S),this._interim=0}for(let S=_;S<v;++S){const x=c.charCodeAt(S);if(55296<=x&&x<=56319){if(++S>=v)return this._interim=x,d;const g=c.charCodeAt(S);56320<=g&&g<=57343?f[d++]=1024*(x-55296)+g-56320+65536:(f[d++]=x,f[d++]=g)}else x!==65279&&(f[d++]=x)}return d}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,f){const v=c.length;if(!v)return 0;let d,_,S,x,g=0,h=0,l=0;if(this.interim[0]){let p=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let C,k=0;for(;(C=63&this.interim[++k])&&k<4;)w<<=6,w|=C;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,E=y-k;for(;l<E;){if(l>=v)return 0;if(C=c[l++],(192&C)!=128){l--,p=!0;break}this.interim[k++]=C,w<<=6,w|=63&C}p||(y===2?w<128?l--:f[g++]=w:y===3?w<2048||w>=55296&&w<=57343||w===65279||(f[g++]=w):w<65536||w>1114111||(f[g++]=w)),this.interim.fill(0)}const s=v-4;let o=l;for(;o<v;){for(;!(!(o<s)||128&(d=c[o])||128&(_=c[o+1])||128&(S=c[o+2])||128&(x=c[o+3]));)f[g++]=d,f[g++]=_,f[g++]=S,f[g++]=x,o+=4;if(d=c[o++],d<128)f[g++]=d;else if((224&d)==192){if(o>=v)return this.interim[0]=d,g;if(_=c[o++],(192&_)!=128){o--;continue}if(h=(31&d)<<6|63&_,h<128){o--;continue}f[g++]=h}else if((240&d)==224){if(o>=v)return this.interim[0]=d,g;if(_=c[o++],(192&_)!=128){o--;continue}if(o>=v)return this.interim[0]=d,this.interim[1]=_,g;if(S=c[o++],(192&S)!=128){o--;continue}if(h=(15&d)<<12|(63&_)<<6|63&S,h<2048||h>=55296&&h<=57343||h===65279)continue;f[g++]=h}else if((248&d)==240){if(o>=v)return this.interim[0]=d,g;if(_=c[o++],(192&_)!=128){o--;continue}if(o>=v)return this.interim[0]=d,this.interim[1]=_,g;if(S=c[o++],(192&S)!=128){o--;continue}if(o>=v)return this.interim[0]=d,this.interim[1]=_,this.interim[2]=S,g;if(x=c[o++],(192&x)!=128){o--;continue}if(h=(7&d)<<18|(63&_)<<12|(63&S)<<6|63&x,h<65536||h>1114111)continue;f[g++]=h}}return g}}},225:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const f=c(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;a.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let S=0;S<v.length;++S)_.fill(0,v[S][0],v[S][1]+1)}}wcwidth(S){return S<32?0:S<127?1:S<65536?_[S]:function(x,g){let h,l=0,s=g.length-1;if(x<g[0][0]||x>g[s][1])return!1;for(;s>=l;)if(h=l+s>>1,x>g[h][1])l=h+1;else{if(!(x<g[h][0]))return!0;s=h-1}return!1}(S,d)?0:S>=131072&&S<=196605||S>=196608&&S<=262141?2:1}charProperties(S,x){let g=this.wcwidth(S),h=g===0&&x!==0;if(h){const l=f.UnicodeService.extractWidth(x);l===0?h=!1:l>g&&(g=l)}return f.UnicodeService.createPropertyValue(0,g,h)}}},5981:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const f=c(8460),v=c(844);class d extends v.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,x){if(x!==void 0&&this._syncCalls>x)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const h=this._callbacks.shift();h&&h()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,x){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(x),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(x)}_innerWrite(S=0,x=!0){const g=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const h=this._writeBuffer[this._bufferOffset],l=this._action(h,x);if(l){const o=p=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(g,p);return void l.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(o)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=d},5941:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function v(d,_){const S=d.toString(16),x=S.length<2?"0"+S:S;switch(_){case 4:return S[0];case 8:return x;case 12:return(x+x).slice(0,3);default:return x+x}}a.parseColor=function(d){if(!d)return;let _=d.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const S=c.exec(_);if(S){const x=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/x*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/x*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/x*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),f.exec(_)&&[3,6,9,12].includes(_.length))){const S=_.length/3,x=[0,0,0];for(let g=0;g<3;++g){const h=parseInt(_.slice(S*g,S*g+S),16);x[g]=S===1?h<<4:S===2?h:S===3?h>>4:h>>8}return x}},a.toRgbString=function(d,_=16){const[S,x,g]=d;return`rgb:${v(S,_)}/${v(x,_)}/${v(g,_)}`}},5770:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const f=c(482),v=c(8742),d=c(5770),_=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(x,g){this._handlers[x]===void 0&&(this._handlers[x]=[]);const h=this._handlers[x];return h.push(g),{dispose:()=>{const l=h.indexOf(g);l!==-1&&h.splice(l,1)}}}clearHandler(x){this._handlers[x]&&delete this._handlers[x]}setHandlerFallback(x){this._handlerFb=x}reset(){if(this._active.length)for(let x=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;x>=0;--x)this._active[x].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(x,g){if(this.reset(),this._ident=x,this._active=this._handlers[x]||_,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(x,g,h){if(this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].put(x,g,h);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(x,g,h))}unhook(x,g=!0){if(this._active.length){let h=!1,l=this._active.length-1,s=!1;if(this._stack.paused&&(l=this._stack.loopPosition-1,h=g,s=this._stack.fallThrough,this._stack.paused=!1),!s&&h===!1){for(;l>=0&&(h=this._active[l].unhook(x),h!==!0);l--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!1,h;l--}for(;l>=0;l--)if(h=this._active[l].unhook(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=l,this._stack.fallThrough=!0,h}else this._handlerFb(this._ident,"UNHOOK",x);this._active=_,this._ident=0}};const S=new v.Params;S.addParam(0),a.DcsHandler=class{constructor(x){this._handler=x,this._data="",this._params=S,this._hitLimit=!1}hook(x){this._params=x.length>1||x.params[0]?x.clone():S,this._data="",this._hitLimit=!1}put(x,g,h){this._hitLimit||(this._data+=(0,f.utf32ToString)(x,g,h),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(x){let g=!1;if(this._hitLimit)g=!1;else if(x&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(h=>(this._params=S,this._data="",this._hitLimit=!1,h));return this._params=S,this._data="",this._hitLimit=!1,g}}},2015:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const f=c(844),v=c(8742),d=c(6242),_=c(6351);class S{constructor(l){this.table=new Uint8Array(l)}setDefault(l,s){this.table.fill(l<<4|s)}add(l,s,o,p){this.table[s<<8|l]=o<<4|p}addMany(l,s,o,p){for(let w=0;w<l.length;w++)this.table[s<<8|l[w]]=o<<4|p}}a.TransitionTable=S;const x=160;a.VT500_TRANSITION_TABLE=function(){const h=new S(4095),l=Array.apply(null,Array(256)).map((k,y)=>y),s=(k,y)=>l.slice(k,y),o=s(32,127),p=s(0,24);p.push(25),p.push.apply(p,s(28,32));const w=s(0,14);let C;for(C in h.setDefault(1,0),h.addMany(o,0,2,0),w)h.addMany([24,26,153,154],C,3,0),h.addMany(s(128,144),C,3,0),h.addMany(s(144,152),C,3,0),h.add(156,C,0,0),h.add(27,C,11,1),h.add(157,C,4,8),h.addMany([152,158,159],C,0,7),h.add(155,C,11,3),h.add(144,C,11,9);return h.addMany(p,0,3,0),h.addMany(p,1,3,1),h.add(127,1,0,1),h.addMany(p,8,0,8),h.addMany(p,3,3,3),h.add(127,3,0,3),h.addMany(p,4,3,4),h.add(127,4,0,4),h.addMany(p,6,3,6),h.addMany(p,5,3,5),h.add(127,5,0,5),h.addMany(p,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(o,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(s(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(o,7,0,7),h.addMany(p,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(s(64,127),3,7,0),h.addMany(s(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(s(48,60),4,8,4),h.addMany(s(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(s(32,64),6,0,6),h.add(127,6,0,6),h.addMany(s(64,127),6,0,0),h.addMany(s(32,48),3,9,5),h.addMany(s(32,48),5,9,5),h.addMany(s(48,64),5,0,6),h.addMany(s(64,127),5,7,0),h.addMany(s(32,48),4,9,5),h.addMany(s(32,48),1,9,2),h.addMany(s(32,48),2,9,2),h.addMany(s(48,127),2,10,0),h.addMany(s(48,80),1,10,0),h.addMany(s(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(s(96,127),1,10,0),h.add(80,1,11,9),h.addMany(p,9,0,9),h.add(127,9,0,9),h.addMany(s(28,32),9,0,9),h.addMany(s(32,48),9,9,12),h.addMany(s(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(p,11,0,11),h.addMany(s(32,128),11,0,11),h.addMany(s(28,32),11,0,11),h.addMany(p,10,0,10),h.add(127,10,0,10),h.addMany(s(28,32),10,0,10),h.addMany(s(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(s(32,48),10,9,12),h.addMany(p,12,0,12),h.add(127,12,0,12),h.addMany(s(28,32),12,0,12),h.addMany(s(32,48),12,9,12),h.addMany(s(48,64),12,0,11),h.addMany(s(64,127),12,12,13),h.addMany(s(64,127),10,12,13),h.addMany(s(64,127),9,12,13),h.addMany(p,13,13,13),h.addMany(o,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(x,0,2,0),h.add(x,8,5,8),h.add(x,6,0,6),h.add(x,11,0,11),h.add(x,13,13,13),h}();class g extends f.Disposable{constructor(l=a.VT500_TRANSITION_TABLE){super(),this._transitions=l,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(s,o,p)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,o)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(l,s=[64,126]){let o=0;if(l.prefix){if(l.prefix.length>1)throw new Error("only one byte as prefix supported");if(o=l.prefix.charCodeAt(0),o&&60>o||o>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(l.intermediates){if(l.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<l.intermediates.length;++w){const C=l.intermediates.charCodeAt(w);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");o<<=8,o|=C}}if(l.final.length!==1)throw new Error("final must be a single byte");const p=l.final.charCodeAt(0);if(s[0]>p||p>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return o<<=8,o|=p,o}identToString(l){const s=[];for(;l;)s.push(String.fromCharCode(255&l)),l>>=8;return s.reverse().join("")}setPrintHandler(l){this._printHandler=l}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(l,s){const o=this._identifier(l,[48,126]);this._escHandlers[o]===void 0&&(this._escHandlers[o]=[]);const p=this._escHandlers[o];return p.push(s),{dispose:()=>{const w=p.indexOf(s);w!==-1&&p.splice(w,1)}}}clearEscHandler(l){this._escHandlers[this._identifier(l,[48,126])]&&delete this._escHandlers[this._identifier(l,[48,126])]}setEscHandlerFallback(l){this._escHandlerFb=l}setExecuteHandler(l,s){this._executeHandlers[l.charCodeAt(0)]=s}clearExecuteHandler(l){this._executeHandlers[l.charCodeAt(0)]&&delete this._executeHandlers[l.charCodeAt(0)]}setExecuteHandlerFallback(l){this._executeHandlerFb=l}registerCsiHandler(l,s){const o=this._identifier(l);this._csiHandlers[o]===void 0&&(this._csiHandlers[o]=[]);const p=this._csiHandlers[o];return p.push(s),{dispose:()=>{const w=p.indexOf(s);w!==-1&&p.splice(w,1)}}}clearCsiHandler(l){this._csiHandlers[this._identifier(l)]&&delete this._csiHandlers[this._identifier(l)]}setCsiHandlerFallback(l){this._csiHandlerFb=l}registerDcsHandler(l,s){return this._dcsParser.registerHandler(this._identifier(l),s)}clearDcsHandler(l){this._dcsParser.clearHandler(this._identifier(l))}setDcsHandlerFallback(l){this._dcsParser.setHandlerFallback(l)}registerOscHandler(l,s){return this._oscParser.registerHandler(l,s)}clearOscHandler(l){this._oscParser.clearHandler(l)}setOscHandlerFallback(l){this._oscParser.setHandlerFallback(l)}setErrorHandler(l){this._errorHandler=l}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(l,s,o,p,w){this._parseStack.state=l,this._parseStack.handlers=s,this._parseStack.handlerPos=o,this._parseStack.transition=p,this._parseStack.chunkPos=w}parse(l,s,o){let p,w=0,C=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(o===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let E=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(o===!1&&E>-1){for(;E>=0&&(p=y[E](this._params),p!==!0);E--)if(p instanceof Promise)return this._parseStack.handlerPos=E,p}this._parseStack.handlers=[];break;case 4:if(o===!1&&E>-1){for(;E>=0&&(p=y[E](),p!==!0);E--)if(p instanceof Promise)return this._parseStack.handlerPos=E,p}this._parseStack.handlers=[];break;case 6:if(w=l[this._parseStack.chunkPos],p=this._dcsParser.unhook(w!==24&&w!==26,o),p)return p;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=l[this._parseStack.chunkPos],p=this._oscParser.end(w!==24&&w!==26,o),p)return p;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=k;y<s;++y){switch(w=l[y],C=this._transitions.table[this.currentState<<8|(w<160?w:x)],C>>4){case 2:for(let A=y+1;;++A){if(A>=s||(w=l[A])<32||w>126&&w<x){this._printHandler(l,y,A),y=A-1;break}if(++A>=s||(w=l[A])<32||w>126&&w<x){this._printHandler(l,y,A),y=A-1;break}if(++A>=s||(w=l[A])<32||w>126&&w<x){this._printHandler(l,y,A),y=A-1;break}if(++A>=s||(w=l[A])<32||w>126&&w<x){this._printHandler(l,y,A),y=A-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const E=this._csiHandlers[this._collect<<8|w];let T=E?E.length-1:-1;for(;T>=0&&(p=E[T](this._params),p!==!0);T--)if(p instanceof Promise)return this._preserveStack(3,E,T,C,y),p;T<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingJoinState=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++y<s&&(w=l[y])>47&&w<60);y--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const P=this._escHandlers[this._collect<<8|w];let O=P?P.length-1:-1;for(;O>=0&&(p=P[O](),p!==!0);O--)if(p instanceof Promise)return this._preserveStack(4,P,O,C,y),p;O<0&&this._escHandlerFb(this._collect<<8|w),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let A=y+1;;++A)if(A>=s||(w=l[A])===24||w===26||w===27||w>127&&w<x){this._dcsParser.put(l,y,A),y=A-1;break}break;case 14:if(p=this._dcsParser.unhook(w!==24&&w!==26),p)return this._preserveStack(6,[],0,C,y),p;w===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=y+1;;A++)if(A>=s||(w=l[A])<32||w>127&&w<x){this._oscParser.put(l,y,A),y=A-1;break}break;case 6:if(p=this._oscParser.end(w!==24&&w!==26),p)return this._preserveStack(5,[],0,C,y),p;w===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}a.EscapeSequenceParser=g},6242:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const f=c(5770),v=c(482),d=[];a.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,S){this._handlers[_]===void 0&&(this._handlers[_]=[]);const x=this._handlers[_];return x.push(S),{dispose:()=>{const g=x.indexOf(S);g!==-1&&x.splice(g,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,S,x){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(_,S,x);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(_,S,x))}start(){this.reset(),this._state=1}put(_,S,x){if(this._state!==3){if(this._state===1)for(;S<x;){const g=_[S++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&x-S>0&&this._put(_,S,x)}}end(_,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let x=!1,g=this._active.length-1,h=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,x=S,h=this._stack.fallThrough,this._stack.paused=!1),!h&&x===!1){for(;g>=0&&(x=this._active[g].end(_),x!==!0);g--)if(x instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,x;g--}for(;g>=0;g--)if(x=this._active[g].end(!1),x instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,x}else this._handlerFb(this._id,"END",_);this._active=d,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,S,x){this._hitLimit||(this._data+=(0,v.utf32ToString)(_,S,x),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let S=!1;if(this._hitLimit)S=!1;else if(_&&(S=this._handler(this._data),S instanceof Promise))return S.then(x=>(this._data="",this._hitLimit=!1,x));return this._data="",this._hitLimit=!1,S}}},8742:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const c=2147483647;class f{static fromArray(d){const _=new f;if(!d.length)return _;for(let S=Array.isArray(d[0])?1:0;S<d.length;++S){const x=d[S];if(Array.isArray(x))for(let g=0;g<x.length;++g)_.addSubParam(x[g]);else _.addParam(x)}return _}constructor(d=32,_=32){if(this.maxLength=d,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new f(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let _=0;_<this.length;++_){d.push(this.params[_]);const S=this._subParamsIdx[_]>>8,x=255&this._subParamsIdx[_];x-S>0&&d.push(Array.prototype.slice.call(this._subParams,S,x))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>c?c:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>c?c:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const _=this._subParamsIdx[d]>>8,S=255&this._subParamsIdx[d];return S-_>0?this._subParams.subarray(_,S):null}getSubParamsAll(){const d={};for(let _=0;_<this.length;++_){const S=this._subParamsIdx[_]>>8,x=255&this._subParamsIdx[_];x-S>0&&(d[_]=this._subParams.slice(S,x))}return d}addDigit(d){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,x=S[_-1];S[_-1]=~x?Math.min(10*x+d,c):d}}a.Params=f},5741:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,f){const v={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(v),f.dispose=()=>this._wrappedAddonDispose(v),f.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let f=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){f=v;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(f,1)}}},8771:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const f=c(3785),v=c(511);a.BufferApiView=class{constructor(d,_){this._buffer=d,this.type=_}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const _=this._buffer.lines.get(d);if(_)return new f.BufferLineApiView(_)}getNullCell(){return new v.CellData}}},3785:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const f=c(511);a.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,d){if(!(v<0||v>=this._line.length))return d?(this._line.loadCell(v,d),d):this._line.loadCell(v,new f.CellData)}translateToString(v,d,_){return this._line.translateToString(v,d,_)}}},8285:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const f=c(8771),v=c(8460),d=c(844);class _ extends d.Disposable{constructor(x){super(),this._core=x,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=_},7975:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,f){return this._core.registerCsiHandler(c,v=>f(v.toArray()))}addCsiHandler(c,f){return this.registerCsiHandler(c,f)}registerDcsHandler(c,f){return this._core.registerDcsHandler(c,(v,d)=>f(v,d.toArray()))}addDcsHandler(c,f){return this.registerDcsHandler(c,f)}registerEscHandler(c,f){return this._core.registerEscHandler(c,f)}addEscHandler(c,f){return this.registerEscHandler(c,f)}registerOscHandler(c,f){return this._core.registerOscHandler(c,f)}addOscHandler(c,f){return this.registerOscHandler(c,f)}}},7090:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(m,a,c){var f=this&&this.__decorate||function(h,l,s,o){var p,w=arguments.length,C=w<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(h,l,s,o);else for(var k=h.length-1;k>=0;k--)(p=h[k])&&(C=(w<3?p(C):w>3?p(l,s,C):p(l,s))||C);return w>3&&C&&Object.defineProperty(l,s,C),C},v=this&&this.__param||function(h,l){return function(s,o){l(s,o,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const d=c(8460),_=c(844),S=c(5295),x=c(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let g=a.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(h){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(h.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(h.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(h,this))}resize(h,l){this.cols=h,this.rows=l,this.buffers.resize(h,l),this._onResize.fire({cols:h,rows:l})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(h,l=!1){const s=this.buffer;let o;o=this._cachedBlankLine,o&&o.length===this.cols&&o.getFg(0)===h.fg&&o.getBg(0)===h.bg||(o=s.getBlankLine(h,l),this._cachedBlankLine=o),o.isWrapped=l;const p=s.ybase+s.scrollTop,w=s.ybase+s.scrollBottom;if(s.scrollTop===0){const C=s.lines.isFull;w===s.lines.length-1?C?s.lines.recycle().copyFrom(o):s.lines.push(o.clone()):s.lines.splice(w+1,0,o.clone()),C?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{const C=w-p+1;s.lines.shiftElements(p+1,C-1,-1),s.lines.set(w,o.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(h,l,s){const o=this.buffer;if(h<0){if(o.ydisp===0)return;this.isUserScrolling=!0}else h+o.ydisp>=o.ybase&&(this.isUserScrolling=!1);const p=o.ydisp;o.ydisp=Math.max(Math.min(o.ydisp+h,o.ybase),0),p!==o.ydisp&&(l||this._onScroll.fire(o.ydisp))}};a.BufferService=g=f([v(0,x.IOptionsService)],g)},7994:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,f){this._charsets[c]=f,this.glevel===c&&(this.charset=f)}}},1753:function(m,a,c){var f=this&&this.__decorate||function(o,p,w,C){var k,y=arguments.length,E=y<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,w):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(o,p,w,C);else for(var T=o.length-1;T>=0;T--)(k=o[T])&&(E=(y<3?k(E):y>3?k(p,w,E):k(p,w))||E);return y>3&&E&&Object.defineProperty(p,w,E),E},v=this&&this.__param||function(o,p){return function(w,C){p(w,C,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const d=c(2585),_=c(8460),S=c(844),x={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:o=>o.button!==4&&o.action===1&&(o.ctrl=!1,o.alt=!1,o.shift=!1,!0)},VT200:{events:19,restrict:o=>o.action!==32},DRAG:{events:23,restrict:o=>o.action!==32||o.button!==3},ANY:{events:31,restrict:o=>!0}};function g(o,p){let w=(o.ctrl?16:0)|(o.shift?4:0)|(o.alt?8:0);return o.button===4?(w|=64,w|=o.action):(w|=3&o.button,4&o.button&&(w|=64),8&o.button&&(w|=128),o.action===32?w|=32:o.action!==0||p||(w|=3)),w}const h=String.fromCharCode,l={DEFAULT:o=>{const p=[g(o,!1)+32,o.col+32,o.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${h(p[0])}${h(p[1])}${h(p[2])}`},SGR:o=>{const p=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${g(o,!0)};${o.col};${o.row}${p}`},SGR_PIXELS:o=>{const p=o.action===0&&o.button!==4?"m":"M";return`\x1B[<${g(o,!0)};${o.x};${o.y}${p}`}};let s=a.CoreMouseService=class extends S.Disposable{constructor(o,p){super(),this._bufferService=o,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(x))this.addProtocol(w,x[w]);for(const w of Object.keys(l))this.addEncoding(w,l[w]);this.reset()}addProtocol(o,p){this._protocols[o]=p}addEncoding(o,p){this._encodings[o]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(o){if(!this._protocols[o])throw new Error(`unknown protocol "${o}"`);this._activeProtocol=o,this._onProtocolChange.fire(this._protocols[o].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(o){if(!this._encodings[o])throw new Error(`unknown encoding "${o}"`);this._activeEncoding=o}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(o){if(o.col<0||o.col>=this._bufferService.cols||o.row<0||o.row>=this._bufferService.rows||o.button===4&&o.action===32||o.button===3&&o.action!==32||o.button!==4&&(o.action===2||o.action===3)||(o.col++,o.row++,o.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,o,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(o))return!1;const p=this._encodings[this._activeEncoding](o);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=o,!0}explainEvents(o){return{down:!!(1&o),up:!!(2&o),drag:!!(4&o),move:!!(8&o),wheel:!!(16&o)}}_equalEvents(o,p,w){if(w){if(o.x!==p.x||o.y!==p.y)return!1}else if(o.col!==p.col||o.row!==p.row)return!1;return o.button===p.button&&o.action===p.action&&o.ctrl===p.ctrl&&o.alt===p.alt&&o.shift===p.shift}};a.CoreMouseService=s=f([v(0,d.IBufferService),v(1,d.ICoreService)],s)},6975:function(m,a,c){var f=this&&this.__decorate||function(s,o,p,w){var C,k=arguments.length,y=k<3?o:w===null?w=Object.getOwnPropertyDescriptor(o,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,o,p,w);else for(var E=s.length-1;E>=0;E--)(C=s[E])&&(y=(k<3?C(y):k>3?C(o,p,y):C(o,p))||y);return k>3&&y&&Object.defineProperty(o,p,y),y},v=this&&this.__param||function(s,o){return function(p,w){o(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const d=c(1439),_=c(8460),S=c(844),x=c(2585),g=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let l=a.CoreService=class extends S.Disposable{constructor(s,o,p){super(),this._bufferService=s,this._logService=o,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(g),this.decPrivateModes=(0,d.clone)(h)}reset(){this.modes=(0,d.clone)(g),this.decPrivateModes=(0,d.clone)(h)}triggerDataEvent(s,o=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;o&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),o&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,()=>s.split("").map(w=>w.charCodeAt(0))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,()=>s.split("").map(o=>o.charCodeAt(0))),this._onBinary.fire(s))}};a.CoreService=l=f([v(0,x.IBufferService),v(1,x.ILogService),v(2,x.IOptionsService)],l)},9074:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const f=c(8055),v=c(8460),d=c(844),_=c(6106);let S=0,x=0;class g extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(s=>s==null?void 0:s.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(s){if(s.marker.isDisposed)return;const o=new h(s);if(o){const p=o.marker.onDispose(()=>o.dispose());o.onDispose(()=>{o&&(this._decorations.delete(o)&&this._onDecorationRemoved.fire(o),p.dispose())}),this._decorations.insert(o),this._onDecorationRegistered.fire(o)}return o}reset(){for(const s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,o,p){let w=0,C=0;for(const k of this._decorations.getKeyIterator(o))w=k.options.x??0,C=w+(k.options.width??1),s>=w&&s<C&&(!p||(k.options.layer??"bottom")===p)&&(yield k)}forEachDecorationAtCell(s,o,p,w){this._decorations.forEachByKey(o,C=>{S=C.options.x??0,x=S+(C.options.width??1),s>=S&&s<x&&(!p||(C.options.layer??"bottom")===p)&&w(C)})}}a.DecorationService=g;class h extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const f=c(2585),v=c(8343);class d{constructor(...S){this._entries=new Map;for(const[x,g]of S)this.set(x,g)}set(S,x){const g=this._entries.get(S);return this._entries.set(S,x),g}forEach(S){for(const[x,g]of this._entries.entries())S(x,g)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}a.ServiceCollection=d,a.InstantiationService=class{constructor(){this._services=new d,this._services.set(f.IInstantiationService,this)}setService(_,S){this._services.set(_,S)}getService(_){return this._services.get(_)}createInstance(_,...S){const x=(0,v.getServiceDependencies)(_).sort((l,s)=>l.index-s.index),g=[];for(const l of x){const s=this._services.get(l.id);if(!s)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${l.id}.`);g.push(s)}const h=x.length>0?x[0].index:S.length;if(S.length!==h)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${h+1} conflicts with ${S.length} static arguments`);return new _(...S,...g)}}},7866:function(m,a,c){var f=this&&this.__decorate||function(h,l,s,o){var p,w=arguments.length,C=w<3?l:o===null?o=Object.getOwnPropertyDescriptor(l,s):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(h,l,s,o);else for(var k=h.length-1;k>=0;k--)(p=h[k])&&(C=(w<3?p(C):w>3?p(l,s,C):p(l,s))||C);return w>3&&C&&Object.defineProperty(l,s,C),C},v=this&&this.__param||function(h,l){return function(s,o){l(s,o,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const d=c(844),_=c(2585),S={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let x,g=a.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(h){super(),this._optionsService=h,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),x=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(h){for(let l=0;l<h.length;l++)typeof h[l]=="function"&&(h[l]=h[l]())}_log(h,l,s){this._evalLazyOptionalParams(s),h.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+l,...s)}trace(h,...l){var s;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.trace.bind(this._optionsService.options.logger))??console.log,h,l)}debug(h,...l){var s;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.debug.bind(this._optionsService.options.logger))??console.log,h,l)}info(h,...l){var s;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.info.bind(this._optionsService.options.logger))??console.info,h,l)}warn(h,...l){var s;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.warn.bind(this._optionsService.options.logger))??console.warn,h,l)}error(h,...l){var s;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.error.bind(this._optionsService.options.logger))??console.error,h,l)}};a.LogService=g=f([v(0,_.IOptionsService)],g),a.setTraceLogger=function(h){x=h},a.traceCall=function(h,l,s){if(typeof s.value!="function")throw new Error("not supported");const o=s.value;s.value=function(...p){if(x.logLevel!==_.LogLevelEnum.TRACE)return o.apply(this,p);x.trace(`GlyphRenderer#${o.name}(${p.map(C=>JSON.stringify(C)).join(", ")})`);const w=o.apply(this,p);return x.trace(`GlyphRenderer#${o.name} return`,w),w}}},7302:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const f=c(8460),v=c(844),d=c(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends v.Disposable{constructor(g){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const h={...a.DEFAULT_OPTIONS};for(const l in g)if(l in h)try{const s=g[l];h[l]=this._sanitizeAndValidateOption(l,s)}catch(s){console.error(s)}this.rawOptions=h,this.options={...h},this._setupOptions(),this.register((0,v.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,h){return this.onOptionChange(l=>{l===g&&h(this.rawOptions[g])})}onMultipleOptionChange(g,h){return this.onOptionChange(l=>{g.indexOf(l)!==-1&&h()})}_setupOptions(){const g=l=>{if(!(l in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);return this.rawOptions[l]},h=(l,s)=>{if(!(l in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${l}"`);s=this._sanitizeAndValidateOption(l,s),this.rawOptions[l]!==s&&(this.rawOptions[l]=s,this._onOptionChange.fire(l))};for(const l in this.rawOptions){const s={get:g.bind(this,l),set:h.bind(this,l)};Object.defineProperty(this.options,l,s)}}_sanitizeAndValidateOption(g,h){switch(g){case"cursorStyle":if(h||(h=a.DEFAULT_OPTIONS[g]),!function(l){return l==="block"||l==="underline"||l==="bar"}(h))throw new Error(`"${h}" is not a valid value for ${g}`);break;case"wordSeparator":h||(h=a.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=_.includes(h)?h:a.DEFAULT_OPTIONS[g];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(`${g} cannot be less than 1, value: ${h}`);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${h}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${h}`);break;case"rows":case"cols":if(!h&&h!==0)throw new Error(`${g} must be numeric, value: ${h}`);break;case"windowsPty":h=h??{}}return h}}a.OptionsService=S},2660:function(m,a,c){var f=this&&this.__decorate||function(S,x,g,h){var l,s=arguments.length,o=s<3?x:h===null?h=Object.getOwnPropertyDescriptor(x,g):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(S,x,g,h);else for(var p=S.length-1;p>=0;p--)(l=S[p])&&(o=(s<3?l(o):s>3?l(x,g,o):l(x,g))||o);return s>3&&o&&Object.defineProperty(x,g,o),o},v=this&&this.__param||function(S,x){return function(g,h){x(g,h,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const d=c(2585);let _=a.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const x=this._bufferService.buffer;if(S.id===void 0){const p=x.addMarker(x.ybase+x.y),w={data:S,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(w,p)),this._dataByLinkId.set(w.id,w),w.id}const g=S,h=this._getEntryIdKey(g),l=this._entriesWithId.get(h);if(l)return this.addLineToLink(l.id,x.ybase+x.y),l.id;const s=x.addMarker(x.ybase+x.y),o={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(o,s)),this._entriesWithId.set(o.key,o),this._dataByLinkId.set(o.id,o),o.id}addLineToLink(S,x){const g=this._dataByLinkId.get(S);if(g&&g.lines.every(h=>h.line!==x)){const h=this._bufferService.buffer.addMarker(x);g.lines.push(h),h.onDispose(()=>this._removeMarkerFromLink(g,h))}}getLinkData(S){var x;return(x=this._dataByLinkId.get(S))==null?void 0:x.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,x){const g=S.lines.indexOf(x);g!==-1&&(S.lines.splice(g,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};a.OscLinkService=_=f([v(0,d.IBufferService)],_)},8343:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const c="di$target",f="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(v){return v[f]||[]},a.createDecorator=function(v){if(a.serviceRegistry.has(v))return a.serviceRegistry.get(v);const d=function(_,S,x){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,h,l){h[c]===h?h[f].push({id:g,index:l}):(h[f]=[{id:g,index:l}],h[c]=h)})(d,_,x)};return d.toString=()=>v,a.serviceRegistry.set(v,d),d}},2585:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const f=c(8343);var v;a.IBufferService=(0,f.createDecorator)("BufferService"),a.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),a.ICoreService=(0,f.createDecorator)("CoreService"),a.ICharsetService=(0,f.createDecorator)("CharsetService"),a.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(v||(a.LogLevelEnum=v={})),a.ILogService=(0,f.createDecorator)("LogService"),a.IOptionsService=(0,f.createDecorator)("OptionsService"),a.IOscLinkService=(0,f.createDecorator)("OscLinkService"),a.IUnicodeService=(0,f.createDecorator)("UnicodeService"),a.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const f=c(8460),v=c(225);class d{static extractShouldJoin(S){return(1&S)!=0}static extractWidth(S){return S>>1&3}static extractCharKind(S){return S>>3}static createPropertyValue(S,x,g=!1){return(16777215&S)<<3|(3&x)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const S=new v.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(S){if(!this._providers[S])throw new Error(`unknown Unicode version "${S}"`);this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)}register(S){this._providers[S.version]=S}wcwidth(S){return this._activeProvider.wcwidth(S)}getStringCellWidth(S){let x=0,g=0;const h=S.length;for(let l=0;l<h;++l){let s=S.charCodeAt(l);if(55296<=s&&s<=56319){if(++l>=h)return x+this.wcwidth(s);const w=S.charCodeAt(l);56320<=w&&w<=57343?s=1024*(s-55296)+w-56320+65536:x+=this.wcwidth(w)}const o=this.charProperties(s,g);let p=d.extractWidth(o);d.extractShouldJoin(o)&&(p-=d.extractWidth(g)),x+=p,g=o}return x}charProperties(S,x){return this._activeProvider.charProperties(S,x)}}a.UnicodeService=d}},i={};function n(m){var a=i[m];if(a!==void 0)return a.exports;var c=i[m]={exports:{}};return r[m].call(c.exports,c,c.exports,n),c.exports}var u={};return(()=>{var m=u;Object.defineProperty(m,"__esModule",{value:!0}),m.Terminal=void 0;const a=n(9042),c=n(3236),f=n(844),v=n(5741),d=n(8285),_=n(7975),S=n(7090),x=["cols","rows"];class g extends f.Disposable{constructor(l){super(),this._core=this.register(new c.Terminal(l)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const s=p=>this._core.options[p],o=(p,w)=>{this._checkReadonlyOptions(p),this._core.options[p]=w};for(const p in this._core.options){const w={get:s.bind(this,p),set:o.bind(this,p)};Object.defineProperty(this._publicOptions,p,w)}}_checkReadonlyOptions(l){if(x.includes(l))throw new Error(`Option "${l}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const l=this._core.coreService.decPrivateModes;let s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:l.applicationCursorKeys,applicationKeypadMode:l.applicationKeypad,bracketedPasteMode:l.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:l.origin,reverseWraparoundMode:l.reverseWraparound,sendFocusMode:l.sendFocus,wraparoundMode:l.wraparound}}get options(){return this._publicOptions}set options(l){for(const s in l)this._publicOptions[s]=l[s]}blur(){this._core.blur()}focus(){this._core.focus()}input(l,s=!0){this._core.input(l,s)}resize(l,s){this._verifyIntegers(l,s),this._core.resize(l,s)}open(l){this._core.open(l)}attachCustomKeyEventHandler(l){this._core.attachCustomKeyEventHandler(l)}attachCustomWheelEventHandler(l){this._core.attachCustomWheelEventHandler(l)}registerLinkProvider(l){return this._core.registerLinkProvider(l)}registerCharacterJoiner(l){return this._checkProposedApi(),this._core.registerCharacterJoiner(l)}deregisterCharacterJoiner(l){this._checkProposedApi(),this._core.deregisterCharacterJoiner(l)}registerMarker(l=0){return this._verifyIntegers(l),this._core.registerMarker(l)}registerDecoration(l){return this._checkProposedApi(),this._verifyPositiveIntegers(l.x??0,l.width??0,l.height??0),this._core.registerDecoration(l)}hasSelection(){return this._core.hasSelection()}select(l,s,o){this._verifyIntegers(l,s,o),this._core.select(l,s,o)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(l,s){this._verifyIntegers(l,s),this._core.selectLines(l,s)}dispose(){super.dispose()}scrollLines(l){this._verifyIntegers(l),this._core.scrollLines(l)}scrollPages(l){this._verifyIntegers(l),this._core.scrollPages(l)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(l){this._verifyIntegers(l),this._core.scrollToLine(l)}clear(){this._core.clear()}write(l,s){this._core.write(l,s)}writeln(l,s){this._core.write(l),this._core.write(`\r
`,s)}paste(l){this._core.paste(l)}refresh(l,s){this._verifyIntegers(l,s),this._core.refresh(l,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(l){this._addonManager.loadAddon(this,l)}static get strings(){return a}_verifyIntegers(...l){for(const s of l)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...l){for(const s of l)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}m.Terminal=g})(),u})())})(Mu);var Ka=Mu.exports,Nu={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){const n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;const u=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(u._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const n=this._terminal._core,u=n._renderService.dimensions;if(u.css.cell.width===0||u.css.cell.height===0)return;const m=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(a.getPropertyValue("height")),f=Math.max(0,parseInt(a.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),d=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),_=f-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-m;return{cols:Math.max(2,Math.floor(_/u.css.cell.width)),rows:Math.max(1,Math.floor(d/u.css.cell.height))}}}})(),r})())})(Nu);var P_=Nu.exports,ju={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={6:(m,a)=>{function c(v){try{const d=new URL(v),_=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return v.toLocaleLowerCase().startsWith(_.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(v,d,_,S={}){this._terminal=v,this._regex=d,this._handler=_,this._options=S}provideLinks(v,d){const _=f.computeLink(v,this._regex,this._terminal,this._handler);d(this._addCallbacks(_))}_addCallbacks(v){return v.map(d=>(d.leave=this._options.leave,d.hover=(_,S)=>{if(this._options.hover){const{range:x}=d;this._options.hover(_,S,x)}},d))}};class f{static computeLink(d,_,S,x){const g=new RegExp(_.source,(_.flags||"")+"g"),[h,l]=f._getWindowedLineStrings(d-1,S),s=h.join("");let o;const p=[];for(;o=g.exec(s);){const w=o[0];if(!c(w))continue;const[C,k]=f._mapStrIdx(S,l,0,o.index),[y,E]=f._mapStrIdx(S,C,k,w.length);if(C===-1||k===-1||y===-1||E===-1)continue;const T={start:{x:k+1,y:C+1},end:{x:E,y:y+1}};p.push({range:T,text:w,activate:x})}return p}static _getWindowedLineStrings(d,_){let S,x=d,g=d,h=0,l="";const s=[];if(S=_.buffer.active.getLine(d)){const o=S.translateToString(!0);if(S.isWrapped&&o[0]!==" "){for(h=0;(S=_.buffer.active.getLine(--x))&&h<2048&&(l=S.translateToString(!0),h+=l.length,s.push(l),S.isWrapped&&l.indexOf(" ")===-1););s.reverse()}for(s.push(o),h=0;(S=_.buffer.active.getLine(++g))&&S.isWrapped&&h<2048&&(l=S.translateToString(!0),h+=l.length,s.push(l),l.indexOf(" ")===-1););}return[s,x]}static _mapStrIdx(d,_,S,x){const g=d.buffer.active,h=g.getNullCell();let l=S;for(;x;){const s=g.getLine(_);if(!s)return[-1,-1];for(let o=l;o<s.length;++o){s.getCell(o,h);const p=h.getChars();if(h.getWidth()&&(x-=p.length||1,o===s.length-1&&p==="")){const w=g.getLine(_+1);w&&w.isWrapped&&(w.getCell(0,h),h.getWidth()===2&&(x+=1))}if(x<0)return[_,o]}_++,l=0}return[_,l]}}a.LinkComputer=f}},i={};function n(m){var a=i[m];if(a!==void 0)return a.exports;var c=i[m]={exports:{}};return r[m](c,c.exports,n),c.exports}var u={};return(()=>{var m=u;Object.defineProperty(m,"__esModule",{value:!0}),m.WebLinksAddon=void 0;const a=n(6),c=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(v,d){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}m.WebLinksAddon=class{constructor(v=f,d={}){this._handler=v,this._options=d}activate(v){this._terminal=v;const d=this._options,_=d.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,_,this._handler,d))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),u})())})(ju);var O_=ju.exports;const M_=({socket:e,username:t,onFullscreenChange:r})=>{const i=Q.useRef(null),n=Q.useRef(null),u=Q.useRef(null),[m,a]=Q.useState(!1),[c,f]=Q.useState(!1),[v,d]=Q.useState(!1);Q.useEffect(()=>{if(!e||!i.current)return;const h=new Ka.Terminal({fontSize:14,fontFamily:"monospace",cursorBlink:!0,theme:{background:"#000000",foreground:"#ffffff"}}),l=new P_.FitAddon,s=new O_.WebLinksAddon;h.loadAddon(l),h.loadAddon(s);try{h.open(i.current),console.log("Terminal opened successfully"),h.write(`\x1B[36m正在连接到容器...\x1B[0m\r
`),h.write(`\x1B[33m请稍候，正在准备您的Linux环境\x1B[0m\r
`),h.write(`\r
`),setTimeout(()=>{try{l.fit(),console.log("Terminal fitted, size:",h.cols,"x",h.rows)}catch(k){console.warn("Initial fit failed:",k)}},200)}catch(k){console.error("Terminal open failed:",k);return}n.current=h,u.current=l,h.onData(k=>{e.emit("terminal-input",k)}),e.on("terminal-output",k=>{console.log("收到终端输出:",k);try{h.hasReceivedData||(h.clear(),h.hasReceivedData=!0),h.write(k)}catch(y){console.error("写入终端失败:",y)}}),e.on("terminal-exit",()=>{h.write(`\r
\r
[终端会话已结束]\r
`)});const o=()=>{if(l&&h)try{l.fit(),e.emit("terminal-resize",{cols:h.cols,rows:h.rows})}catch(k){console.warn("Terminal resize failed:",k)}};window.addEventListener("resize",o);const p=k=>{if(k.ctrlKey&&k.key==="c"){k.preventDefault(),x();return}if(k.ctrlKey&&k.key==="v"){k.preventDefault(),g();return}if(k.ctrlKey&&k.shiftKey&&k.key==="C"){k.preventDefault(),x();return}if(k.ctrlKey&&k.shiftKey&&k.key==="V"){k.preventDefault(),g();return}};document.addEventListener("keydown",p);const w=setTimeout(()=>{o()},300),C=setTimeout(()=>{o()},1e3);return()=>{window.removeEventListener("resize",o),document.removeEventListener("keydown",p),clearTimeout(w),clearTimeout(C),e.off("terminal-output"),e.off("terminal-exit"),h&&h.dispose()}},[e]),Q.useEffect(()=>{const h=()=>{const l=document.querySelector(".terminal-container iframe");if(l)try{setTimeout(()=>{var s;try{(s=l.contentWindow)==null||s.postMessage({type:"resize",width:l.clientWidth,height:l.clientHeight},"*")}catch(o){console.warn("Failed to notify iframe of window resize:",o)}},100)}catch(s){console.warn("Failed to notify iframe of window resize:",s)}};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const _=()=>{const h=!m;a(h),r&&r(h),setTimeout(()=>{var s;const l=document.querySelector(".terminal-container iframe");if(l&&l.contentWindow)try{l.contentWindow.postMessage({type:"resize",fullscreen:h},"*");try{(s=l.contentWindow)==null||s.postMessage({type:"resize",width:l.clientWidth,height:l.clientHeight},"*")}catch(o){console.warn("Failed to notify iframe resize:",o)}}catch(o){console.warn("Failed to notify iframe resize:",o)}if(u.current&&n.current)try{u.current.fit(),e.emit("terminal-resize",{cols:n.current.cols,rows:n.current.rows})}catch(o){console.warn("Fullscreen resize failed:",o)}},300)},S=()=>{n.current&&n.current.clear()},x=async()=>{f(!0),setTimeout(()=>f(!1),3e3)},g=async()=>{var h;try{const l=await navigator.clipboard.readText();if(l){d(!0),setTimeout(()=>d(!1),3e3);const s=document.querySelector('iframe[title="WebSSH Terminal"]');if(s){s.focus();const o=new KeyboardEvent("keydown",{key:"V",code:"KeyV",ctrlKey:!0,shiftKey:!0,bubbles:!0});try{(h=s.contentWindow)==null||h.postMessage({type:"paste",data:l},"*")}catch(p){console.warn("Failed to send paste event:",p)}}}}catch(l){console.error("粘贴失败:",l)}};return R.jsxs("div",{className:`terminal-container ${m?"fixed inset-0 z-50":""}`,children:[R.jsxs("div",{className:"terminal-header",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsxs("div",{className:"terminal-controls",children:[R.jsx("div",{className:"terminal-control close"}),R.jsx("div",{className:"terminal-control minimize"}),R.jsx("div",{className:"terminal-control maximize"})]}),R.jsxs("span",{className:"text-gray-300 text-sm font-medium ml-4",children:[t,"@linux-container"]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsxs("div",{className:"hidden lg:flex items-center space-x-3 text-xs text-gray-400",children:[R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:x,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"复制选中文本",children:R.jsx(lc,{size:14})}),R.jsx("span",{children:"Ctrl+Shift+C"})]}),R.jsxs("div",{className:"flex items-center space-x-1",children:[R.jsx("button",{onClick:g,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"粘贴",children:R.jsx(ac,{size:14})}),R.jsx("span",{children:"Ctrl+Shift+V"})]})]}),R.jsxs("div",{className:"lg:hidden flex items-center space-x-2",children:[R.jsx("button",{onClick:x,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"复制选中文本 (Ctrl+Shift+C)",children:R.jsx(lc,{size:16})}),R.jsx("button",{onClick:g,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"粘贴 (Ctrl+Shift+V)",children:R.jsx(ac,{size:16})})]}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("button",{onClick:S,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"清屏",children:R.jsx(E_,{size:16})}),R.jsx("button",{onClick:_,className:"p-1 text-gray-400 hover:text-white transition-colors",title:m?"退出全屏":"全屏",children:m?R.jsx(x_,{size:16}):R.jsx(C_,{size:16})})]})]})]}),R.jsxs("div",{className:`overflow-hidden ${m?"h-[calc(100vh-48px)]":"h-96 lg:h-[500px]"}`,style:{minHeight:m?"100vh":"300px",width:"100%",position:"relative",backgroundColor:"#000000",color:"#ffffff"},children:[R.jsx("iframe",{ref:h=>{h&&(h.onload=()=>{setTimeout(()=>{var l;try{(l=h.contentWindow)==null||l.postMessage({type:"resize",width:h.clientWidth,height:h.clientHeight},"*")}catch(s){console.warn("Failed to trigger initial iframe resize:",s)}},500)})},src:`/webssh/ssh?username=${t}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"#000000"},title:"WebSSH Terminal"}),c&&R.jsx("div",{className:"absolute top-4 right-4 bg-blue-500 text-white px-3 py-2 rounded-lg shadow-lg z-10",children:"💡 请在终端中选中文本后使用 Ctrl+Shift+C 复制"}),v&&R.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-2 rounded-lg shadow-lg z-10",children:"✅ 请在终端中使用 Ctrl+Shift+V 粘贴"})]}),R.jsxs("div",{className:"bg-gray-800 px-4 py-2 text-xs text-gray-400 flex justify-between items-center",children:[R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsxs("span",{children:["容器: ",t]}),R.jsxs("span",{className:"flex items-center",children:[R.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"已连接"]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsx("span",{children:"UTF-8"}),R.jsx("span",{children:"Bash"})]})]})]})},cc=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-emerald-500","bg-violet-500","bg-fuchsia-500","bg-rose-500","bg-sky-500","bg-amber-500","bg-slate-500"],vs=(e,t=null)=>{if(!e)return"bg-gray-500";if(t&&t.type==="color")return t.value;if(t&&t.type==="emoji")return"bg-gray-200 dark:bg-gray-700";let r=0;for(let n=0;n<e.length;n++){const u=e.charCodeAt(n);r=(r<<5)-r+u,r=r&r}const i=Math.abs(r)%cc.length;return cc[i]},ys=(e,t=null)=>e?t&&t.type==="emoji"?t.value:e.charAt(0).toUpperCase():"?",I_=e=>`avatar_${e}`,Hu=e=>{if(!e)return null;const t=I_(e),r=localStorage.getItem(t);return r?JSON.parse(r):null},N_=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👋","🤚","🖐️","✋","🖖","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👍","👎","👊","✊","🤛","🤜","👏","🙌","👐","🤲","🤝","🙏","✍️","💅","❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️"],j_=({socket:e,messages:t,currentUsername:r,onSendMessage:i,activeUsers:n=[]})=>{const[u,m]=Q.useState(""),[a,c]=Q.useState(!1),[f,v]=Q.useState(!1),[d,_]=Q.useState(""),[S,x]=Q.useState({}),[g,h]=Q.useState(!1),l=Q.useRef(null),s=Q.useRef(null),o=Q.useRef(null),p=Q.useRef(null),w=Q.useRef(null),C=Q.useRef(null),[k,y]=Q.useState(!0);Q.useEffect(()=>{if(s.current&&t.length>0){const N=s.current;if(k){requestAnimationFrame(()=>{N.scrollTop=N.scrollHeight,y(!1)});return}N.scrollHeight-N.scrollTop-N.clientHeight<100&&requestAnimationFrame(()=>{N.scrollTop=N.scrollHeight})}},[t,k]),Q.useEffect(()=>{(()=>{const K={},W=new Set;t.forEach(M=>{M.username&&W.add(M.username)}),W.forEach(M=>{const L=Hu(M);L&&(K[M]=L)}),x(K)})()},[t]),Q.useEffect(()=>{const N=K=>{p.current&&!p.current.contains(K.target)&&c(!1),w.current&&!w.current.contains(K.target)&&v(!1)};return document.addEventListener("mousedown",N),()=>{document.removeEventListener("mousedown",N)}},[]);const E=N=>{N.preventDefault(),u.trim()&&(i({message:u.trim(),messageType:"text"}),m(""),c(!1),v(!1))},T=N=>{if(N.key==="Enter"&&N.shiftKey){N.preventDefault();const K=N.target.selectionStart,W=u.substring(0,K),M=u.substring(K);m(W+`
`+M),setTimeout(()=>{N.target.selectionStart=N.target.selectionEnd=K+1,P(N.target)},0);return}if(N.key==="Enter"&&!N.shiftKey){N.preventDefault(),E(N);return}},P=N=>{N.style.height="auto";const K=N.scrollHeight,W=120;N.style.height=Math.min(K,W)+"px"},O=N=>{const K=N.target.value;m(K),P(N.target);const W=N.target.selectionStart,L=K.substring(0,W).match(/@([a-zA-Z0-9_\u4e00-\u9fa5]*)$/);L?(_(L[1]),v(!0)):(v(!1),_(""))},A=N=>{var K;m(W=>W+N),c(!1),(K=o.current)==null||K.focus()},j=()=>{c(!a)},z=async N=>{var W;const K=(W=N.clipboardData)==null?void 0:W.items;if(K)for(let M=0;M<K.length;M++){const L=K[M];if(L.type.startsWith("image/")){N.preventDefault();const $=L.getAsFile();$&&await q($);break}}},U=N=>{const K=N.target.files[0];K&&q(K),N.target.value=""},q=async N=>{if(!N.type.startsWith("image/")){alert("只能上传图片文件");return}if(N.size>5*1024*1024){alert("图片大小不能超过5MB");return}h(!0);const K=new FormData;K.append("image",N);try{const M=await(await fetch("/api/upload-image",{method:"POST",body:K})).json();if(console.log("图片上传结果:",M),M.success){const $="http://localhost:3001"+M.imageUrl;console.log("发送图片消息:",{imageUrl:$}),i({message:"",messageType:"image",imageUrl:$})}else alert("图片上传失败: "+M.error)}catch(W){console.error("图片上传失败:",W),alert("图片上传失败")}finally{h(!1)}},H=N=>{const K=o.current.selectionStart,W=u.substring(0,K),M=u.substring(K),L=W.lastIndexOf("@");if(L!==-1){const $=W.substring(0,L)+`@${N} `+M;m($),v(!1),_(""),setTimeout(()=>{const F=L+N.length+2;o.current.setSelectionRange(F,F),o.current.focus()},0)}},b=n.filter(N=>N!==r&&N.toLowerCase().includes(d.toLowerCase())),D=N=>{if(!N)return"";const K=/@([a-zA-Z0-9_\u4e00-\u9fa5]+)/g,W=[];let M=0,L;for(;(L=K.exec(N))!==null;){L.index>M&&W.push(N.substring(M,L.index));const $=L[1],F=$===r;W.push(R.jsxs("span",{className:`font-semibold ${F?"text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900 px-1 rounded":"text-green-600 dark:text-green-400"}`,children:["@",$]},L.index)),M=L.index+L[0].length}return M<N.length&&W.push(N.substring(M)),W.length>1?W:N},B=N=>new Date(N).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),I=N=>{const K=new Date(N),W=new Date,M=new Date(W);return M.setDate(M.getDate()-1),K.toDateString()===W.toDateString()?"今天":K.toDateString()===M.toDateString()?"昨天":K.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},V=t.reduce((N,K)=>{const W=I(K.createdAt||K.timestamp);return N[W]||(N[W]=[]),N[W].push(K),N},{});return R.jsxs("div",{className:"chat-container",children:[R.jsx("div",{className:"chat-header",children:R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx(Vo,{size:20}),R.jsx("span",{children:"聊天室"})]})}),R.jsxs("div",{ref:s,className:"chat-messages",children:[Object.keys(V).length===0?R.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[R.jsx(Vo,{size:32,className:"mx-auto mb-2 opacity-50"}),R.jsx("p",{children:"还没有消息"}),R.jsx("p",{className:"text-sm",children:"开始聊天吧！"})]}):Object.entries(V).map(([N,K])=>R.jsxs("div",{children:[R.jsx("div",{className:"flex items-center justify-center my-4",children:R.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-3 py-1 rounded-full",children:N})}),K.map((W,M)=>{const L=W.username===r,$=M===0||K[M-1].username!==W.username;return R.jsxs("div",{className:`chat-message ${L?"own":"other"} fade-in`,children:[$&&R.jsxs("div",{className:`flex items-center space-x-2 mb-1 ${L?"justify-end":"justify-start"}`,children:[!L&&R.jsx("div",{className:`w-6 h-6 ${vs(W.username,S[W.username])} text-white rounded-full flex items-center justify-center text-xs font-medium`,children:ys(W.username,S[W.username])}),R.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:W.username}),L&&R.jsx("div",{className:`w-6 h-6 ${vs(W.username,S[W.username])} text-white rounded-full flex items-center justify-center text-xs font-medium`,children:ys(W.username,S[W.username])})]}),R.jsx("div",{className:`message-bubble ${L?"own":"other"}`,children:W.messageType==="image"?R.jsxs("div",{className:"space-y-2",children:[R.jsx("img",{src:W.imageUrl,alt:"聊天图片",className:"max-w-xs max-h-64 rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>window.open(W.imageUrl,"_blank"),onError:F=>{console.error("图片加载失败:",W.imageUrl),F.target.style.display="none",F.target.nextSibling.style.display="block"},onLoad:()=>console.log("图片加载成功:",W.imageUrl)}),R.jsxs("div",{style:{display:"none"},className:"text-red-500 text-sm",children:["图片加载失败: ",W.imageUrl]}),W.message&&R.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm m-0",children:D(W.message)})]}):R.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm m-0",children:D(W.message)})}),R.jsx("div",{className:"message-meta",children:B(W.createdAt||W.timestamp)})]},W.id||M)})]},N)),R.jsx("div",{ref:l})]}),R.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 relative",children:[R.jsxs("form",{onSubmit:E,className:"flex space-x-2",children:[R.jsxs("div",{className:"flex-1 relative",children:[R.jsx("textarea",{ref:o,value:u,onChange:O,onKeyDown:T,onPaste:z,placeholder:"输入消息... (支持粘贴图片，输入@提及用户)",className:"w-full px-3 py-2 pr-20 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-linux-500 focus:border-transparent text-sm resize-none",maxLength:500,rows:1,style:{minHeight:"38px",maxHeight:"120px",overflowY:u.includes(`
`)?"auto":"hidden"}}),R.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[R.jsx("button",{type:"button",onClick:()=>v(!f),className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"@用户",children:R.jsx(f_,{size:16})}),R.jsx("button",{type:"button",onClick:()=>{var N;return(N=C.current)==null?void 0:N.click()},disabled:g,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50",title:"上传图片",children:R.jsx(v_,{size:16})}),R.jsx("button",{type:"button",onClick:j,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"表情",children:R.jsx(R_,{size:16})})]}),R.jsx("input",{ref:C,type:"file",accept:"image/*",onChange:U,className:"hidden"})]}),R.jsx("button",{type:"submit",disabled:!u.trim()||g,className:`px-3 py-2 rounded-lg text-white transition-colors ${u.trim()&&!g?"bg-linux-500 hover:bg-linux-600":"bg-gray-300 cursor-not-allowed"}`,children:g?R.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):R.jsx(L_,{size:16})})]}),f&&b.length>0&&R.jsxs("div",{ref:w,className:"absolute bottom-full left-4 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-2 z-50",style:{width:"200px",maxHeight:"200px"},children:[R.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 px-3 py-1 border-b border-gray-200 dark:border-gray-600",children:"选择用户"}),R.jsx("div",{className:"overflow-y-auto max-h-40",children:b.map(N=>R.jsxs("button",{type:"button",onClick:()=>H(N),className:"w-full px-3 py-2 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors flex items-center space-x-2",children:[R.jsx("div",{className:`w-6 h-6 ${vs(N,S[N])} text-white rounded-full flex items-center justify-center text-xs font-medium`,children:ys(N,S[N])}),R.jsx("span",{className:"text-sm",children:N})]},N))})]}),a&&R.jsx("div",{ref:p,className:"absolute bottom-full right-4 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3 z-50",style:{width:"280px",maxHeight:"200px"},children:R.jsx("div",{className:"grid grid-cols-8 gap-1 overflow-y-auto max-h-40",children:N_.map((N,K)=>R.jsx("button",{type:"button",onClick:()=>A(N),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:N},K))})}),R.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500 dark:text-gray-400",children:[R.jsx("span",{children:"Enter 发送 • Shift+Enter 换行"}),R.jsxs("span",{children:[u.length,"/500"]})]})]})]})},H_=({progress:e,message:t,username:r})=>R.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:R.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 max-w-md w-full",children:R.jsxs("div",{className:"text-center",children:[R.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-linux-100 dark:bg-linux-900/20 text-linux-600 dark:text-linux-400 rounded-full mb-6",children:R.jsx(__,{size:32})}),R.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["正在为 ",r," 创建容器"]}),R.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:"请稍等，我们正在为你准备独立的Linux环境..."}),R.jsxs("div",{className:"mb-6",children:[R.jsx("div",{className:"progress-bar mb-3",children:R.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),R.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[R.jsx("span",{children:"0%"}),R.jsxs("span",{className:"font-medium",children:[e,"%"]}),R.jsx("span",{children:"100%"})]})]}),R.jsxs("div",{className:"flex items-center justify-center space-x-2 text-linux-600 dark:text-linux-400",children:[R.jsx(y_,{size:16,className:"animate-spin"}),R.jsx("span",{className:"text-sm font-medium",children:t})]}),R.jsxs("div",{className:"mt-8 text-left",children:[R.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"创建步骤："}),R.jsx("div",{className:"space-y-2",children:[{step:"拉取Ubuntu镜像",threshold:20},{step:"创建容器",threshold:40},{step:"配置环境",threshold:60},{step:"启动服务",threshold:80},{step:"容器就绪",threshold:100}].map((i,n)=>R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:`w-2 h-2 rounded-full ${e>=i.threshold?"bg-green-500":e>=i.threshold-20?"bg-linux-500 animate-pulse":"bg-gray-300 dark:bg-gray-600"}`}),R.jsx("span",{className:`text-sm ${e>=i.threshold?"text-green-600 dark:text-green-400 font-medium":e>=i.threshold-20?"text-linux-600 dark:text-linux-400":"text-gray-500 dark:text-gray-400"}`,children:i.step}),e>=i.threshold&&R.jsx("span",{className:"text-green-500 text-xs",children:"✓"})]},n))})]}),R.jsx("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:R.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[R.jsx("p",{className:"font-medium mb-1",children:"💡 小贴士"}),R.jsx("p",{children:"容器创建完成后，你将获得："}),R.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-xs",children:[R.jsx("li",{children:"完整的Ubuntu 22.04环境"}),R.jsx("li",{children:"sudo权限，可安装任何软件"}),R.jsx("li",{children:"2小时的使用时间"}),R.jsx("li",{children:"与其他用户完全隔离"})]})]})})]})})}),Fu=Q.createContext(),F_=()=>{const e=Q.useContext(Fu);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},z_=({children:e})=>{const[t,r]=Q.useState(()=>{const u=localStorage.getItem("theme");return u?u==="dark":!0});Q.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n={isDarkMode:t,toggleTheme:()=>{r(u=>!u)},theme:t?"dark":"light"};return R.jsx(Fu.Provider,{value:n,children:e})},U_=()=>{const{isDarkMode:e,toggleTheme:t}=F_();return R.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors duration-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700",title:e?"切换到明亮模式":"切换到黑暗模式",children:e?R.jsx(D_,{className:"h-5 w-5 text-yellow-500"}):R.jsx(b_,{className:"h-5 w-5 text-gray-600"})})},Wn=({username:e,onLogout:t,onlineCount:r=0})=>{const[i,n]=Q.useState(!1),u=Q.useRef(null),m=[{id:1,title:"欢迎使用Linux Analytics！",content:"支持多用户机器学习协作，每人一个独立的容器环境。",time:"2024-01-15",type:"info"},{id:2,title:"新功能上线",content:"现在支持终端复制粘贴功能，使用Ctrl+Shift+C/V进行操作。",time:"2024-01-14",type:"feature"},{id:3,title:"聊天室更新",content:"聊天室现在支持Shift+Enter换行，可以发送多行消息了！",time:"2024-01-13",type:"update"}],a=()=>{n(!i)};return Q.useEffect(()=>{const c=f=>{u.current&&!u.current.contains(f.target)&&n(!1)};return i&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[i]),R.jsxs("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700",children:[R.jsx("div",{className:"container mx-auto px-4",children:R.jsxs("div",{className:"flex items-center h-16",children:[R.jsxs("div",{className:"flex items-center space-x-3",children:[R.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-linux-500 text-white rounded-lg",children:R.jsx(Ko,{size:24})}),R.jsxs("div",{children:[R.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Linux Analytics"}),R.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:"机器学习容器管理平台"})]})]}),R.jsxs("div",{className:"hidden lg:flex flex-1 justify-center mx-8 relative",children:[R.jsxs("button",{onClick:a,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 flex items-center space-x-2 relative",children:[R.jsx(p_,{size:16,className:"animate-pulse"}),R.jsx("span",{className:"text-sm font-medium",children:"点我查看通知"}),R.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"}),R.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),i&&R.jsxs("div",{ref:u,className:"absolute top-full mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 z-50",children:[R.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[R.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"系统通知"}),R.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:R.jsx(A_,{size:20})})]}),R.jsx("div",{className:"max-h-80 overflow-y-auto",children:m.map(c=>R.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:R.jsxs("div",{className:"flex items-start space-x-3",children:[R.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${c.type==="info"?"bg-blue-500":c.type==="feature"?"bg-green-500":"bg-purple-500"}`}),R.jsxs("div",{className:"flex-1",children:[R.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:c.title}),R.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:c.content}),R.jsx("span",{className:"text-xs text-gray-400",children:c.time})]})]})},c.id))})]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[e&&R.jsxs(R.Fragment,{children:[R.jsxs("div",{className:"hidden sm:flex items-center space-x-3",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),R.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e})]}),R.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-400",children:[R.jsx("span",{children:"在线:"}),R.jsx("span",{className:"font-medium text-linux-600 dark:text-linux-400",children:r})]})]}),R.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[R.jsx(w_,{size:16}),R.jsx("span",{className:"hidden sm:inline",children:"退出"})]})]}),R.jsx(U_,{}),R.jsxs("a",{href:"https://github.com/ml-analytics",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[R.jsx(m_,{size:16}),R.jsx("span",{className:"hidden sm:inline",children:"GitHub"})]})]})]})}),e&&R.jsx("div",{className:"bg-linux-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:R.jsx("div",{className:"container mx-auto px-4 py-2",children:R.jsxs("div",{className:"flex items-center justify-between text-sm",children:[R.jsxs("div",{className:"flex items-center space-x-4",children:[R.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["容器状态: ",R.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"运行中"})]}),R.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["用户: ",R.jsx("span",{className:"font-medium",children:e})]})]}),R.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400",children:[R.jsx($o,{size:14}),R.jsx("span",{children:"Made with ❤️ by ML Analytics Team"})]})]})})})]})},W_=()=>{const e=Q.useRef(null);return Q.useEffect(()=>{if(!e.current)return;console.log("Creating test terminal...");const t=new Ka.Terminal({fontSize:16,fontFamily:"monospace",theme:{background:"#000000",foreground:"#ffffff"},cursorBlink:!0});let r="";try{t.open(e.current),console.log("Test terminal opened"),t.write(`=== XTerm.js Test ===\r
`),t.write(`If you can see this text, XTerm.js is working!\r
`),t.write("Terminal size: "+t.cols+"x"+t.rows+`\r
`),t.write(`Type something and press Enter:\r
`),t.write("$ "),t.onData(i=>{const n=i.charCodeAt(0);n===13?(t.write(`\r
`),r.trim()&&t.write("You typed: "+r+`\r
`),r="",t.write("$ ")):n===127?r.length>0&&(r=r.slice(0,-1),t.write("\b \b")):n>=32&&(r+=i,t.write(i))}),console.log("Test text written to terminal")}catch(i){console.error("Failed to create test terminal:",i)}return()=>{t.dispose()}},[]),R.jsxs("div",{className:"p-4",children:[R.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"XTerm.js 测试"}),R.jsx("div",{ref:e,style:{width:"800px",height:"400px",backgroundColor:"#000000",border:"1px solid #666"}})]})},$_=({socket:e,currentUsername:t,activeUsers:r})=>{const[i,n]=Q.useState({}),[u,m]=Q.useState({}),[a,c]=Q.useState({}),f=Q.useRef({}),v=Q.useRef({}),d=r.filter(h=>h!==t),_=Q.useCallback((h,l)=>{if(!l||v.current[h])return;const s=new Ka.Terminal({rows:20,cols:80,theme:{background:"#000000",foreground:"#ffffff",cursor:"#ffffff",selection:"#ffffff40"},fontSize:12,fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',cursorBlink:!1,disableStdin:!0});s.open(l),v.current[h]=s,u[h]&&s.write(u[h])},[u]),S=Q.useCallback(h=>{const l=f.current[h];l&&(l.scrollTop=l.scrollHeight)},[]);Q.useEffect(()=>{(()=>{const l={};d.forEach(s=>{const o=Hu(s);o&&(l[s]=o)}),c(l)})()},[d.length]);const x=Q.useRef({});Q.useEffect(()=>{Object.keys(u).forEach(h=>{u[h]!==x.current[h]&&d.includes(h)&&setTimeout(()=>S(h),50)}),x.current={...u}},[u]),Q.useEffect(()=>{if(e)return e.on("user-terminal-output",h=>{const{username:l,data:s}=h;if(l!==t){m(p=>({...p,[l]:(p[l]||"")+s}));const o=v.current[l];o&&o.write(s)}}),e.on("likes-updated",h=>{n(l=>({...l,[h.username]:h.likes}))}),e.on("all-likes",h=>{n(h)}),e.on("user-liked",()=>{}),e.emit("get-all-likes"),()=>{e.off("user-terminal-output"),e.off("likes-updated"),e.off("all-likes"),e.off("user-liked")}},[e,t]),Q.useEffect(()=>()=>{Object.values(v.current).forEach(h=>{h&&h.dispose()}),v.current={}},[]);const g=h=>{e&&e.emit("like-user",{targetUsername:h})};return d.length===0?R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[R.jsx(k_,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-3"}),R.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"暂无其他用户"}),R.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"当有其他用户在线时，你可以在这里观看他们的终端操作"})]}):R.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[R.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:R.jsxs("div",{className:"flex items-center justify-between",children:[R.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center",children:[R.jsx(g_,{className:"h-5 w-5 mr-2 text-blue-500"}),"其他用户终端"]}),R.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d.length," 个用户在线"]})]})}),R.jsxs("div",{className:"p-4",children:[R.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:d.map(h=>R.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[R.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600 flex items-center justify-between",children:[R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm ${vs(h,a[h])}`,children:ys(h,a[h])}),R.jsxs("div",{children:[R.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:h}),R.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[R.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"运行中"]})]})]}),R.jsxs("div",{className:"flex items-center space-x-2",children:[R.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i[h]||0," ❤️"]}),R.jsx("button",{onClick:()=>g(h),className:"p-2 rounded-full transition-colors bg-gray-100 dark:bg-gray-600 hover:bg-red-100 dark:hover:bg-red-900 text-gray-600 dark:text-gray-300 hover:text-red-500 dark:hover:text-red-400",title:"给TA点赞",children:R.jsx($o,{className:"h-4 w-4"})})]})]}),R.jsx("div",{ref:l=>{f.current[h]=l,l&&_(h,l)},className:"bg-black h-64",children:!u[h]&&R.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 italic text-sm",children:"等待用户操作..."})}),R.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 text-xs text-gray-500 dark:text-gray-400 flex justify-between",children:[R.jsx("span",{children:"只读模式"}),R.jsx("span",{children:"实时同步"})]})]},h))}),R.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:R.jsxs("div",{className:"flex items-start space-x-2",children:[R.jsx($o,{className:"h-4 w-4 text-blue-500 mt-0.5"}),R.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[R.jsx("p",{className:"font-medium",children:"互动功能"}),R.jsx("p",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"观看其他用户的实时操作，给优秀的操作点赞鼓励！可以无限制点赞支持。"})]})]})})]})]})};function V_(){const[e,t]=Q.useState(!1),[r,i]=Q.useState(null),[n,u]=Q.useState(""),[m,a]=Q.useState(!1),[c,f]=Q.useState(!1),[v,d]=Q.useState({progress:0,message:""}),[_,S]=Q.useState([]),[x,g]=Q.useState([]),[h,l]=Q.useState(""),[s,o]=Q.useState("terminal"),[p,w]=Q.useState(!1);Q.useEffect(()=>{const O=new URLSearchParams(window.location.search),A=O.get("username"),j=O.get("login");if(A&&j==="success"){window.history.replaceState({},document.title,window.location.pathname),u(A),k(A);return}const z="/api";console.log("连接到后端URL:",z);const U=fi(z,{autoConnect:!1,timeout:2e4,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,maxReconnectionAttempts:5,forceNew:!0});return U.on("connect",()=>{console.log("Socket连接成功");const q=setInterval(()=>{U.connected?U.emit("ping"):clearInterval(q)},3e4);U.heartbeatInterval=q}),U.on("disconnect",()=>{console.log("Socket连接断开"),a(!1),U.heartbeatInterval&&(clearInterval(U.heartbeatInterval),U.heartbeatInterval=null)}),U.on("error",q=>{console.log("Socket错误:",q),l(q.message),f(!1)}),U.on("container-creating",q=>{f(!0),d({progress:0,message:q.message})}),U.on("container-progress",q=>{d(q)}),U.on("container-ready",q=>{console.log("容器就绪:",q),f(!1),a(!0),l(""),setTimeout(()=>{U.emit("get-user-list")},200),setTimeout(()=>{U.emit("get-user-list")},1e3),setTimeout(()=>{U.emit("get-user-list")},2e3)}),U.on("user-joined",q=>{console.log("用户加入:",q.username)}),U.on("user-left",q=>{console.log("用户离开:",q.username)}),U.on("user-list-updated",q=>{console.log("用户列表更新 (主监听器):",q),S(q)}),y(U),i(U),()=>{U.close()}},[]);const C=(O,A)=>{r&&(u(O),l(""),r.connect(),r.emit("join",{username:O,password:A}),r.emit("get-chat-history"),r.emit("get-user-list"))},k=O=>{const A="/api";console.log("自动登录连接到后端URL:",A);const j=fi(A,{autoConnect:!0});i(j),u(O),l(""),j.on("connect",()=>{console.log("Socket连接成功"),j.emit("join",{username:O}),j.emit("get-chat-history"),j.emit("get-user-list")}),y(j)},y=O=>{O.on("container-creating",()=>{f(!0),d({progress:0,message:"正在创建容器..."})}),O.on("container-progress",j=>{d(j)}),O.on("container-ready",j=>{console.log("容器就绪 (setupSocketListeners):",j),a(!0),f(!1),d({progress:100,message:j.message||"容器就绪!"})}),O.on("chat-message",j=>{console.log("收到新聊天消息:",j),g(z=>{const U=[...z,j];return console.log("更新聊天消息列表:",U),U})}),O.on("chat-history",j=>{console.log("收到聊天历史:",j),g(j)}),O.on("user-joined",j=>{console.log("用户加入 (setupSocketListeners):",j.username),setTimeout(()=>{O.emit("get-user-list")},500)}),O.on("user-left",j=>{console.log("用户离开 (setupSocketListeners):",j.username),setTimeout(()=>{O.emit("get-user-list")},500)}),O.on("user-list-updated",j=>{console.log("用户列表更新 (setupSocketListeners):",j),S(j)});const A=setInterval(()=>{O.connected&&O.emit("get-user-list")},1e4);return()=>{clearInterval(A)}},E=O=>{if(!r||!m){console.error("无法发送消息: socket未连接",{socket:!!r,isConnected:m});return}console.log("发送聊天消息:",{messageData:O,username:n,isConnected:m}),r.emit("chat-message",O)},T=O=>{w(O)},P=()=>{r&&r.disconnect(),u(""),a(!1),f(!1),d({progress:0,message:""}),g([]),l("")};return e?R.jsx("div",{className:"min-h-screen bg-gray-900",children:R.jsxs("div",{className:"p-4",children:[R.jsx("button",{onClick:()=>t(!1),className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"退出测试模式"}),R.jsx(W_,{})]})}):!m&&!c?R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-linux-50 to-linux-100 dark:from-gray-900 dark:to-gray-800",children:[R.jsx(Wn,{}),R.jsx("div",{className:"container mx-auto px-4 py-8",children:R.jsxs("div",{className:"max-w-md mx-auto",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-linux-500 text-white rounded-full mb-4",children:R.jsx(Ko,{size:32})}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"欢迎来到Linux Analytics"}),R.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"输入用户名获得你的专属机器学习容器"})]}),R.jsx(B_,{onLogin:C,error:h}),R.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400",children:[R.jsx("p",{children:"🐳 每个用户独立容器"}),R.jsx("p",{children:"🛡️ 完全安全隔离"}),R.jsx("p",{children:"⏰ 2小时自动清理"})]})]})})]}):c?R.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-linux-50 to-linux-100 dark:from-gray-900 dark:to-gray-800",children:[R.jsx(Wn,{}),R.jsx(H_,{progress:v.progress,message:v.message,username:n})]}):R.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[R.jsx(Wn,{username:n,onLogout:P,onlineCount:_.length}),R.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:R.jsxs("div",{className:"flex",children:[R.jsxs("button",{onClick:()=>o("terminal"),className:`flex-1 flex items-center justify-center py-3 px-4 text-sm font-medium ${s==="terminal"?"text-linux-600 border-b-2 border-linux-600":"text-gray-500 dark:text-gray-400"}`,children:[R.jsx(Ko,{size:18,className:"mr-2"}),"终端"]}),R.jsxs("button",{onClick:()=>o("chat"),className:`flex-1 flex items-center justify-center py-3 px-4 text-sm font-medium ${s==="chat"?"text-linux-600 border-b-2 border-linux-600":"text-gray-500 dark:text-gray-400"}`,children:[R.jsx(Vo,{size:18,className:"mr-2"}),"聊天"]})]})}),R.jsxs("div",{className:"container mx-auto px-4 py-6 relative",children:[R.jsx("div",{className:"mb-8",children:R.jsx("div",{className:`${p?"w-full":"lg:w-[62%]"} ${s!=="terminal"?"hidden lg:block":""}`,children:R.jsx(M_,{socket:r,username:n,onFullscreenChange:T})})}),!p&&R.jsx("div",{className:"lg:absolute lg:top-6 lg:right-4 lg:w-[36%] space-y-6 z-50",children:R.jsx("div",{className:`${s!=="chat"?"hidden lg:block":""}`,children:R.jsx(j_,{socket:r,messages:x,currentUsername:n,activeUsers:_,onSendMessage:E})})})]}),R.jsx("div",{className:"container mx-auto px-4 pb-6",children:R.jsxs("div",{className:"w-full",children:[console.log("App.jsx - activeUsers:",_),console.log("App.jsx - username:",n),R.jsx($_,{socket:r,currentUsername:n,activeUsers:_})]})})]})}const K_=()=>R.jsx(z_,{children:R.jsx(V_,{})});$n.createRoot(document.getElementById("root")).render(R.jsx(sd.StrictMode,{children:R.jsx(K_,{})}));
