(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const u of n)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function r(n){const u={};return n.integrity&&(u.integrity=n.integrity),n.referrerPolicy&&(u.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?u.credentials="include":n.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(n){if(n.ep)return;n.ep=!0;const u=r(n);fetch(n.href,u)}})();function Wu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var hc={exports:{}},Us={},uc={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ai=Symbol.for("react.element"),$u=Symbol.for("react.portal"),Vu=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),qu=Symbol.for("react.profiler"),Xu=Symbol.for("react.provider"),Gu=Symbol.for("react.context"),Yu=Symbol.for("react.forward_ref"),Qu=Symbol.for("react.suspense"),Ju=Symbol.for("react.memo"),Zu=Symbol.for("react.lazy"),qa=Symbol.iterator;function ed(e){return e===null||typeof e!="object"?null:(e=qa&&e[qa]||e["@@iterator"],typeof e=="function"?e:null)}var dc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fc=Object.assign,pc={};function Ir(e,t,r){this.props=e,this.context=t,this.refs=pc,this.updater=r||dc}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _c(){}_c.prototype=Ir.prototype;function qo(e,t,r){this.props=e,this.context=t,this.refs=pc,this.updater=r||dc}var Xo=qo.prototype=new _c;Xo.constructor=qo;fc(Xo,Ir.prototype);Xo.isPureReactComponent=!0;var Xa=Array.isArray,gc=Object.prototype.hasOwnProperty,Go={current:null},mc={key:!0,ref:!0,__self:!0,__source:!0};function vc(e,t,r){var i,n={},u=null,m=null;if(t!=null)for(i in t.ref!==void 0&&(m=t.ref),t.key!==void 0&&(u=""+t.key),t)gc.call(t,i)&&!mc.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=r;else if(1<a){for(var c=Array(a),f=0;f<a;f++)c[f]=arguments[f+2];n.children=c}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:Ai,type:e,key:u,ref:m,props:n,_owner:Go.current}}function td(e,t){return{$$typeof:Ai,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Yo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ai}function rd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Ga=/\/+/g;function un(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rd(""+e.key):t.toString(36)}function is(e,t,r,i,n){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var m=!1;if(e===null)m=!0;else switch(u){case"string":case"number":m=!0;break;case"object":switch(e.$$typeof){case Ai:case $u:m=!0}}if(m)return m=e,n=n(m),e=i===""?"."+un(m,0):i,Xa(n)?(r="",e!=null&&(r=e.replace(Ga,"$&/")+"/"),is(n,t,r,"",function(f){return f})):n!=null&&(Yo(n)&&(n=td(n,r+(!n.key||m&&m.key===n.key?"":(""+n.key).replace(Ga,"$&/")+"/")+e)),t.push(n)),1;if(m=0,i=i===""?".":i+":",Xa(e))for(var a=0;a<e.length;a++){u=e[a];var c=i+un(u,a);m+=is(u,t,r,c,n)}else if(c=ed(e),typeof c=="function")for(e=c.call(e),a=0;!(u=e.next()).done;)u=u.value,c=i+un(u,a++),m+=is(u,t,r,c,n);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return m}function ji(e,t,r){if(e==null)return e;var i=[],n=0;return is(e,i,"","",function(u){return t.call(r,u,n++)}),i}function id(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Oe={current:null},ss={transition:null},sd={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:ss,ReactCurrentOwner:Go};function yc(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:ji,forEach:function(e,t,r){ji(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ji(e,function(){t++}),t},toArray:function(e){return ji(e,function(t){return t})||[]},only:function(e){if(!Yo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ee.Component=Ir;ee.Fragment=Vu;ee.Profiler=qu;ee.PureComponent=qo;ee.StrictMode=Ku;ee.Suspense=Qu;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sd;ee.act=yc;ee.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=fc({},e.props),n=e.key,u=e.ref,m=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,m=Go.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)gc.call(t,c)&&!mc.hasOwnProperty(c)&&(i[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){a=Array(c);for(var f=0;f<c;f++)a[f]=arguments[f+2];i.children=a}return{$$typeof:Ai,type:e.type,key:n,ref:u,props:i,_owner:m}};ee.createContext=function(e){return e={$$typeof:Gu,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Xu,_context:e},e.Consumer=e};ee.createElement=vc;ee.createFactory=function(e){var t=vc.bind(null,e);return t.type=e,t};ee.createRef=function(){return{current:null}};ee.forwardRef=function(e){return{$$typeof:Yu,render:e}};ee.isValidElement=Yo;ee.lazy=function(e){return{$$typeof:Zu,_payload:{_status:-1,_result:e},_init:id}};ee.memo=function(e,t){return{$$typeof:Ju,type:e,compare:t===void 0?null:t}};ee.startTransition=function(e){var t=ss.transition;ss.transition={};try{e()}finally{ss.transition=t}};ee.unstable_act=yc;ee.useCallback=function(e,t){return Oe.current.useCallback(e,t)};ee.useContext=function(e){return Oe.current.useContext(e)};ee.useDebugValue=function(){};ee.useDeferredValue=function(e){return Oe.current.useDeferredValue(e)};ee.useEffect=function(e,t){return Oe.current.useEffect(e,t)};ee.useId=function(){return Oe.current.useId()};ee.useImperativeHandle=function(e,t,r){return Oe.current.useImperativeHandle(e,t,r)};ee.useInsertionEffect=function(e,t){return Oe.current.useInsertionEffect(e,t)};ee.useLayoutEffect=function(e,t){return Oe.current.useLayoutEffect(e,t)};ee.useMemo=function(e,t){return Oe.current.useMemo(e,t)};ee.useReducer=function(e,t,r){return Oe.current.useReducer(e,t,r)};ee.useRef=function(e){return Oe.current.useRef(e)};ee.useState=function(e){return Oe.current.useState(e)};ee.useSyncExternalStore=function(e,t,r){return Oe.current.useSyncExternalStore(e,t,r)};ee.useTransition=function(){return Oe.current.useTransition()};ee.version="18.3.1";uc.exports=ee;var Y=uc.exports;const Sc=Wu(Y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nd=Y,od=Symbol.for("react.element"),ad=Symbol.for("react.fragment"),ld=Object.prototype.hasOwnProperty,cd=nd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hd={key:!0,ref:!0,__self:!0,__source:!0};function wc(e,t,r){var i,n={},u=null,m=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(m=t.ref);for(i in t)ld.call(t,i)&&!hd.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:od,type:e,key:u,ref:m,props:n,_owner:cd.current}}Us.Fragment=ad;Us.jsx=wc;Us.jsxs=wc;hc.exports=Us;var L=hc.exports,Un={},Cc={exports:{}},Ve={},xc={exports:{}},kc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(I,E){var R=I.length;I.push(E);e:for(;0<R;){var B=R-1>>>1,M=I[B];if(0<n(M,E))I[B]=E,I[R]=M,R=B;else break e}}function r(I){return I.length===0?null:I[0]}function i(I){if(I.length===0)return null;var E=I[0],R=I.pop();if(R!==E){I[0]=R;e:for(var B=0,M=I.length,z=M>>>1;B<z;){var K=2*(B+1)-1,Q=I[K],J=K+1,N=I[J];if(0>n(Q,R))J<M&&0>n(N,Q)?(I[B]=N,I[J]=R,B=J):(I[B]=Q,I[K]=R,B=K);else if(J<M&&0>n(N,R))I[B]=N,I[J]=R,B=J;else break e}}return E}function n(I,E){var R=I.sortIndex-E.sortIndex;return R!==0?R:I.id-E.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var m=Date,a=m.now();e.unstable_now=function(){return m.now()-a}}var c=[],f=[],v=1,d=null,_=3,S=!1,x=!1,g=!1,h=typeof setTimeout=="function"?setTimeout:null,o=typeof clearTimeout=="function"?clearTimeout:null,s=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function l(I){for(var E=r(f);E!==null;){if(E.callback===null)i(f);else if(E.startTime<=I)i(f),E.sortIndex=E.expirationTime,t(c,E);else break;E=r(f)}}function p(I){if(g=!1,l(I),!x)if(r(c)!==null)x=!0,W(w);else{var E=r(f);E!==null&&H(p,E.startTime-I)}}function w(I,E){x=!1,g&&(g=!1,o(y),y=-1),S=!0;var R=_;try{for(l(E),d=r(c);d!==null&&(!(d.expirationTime>E)||I&&!O());){var B=d.callback;if(typeof B=="function"){d.callback=null,_=d.priorityLevel;var M=B(d.expirationTime<=E);E=e.unstable_now(),typeof M=="function"?d.callback=M:d===r(c)&&i(c),l(E)}else i(c);d=r(c)}if(d!==null)var z=!0;else{var K=r(f);K!==null&&H(p,K.startTime-E),z=!1}return z}finally{d=null,_=R,S=!1}}var C=!1,k=null,y=-1,b=5,T=-1;function O(){return!(e.unstable_now()-T<b)}function P(){if(k!==null){var I=e.unstable_now();T=I;var E=!0;try{E=k(!0,I)}finally{E?A():(C=!1,k=null)}}else C=!1}var A;if(typeof s=="function")A=function(){s(P)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,U=j.port2;j.port1.onmessage=P,A=function(){U.postMessage(null)}}else A=function(){h(P,0)};function W(I){k=I,C||(C=!0,A())}function H(I,E){y=h(function(){I(e.unstable_now())},E)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(I){I.callback=null},e.unstable_continueExecution=function(){x||S||(x=!0,W(w))},e.unstable_forceFrameRate=function(I){0>I||125<I?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<I?Math.floor(1e3/I):5},e.unstable_getCurrentPriorityLevel=function(){return _},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(I){switch(_){case 1:case 2:case 3:var E=3;break;default:E=_}var R=_;_=E;try{return I()}finally{_=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(I,E){switch(I){case 1:case 2:case 3:case 4:case 5:break;default:I=3}var R=_;_=I;try{return E()}finally{_=R}},e.unstable_scheduleCallback=function(I,E,R){var B=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?B+R:B):R=B,I){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=R+M,I={id:v++,callback:E,priorityLevel:I,startTime:R,expirationTime:M,sortIndex:-1},R>B?(I.sortIndex=R,t(f,I),r(c)===null&&I===r(f)&&(g?(o(y),y=-1):g=!0,H(p,R-B))):(I.sortIndex=M,t(c,I),x||S||(x=!0,W(w))),I},e.unstable_shouldYield=O,e.unstable_wrapCallback=function(I){var E=_;return function(){var R=_;_=E;try{return I.apply(this,arguments)}finally{_=R}}}})(kc);xc.exports=kc;var ud=xc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dd=Y,$e=ud;function V(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ec=new Set,pi={};function lr(e,t){Dr(e,t),Dr(e+"Capture",t)}function Dr(e,t){for(pi[e]=t,e=0;e<t.length;e++)Ec.add(t[e])}var Ct=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wn=Object.prototype.hasOwnProperty,fd=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ya={},Qa={};function pd(e){return Wn.call(Qa,e)?!0:Wn.call(Ya,e)?!1:fd.test(e)?Qa[e]=!0:(Ya[e]=!0,!1)}function _d(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gd(e,t,r,i){if(t===null||typeof t>"u"||_d(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pe(e,t,r,i,n,u,m){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=m}var be={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){be[e]=new Pe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];be[t]=new Pe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){be[e]=new Pe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){be[e]=new Pe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){be[e]=new Pe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){be[e]=new Pe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){be[e]=new Pe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){be[e]=new Pe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){be[e]=new Pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Qo=/[\-:]([a-z])/g;function Jo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Qo,Jo);be[t]=new Pe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Qo,Jo);be[t]=new Pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Qo,Jo);be[t]=new Pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){be[e]=new Pe(e,1,!1,e.toLowerCase(),null,!1,!1)});be.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){be[e]=new Pe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zo(e,t,r,i){var n=be.hasOwnProperty(t)?be[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gd(t,r,n,i)&&(r=null),i||n===null?pd(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=r===null?n.type===3?!1:"":r:(t=n.attributeName,i=n.attributeNamespace,r===null?e.removeAttribute(t):(n=n.type,r=n===3||n===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var bt=dd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hi=Symbol.for("react.element"),ur=Symbol.for("react.portal"),dr=Symbol.for("react.fragment"),ea=Symbol.for("react.strict_mode"),$n=Symbol.for("react.profiler"),bc=Symbol.for("react.provider"),Lc=Symbol.for("react.context"),ta=Symbol.for("react.forward_ref"),Vn=Symbol.for("react.suspense"),Kn=Symbol.for("react.suspense_list"),ra=Symbol.for("react.memo"),Tt=Symbol.for("react.lazy"),Rc=Symbol.for("react.offscreen"),Ja=Symbol.iterator;function $r(e){return e===null||typeof e!="object"?null:(e=Ja&&e[Ja]||e["@@iterator"],typeof e=="function"?e:null)}var fe=Object.assign,dn;function Zr(e){if(dn===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);dn=t&&t[1]||""}return`
`+dn+e}var fn=!1;function pn(e,t){if(!e||fn)return"";fn=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(f){var i=f}Reflect.construct(e,[],t)}else{try{t.call()}catch(f){i=f}e.call(t.prototype)}else{try{throw Error()}catch(f){i=f}e()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var n=f.stack.split(`
`),u=i.stack.split(`
`),m=n.length-1,a=u.length-1;1<=m&&0<=a&&n[m]!==u[a];)a--;for(;1<=m&&0<=a;m--,a--)if(n[m]!==u[a]){if(m!==1||a!==1)do if(m--,a--,0>a||n[m]!==u[a]){var c=`
`+n[m].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=m&&0<=a);break}}}finally{fn=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zr(e):""}function md(e){switch(e.tag){case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return e=pn(e.type,!1),e;case 11:return e=pn(e.type.render,!1),e;case 1:return e=pn(e.type,!0),e;default:return""}}function qn(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case dr:return"Fragment";case ur:return"Portal";case $n:return"Profiler";case ea:return"StrictMode";case Vn:return"Suspense";case Kn:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lc:return(e.displayName||"Context")+".Consumer";case bc:return(e._context.displayName||"Context")+".Provider";case ta:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ra:return t=e.displayName||null,t!==null?t:qn(e.type)||"Memo";case Tt:t=e._payload,e=e._init;try{return qn(e(t))}catch{}}return null}function vd(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qn(t);case 8:return t===ea?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Dc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yd(e){var t=Dc(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var n=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(m){i=""+m,u.call(this,m)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(m){i=""+m},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fi(e){e._valueTracker||(e._valueTracker=yd(e))}function Tc(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Dc(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function vs(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xn(e,t){var r=t.checked;return fe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Za(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Vt(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ac(e,t){t=t.checked,t!=null&&Zo(e,"checked",t,!1)}function Gn(e,t){Ac(e,t);var r=Vt(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Yn(e,t.type,r):t.hasOwnProperty("defaultValue")&&Yn(e,t.type,Vt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function el(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Yn(e,t,r){(t!=="number"||vs(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var ei=Array.isArray;function xr(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Vt(r),t=null,n=0;n<e.length;n++){if(e[n].value===r){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function Qn(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(V(91));return fe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tl(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(V(92));if(ei(r)){if(1<r.length)throw Error(V(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Vt(r)}}function Bc(e,t){var r=Vt(t.value),i=Vt(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function rl(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Oc(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jn(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Oc(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zi,Pc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zi=zi||document.createElement("div"),zi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _i(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var si={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sd=["Webkit","ms","Moz","O"];Object.keys(si).forEach(function(e){Sd.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),si[t]=si[e]})});function Mc(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||si.hasOwnProperty(e)&&si[e]?(""+t).trim():t+"px"}function Ic(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,n=Mc(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}var wd=fe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Zn(e,t){if(t){if(wd[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(V(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(V(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(V(61))}if(t.style!=null&&typeof t.style!="object")throw Error(V(62))}}function eo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var to=null;function ia(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ro=null,kr=null,Er=null;function il(e){if(e=Pi(e)){if(typeof ro!="function")throw Error(V(280));var t=e.stateNode;t&&(t=qs(t),ro(e.stateNode,e.type,t))}}function Nc(e){kr?Er?Er.push(e):Er=[e]:kr=e}function jc(){if(kr){var e=kr,t=Er;if(Er=kr=null,il(e),t)for(e=0;e<t.length;e++)il(t[e])}}function Hc(e,t){return e(t)}function Fc(){}var _n=!1;function zc(e,t,r){if(_n)return e(t,r);_n=!0;try{return Hc(e,t,r)}finally{_n=!1,(kr!==null||Er!==null)&&(Fc(),jc())}}function gi(e,t){var r=e.stateNode;if(r===null)return null;var i=qs(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(V(231,t,typeof r));return r}var io=!1;if(Ct)try{var Vr={};Object.defineProperty(Vr,"passive",{get:function(){io=!0}}),window.addEventListener("test",Vr,Vr),window.removeEventListener("test",Vr,Vr)}catch{io=!1}function Cd(e,t,r,i,n,u,m,a,c){var f=Array.prototype.slice.call(arguments,3);try{t.apply(r,f)}catch(v){this.onError(v)}}var ni=!1,ys=null,Ss=!1,so=null,xd={onError:function(e){ni=!0,ys=e}};function kd(e,t,r,i,n,u,m,a,c){ni=!1,ys=null,Cd.apply(xd,arguments)}function Ed(e,t,r,i,n,u,m,a,c){if(kd.apply(this,arguments),ni){if(ni){var f=ys;ni=!1,ys=null}else throw Error(V(198));Ss||(Ss=!0,so=f)}}function cr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Uc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sl(e){if(cr(e)!==e)throw Error(V(188))}function bd(e){var t=e.alternate;if(!t){if(t=cr(e),t===null)throw Error(V(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(n===null)break;var u=n.alternate;if(u===null){if(i=n.return,i!==null){r=i;continue}break}if(n.child===u.child){for(u=n.child;u;){if(u===r)return sl(n),e;if(u===i)return sl(n),t;u=u.sibling}throw Error(V(188))}if(r.return!==i.return)r=n,i=u;else{for(var m=!1,a=n.child;a;){if(a===r){m=!0,r=n,i=u;break}if(a===i){m=!0,i=n,r=u;break}a=a.sibling}if(!m){for(a=u.child;a;){if(a===r){m=!0,r=u,i=n;break}if(a===i){m=!0,i=u,r=n;break}a=a.sibling}if(!m)throw Error(V(189))}}if(r.alternate!==i)throw Error(V(190))}if(r.tag!==3)throw Error(V(188));return r.stateNode.current===r?e:t}function Wc(e){return e=bd(e),e!==null?$c(e):null}function $c(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$c(e);if(t!==null)return t;e=e.sibling}return null}var Vc=$e.unstable_scheduleCallback,nl=$e.unstable_cancelCallback,Ld=$e.unstable_shouldYield,Rd=$e.unstable_requestPaint,me=$e.unstable_now,Dd=$e.unstable_getCurrentPriorityLevel,sa=$e.unstable_ImmediatePriority,Kc=$e.unstable_UserBlockingPriority,ws=$e.unstable_NormalPriority,Td=$e.unstable_LowPriority,qc=$e.unstable_IdlePriority,Ws=null,ft=null;function Ad(e){if(ft&&typeof ft.onCommitFiberRoot=="function")try{ft.onCommitFiberRoot(Ws,e,void 0,(e.current.flags&128)===128)}catch{}}var ot=Math.clz32?Math.clz32:Pd,Bd=Math.log,Od=Math.LN2;function Pd(e){return e>>>=0,e===0?32:31-(Bd(e)/Od|0)|0}var Ui=64,Wi=4194304;function ti(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Cs(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,n=e.suspendedLanes,u=e.pingedLanes,m=r&268435455;if(m!==0){var a=m&~n;a!==0?i=ti(a):(u&=m,u!==0&&(i=ti(u)))}else m=r&~n,m!==0?i=ti(m):u!==0&&(i=ti(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,u=t&-t,n>=u||n===16&&(u&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-ot(t),n=1<<r,i|=e[r],t&=~n;return i}function Md(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Id(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,u=e.pendingLanes;0<u;){var m=31-ot(u),a=1<<m,c=n[m];c===-1?(!(a&r)||a&i)&&(n[m]=Md(a,t)):c<=t&&(e.expiredLanes|=a),u&=~a}}function no(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xc(){var e=Ui;return Ui<<=1,!(Ui&4194240)&&(Ui=64),e}function gn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Bi(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ot(t),e[t]=r}function Nd(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-ot(r),u=1<<n;t[n]=0,i[n]=-1,e[n]=-1,r&=~u}}function na(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-ot(r),n=1<<i;n&t|e[i]&t&&(e[i]|=t),r&=~n}}var se=0;function Gc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Yc,oa,Qc,Jc,Zc,oo=!1,$i=[],It=null,Nt=null,jt=null,mi=new Map,vi=new Map,Bt=[],jd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ol(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":mi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vi.delete(t.pointerId)}}function Kr(e,t,r,i,n,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:u,targetContainers:[n]},t!==null&&(t=Pi(t),t!==null&&oa(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Hd(e,t,r,i,n){switch(t){case"focusin":return It=Kr(It,e,t,r,i,n),!0;case"dragenter":return Nt=Kr(Nt,e,t,r,i,n),!0;case"mouseover":return jt=Kr(jt,e,t,r,i,n),!0;case"pointerover":var u=n.pointerId;return mi.set(u,Kr(mi.get(u)||null,e,t,r,i,n)),!0;case"gotpointercapture":return u=n.pointerId,vi.set(u,Kr(vi.get(u)||null,e,t,r,i,n)),!0}return!1}function eh(e){var t=Jt(e.target);if(t!==null){var r=cr(t);if(r!==null){if(t=r.tag,t===13){if(t=Uc(r),t!==null){e.blockedOn=t,Zc(e.priority,function(){Qc(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ns(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=ao(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);to=i,r.target.dispatchEvent(i),to=null}else return t=Pi(r),t!==null&&oa(t),e.blockedOn=r,!1;t.shift()}return!0}function al(e,t,r){ns(e)&&r.delete(t)}function Fd(){oo=!1,It!==null&&ns(It)&&(It=null),Nt!==null&&ns(Nt)&&(Nt=null),jt!==null&&ns(jt)&&(jt=null),mi.forEach(al),vi.forEach(al)}function qr(e,t){e.blockedOn===t&&(e.blockedOn=null,oo||(oo=!0,$e.unstable_scheduleCallback($e.unstable_NormalPriority,Fd)))}function yi(e){function t(n){return qr(n,e)}if(0<$i.length){qr($i[0],e);for(var r=1;r<$i.length;r++){var i=$i[r];i.blockedOn===e&&(i.blockedOn=null)}}for(It!==null&&qr(It,e),Nt!==null&&qr(Nt,e),jt!==null&&qr(jt,e),mi.forEach(t),vi.forEach(t),r=0;r<Bt.length;r++)i=Bt[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<Bt.length&&(r=Bt[0],r.blockedOn===null);)eh(r),r.blockedOn===null&&Bt.shift()}var br=bt.ReactCurrentBatchConfig,xs=!0;function zd(e,t,r,i){var n=se,u=br.transition;br.transition=null;try{se=1,aa(e,t,r,i)}finally{se=n,br.transition=u}}function Ud(e,t,r,i){var n=se,u=br.transition;br.transition=null;try{se=4,aa(e,t,r,i)}finally{se=n,br.transition=u}}function aa(e,t,r,i){if(xs){var n=ao(e,t,r,i);if(n===null)bn(e,t,i,ks,r),ol(e,i);else if(Hd(n,e,t,r,i))i.stopPropagation();else if(ol(e,i),t&4&&-1<jd.indexOf(e)){for(;n!==null;){var u=Pi(n);if(u!==null&&Yc(u),u=ao(e,t,r,i),u===null&&bn(e,t,i,ks,r),u===n)break;n=u}n!==null&&i.stopPropagation()}else bn(e,t,i,null,r)}}var ks=null;function ao(e,t,r,i){if(ks=null,e=ia(i),e=Jt(e),e!==null)if(t=cr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Uc(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ks=e,null}function th(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Dd()){case sa:return 1;case Kc:return 4;case ws:case Td:return 16;case qc:return 536870912;default:return 16}default:return 16}}var Pt=null,la=null,os=null;function rh(){if(os)return os;var e,t=la,r=t.length,i,n="value"in Pt?Pt.value:Pt.textContent,u=n.length;for(e=0;e<r&&t[e]===n[e];e++);var m=r-e;for(i=1;i<=m&&t[r-i]===n[u-i];i++);return os=n.slice(e,1<i?1-i:void 0)}function as(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vi(){return!0}function ll(){return!1}function Ke(e){function t(r,i,n,u,m){this._reactName=r,this._targetInst=n,this.type=i,this.nativeEvent=u,this.target=m,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(r=e[a],this[a]=r?r(u):u[a]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Vi:ll,this.isPropagationStopped=ll,this}return fe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vi)},persist:function(){},isPersistent:Vi}),t}var Nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ca=Ke(Nr),Oi=fe({},Nr,{view:0,detail:0}),Wd=Ke(Oi),mn,vn,Xr,$s=fe({},Oi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ha,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Xr&&(Xr&&e.type==="mousemove"?(mn=e.screenX-Xr.screenX,vn=e.screenY-Xr.screenY):vn=mn=0,Xr=e),mn)},movementY:function(e){return"movementY"in e?e.movementY:vn}}),cl=Ke($s),$d=fe({},$s,{dataTransfer:0}),Vd=Ke($d),Kd=fe({},Oi,{relatedTarget:0}),yn=Ke(Kd),qd=fe({},Nr,{animationName:0,elapsedTime:0,pseudoElement:0}),Xd=Ke(qd),Gd=fe({},Nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Yd=Ke(Gd),Qd=fe({},Nr,{data:0}),hl=Ke(Qd),Jd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ef={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ef[e])?!!t[e]:!1}function ha(){return tf}var rf=fe({},Oi,{key:function(e){if(e.key){var t=Jd[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=as(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Zd[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ha,charCode:function(e){return e.type==="keypress"?as(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?as(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sf=Ke(rf),nf=fe({},$s,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ul=Ke(nf),of=fe({},Oi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ha}),af=Ke(of),lf=fe({},Nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),cf=Ke(lf),hf=fe({},$s,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),uf=Ke(hf),df=[9,13,27,32],ua=Ct&&"CompositionEvent"in window,oi=null;Ct&&"documentMode"in document&&(oi=document.documentMode);var ff=Ct&&"TextEvent"in window&&!oi,ih=Ct&&(!ua||oi&&8<oi&&11>=oi),dl=" ",fl=!1;function sh(e,t){switch(e){case"keyup":return df.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fr=!1;function pf(e,t){switch(e){case"compositionend":return nh(t);case"keypress":return t.which!==32?null:(fl=!0,dl);case"textInput":return e=t.data,e===dl&&fl?null:e;default:return null}}function _f(e,t){if(fr)return e==="compositionend"||!ua&&sh(e,t)?(e=rh(),os=la=Pt=null,fr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ih&&t.locale!=="ko"?null:t.data;default:return null}}var gf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gf[e.type]:t==="textarea"}function oh(e,t,r,i){Nc(i),t=Es(t,"onChange"),0<t.length&&(r=new ca("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var ai=null,Si=null;function mf(e){mh(e,0)}function Vs(e){var t=gr(e);if(Tc(t))return e}function vf(e,t){if(e==="change")return t}var ah=!1;if(Ct){var Sn;if(Ct){var wn="oninput"in document;if(!wn){var _l=document.createElement("div");_l.setAttribute("oninput","return;"),wn=typeof _l.oninput=="function"}Sn=wn}else Sn=!1;ah=Sn&&(!document.documentMode||9<document.documentMode)}function gl(){ai&&(ai.detachEvent("onpropertychange",lh),Si=ai=null)}function lh(e){if(e.propertyName==="value"&&Vs(Si)){var t=[];oh(t,Si,e,ia(e)),zc(mf,t)}}function yf(e,t,r){e==="focusin"?(gl(),ai=t,Si=r,ai.attachEvent("onpropertychange",lh)):e==="focusout"&&gl()}function Sf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Vs(Si)}function wf(e,t){if(e==="click")return Vs(t)}function Cf(e,t){if(e==="input"||e==="change")return Vs(t)}function xf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var lt=typeof Object.is=="function"?Object.is:xf;function wi(e,t){if(lt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var n=r[i];if(!Wn.call(t,n)||!lt(e[n],t[n]))return!1}return!0}function ml(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vl(e,t){var r=ml(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ml(r)}}function ch(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ch(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hh(){for(var e=window,t=vs();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=vs(e.document)}return t}function da(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kf(e){var t=hh(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ch(r.ownerDocument.documentElement,r)){if(i!==null&&da(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=r.textContent.length,u=Math.min(i.start,n);i=i.end===void 0?u:Math.min(i.end,n),!e.extend&&u>i&&(n=i,i=u,u=n),n=vl(r,u);var m=vl(r,i);n&&m&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==m.node||e.focusOffset!==m.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(m.node,m.offset)):(t.setEnd(m.node,m.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Ef=Ct&&"documentMode"in document&&11>=document.documentMode,pr=null,lo=null,li=null,co=!1;function yl(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;co||pr==null||pr!==vs(i)||(i=pr,"selectionStart"in i&&da(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),li&&wi(li,i)||(li=i,i=Es(lo,"onSelect"),0<i.length&&(t=new ca("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=pr)))}function Ki(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var _r={animationend:Ki("Animation","AnimationEnd"),animationiteration:Ki("Animation","AnimationIteration"),animationstart:Ki("Animation","AnimationStart"),transitionend:Ki("Transition","TransitionEnd")},Cn={},uh={};Ct&&(uh=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);function Ks(e){if(Cn[e])return Cn[e];if(!_r[e])return e;var t=_r[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in uh)return Cn[e]=t[r];return e}var dh=Ks("animationend"),fh=Ks("animationiteration"),ph=Ks("animationstart"),_h=Ks("transitionend"),gh=new Map,Sl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qt(e,t){gh.set(e,t),lr(t,[e])}for(var xn=0;xn<Sl.length;xn++){var kn=Sl[xn],bf=kn.toLowerCase(),Lf=kn[0].toUpperCase()+kn.slice(1);qt(bf,"on"+Lf)}qt(dh,"onAnimationEnd");qt(fh,"onAnimationIteration");qt(ph,"onAnimationStart");qt("dblclick","onDoubleClick");qt("focusin","onFocus");qt("focusout","onBlur");qt(_h,"onTransitionEnd");Dr("onMouseEnter",["mouseout","mouseover"]);Dr("onMouseLeave",["mouseout","mouseover"]);Dr("onPointerEnter",["pointerout","pointerover"]);Dr("onPointerLeave",["pointerout","pointerover"]);lr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));lr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));lr("onBeforeInput",["compositionend","keypress","textInput","paste"]);lr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));lr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rf=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri));function wl(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,Ed(i,t,void 0,e),e.currentTarget=null}function mh(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var m=i.length-1;0<=m;m--){var a=i[m],c=a.instance,f=a.currentTarget;if(a=a.listener,c!==u&&n.isPropagationStopped())break e;wl(n,a,f),u=c}else for(m=0;m<i.length;m++){if(a=i[m],c=a.instance,f=a.currentTarget,a=a.listener,c!==u&&n.isPropagationStopped())break e;wl(n,a,f),u=c}}}if(Ss)throw e=so,Ss=!1,so=null,e}function oe(e,t){var r=t[_o];r===void 0&&(r=t[_o]=new Set);var i=e+"__bubble";r.has(i)||(vh(t,e,2,!1),r.add(i))}function En(e,t,r){var i=0;t&&(i|=4),vh(r,e,i,t)}var qi="_reactListening"+Math.random().toString(36).slice(2);function Ci(e){if(!e[qi]){e[qi]=!0,Ec.forEach(function(r){r!=="selectionchange"&&(Rf.has(r)||En(r,!1,e),En(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qi]||(t[qi]=!0,En("selectionchange",!1,t))}}function vh(e,t,r,i){switch(th(t)){case 1:var n=zd;break;case 4:n=Ud;break;default:n=aa}r=n.bind(null,t,r,e),n=void 0,!io||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):n!==void 0?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function bn(e,t,r,i,n){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var m=i.tag;if(m===3||m===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(m===4)for(m=i.return;m!==null;){var c=m.tag;if((c===3||c===4)&&(c=m.stateNode.containerInfo,c===n||c.nodeType===8&&c.parentNode===n))return;m=m.return}for(;a!==null;){if(m=Jt(a),m===null)return;if(c=m.tag,c===5||c===6){i=u=m;continue e}a=a.parentNode}}i=i.return}zc(function(){var f=u,v=ia(r),d=[];e:{var _=gh.get(e);if(_!==void 0){var S=ca,x=e;switch(e){case"keypress":if(as(r)===0)break e;case"keydown":case"keyup":S=sf;break;case"focusin":x="focus",S=yn;break;case"focusout":x="blur",S=yn;break;case"beforeblur":case"afterblur":S=yn;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=cl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Vd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=af;break;case dh:case fh:case ph:S=Xd;break;case _h:S=cf;break;case"scroll":S=Wd;break;case"wheel":S=uf;break;case"copy":case"cut":case"paste":S=Yd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=ul}var g=(t&4)!==0,h=!g&&e==="scroll",o=g?_!==null?_+"Capture":null:_;g=[];for(var s=f,l;s!==null;){l=s;var p=l.stateNode;if(l.tag===5&&p!==null&&(l=p,o!==null&&(p=gi(s,o),p!=null&&g.push(xi(s,p,l)))),h)break;s=s.return}0<g.length&&(_=new S(_,x,null,r,v),d.push({event:_,listeners:g}))}}if(!(t&7)){e:{if(_=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",_&&r!==to&&(x=r.relatedTarget||r.fromElement)&&(Jt(x)||x[xt]))break e;if((S||_)&&(_=v.window===v?v:(_=v.ownerDocument)?_.defaultView||_.parentWindow:window,S?(x=r.relatedTarget||r.toElement,S=f,x=x?Jt(x):null,x!==null&&(h=cr(x),x!==h||x.tag!==5&&x.tag!==6)&&(x=null)):(S=null,x=f),S!==x)){if(g=cl,p="onMouseLeave",o="onMouseEnter",s="mouse",(e==="pointerout"||e==="pointerover")&&(g=ul,p="onPointerLeave",o="onPointerEnter",s="pointer"),h=S==null?_:gr(S),l=x==null?_:gr(x),_=new g(p,s+"leave",S,r,v),_.target=h,_.relatedTarget=l,p=null,Jt(v)===f&&(g=new g(o,s+"enter",x,r,v),g.target=l,g.relatedTarget=h,p=g),h=p,S&&x)t:{for(g=S,o=x,s=0,l=g;l;l=hr(l))s++;for(l=0,p=o;p;p=hr(p))l++;for(;0<s-l;)g=hr(g),s--;for(;0<l-s;)o=hr(o),l--;for(;s--;){if(g===o||o!==null&&g===o.alternate)break t;g=hr(g),o=hr(o)}g=null}else g=null;S!==null&&Cl(d,_,S,g,!1),x!==null&&h!==null&&Cl(d,h,x,g,!0)}}e:{if(_=f?gr(f):window,S=_.nodeName&&_.nodeName.toLowerCase(),S==="select"||S==="input"&&_.type==="file")var w=vf;else if(pl(_))if(ah)w=Cf;else{w=Sf;var C=yf}else(S=_.nodeName)&&S.toLowerCase()==="input"&&(_.type==="checkbox"||_.type==="radio")&&(w=wf);if(w&&(w=w(e,f))){oh(d,w,r,v);break e}C&&C(e,_,f),e==="focusout"&&(C=_._wrapperState)&&C.controlled&&_.type==="number"&&Yn(_,"number",_.value)}switch(C=f?gr(f):window,e){case"focusin":(pl(C)||C.contentEditable==="true")&&(pr=C,lo=f,li=null);break;case"focusout":li=lo=pr=null;break;case"mousedown":co=!0;break;case"contextmenu":case"mouseup":case"dragend":co=!1,yl(d,r,v);break;case"selectionchange":if(Ef)break;case"keydown":case"keyup":yl(d,r,v)}var k;if(ua)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else fr?sh(e,r)&&(y="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(y="onCompositionStart");y&&(ih&&r.locale!=="ko"&&(fr||y!=="onCompositionStart"?y==="onCompositionEnd"&&fr&&(k=rh()):(Pt=v,la="value"in Pt?Pt.value:Pt.textContent,fr=!0)),C=Es(f,y),0<C.length&&(y=new hl(y,e,null,r,v),d.push({event:y,listeners:C}),k?y.data=k:(k=nh(r),k!==null&&(y.data=k)))),(k=ff?pf(e,r):_f(e,r))&&(f=Es(f,"onBeforeInput"),0<f.length&&(v=new hl("onBeforeInput","beforeinput",null,r,v),d.push({event:v,listeners:f}),v.data=k))}mh(d,t)})}function xi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Es(e,t){for(var r=t+"Capture",i=[];e!==null;){var n=e,u=n.stateNode;n.tag===5&&u!==null&&(n=u,u=gi(e,r),u!=null&&i.unshift(xi(e,u,n)),u=gi(e,t),u!=null&&i.push(xi(e,u,n))),e=e.return}return i}function hr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Cl(e,t,r,i,n){for(var u=t._reactName,m=[];r!==null&&r!==i;){var a=r,c=a.alternate,f=a.stateNode;if(c!==null&&c===i)break;a.tag===5&&f!==null&&(a=f,n?(c=gi(r,u),c!=null&&m.unshift(xi(r,c,a))):n||(c=gi(r,u),c!=null&&m.push(xi(r,c,a)))),r=r.return}m.length!==0&&e.push({event:t,listeners:m})}var Df=/\r\n?/g,Tf=/\u0000|\uFFFD/g;function xl(e){return(typeof e=="string"?e:""+e).replace(Df,`
`).replace(Tf,"")}function Xi(e,t,r){if(t=xl(t),xl(e)!==t&&r)throw Error(V(425))}function bs(){}var ho=null,uo=null;function fo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var po=typeof setTimeout=="function"?setTimeout:void 0,Af=typeof clearTimeout=="function"?clearTimeout:void 0,kl=typeof Promise=="function"?Promise:void 0,Bf=typeof queueMicrotask=="function"?queueMicrotask:typeof kl<"u"?function(e){return kl.resolve(null).then(e).catch(Of)}:po;function Of(e){setTimeout(function(){throw e})}function Ln(e,t){var r=t,i=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&n.nodeType===8)if(r=n.data,r==="/$"){if(i===0){e.removeChild(n),yi(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=n}while(r);yi(t)}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function El(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var jr=Math.random().toString(36).slice(2),dt="__reactFiber$"+jr,ki="__reactProps$"+jr,xt="__reactContainer$"+jr,_o="__reactEvents$"+jr,Pf="__reactListeners$"+jr,Mf="__reactHandles$"+jr;function Jt(e){var t=e[dt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[xt]||r[dt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=El(e);e!==null;){if(r=e[dt])return r;e=El(e)}return t}e=r,r=e.parentNode}return null}function Pi(e){return e=e[dt]||e[xt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function gr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(V(33))}function qs(e){return e[ki]||null}var go=[],mr=-1;function Xt(e){return{current:e}}function ae(e){0>mr||(e.current=go[mr],go[mr]=null,mr--)}function ne(e,t){mr++,go[mr]=e.current,e.current=t}var Kt={},Te=Xt(Kt),je=Xt(!1),ir=Kt;function Tr(e,t){var r=e.type.contextTypes;if(!r)return Kt;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},u;for(u in r)n[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function He(e){return e=e.childContextTypes,e!=null}function Ls(){ae(je),ae(Te)}function bl(e,t,r){if(Te.current!==Kt)throw Error(V(168));ne(Te,t),ne(je,r)}function yh(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(V(108,vd(e)||"Unknown",n));return fe({},r,i)}function Rs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Kt,ir=Te.current,ne(Te,e),ne(je,je.current),!0}function Ll(e,t,r){var i=e.stateNode;if(!i)throw Error(V(169));r?(e=yh(e,t,ir),i.__reactInternalMemoizedMergedChildContext=e,ae(je),ae(Te),ne(Te,e)):ae(je),ne(je,r)}var vt=null,Xs=!1,Rn=!1;function Sh(e){vt===null?vt=[e]:vt.push(e)}function If(e){Xs=!0,Sh(e)}function Gt(){if(!Rn&&vt!==null){Rn=!0;var e=0,t=se;try{var r=vt;for(se=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}vt=null,Xs=!1}catch(n){throw vt!==null&&(vt=vt.slice(e+1)),Vc(sa,Gt),n}finally{se=t,Rn=!1}}return null}var vr=[],yr=0,Ds=null,Ts=0,Xe=[],Ge=0,sr=null,yt=1,St="";function Yt(e,t){vr[yr++]=Ts,vr[yr++]=Ds,Ds=e,Ts=t}function wh(e,t,r){Xe[Ge++]=yt,Xe[Ge++]=St,Xe[Ge++]=sr,sr=e;var i=yt;e=St;var n=32-ot(i)-1;i&=~(1<<n),r+=1;var u=32-ot(t)+n;if(30<u){var m=n-n%5;u=(i&(1<<m)-1).toString(32),i>>=m,n-=m,yt=1<<32-ot(t)+n|r<<n|i,St=u+e}else yt=1<<u|r<<n|i,St=e}function fa(e){e.return!==null&&(Yt(e,1),wh(e,1,0))}function pa(e){for(;e===Ds;)Ds=vr[--yr],vr[yr]=null,Ts=vr[--yr],vr[yr]=null;for(;e===sr;)sr=Xe[--Ge],Xe[Ge]=null,St=Xe[--Ge],Xe[Ge]=null,yt=Xe[--Ge],Xe[Ge]=null}var We=null,Ue=null,ce=!1,nt=null;function Ch(e,t){var r=Qe(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Rl(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,We=e,Ue=Ht(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,We=e,Ue=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=sr!==null?{id:yt,overflow:St}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Qe(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,We=e,Ue=null,!0):!1;default:return!1}}function mo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function vo(e){if(ce){var t=Ue;if(t){var r=t;if(!Rl(e,t)){if(mo(e))throw Error(V(418));t=Ht(r.nextSibling);var i=We;t&&Rl(e,t)?Ch(i,r):(e.flags=e.flags&-4097|2,ce=!1,We=e)}}else{if(mo(e))throw Error(V(418));e.flags=e.flags&-4097|2,ce=!1,We=e}}}function Dl(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;We=e}function Gi(e){if(e!==We)return!1;if(!ce)return Dl(e),ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fo(e.type,e.memoizedProps)),t&&(t=Ue)){if(mo(e))throw xh(),Error(V(418));for(;t;)Ch(e,t),t=Ht(t.nextSibling)}if(Dl(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(V(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Ue=Ht(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Ue=null}}else Ue=We?Ht(e.stateNode.nextSibling):null;return!0}function xh(){for(var e=Ue;e;)e=Ht(e.nextSibling)}function Ar(){Ue=We=null,ce=!1}function _a(e){nt===null?nt=[e]:nt.push(e)}var Nf=bt.ReactCurrentBatchConfig;function Gr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(V(309));var i=r.stateNode}if(!i)throw Error(V(147,e));var n=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(m){var a=n.refs;m===null?delete a[u]:a[u]=m},t._stringRef=u,t)}if(typeof e!="string")throw Error(V(284));if(!r._owner)throw Error(V(290,e))}return e}function Yi(e,t){throw e=Object.prototype.toString.call(t),Error(V(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Tl(e){var t=e._init;return t(e._payload)}function kh(e){function t(o,s){if(e){var l=o.deletions;l===null?(o.deletions=[s],o.flags|=16):l.push(s)}}function r(o,s){if(!e)return null;for(;s!==null;)t(o,s),s=s.sibling;return null}function i(o,s){for(o=new Map;s!==null;)s.key!==null?o.set(s.key,s):o.set(s.index,s),s=s.sibling;return o}function n(o,s){return o=Wt(o,s),o.index=0,o.sibling=null,o}function u(o,s,l){return o.index=l,e?(l=o.alternate,l!==null?(l=l.index,l<s?(o.flags|=2,s):l):(o.flags|=2,s)):(o.flags|=1048576,s)}function m(o){return e&&o.alternate===null&&(o.flags|=2),o}function a(o,s,l,p){return s===null||s.tag!==6?(s=Mn(l,o.mode,p),s.return=o,s):(s=n(s,l),s.return=o,s)}function c(o,s,l,p){var w=l.type;return w===dr?v(o,s,l.props.children,p,l.key):s!==null&&(s.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tt&&Tl(w)===s.type)?(p=n(s,l.props),p.ref=Gr(o,s,l),p.return=o,p):(p=ps(l.type,l.key,l.props,null,o.mode,p),p.ref=Gr(o,s,l),p.return=o,p)}function f(o,s,l,p){return s===null||s.tag!==4||s.stateNode.containerInfo!==l.containerInfo||s.stateNode.implementation!==l.implementation?(s=In(l,o.mode,p),s.return=o,s):(s=n(s,l.children||[]),s.return=o,s)}function v(o,s,l,p,w){return s===null||s.tag!==7?(s=rr(l,o.mode,p,w),s.return=o,s):(s=n(s,l),s.return=o,s)}function d(o,s,l){if(typeof s=="string"&&s!==""||typeof s=="number")return s=Mn(""+s,o.mode,l),s.return=o,s;if(typeof s=="object"&&s!==null){switch(s.$$typeof){case Hi:return l=ps(s.type,s.key,s.props,null,o.mode,l),l.ref=Gr(o,null,s),l.return=o,l;case ur:return s=In(s,o.mode,l),s.return=o,s;case Tt:var p=s._init;return d(o,p(s._payload),l)}if(ei(s)||$r(s))return s=rr(s,o.mode,l,null),s.return=o,s;Yi(o,s)}return null}function _(o,s,l,p){var w=s!==null?s.key:null;if(typeof l=="string"&&l!==""||typeof l=="number")return w!==null?null:a(o,s,""+l,p);if(typeof l=="object"&&l!==null){switch(l.$$typeof){case Hi:return l.key===w?c(o,s,l,p):null;case ur:return l.key===w?f(o,s,l,p):null;case Tt:return w=l._init,_(o,s,w(l._payload),p)}if(ei(l)||$r(l))return w!==null?null:v(o,s,l,p,null);Yi(o,l)}return null}function S(o,s,l,p,w){if(typeof p=="string"&&p!==""||typeof p=="number")return o=o.get(l)||null,a(s,o,""+p,w);if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Hi:return o=o.get(p.key===null?l:p.key)||null,c(s,o,p,w);case ur:return o=o.get(p.key===null?l:p.key)||null,f(s,o,p,w);case Tt:var C=p._init;return S(o,s,l,C(p._payload),w)}if(ei(p)||$r(p))return o=o.get(l)||null,v(s,o,p,w,null);Yi(s,p)}return null}function x(o,s,l,p){for(var w=null,C=null,k=s,y=s=0,b=null;k!==null&&y<l.length;y++){k.index>y?(b=k,k=null):b=k.sibling;var T=_(o,k,l[y],p);if(T===null){k===null&&(k=b);break}e&&k&&T.alternate===null&&t(o,k),s=u(T,s,y),C===null?w=T:C.sibling=T,C=T,k=b}if(y===l.length)return r(o,k),ce&&Yt(o,y),w;if(k===null){for(;y<l.length;y++)k=d(o,l[y],p),k!==null&&(s=u(k,s,y),C===null?w=k:C.sibling=k,C=k);return ce&&Yt(o,y),w}for(k=i(o,k);y<l.length;y++)b=S(k,o,y,l[y],p),b!==null&&(e&&b.alternate!==null&&k.delete(b.key===null?y:b.key),s=u(b,s,y),C===null?w=b:C.sibling=b,C=b);return e&&k.forEach(function(O){return t(o,O)}),ce&&Yt(o,y),w}function g(o,s,l,p){var w=$r(l);if(typeof w!="function")throw Error(V(150));if(l=w.call(l),l==null)throw Error(V(151));for(var C=w=null,k=s,y=s=0,b=null,T=l.next();k!==null&&!T.done;y++,T=l.next()){k.index>y?(b=k,k=null):b=k.sibling;var O=_(o,k,T.value,p);if(O===null){k===null&&(k=b);break}e&&k&&O.alternate===null&&t(o,k),s=u(O,s,y),C===null?w=O:C.sibling=O,C=O,k=b}if(T.done)return r(o,k),ce&&Yt(o,y),w;if(k===null){for(;!T.done;y++,T=l.next())T=d(o,T.value,p),T!==null&&(s=u(T,s,y),C===null?w=T:C.sibling=T,C=T);return ce&&Yt(o,y),w}for(k=i(o,k);!T.done;y++,T=l.next())T=S(k,o,y,T.value,p),T!==null&&(e&&T.alternate!==null&&k.delete(T.key===null?y:T.key),s=u(T,s,y),C===null?w=T:C.sibling=T,C=T);return e&&k.forEach(function(P){return t(o,P)}),ce&&Yt(o,y),w}function h(o,s,l,p){if(typeof l=="object"&&l!==null&&l.type===dr&&l.key===null&&(l=l.props.children),typeof l=="object"&&l!==null){switch(l.$$typeof){case Hi:e:{for(var w=l.key,C=s;C!==null;){if(C.key===w){if(w=l.type,w===dr){if(C.tag===7){r(o,C.sibling),s=n(C,l.props.children),s.return=o,o=s;break e}}else if(C.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Tt&&Tl(w)===C.type){r(o,C.sibling),s=n(C,l.props),s.ref=Gr(o,C,l),s.return=o,o=s;break e}r(o,C);break}else t(o,C);C=C.sibling}l.type===dr?(s=rr(l.props.children,o.mode,p,l.key),s.return=o,o=s):(p=ps(l.type,l.key,l.props,null,o.mode,p),p.ref=Gr(o,s,l),p.return=o,o=p)}return m(o);case ur:e:{for(C=l.key;s!==null;){if(s.key===C)if(s.tag===4&&s.stateNode.containerInfo===l.containerInfo&&s.stateNode.implementation===l.implementation){r(o,s.sibling),s=n(s,l.children||[]),s.return=o,o=s;break e}else{r(o,s);break}else t(o,s);s=s.sibling}s=In(l,o.mode,p),s.return=o,o=s}return m(o);case Tt:return C=l._init,h(o,s,C(l._payload),p)}if(ei(l))return x(o,s,l,p);if($r(l))return g(o,s,l,p);Yi(o,l)}return typeof l=="string"&&l!==""||typeof l=="number"?(l=""+l,s!==null&&s.tag===6?(r(o,s.sibling),s=n(s,l),s.return=o,o=s):(r(o,s),s=Mn(l,o.mode,p),s.return=o,o=s),m(o)):r(o,s)}return h}var Br=kh(!0),Eh=kh(!1),As=Xt(null),Bs=null,Sr=null,ga=null;function ma(){ga=Sr=Bs=null}function va(e){var t=As.current;ae(As),e._currentValue=t}function yo(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Lr(e,t){Bs=e,ga=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ne=!0),e.firstContext=null)}function Ze(e){var t=e._currentValue;if(ga!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(Bs===null)throw Error(V(308));Sr=e,Bs.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Zt=null;function ya(e){Zt===null?Zt=[e]:Zt.push(e)}function bh(e,t,r,i){var n=t.interleaved;return n===null?(r.next=r,ya(t)):(r.next=n.next,n.next=r),t.interleaved=r,kt(e,i)}function kt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var At=!1;function Sa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lh(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function wt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ft(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ie&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,kt(e,r)}return n=i.interleaved,n===null?(t.next=t,ya(i)):(t.next=n.next,n.next=t),i.interleaved=t,kt(e,r)}function ls(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,na(e,r)}}function Al(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var n=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var m={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?n=u=m:u=u.next=m,r=r.next}while(r!==null);u===null?n=u=t:u=u.next=t}else n=u=t;r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Os(e,t,r,i){var n=e.updateQueue;At=!1;var u=n.firstBaseUpdate,m=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var c=a,f=c.next;c.next=null,m===null?u=f:m.next=f,m=c;var v=e.alternate;v!==null&&(v=v.updateQueue,a=v.lastBaseUpdate,a!==m&&(a===null?v.firstBaseUpdate=f:a.next=f,v.lastBaseUpdate=c))}if(u!==null){var d=n.baseState;m=0,v=f=c=null,a=u;do{var _=a.lane,S=a.eventTime;if((i&_)===_){v!==null&&(v=v.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=e,g=a;switch(_=t,S=r,g.tag){case 1:if(x=g.payload,typeof x=="function"){d=x.call(S,d,_);break e}d=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=g.payload,_=typeof x=="function"?x.call(S,d,_):x,_==null)break e;d=fe({},d,_);break e;case 2:At=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,_=n.effects,_===null?n.effects=[a]:_.push(a))}else S={eventTime:S,lane:_,tag:a.tag,payload:a.payload,callback:a.callback,next:null},v===null?(f=v=S,c=d):v=v.next=S,m|=_;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;_=a,a=_.next,_.next=null,n.lastBaseUpdate=_,n.shared.pending=null}}while(!0);if(v===null&&(c=d),n.baseState=c,n.firstBaseUpdate=f,n.lastBaseUpdate=v,t=n.shared.interleaved,t!==null){n=t;do m|=n.lane,n=n.next;while(n!==t)}else u===null&&(n.shared.lanes=0);or|=m,e.lanes=m,e.memoizedState=d}}function Bl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=r,typeof n!="function")throw Error(V(191,n));n.call(i)}}}var Mi={},pt=Xt(Mi),Ei=Xt(Mi),bi=Xt(Mi);function er(e){if(e===Mi)throw Error(V(174));return e}function wa(e,t){switch(ne(bi,t),ne(Ei,e),ne(pt,Mi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Jn(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Jn(t,e)}ae(pt),ne(pt,t)}function Or(){ae(pt),ae(Ei),ae(bi)}function Rh(e){er(bi.current);var t=er(pt.current),r=Jn(t,e.type);t!==r&&(ne(Ei,e),ne(pt,r))}function Ca(e){Ei.current===e&&(ae(pt),ae(Ei))}var ue=Xt(0);function Ps(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dn=[];function xa(){for(var e=0;e<Dn.length;e++)Dn[e]._workInProgressVersionPrimary=null;Dn.length=0}var cs=bt.ReactCurrentDispatcher,Tn=bt.ReactCurrentBatchConfig,nr=0,de=null,Se=null,Ce=null,Ms=!1,ci=!1,Li=0,jf=0;function Le(){throw Error(V(321))}function ka(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!lt(e[r],t[r]))return!1;return!0}function Ea(e,t,r,i,n,u){if(nr=u,de=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=e===null||e.memoizedState===null?Uf:Wf,e=r(i,n),ci){u=0;do{if(ci=!1,Li=0,25<=u)throw Error(V(301));u+=1,Ce=Se=null,t.updateQueue=null,cs.current=$f,e=r(i,n)}while(ci)}if(cs.current=Is,t=Se!==null&&Se.next!==null,nr=0,Ce=Se=de=null,Ms=!1,t)throw Error(V(300));return e}function ba(){var e=Li!==0;return Li=0,e}function ut(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ce===null?de.memoizedState=Ce=e:Ce=Ce.next=e,Ce}function et(){if(Se===null){var e=de.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var t=Ce===null?de.memoizedState:Ce.next;if(t!==null)Ce=t,Se=e;else{if(e===null)throw Error(V(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Ce===null?de.memoizedState=Ce=e:Ce=Ce.next=e}return Ce}function Ri(e,t){return typeof t=="function"?t(e):t}function An(e){var t=et(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var i=Se,n=i.baseQueue,u=r.pending;if(u!==null){if(n!==null){var m=n.next;n.next=u.next,u.next=m}i.baseQueue=n=u,r.pending=null}if(n!==null){u=n.next,i=i.baseState;var a=m=null,c=null,f=u;do{var v=f.lane;if((nr&v)===v)c!==null&&(c=c.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:e(i,f.action);else{var d={lane:v,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};c===null?(a=c=d,m=i):c=c.next=d,de.lanes|=v,or|=v}f=f.next}while(f!==null&&f!==u);c===null?m=i:c.next=a,lt(i,t.memoizedState)||(Ne=!0),t.memoizedState=i,t.baseState=m,t.baseQueue=c,r.lastRenderedState=i}if(e=r.interleaved,e!==null){n=e;do u=n.lane,de.lanes|=u,or|=u,n=n.next;while(n!==e)}else n===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Bn(e){var t=et(),r=t.queue;if(r===null)throw Error(V(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,u=t.memoizedState;if(n!==null){r.pending=null;var m=n=n.next;do u=e(u,m.action),m=m.next;while(m!==n);lt(u,t.memoizedState)||(Ne=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,i]}function Dh(){}function Th(e,t){var r=de,i=et(),n=t(),u=!lt(i.memoizedState,n);if(u&&(i.memoizedState=n,Ne=!0),i=i.queue,La(Oh.bind(null,r,i,e),[e]),i.getSnapshot!==t||u||Ce!==null&&Ce.memoizedState.tag&1){if(r.flags|=2048,Di(9,Bh.bind(null,r,i,n,t),void 0,null),xe===null)throw Error(V(349));nr&30||Ah(r,t,n)}return n}function Ah(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Bh(e,t,r,i){t.value=r,t.getSnapshot=i,Ph(t)&&Mh(e)}function Oh(e,t,r){return r(function(){Ph(t)&&Mh(e)})}function Ph(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!lt(e,r)}catch{return!0}}function Mh(e){var t=kt(e,1);t!==null&&at(t,e,1,-1)}function Ol(e){var t=ut();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:e},t.queue=e,e=e.dispatch=zf.bind(null,de,e),[t.memoizedState,e]}function Di(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=de.updateQueue,t===null?(t={lastEffect:null,stores:null},de.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function Ih(){return et().memoizedState}function hs(e,t,r,i){var n=ut();de.flags|=e,n.memoizedState=Di(1|t,r,void 0,i===void 0?null:i)}function Gs(e,t,r,i){var n=et();i=i===void 0?null:i;var u=void 0;if(Se!==null){var m=Se.memoizedState;if(u=m.destroy,i!==null&&ka(i,m.deps)){n.memoizedState=Di(t,r,u,i);return}}de.flags|=e,n.memoizedState=Di(1|t,r,u,i)}function Pl(e,t){return hs(8390656,8,e,t)}function La(e,t){return Gs(2048,8,e,t)}function Nh(e,t){return Gs(4,2,e,t)}function jh(e,t){return Gs(4,4,e,t)}function Hh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fh(e,t,r){return r=r!=null?r.concat([e]):null,Gs(4,4,Hh.bind(null,t,e),r)}function Ra(){}function zh(e,t){var r=et();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ka(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Uh(e,t){var r=et();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&ka(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Wh(e,t,r){return nr&21?(lt(r,t)||(r=Xc(),de.lanes|=r,or|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ne=!0),e.memoizedState=r)}function Hf(e,t){var r=se;se=r!==0&&4>r?r:4,e(!0);var i=Tn.transition;Tn.transition={};try{e(!1),t()}finally{se=r,Tn.transition=i}}function $h(){return et().memoizedState}function Ff(e,t,r){var i=Ut(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Vh(e))Kh(t,r);else if(r=bh(e,t,r,i),r!==null){var n=Be();at(r,e,i,n),qh(r,t,i)}}function zf(e,t,r){var i=Ut(e),n={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Vh(e))Kh(t,n);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var m=t.lastRenderedState,a=u(m,r);if(n.hasEagerState=!0,n.eagerState=a,lt(a,m)){var c=t.interleaved;c===null?(n.next=n,ya(t)):(n.next=c.next,c.next=n),t.interleaved=n;return}}catch{}finally{}r=bh(e,t,n,i),r!==null&&(n=Be(),at(r,e,i,n),qh(r,t,i))}}function Vh(e){var t=e.alternate;return e===de||t!==null&&t===de}function Kh(e,t){ci=Ms=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function qh(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,na(e,r)}}var Is={readContext:Ze,useCallback:Le,useContext:Le,useEffect:Le,useImperativeHandle:Le,useInsertionEffect:Le,useLayoutEffect:Le,useMemo:Le,useReducer:Le,useRef:Le,useState:Le,useDebugValue:Le,useDeferredValue:Le,useTransition:Le,useMutableSource:Le,useSyncExternalStore:Le,useId:Le,unstable_isNewReconciler:!1},Uf={readContext:Ze,useCallback:function(e,t){return ut().memoizedState=[e,t===void 0?null:t],e},useContext:Ze,useEffect:Pl,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,hs(4194308,4,Hh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return hs(4194308,4,e,t)},useInsertionEffect:function(e,t){return hs(4,2,e,t)},useMemo:function(e,t){var r=ut();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ut();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=Ff.bind(null,de,e),[i.memoizedState,e]},useRef:function(e){var t=ut();return e={current:e},t.memoizedState=e},useState:Ol,useDebugValue:Ra,useDeferredValue:function(e){return ut().memoizedState=e},useTransition:function(){var e=Ol(!1),t=e[0];return e=Hf.bind(null,e[1]),ut().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=de,n=ut();if(ce){if(r===void 0)throw Error(V(407));r=r()}else{if(r=t(),xe===null)throw Error(V(349));nr&30||Ah(i,t,r)}n.memoizedState=r;var u={value:r,getSnapshot:t};return n.queue=u,Pl(Oh.bind(null,i,u,e),[e]),i.flags|=2048,Di(9,Bh.bind(null,i,u,r,t),void 0,null),r},useId:function(){var e=ut(),t=xe.identifierPrefix;if(ce){var r=St,i=yt;r=(i&~(1<<32-ot(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Li++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=jf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wf={readContext:Ze,useCallback:zh,useContext:Ze,useEffect:La,useImperativeHandle:Fh,useInsertionEffect:Nh,useLayoutEffect:jh,useMemo:Uh,useReducer:An,useRef:Ih,useState:function(){return An(Ri)},useDebugValue:Ra,useDeferredValue:function(e){var t=et();return Wh(t,Se.memoizedState,e)},useTransition:function(){var e=An(Ri)[0],t=et().memoizedState;return[e,t]},useMutableSource:Dh,useSyncExternalStore:Th,useId:$h,unstable_isNewReconciler:!1},$f={readContext:Ze,useCallback:zh,useContext:Ze,useEffect:La,useImperativeHandle:Fh,useInsertionEffect:Nh,useLayoutEffect:jh,useMemo:Uh,useReducer:Bn,useRef:Ih,useState:function(){return Bn(Ri)},useDebugValue:Ra,useDeferredValue:function(e){var t=et();return Se===null?t.memoizedState=e:Wh(t,Se.memoizedState,e)},useTransition:function(){var e=Bn(Ri)[0],t=et().memoizedState;return[e,t]},useMutableSource:Dh,useSyncExternalStore:Th,useId:$h,unstable_isNewReconciler:!1};function rt(e,t){if(e&&e.defaultProps){t=fe({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function So(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:fe({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ys={isMounted:function(e){return(e=e._reactInternals)?cr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=Be(),n=Ut(e),u=wt(i,n);u.payload=t,r!=null&&(u.callback=r),t=Ft(e,u,n),t!==null&&(at(t,e,n,i),ls(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=Be(),n=Ut(e),u=wt(i,n);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=Ft(e,u,n),t!==null&&(at(t,e,n,i),ls(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Be(),i=Ut(e),n=wt(r,i);n.tag=2,t!=null&&(n.callback=t),t=Ft(e,n,i),t!==null&&(at(t,e,i,r),ls(t,e,i))}};function Ml(e,t,r,i,n,u,m){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,m):t.prototype&&t.prototype.isPureReactComponent?!wi(r,i)||!wi(n,u):!0}function Xh(e,t,r){var i=!1,n=Kt,u=t.contextType;return typeof u=="object"&&u!==null?u=Ze(u):(n=He(t)?ir:Te.current,i=t.contextTypes,u=(i=i!=null)?Tr(e,n):Kt),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ys,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=u),t}function Il(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Ys.enqueueReplaceState(t,t.state,null)}function wo(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Sa(e);var u=t.contextType;typeof u=="object"&&u!==null?n.context=Ze(u):(u=He(t)?ir:Te.current,n.context=Tr(e,u)),n.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(So(e,t,u,r),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Ys.enqueueReplaceState(n,n.state,null),Os(e,r,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function Pr(e,t){try{var r="",i=t;do r+=md(i),i=i.return;while(i);var n=r}catch(u){n=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:n,digest:null}}function On(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Co(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Vf=typeof WeakMap=="function"?WeakMap:Map;function Gh(e,t,r){r=wt(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){js||(js=!0,Bo=i),Co(e,t)},r}function Yh(e,t,r){r=wt(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;r.payload=function(){return i(n)},r.callback=function(){Co(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){Co(e,t),typeof i!="function"&&(zt===null?zt=new Set([this]):zt.add(this));var m=t.stack;this.componentDidCatch(t.value,{componentStack:m!==null?m:""})}),r}function Nl(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new Vf;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(r)||(n.add(r),e=np.bind(null,e,t,r),t.then(e,e))}function jl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Hl(e,t,r,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=wt(-1,1),t.tag=2,Ft(r,t,1))),r.lanes|=1),e)}var Kf=bt.ReactCurrentOwner,Ne=!1;function Ae(e,t,r,i){t.child=e===null?Eh(t,null,r,i):Br(t,e.child,r,i)}function Fl(e,t,r,i,n){r=r.render;var u=t.ref;return Lr(t,n),i=Ea(e,t,r,i,u,n),r=ba(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Et(e,t,n)):(ce&&r&&fa(t),t.flags|=1,Ae(e,t,i,n),t.child)}function zl(e,t,r,i,n){if(e===null){var u=r.type;return typeof u=="function"&&!Ia(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,Qh(e,t,u,i,n)):(e=ps(r.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&n)){var m=u.memoizedProps;if(r=r.compare,r=r!==null?r:wi,r(m,i)&&e.ref===t.ref)return Et(e,t,n)}return t.flags|=1,e=Wt(u,i),e.ref=t.ref,e.return=t,t.child=e}function Qh(e,t,r,i,n){if(e!==null){var u=e.memoizedProps;if(wi(u,i)&&e.ref===t.ref)if(Ne=!1,t.pendingProps=i=u,(e.lanes&n)!==0)e.flags&131072&&(Ne=!0);else return t.lanes=e.lanes,Et(e,t,n)}return xo(e,t,r,i,n)}function Jh(e,t,r){var i=t.pendingProps,n=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne(Cr,ze),ze|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ne(Cr,ze),ze|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:r,ne(Cr,ze),ze|=i}else u!==null?(i=u.baseLanes|r,t.memoizedState=null):i=r,ne(Cr,ze),ze|=i;return Ae(e,t,n,r),t.child}function Zh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function xo(e,t,r,i,n){var u=He(r)?ir:Te.current;return u=Tr(t,u),Lr(t,n),r=Ea(e,t,r,i,u,n),i=ba(),e!==null&&!Ne?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Et(e,t,n)):(ce&&i&&fa(t),t.flags|=1,Ae(e,t,r,n),t.child)}function Ul(e,t,r,i,n){if(He(r)){var u=!0;Rs(t)}else u=!1;if(Lr(t,n),t.stateNode===null)us(e,t),Xh(t,r,i),wo(t,r,i,n),i=!0;else if(e===null){var m=t.stateNode,a=t.memoizedProps;m.props=a;var c=m.context,f=r.contextType;typeof f=="object"&&f!==null?f=Ze(f):(f=He(r)?ir:Te.current,f=Tr(t,f));var v=r.getDerivedStateFromProps,d=typeof v=="function"||typeof m.getSnapshotBeforeUpdate=="function";d||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(a!==i||c!==f)&&Il(t,m,i,f),At=!1;var _=t.memoizedState;m.state=_,Os(t,i,m,n),c=t.memoizedState,a!==i||_!==c||je.current||At?(typeof v=="function"&&(So(t,r,v,i),c=t.memoizedState),(a=At||Ml(t,r,a,i,_,c,f))?(d||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(t.flags|=4194308)):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),m.props=i,m.state=c,m.context=f,i=a):(typeof m.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{m=t.stateNode,Lh(e,t),a=t.memoizedProps,f=t.type===t.elementType?a:rt(t.type,a),m.props=f,d=t.pendingProps,_=m.context,c=r.contextType,typeof c=="object"&&c!==null?c=Ze(c):(c=He(r)?ir:Te.current,c=Tr(t,c));var S=r.getDerivedStateFromProps;(v=typeof S=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(a!==d||_!==c)&&Il(t,m,i,c),At=!1,_=t.memoizedState,m.state=_,Os(t,i,m,n);var x=t.memoizedState;a!==d||_!==x||je.current||At?(typeof S=="function"&&(So(t,r,S,i),x=t.memoizedState),(f=At||Ml(t,r,f,i,_,x,c)||!1)?(v||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(i,x,c),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(i,x,c)),typeof m.componentDidUpdate=="function"&&(t.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof m.componentDidUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=x),m.props=i,m.state=x,m.context=c,i=f):(typeof m.componentDidUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&_===e.memoizedState||(t.flags|=1024),i=!1)}return ko(e,t,r,i,u,n)}function ko(e,t,r,i,n,u){Zh(e,t);var m=(t.flags&128)!==0;if(!i&&!m)return n&&Ll(t,r,!1),Et(e,t,u);i=t.stateNode,Kf.current=t;var a=m&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&m?(t.child=Br(t,e.child,null,u),t.child=Br(t,null,a,u)):Ae(e,t,a,u),t.memoizedState=i.state,n&&Ll(t,r,!0),t.child}function eu(e){var t=e.stateNode;t.pendingContext?bl(e,t.pendingContext,t.pendingContext!==t.context):t.context&&bl(e,t.context,!1),wa(e,t.containerInfo)}function Wl(e,t,r,i,n){return Ar(),_a(n),t.flags|=256,Ae(e,t,r,i),t.child}var Eo={dehydrated:null,treeContext:null,retryLane:0};function bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function tu(e,t,r){var i=t.pendingProps,n=ue.current,u=!1,m=(t.flags&128)!==0,a;if((a=m)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),ne(ue,n&1),e===null)return vo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(m=i.children,e=i.fallback,u?(i=t.mode,u=t.child,m={mode:"hidden",children:m},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=m):u=Zs(m,i,0,null),e=rr(e,i,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=bo(r),t.memoizedState=Eo,e):Da(t,m));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return qf(e,t,m,i,a,n,r);if(u){u=i.fallback,m=t.mode,n=e.child,a=n.sibling;var c={mode:"hidden",children:i.children};return!(m&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=c,t.deletions=null):(i=Wt(n,c),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?u=Wt(a,u):(u=rr(u,m,r,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,m=e.child.memoizedState,m=m===null?bo(r):{baseLanes:m.baseLanes|r,cachePool:null,transitions:m.transitions},u.memoizedState=m,u.childLanes=e.childLanes&~r,t.memoizedState=Eo,i}return u=e.child,e=u.sibling,i=Wt(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function Da(e,t){return t=Zs({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qi(e,t,r,i){return i!==null&&_a(i),Br(t,e.child,null,r),e=Da(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function qf(e,t,r,i,n,u,m){if(r)return t.flags&256?(t.flags&=-257,i=On(Error(V(422))),Qi(e,t,m,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,n=t.mode,i=Zs({mode:"visible",children:i.children},n,0,null),u=rr(u,n,m,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&Br(t,e.child,null,m),t.child.memoizedState=bo(m),t.memoizedState=Eo,u);if(!(t.mode&1))return Qi(e,t,m,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,u=Error(V(419)),i=On(u,i,void 0),Qi(e,t,m,i)}if(a=(m&e.childLanes)!==0,Ne||a){if(i=xe,i!==null){switch(m&-m){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|m)?0:n,n!==0&&n!==u.retryLane&&(u.retryLane=n,kt(e,n),at(i,e,n,-1))}return Ma(),i=On(Error(V(421))),Qi(e,t,m,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=op.bind(null,e),n._reactRetry=t,null):(e=u.treeContext,Ue=Ht(n.nextSibling),We=t,ce=!0,nt=null,e!==null&&(Xe[Ge++]=yt,Xe[Ge++]=St,Xe[Ge++]=sr,yt=e.id,St=e.overflow,sr=t),t=Da(t,i.children),t.flags|=4096,t)}function $l(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),yo(e.return,t,r)}function Pn(e,t,r,i,n){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=r,u.tailMode=n)}function ru(e,t,r){var i=t.pendingProps,n=i.revealOrder,u=i.tail;if(Ae(e,t,i.children,r),i=ue.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&$l(e,r,t);else if(e.tag===19)$l(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(ne(ue,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;r!==null;)e=r.alternate,e!==null&&Ps(e)===null&&(n=r),r=r.sibling;r=n,r===null?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Pn(t,!1,n,r,u);break;case"backwards":for(r=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&Ps(e)===null){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Pn(t,!0,r,null,u);break;case"together":Pn(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function us(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Et(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),or|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(V(153));if(t.child!==null){for(e=t.child,r=Wt(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Wt(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Xf(e,t,r){switch(t.tag){case 3:eu(t),Ar();break;case 5:Rh(t);break;case 1:He(t.type)&&Rs(t);break;case 4:wa(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;ne(As,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(ne(ue,ue.current&1),t.flags|=128,null):r&t.child.childLanes?tu(e,t,r):(ne(ue,ue.current&1),e=Et(e,t,r),e!==null?e.sibling:null);ne(ue,ue.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return ru(e,t,r);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),ne(ue,ue.current),i)break;return null;case 22:case 23:return t.lanes=0,Jh(e,t,r)}return Et(e,t,r)}var iu,Lo,su,nu;iu=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Lo=function(){};su=function(e,t,r,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,er(pt.current);var u=null;switch(r){case"input":n=Xn(e,n),i=Xn(e,i),u=[];break;case"select":n=fe({},n,{value:void 0}),i=fe({},i,{value:void 0}),u=[];break;case"textarea":n=Qn(e,n),i=Qn(e,i),u=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=bs)}Zn(r,i);var m;r=null;for(f in n)if(!i.hasOwnProperty(f)&&n.hasOwnProperty(f)&&n[f]!=null)if(f==="style"){var a=n[f];for(m in a)a.hasOwnProperty(m)&&(r||(r={}),r[m]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(pi.hasOwnProperty(f)?u||(u=[]):(u=u||[]).push(f,null));for(f in i){var c=i[f];if(a=n!=null?n[f]:void 0,i.hasOwnProperty(f)&&c!==a&&(c!=null||a!=null))if(f==="style")if(a){for(m in a)!a.hasOwnProperty(m)||c&&c.hasOwnProperty(m)||(r||(r={}),r[m]="");for(m in c)c.hasOwnProperty(m)&&a[m]!==c[m]&&(r||(r={}),r[m]=c[m])}else r||(u||(u=[]),u.push(f,r)),r=c;else f==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(u=u||[]).push(f,c)):f==="children"?typeof c!="string"&&typeof c!="number"||(u=u||[]).push(f,""+c):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(pi.hasOwnProperty(f)?(c!=null&&f==="onScroll"&&oe("scroll",e),u||a===c||(u=[])):(u=u||[]).push(f,c))}r&&(u=u||[]).push("style",r);var f=u;(t.updateQueue=f)&&(t.flags|=4)}};nu=function(e,t,r,i){r!==i&&(t.flags|=4)};function Yr(e,t){if(!ce)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Re(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)r|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function Gf(e,t,r){var i=t.pendingProps;switch(pa(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Re(t),null;case 1:return He(t.type)&&Ls(),Re(t),null;case 3:return i=t.stateNode,Or(),ae(je),ae(Te),xa(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Gi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nt!==null&&(Mo(nt),nt=null))),Lo(e,t),Re(t),null;case 5:Ca(t);var n=er(bi.current);if(r=t.type,e!==null&&t.stateNode!=null)su(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(V(166));return Re(t),null}if(e=er(pt.current),Gi(t)){i=t.stateNode,r=t.type;var u=t.memoizedProps;switch(i[dt]=t,i[ki]=u,e=(t.mode&1)!==0,r){case"dialog":oe("cancel",i),oe("close",i);break;case"iframe":case"object":case"embed":oe("load",i);break;case"video":case"audio":for(n=0;n<ri.length;n++)oe(ri[n],i);break;case"source":oe("error",i);break;case"img":case"image":case"link":oe("error",i),oe("load",i);break;case"details":oe("toggle",i);break;case"input":Za(i,u),oe("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},oe("invalid",i);break;case"textarea":tl(i,u),oe("invalid",i)}Zn(r,u),n=null;for(var m in u)if(u.hasOwnProperty(m)){var a=u[m];m==="children"?typeof a=="string"?i.textContent!==a&&(u.suppressHydrationWarning!==!0&&Xi(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(u.suppressHydrationWarning!==!0&&Xi(i.textContent,a,e),n=["children",""+a]):pi.hasOwnProperty(m)&&a!=null&&m==="onScroll"&&oe("scroll",i)}switch(r){case"input":Fi(i),el(i,u,!0);break;case"textarea":Fi(i),rl(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=bs)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{m=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Oc(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=m.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=m.createElement(r,{is:i.is}):(e=m.createElement(r),r==="select"&&(m=e,i.multiple?m.multiple=!0:i.size&&(m.size=i.size))):e=m.createElementNS(e,r),e[dt]=t,e[ki]=i,iu(e,t,!1,!1),t.stateNode=e;e:{switch(m=eo(r,i),r){case"dialog":oe("cancel",e),oe("close",e),n=i;break;case"iframe":case"object":case"embed":oe("load",e),n=i;break;case"video":case"audio":for(n=0;n<ri.length;n++)oe(ri[n],e);n=i;break;case"source":oe("error",e),n=i;break;case"img":case"image":case"link":oe("error",e),oe("load",e),n=i;break;case"details":oe("toggle",e),n=i;break;case"input":Za(e,i),n=Xn(e,i),oe("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=fe({},i,{value:void 0}),oe("invalid",e);break;case"textarea":tl(e,i),n=Qn(e,i),oe("invalid",e);break;default:n=i}Zn(r,n),a=n;for(u in a)if(a.hasOwnProperty(u)){var c=a[u];u==="style"?Ic(e,c):u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pc(e,c)):u==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_i(e,c):typeof c=="number"&&_i(e,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pi.hasOwnProperty(u)?c!=null&&u==="onScroll"&&oe("scroll",e):c!=null&&Zo(e,u,c,m))}switch(r){case"input":Fi(e),el(e,i,!1);break;case"textarea":Fi(e),rl(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Vt(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?xr(e,!!i.multiple,u,!1):i.defaultValue!=null&&xr(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=bs)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Re(t),null;case 6:if(e&&t.stateNode!=null)nu(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(V(166));if(r=er(bi.current),er(pt.current),Gi(t)){if(i=t.stateNode,r=t.memoizedProps,i[dt]=t,(u=i.nodeValue!==r)&&(e=We,e!==null))switch(e.tag){case 3:Xi(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Xi(i.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[dt]=t,t.stateNode=i}return Re(t),null;case 13:if(ae(ue),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ce&&Ue!==null&&t.mode&1&&!(t.flags&128))xh(),Ar(),t.flags|=98560,u=!1;else if(u=Gi(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(V(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(V(317));u[dt]=t}else Ar(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Re(t),u=!1}else nt!==null&&(Mo(nt),nt=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||ue.current&1?we===0&&(we=3):Ma())),t.updateQueue!==null&&(t.flags|=4),Re(t),null);case 4:return Or(),Lo(e,t),e===null&&Ci(t.stateNode.containerInfo),Re(t),null;case 10:return va(t.type._context),Re(t),null;case 17:return He(t.type)&&Ls(),Re(t),null;case 19:if(ae(ue),u=t.memoizedState,u===null)return Re(t),null;if(i=(t.flags&128)!==0,m=u.rendering,m===null)if(i)Yr(u,!1);else{if(we!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(m=Ps(e),m!==null){for(t.flags|=128,Yr(u,!1),i=m.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)u=r,e=i,u.flags&=14680066,m=u.alternate,m===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=m.childLanes,u.lanes=m.lanes,u.child=m.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=m.memoizedProps,u.memoizedState=m.memoizedState,u.updateQueue=m.updateQueue,u.type=m.type,e=m.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ne(ue,ue.current&1|2),t.child}e=e.sibling}u.tail!==null&&me()>Mr&&(t.flags|=128,i=!0,Yr(u,!1),t.lanes=4194304)}else{if(!i)if(e=Ps(m),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Yr(u,!0),u.tail===null&&u.tailMode==="hidden"&&!m.alternate&&!ce)return Re(t),null}else 2*me()-u.renderingStartTime>Mr&&r!==1073741824&&(t.flags|=128,i=!0,Yr(u,!1),t.lanes=4194304);u.isBackwards?(m.sibling=t.child,t.child=m):(r=u.last,r!==null?r.sibling=m:t.child=m,u.last=m)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=me(),t.sibling=null,r=ue.current,ne(ue,i?r&1|2:r&1),t):(Re(t),null);case 22:case 23:return Pa(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ze&1073741824&&(Re(t),t.subtreeFlags&6&&(t.flags|=8192)):Re(t),null;case 24:return null;case 25:return null}throw Error(V(156,t.tag))}function Yf(e,t){switch(pa(t),t.tag){case 1:return He(t.type)&&Ls(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Or(),ae(je),ae(Te),xa(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ca(t),null;case 13:if(ae(ue),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(V(340));Ar()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ae(ue),null;case 4:return Or(),null;case 10:return va(t.type._context),null;case 22:case 23:return Pa(),null;case 24:return null;default:return null}}var Ji=!1,De=!1,Qf=typeof WeakSet=="function"?WeakSet:Set,G=null;function wr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ge(e,t,i)}else r.current=null}function Ro(e,t,r){try{r()}catch(i){ge(e,t,i)}}var Vl=!1;function Jf(e,t){if(ho=xs,e=hh(),da(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var n=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var m=0,a=-1,c=-1,f=0,v=0,d=e,_=null;t:for(;;){for(var S;d!==r||n!==0&&d.nodeType!==3||(a=m+n),d!==u||i!==0&&d.nodeType!==3||(c=m+i),d.nodeType===3&&(m+=d.nodeValue.length),(S=d.firstChild)!==null;)_=d,d=S;for(;;){if(d===e)break t;if(_===r&&++f===n&&(a=m),_===u&&++v===i&&(c=m),(S=d.nextSibling)!==null)break;d=_,_=d.parentNode}d=S}r=a===-1||c===-1?null:{start:a,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(uo={focusedElem:e,selectionRange:r},xs=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var g=x.memoizedProps,h=x.memoizedState,o=t.stateNode,s=o.getSnapshotBeforeUpdate(t.elementType===t.type?g:rt(t.type,g),h);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:var l=t.stateNode.containerInfo;l.nodeType===1?l.textContent="":l.nodeType===9&&l.documentElement&&l.removeChild(l.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(p){ge(t,t.return,p)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return x=Vl,Vl=!1,x}function hi(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var u=n.destroy;n.destroy=void 0,u!==void 0&&Ro(t,r,u)}n=n.next}while(n!==i)}}function Qs(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function Do(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function ou(e){var t=e.alternate;t!==null&&(e.alternate=null,ou(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[dt],delete t[ki],delete t[_o],delete t[Pf],delete t[Mf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function au(e){return e.tag===5||e.tag===3||e.tag===4}function Kl(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||au(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function To(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=bs));else if(i!==4&&(e=e.child,e!==null))for(To(e,t,r),e=e.sibling;e!==null;)To(e,t,r),e=e.sibling}function Ao(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(Ao(e,t,r),e=e.sibling;e!==null;)Ao(e,t,r),e=e.sibling}var ke=null,it=!1;function Dt(e,t,r){for(r=r.child;r!==null;)lu(e,t,r),r=r.sibling}function lu(e,t,r){if(ft&&typeof ft.onCommitFiberUnmount=="function")try{ft.onCommitFiberUnmount(Ws,r)}catch{}switch(r.tag){case 5:De||wr(r,t);case 6:var i=ke,n=it;ke=null,Dt(e,t,r),ke=i,it=n,ke!==null&&(it?(e=ke,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ke.removeChild(r.stateNode));break;case 18:ke!==null&&(it?(e=ke,r=r.stateNode,e.nodeType===8?Ln(e.parentNode,r):e.nodeType===1&&Ln(e,r),yi(e)):Ln(ke,r.stateNode));break;case 4:i=ke,n=it,ke=r.stateNode.containerInfo,it=!0,Dt(e,t,r),ke=i,it=n;break;case 0:case 11:case 14:case 15:if(!De&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var u=n,m=u.destroy;u=u.tag,m!==void 0&&(u&2||u&4)&&Ro(r,t,m),n=n.next}while(n!==i)}Dt(e,t,r);break;case 1:if(!De&&(wr(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(a){ge(r,t,a)}Dt(e,t,r);break;case 21:Dt(e,t,r);break;case 22:r.mode&1?(De=(i=De)||r.memoizedState!==null,Dt(e,t,r),De=i):Dt(e,t,r);break;default:Dt(e,t,r)}}function ql(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Qf),t.forEach(function(i){var n=ap.bind(null,e,i);r.has(i)||(r.add(i),i.then(n,n))})}}function tt(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var n=r[i];try{var u=e,m=t,a=m;e:for(;a!==null;){switch(a.tag){case 5:ke=a.stateNode,it=!1;break e;case 3:ke=a.stateNode.containerInfo,it=!0;break e;case 4:ke=a.stateNode.containerInfo,it=!0;break e}a=a.return}if(ke===null)throw Error(V(160));lu(u,m,n),ke=null,it=!1;var c=n.alternate;c!==null&&(c.return=null),n.return=null}catch(f){ge(n,t,f)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cu(t,e),t=t.sibling}function cu(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(tt(t,e),ht(e),i&4){try{hi(3,e,e.return),Qs(3,e)}catch(g){ge(e,e.return,g)}try{hi(5,e,e.return)}catch(g){ge(e,e.return,g)}}break;case 1:tt(t,e),ht(e),i&512&&r!==null&&wr(r,r.return);break;case 5:if(tt(t,e),ht(e),i&512&&r!==null&&wr(r,r.return),e.flags&32){var n=e.stateNode;try{_i(n,"")}catch(g){ge(e,e.return,g)}}if(i&4&&(n=e.stateNode,n!=null)){var u=e.memoizedProps,m=r!==null?r.memoizedProps:u,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&u.type==="radio"&&u.name!=null&&Ac(n,u),eo(a,m);var f=eo(a,u);for(m=0;m<c.length;m+=2){var v=c[m],d=c[m+1];v==="style"?Ic(n,d):v==="dangerouslySetInnerHTML"?Pc(n,d):v==="children"?_i(n,d):Zo(n,v,d,f)}switch(a){case"input":Gn(n,u);break;case"textarea":Bc(n,u);break;case"select":var _=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!u.multiple;var S=u.value;S!=null?xr(n,!!u.multiple,S,!1):_!==!!u.multiple&&(u.defaultValue!=null?xr(n,!!u.multiple,u.defaultValue,!0):xr(n,!!u.multiple,u.multiple?[]:"",!1))}n[ki]=u}catch(g){ge(e,e.return,g)}}break;case 6:if(tt(t,e),ht(e),i&4){if(e.stateNode===null)throw Error(V(162));n=e.stateNode,u=e.memoizedProps;try{n.nodeValue=u}catch(g){ge(e,e.return,g)}}break;case 3:if(tt(t,e),ht(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{yi(t.containerInfo)}catch(g){ge(e,e.return,g)}break;case 4:tt(t,e),ht(e);break;case 13:tt(t,e),ht(e),n=e.child,n.flags&8192&&(u=n.memoizedState!==null,n.stateNode.isHidden=u,!u||n.alternate!==null&&n.alternate.memoizedState!==null||(Ba=me())),i&4&&ql(e);break;case 22:if(v=r!==null&&r.memoizedState!==null,e.mode&1?(De=(f=De)||v,tt(t,e),De=f):tt(t,e),ht(e),i&8192){if(f=e.memoizedState!==null,(e.stateNode.isHidden=f)&&!v&&e.mode&1)for(G=e,v=e.child;v!==null;){for(d=G=v;G!==null;){switch(_=G,S=_.child,_.tag){case 0:case 11:case 14:case 15:hi(4,_,_.return);break;case 1:wr(_,_.return);var x=_.stateNode;if(typeof x.componentWillUnmount=="function"){i=_,r=_.return;try{t=i,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(g){ge(i,r,g)}}break;case 5:wr(_,_.return);break;case 22:if(_.memoizedState!==null){Gl(d);continue}}S!==null?(S.return=_,G=S):Gl(d)}v=v.sibling}e:for(v=null,d=e;;){if(d.tag===5){if(v===null){v=d;try{n=d.stateNode,f?(u=n.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(a=d.stateNode,c=d.memoizedProps.style,m=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Mc("display",m))}catch(g){ge(e,e.return,g)}}}else if(d.tag===6){if(v===null)try{d.stateNode.nodeValue=f?"":d.memoizedProps}catch(g){ge(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;v===d&&(v=null),d=d.return}v===d&&(v=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:tt(t,e),ht(e),i&4&&ql(e);break;case 21:break;default:tt(t,e),ht(e)}}function ht(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(au(r)){var i=r;break e}r=r.return}throw Error(V(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(_i(n,""),i.flags&=-33);var u=Kl(e);Ao(e,u,n);break;case 3:case 4:var m=i.stateNode.containerInfo,a=Kl(e);To(e,a,m);break;default:throw Error(V(161))}}catch(c){ge(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Zf(e,t,r){G=e,hu(e)}function hu(e,t,r){for(var i=(e.mode&1)!==0;G!==null;){var n=G,u=n.child;if(n.tag===22&&i){var m=n.memoizedState!==null||Ji;if(!m){var a=n.alternate,c=a!==null&&a.memoizedState!==null||De;a=Ji;var f=De;if(Ji=m,(De=c)&&!f)for(G=n;G!==null;)m=G,c=m.child,m.tag===22&&m.memoizedState!==null?Yl(n):c!==null?(c.return=m,G=c):Yl(n);for(;u!==null;)G=u,hu(u),u=u.sibling;G=n,Ji=a,De=f}Xl(e)}else n.subtreeFlags&8772&&u!==null?(u.return=n,G=u):Xl(e)}}function Xl(e){for(;G!==null;){var t=G;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:De||Qs(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!De)if(r===null)i.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:rt(t.type,r.memoizedProps);i.componentDidUpdate(n,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&Bl(t,u,i);break;case 3:var m=t.updateQueue;if(m!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Bl(t,m,r)}break;case 5:var a=t.stateNode;if(r===null&&t.flags&4){r=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var f=t.alternate;if(f!==null){var v=f.memoizedState;if(v!==null){var d=v.dehydrated;d!==null&&yi(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}De||t.flags&512&&Do(t)}catch(_){ge(t,t.return,_)}}if(t===e){G=null;break}if(r=t.sibling,r!==null){r.return=t.return,G=r;break}G=t.return}}function Gl(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var r=t.sibling;if(r!==null){r.return=t.return,G=r;break}G=t.return}}function Yl(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Qs(4,t)}catch(c){ge(t,r,c)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(c){ge(t,n,c)}}var u=t.return;try{Do(t)}catch(c){ge(t,u,c)}break;case 5:var m=t.return;try{Do(t)}catch(c){ge(t,m,c)}}}catch(c){ge(t,t.return,c)}if(t===e){G=null;break}var a=t.sibling;if(a!==null){a.return=t.return,G=a;break}G=t.return}}var ep=Math.ceil,Ns=bt.ReactCurrentDispatcher,Ta=bt.ReactCurrentOwner,Je=bt.ReactCurrentBatchConfig,ie=0,xe=null,ve=null,Ee=0,ze=0,Cr=Xt(0),we=0,Ti=null,or=0,Js=0,Aa=0,ui=null,Ie=null,Ba=0,Mr=1/0,mt=null,js=!1,Bo=null,zt=null,Zi=!1,Mt=null,Hs=0,di=0,Oo=null,ds=-1,fs=0;function Be(){return ie&6?me():ds!==-1?ds:ds=me()}function Ut(e){return e.mode&1?ie&2&&Ee!==0?Ee&-Ee:Nf.transition!==null?(fs===0&&(fs=Xc()),fs):(e=se,e!==0||(e=window.event,e=e===void 0?16:th(e.type)),e):1}function at(e,t,r,i){if(50<di)throw di=0,Oo=null,Error(V(185));Bi(e,r,i),(!(ie&2)||e!==xe)&&(e===xe&&(!(ie&2)&&(Js|=r),we===4&&Ot(e,Ee)),Fe(e,i),r===1&&ie===0&&!(t.mode&1)&&(Mr=me()+500,Xs&&Gt()))}function Fe(e,t){var r=e.callbackNode;Id(e,t);var i=Cs(e,e===xe?Ee:0);if(i===0)r!==null&&nl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&nl(r),t===1)e.tag===0?If(Ql.bind(null,e)):Sh(Ql.bind(null,e)),Bf(function(){!(ie&6)&&Gt()}),r=null;else{switch(Gc(i)){case 1:r=sa;break;case 4:r=Kc;break;case 16:r=ws;break;case 536870912:r=qc;break;default:r=ws}r=vu(r,uu.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function uu(e,t){if(ds=-1,fs=0,ie&6)throw Error(V(327));var r=e.callbackNode;if(Rr()&&e.callbackNode!==r)return null;var i=Cs(e,e===xe?Ee:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=Fs(e,i);else{t=i;var n=ie;ie|=2;var u=fu();(xe!==e||Ee!==t)&&(mt=null,Mr=me()+500,tr(e,t));do try{ip();break}catch(a){du(e,a)}while(!0);ma(),Ns.current=u,ie=n,ve!==null?t=0:(xe=null,Ee=0,t=we)}if(t!==0){if(t===2&&(n=no(e),n!==0&&(i=n,t=Po(e,n))),t===1)throw r=Ti,tr(e,0),Ot(e,i),Fe(e,me()),r;if(t===6)Ot(e,i);else{if(n=e.current.alternate,!(i&30)&&!tp(n)&&(t=Fs(e,i),t===2&&(u=no(e),u!==0&&(i=u,t=Po(e,u))),t===1))throw r=Ti,tr(e,0),Ot(e,i),Fe(e,me()),r;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(V(345));case 2:Qt(e,Ie,mt);break;case 3:if(Ot(e,i),(i&130023424)===i&&(t=Ba+500-me(),10<t)){if(Cs(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){Be(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=po(Qt.bind(null,e,Ie,mt),t);break}Qt(e,Ie,mt);break;case 4:if(Ot(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var m=31-ot(i);u=1<<m,m=t[m],m>n&&(n=m),i&=~u}if(i=n,i=me()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ep(i/1960))-i,10<i){e.timeoutHandle=po(Qt.bind(null,e,Ie,mt),i);break}Qt(e,Ie,mt);break;case 5:Qt(e,Ie,mt);break;default:throw Error(V(329))}}}return Fe(e,me()),e.callbackNode===r?uu.bind(null,e):null}function Po(e,t){var r=ui;return e.current.memoizedState.isDehydrated&&(tr(e,t).flags|=256),e=Fs(e,t),e!==2&&(t=Ie,Ie=r,t!==null&&Mo(t)),e}function Mo(e){Ie===null?Ie=e:Ie.push.apply(Ie,e)}function tp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var n=r[i],u=n.getSnapshot;n=n.value;try{if(!lt(u(),n))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ot(e,t){for(t&=~Aa,t&=~Js,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ot(t),i=1<<r;e[r]=-1,t&=~i}}function Ql(e){if(ie&6)throw Error(V(327));Rr();var t=Cs(e,0);if(!(t&1))return Fe(e,me()),null;var r=Fs(e,t);if(e.tag!==0&&r===2){var i=no(e);i!==0&&(t=i,r=Po(e,i))}if(r===1)throw r=Ti,tr(e,0),Ot(e,t),Fe(e,me()),r;if(r===6)throw Error(V(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qt(e,Ie,mt),Fe(e,me()),null}function Oa(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Mr=me()+500,Xs&&Gt())}}function ar(e){Mt!==null&&Mt.tag===0&&!(ie&6)&&Rr();var t=ie;ie|=1;var r=Je.transition,i=se;try{if(Je.transition=null,se=1,e)return e()}finally{se=i,Je.transition=r,ie=t,!(ie&6)&&Gt()}}function Pa(){ze=Cr.current,ae(Cr)}function tr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Af(r)),ve!==null)for(r=ve.return;r!==null;){var i=r;switch(pa(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Ls();break;case 3:Or(),ae(je),ae(Te),xa();break;case 5:Ca(i);break;case 4:Or();break;case 13:ae(ue);break;case 19:ae(ue);break;case 10:va(i.type._context);break;case 22:case 23:Pa()}r=r.return}if(xe=e,ve=e=Wt(e.current,null),Ee=ze=t,we=0,Ti=null,Aa=Js=or=0,Ie=ui=null,Zt!==null){for(t=0;t<Zt.length;t++)if(r=Zt[t],i=r.interleaved,i!==null){r.interleaved=null;var n=i.next,u=r.pending;if(u!==null){var m=u.next;u.next=n,i.next=m}r.pending=i}Zt=null}return e}function du(e,t){do{var r=ve;try{if(ma(),cs.current=Is,Ms){for(var i=de.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}Ms=!1}if(nr=0,Ce=Se=de=null,ci=!1,Li=0,Ta.current=null,r===null||r.return===null){we=1,Ti=t,ve=null;break}e:{var u=e,m=r.return,a=r,c=t;if(t=Ee,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var f=c,v=a,d=v.tag;if(!(v.mode&1)&&(d===0||d===11||d===15)){var _=v.alternate;_?(v.updateQueue=_.updateQueue,v.memoizedState=_.memoizedState,v.lanes=_.lanes):(v.updateQueue=null,v.memoizedState=null)}var S=jl(m);if(S!==null){S.flags&=-257,Hl(S,m,a,u,t),S.mode&1&&Nl(u,f,t),t=S,c=f;var x=t.updateQueue;if(x===null){var g=new Set;g.add(c),t.updateQueue=g}else x.add(c);break e}else{if(!(t&1)){Nl(u,f,t),Ma();break e}c=Error(V(426))}}else if(ce&&a.mode&1){var h=jl(m);if(h!==null){!(h.flags&65536)&&(h.flags|=256),Hl(h,m,a,u,t),_a(Pr(c,a));break e}}u=c=Pr(c,a),we!==4&&(we=2),ui===null?ui=[u]:ui.push(u),u=m;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var o=Gh(u,c,t);Al(u,o);break e;case 1:a=c;var s=u.type,l=u.stateNode;if(!(u.flags&128)&&(typeof s.getDerivedStateFromError=="function"||l!==null&&typeof l.componentDidCatch=="function"&&(zt===null||!zt.has(l)))){u.flags|=65536,t&=-t,u.lanes|=t;var p=Yh(u,a,t);Al(u,p);break e}}u=u.return}while(u!==null)}_u(r)}catch(w){t=w,ve===r&&r!==null&&(ve=r=r.return);continue}break}while(!0)}function fu(){var e=Ns.current;return Ns.current=Is,e===null?Is:e}function Ma(){(we===0||we===3||we===2)&&(we=4),xe===null||!(or&268435455)&&!(Js&268435455)||Ot(xe,Ee)}function Fs(e,t){var r=ie;ie|=2;var i=fu();(xe!==e||Ee!==t)&&(mt=null,tr(e,t));do try{rp();break}catch(n){du(e,n)}while(!0);if(ma(),ie=r,Ns.current=i,ve!==null)throw Error(V(261));return xe=null,Ee=0,we}function rp(){for(;ve!==null;)pu(ve)}function ip(){for(;ve!==null&&!Ld();)pu(ve)}function pu(e){var t=mu(e.alternate,e,ze);e.memoizedProps=e.pendingProps,t===null?_u(e):ve=t,Ta.current=null}function _u(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Yf(r,t),r!==null){r.flags&=32767,ve=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{we=6,ve=null;return}}else if(r=Gf(r,t,ze),r!==null){ve=r;return}if(t=t.sibling,t!==null){ve=t;return}ve=t=e}while(t!==null);we===0&&(we=5)}function Qt(e,t,r){var i=se,n=Je.transition;try{Je.transition=null,se=1,sp(e,t,r,i)}finally{Je.transition=n,se=i}return null}function sp(e,t,r,i){do Rr();while(Mt!==null);if(ie&6)throw Error(V(327));r=e.finishedWork;var n=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(V(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(Nd(e,u),e===xe&&(ve=xe=null,Ee=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zi||(Zi=!0,vu(ws,function(){return Rr(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Je.transition,Je.transition=null;var m=se;se=1;var a=ie;ie|=4,Ta.current=null,Jf(e,r),cu(r,e),kf(uo),xs=!!ho,uo=ho=null,e.current=r,Zf(r),Rd(),ie=a,se=m,Je.transition=u}else e.current=r;if(Zi&&(Zi=!1,Mt=e,Hs=n),u=e.pendingLanes,u===0&&(zt=null),Ad(r.stateNode),Fe(e,me()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],i(n.value,{componentStack:n.stack,digest:n.digest});if(js)throw js=!1,e=Bo,Bo=null,e;return Hs&1&&e.tag!==0&&Rr(),u=e.pendingLanes,u&1?e===Oo?di++:(di=0,Oo=e):di=0,Gt(),null}function Rr(){if(Mt!==null){var e=Gc(Hs),t=Je.transition,r=se;try{if(Je.transition=null,se=16>e?16:e,Mt===null)var i=!1;else{if(e=Mt,Mt=null,Hs=0,ie&6)throw Error(V(331));var n=ie;for(ie|=4,G=e.current;G!==null;){var u=G,m=u.child;if(G.flags&16){var a=u.deletions;if(a!==null){for(var c=0;c<a.length;c++){var f=a[c];for(G=f;G!==null;){var v=G;switch(v.tag){case 0:case 11:case 15:hi(8,v,u)}var d=v.child;if(d!==null)d.return=v,G=d;else for(;G!==null;){v=G;var _=v.sibling,S=v.return;if(ou(v),v===f){G=null;break}if(_!==null){_.return=S,G=_;break}G=S}}}var x=u.alternate;if(x!==null){var g=x.child;if(g!==null){x.child=null;do{var h=g.sibling;g.sibling=null,g=h}while(g!==null)}}G=u}}if(u.subtreeFlags&2064&&m!==null)m.return=u,G=m;else e:for(;G!==null;){if(u=G,u.flags&2048)switch(u.tag){case 0:case 11:case 15:hi(9,u,u.return)}var o=u.sibling;if(o!==null){o.return=u.return,G=o;break e}G=u.return}}var s=e.current;for(G=s;G!==null;){m=G;var l=m.child;if(m.subtreeFlags&2064&&l!==null)l.return=m,G=l;else e:for(m=s;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Qs(9,a)}}catch(w){ge(a,a.return,w)}if(a===m){G=null;break e}var p=a.sibling;if(p!==null){p.return=a.return,G=p;break e}G=a.return}}if(ie=n,Gt(),ft&&typeof ft.onPostCommitFiberRoot=="function")try{ft.onPostCommitFiberRoot(Ws,e)}catch{}i=!0}return i}finally{se=r,Je.transition=t}}return!1}function Jl(e,t,r){t=Pr(r,t),t=Gh(e,t,1),e=Ft(e,t,1),t=Be(),e!==null&&(Bi(e,1,t),Fe(e,t))}function ge(e,t,r){if(e.tag===3)Jl(e,e,r);else for(;t!==null;){if(t.tag===3){Jl(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zt===null||!zt.has(i))){e=Pr(r,e),e=Yh(t,e,1),t=Ft(t,e,1),e=Be(),t!==null&&(Bi(t,1,e),Fe(t,e));break}}t=t.return}}function np(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=Be(),e.pingedLanes|=e.suspendedLanes&r,xe===e&&(Ee&r)===r&&(we===4||we===3&&(Ee&130023424)===Ee&&500>me()-Ba?tr(e,0):Aa|=r),Fe(e,t)}function gu(e,t){t===0&&(e.mode&1?(t=Wi,Wi<<=1,!(Wi&130023424)&&(Wi=4194304)):t=1);var r=Be();e=kt(e,t),e!==null&&(Bi(e,t,r),Fe(e,r))}function op(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),gu(e,r)}function ap(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(r=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(V(314))}i!==null&&i.delete(t),gu(e,r)}var mu;mu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||je.current)Ne=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Ne=!1,Xf(e,t,r);Ne=!!(e.flags&131072)}else Ne=!1,ce&&t.flags&1048576&&wh(t,Ts,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;us(e,t),e=t.pendingProps;var n=Tr(t,Te.current);Lr(t,r),n=Ea(null,t,i,e,n,r);var u=ba();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,He(i)?(u=!0,Rs(t)):u=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,Sa(t),n.updater=Ys,t.stateNode=n,n._reactInternals=t,wo(t,i,e,r),t=ko(null,t,i,!0,u,r)):(t.tag=0,ce&&u&&fa(t),Ae(null,t,n,r),t=t.child),t;case 16:i=t.elementType;e:{switch(us(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=cp(i),e=rt(i,e),n){case 0:t=xo(null,t,i,e,r);break e;case 1:t=Ul(null,t,i,e,r);break e;case 11:t=Fl(null,t,i,e,r);break e;case 14:t=zl(null,t,i,rt(i.type,e),r);break e}throw Error(V(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),xo(e,t,i,n,r);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),Ul(e,t,i,n,r);case 3:e:{if(eu(t),e===null)throw Error(V(387));i=t.pendingProps,u=t.memoizedState,n=u.element,Lh(e,t),Os(t,i,null,r);var m=t.memoizedState;if(i=m.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){n=Pr(Error(V(423)),t),t=Wl(e,t,i,r,n);break e}else if(i!==n){n=Pr(Error(V(424)),t),t=Wl(e,t,i,r,n);break e}else for(Ue=Ht(t.stateNode.containerInfo.firstChild),We=t,ce=!0,nt=null,r=Eh(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Ar(),i===n){t=Et(e,t,r);break e}Ae(e,t,i,r)}t=t.child}return t;case 5:return Rh(t),e===null&&vo(t),i=t.type,n=t.pendingProps,u=e!==null?e.memoizedProps:null,m=n.children,fo(i,n)?m=null:u!==null&&fo(i,u)&&(t.flags|=32),Zh(e,t),Ae(e,t,m,r),t.child;case 6:return e===null&&vo(t),null;case 13:return tu(e,t,r);case 4:return wa(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=Br(t,null,i,r):Ae(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),Fl(e,t,i,n,r);case 7:return Ae(e,t,t.pendingProps,r),t.child;case 8:return Ae(e,t,t.pendingProps.children,r),t.child;case 12:return Ae(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,u=t.memoizedProps,m=n.value,ne(As,i._currentValue),i._currentValue=m,u!==null)if(lt(u.value,m)){if(u.children===n.children&&!je.current){t=Et(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var a=u.dependencies;if(a!==null){m=u.child;for(var c=a.firstContext;c!==null;){if(c.context===i){if(u.tag===1){c=wt(-1,r&-r),c.tag=2;var f=u.updateQueue;if(f!==null){f=f.shared;var v=f.pending;v===null?c.next=c:(c.next=v.next,v.next=c),f.pending=c}}u.lanes|=r,c=u.alternate,c!==null&&(c.lanes|=r),yo(u.return,r,t),a.lanes|=r;break}c=c.next}}else if(u.tag===10)m=u.type===t.type?null:u.child;else if(u.tag===18){if(m=u.return,m===null)throw Error(V(341));m.lanes|=r,a=m.alternate,a!==null&&(a.lanes|=r),yo(m,r,t),m=u.sibling}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===t){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}Ae(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,Lr(t,r),n=Ze(n),i=i(n),t.flags|=1,Ae(e,t,i,r),t.child;case 14:return i=t.type,n=rt(i,t.pendingProps),n=rt(i.type,n),zl(e,t,i,n,r);case 15:return Qh(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:rt(i,n),us(e,t),t.tag=1,He(i)?(e=!0,Rs(t)):e=!1,Lr(t,r),Xh(t,i,n),wo(t,i,n,r),ko(null,t,i,!0,e,r);case 19:return ru(e,t,r);case 22:return Jh(e,t,r)}throw Error(V(156,t.tag))};function vu(e,t){return Vc(e,t)}function lp(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qe(e,t,r,i){return new lp(e,t,r,i)}function Ia(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cp(e){if(typeof e=="function")return Ia(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ta)return 11;if(e===ra)return 14}return 2}function Wt(e,t){var r=e.alternate;return r===null?(r=Qe(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ps(e,t,r,i,n,u){var m=2;if(i=e,typeof e=="function")Ia(e)&&(m=1);else if(typeof e=="string")m=5;else e:switch(e){case dr:return rr(r.children,n,u,t);case ea:m=8,n|=8;break;case $n:return e=Qe(12,r,t,n|2),e.elementType=$n,e.lanes=u,e;case Vn:return e=Qe(13,r,t,n),e.elementType=Vn,e.lanes=u,e;case Kn:return e=Qe(19,r,t,n),e.elementType=Kn,e.lanes=u,e;case Rc:return Zs(r,n,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bc:m=10;break e;case Lc:m=9;break e;case ta:m=11;break e;case ra:m=14;break e;case Tt:m=16,i=null;break e}throw Error(V(130,e==null?e:typeof e,""))}return t=Qe(m,r,t,n),t.elementType=e,t.type=i,t.lanes=u,t}function rr(e,t,r,i){return e=Qe(7,e,i,t),e.lanes=r,e}function Zs(e,t,r,i){return e=Qe(22,e,i,t),e.elementType=Rc,e.lanes=r,e.stateNode={isHidden:!1},e}function Mn(e,t,r){return e=Qe(6,e,null,t),e.lanes=r,e}function In(e,t,r){return t=Qe(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function hp(e,t,r,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gn(0),this.expirationTimes=gn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Na(e,t,r,i,n,u,m,a,c){return e=new hp(e,t,r,a,c),t===1?(t=1,u===!0&&(t|=8)):t=0,u=Qe(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sa(u),e}function up(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function yu(e){if(!e)return Kt;e=e._reactInternals;e:{if(cr(e)!==e||e.tag!==1)throw Error(V(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(He(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(V(171))}if(e.tag===1){var r=e.type;if(He(r))return yh(e,r,t)}return t}function Su(e,t,r,i,n,u,m,a,c){return e=Na(r,i,!0,e,n,u,m,a,c),e.context=yu(null),r=e.current,i=Be(),n=Ut(r),u=wt(i,n),u.callback=t??null,Ft(r,u,n),e.current.lanes=n,Bi(e,n,i),Fe(e,i),e}function en(e,t,r,i){var n=t.current,u=Be(),m=Ut(n);return r=yu(r),t.context===null?t.context=r:t.pendingContext=r,t=wt(u,m),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=Ft(n,t,m),e!==null&&(at(e,n,m,u),ls(e,n,m)),m}function zs(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Zl(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ja(e,t){Zl(e,t),(e=e.alternate)&&Zl(e,t)}function dp(){return null}var wu=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ha(e){this._internalRoot=e}tn.prototype.render=Ha.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(V(409));en(e,t,null,null)};tn.prototype.unmount=Ha.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ar(function(){en(null,e,null,null)}),t[xt]=null}};function tn(e){this._internalRoot=e}tn.prototype.unstable_scheduleHydration=function(e){if(e){var t=Jc();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Bt.length&&t!==0&&t<Bt[r].priority;r++);Bt.splice(r,0,e),r===0&&eh(e)}};function Fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ec(){}function fp(e,t,r,i,n){if(n){if(typeof i=="function"){var u=i;i=function(){var f=zs(m);u.call(f)}}var m=Su(t,i,e,0,null,!1,!1,"",ec);return e._reactRootContainer=m,e[xt]=m.current,Ci(e.nodeType===8?e.parentNode:e),ar(),m}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var f=zs(c);a.call(f)}}var c=Na(e,0,!1,null,null,!1,!1,"",ec);return e._reactRootContainer=c,e[xt]=c.current,Ci(e.nodeType===8?e.parentNode:e),ar(function(){en(t,c,r,i)}),c}function sn(e,t,r,i,n){var u=r._reactRootContainer;if(u){var m=u;if(typeof n=="function"){var a=n;n=function(){var c=zs(m);a.call(c)}}en(t,m,e,n)}else m=fp(r,t,e,n,i);return zs(m)}Yc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ti(t.pendingLanes);r!==0&&(na(t,r|1),Fe(t,me()),!(ie&6)&&(Mr=me()+500,Gt()))}break;case 13:ar(function(){var i=kt(e,1);if(i!==null){var n=Be();at(i,e,1,n)}}),ja(e,1)}};oa=function(e){if(e.tag===13){var t=kt(e,134217728);if(t!==null){var r=Be();at(t,e,134217728,r)}ja(e,134217728)}};Qc=function(e){if(e.tag===13){var t=Ut(e),r=kt(e,t);if(r!==null){var i=Be();at(r,e,t,i)}ja(e,t)}};Jc=function(){return se};Zc=function(e,t){var r=se;try{return se=e,t()}finally{se=r}};ro=function(e,t,r){switch(t){case"input":if(Gn(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=qs(i);if(!n)throw Error(V(90));Tc(i),Gn(i,n)}}}break;case"textarea":Bc(e,r);break;case"select":t=r.value,t!=null&&xr(e,!!r.multiple,t,!1)}};Hc=Oa;Fc=ar;var pp={usingClientEntryPoint:!1,Events:[Pi,gr,qs,Nc,jc,Oa]},Qr={findFiberByHostInstance:Jt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_p={bundleType:Qr.bundleType,version:Qr.version,rendererPackageName:Qr.rendererPackageName,rendererConfig:Qr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wc(e),e===null?null:e.stateNode},findFiberByHostInstance:Qr.findFiberByHostInstance||dp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var es=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!es.isDisabled&&es.supportsFiber)try{Ws=es.inject(_p),ft=es}catch{}}Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pp;Ve.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fa(t))throw Error(V(200));return up(e,t,null,r)};Ve.createRoot=function(e,t){if(!Fa(e))throw Error(V(299));var r=!1,i="",n=wu;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Na(e,1,!1,null,null,r,!1,i,n),e[xt]=t.current,Ci(e.nodeType===8?e.parentNode:e),new Ha(t)};Ve.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(V(188)):(e=Object.keys(e).join(","),Error(V(268,e)));return e=Wc(t),e=e===null?null:e.stateNode,e};Ve.flushSync=function(e){return ar(e)};Ve.hydrate=function(e,t,r){if(!rn(t))throw Error(V(200));return sn(null,e,t,!0,r)};Ve.hydrateRoot=function(e,t,r){if(!Fa(e))throw Error(V(405));var i=r!=null&&r.hydratedSources||null,n=!1,u="",m=wu;if(r!=null&&(r.unstable_strictMode===!0&&(n=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(m=r.onRecoverableError)),t=Su(t,null,e,1,r??null,n,!1,u,m),e[xt]=t.current,Ci(e),i)for(e=0;e<i.length;e++)r=i[e],n=r._getVersion,n=n(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new tn(t)};Ve.render=function(e,t,r){if(!rn(t))throw Error(V(200));return sn(null,e,t,!1,r)};Ve.unmountComponentAtNode=function(e){if(!rn(e))throw Error(V(40));return e._reactRootContainer?(ar(function(){sn(null,null,e,!1,function(){e._reactRootContainer=null,e[xt]=null})}),!0):!1};Ve.unstable_batchedUpdates=Oa;Ve.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!rn(r))throw Error(V(200));if(e==null||e._reactInternals===void 0)throw Error(V(38));return sn(e,t,r,!1,i)};Ve.version="18.3.1-next-f1338f8080-20240426";function Cu(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cu)}catch(e){console.error(e)}}Cu(),Cc.exports=Ve;var gp=Cc.exports,tc=gp;Un.createRoot=tc.createRoot,Un.hydrateRoot=tc.hydrateRoot;const gt=Object.create(null);gt.open="0";gt.close="1";gt.ping="2";gt.pong="3";gt.message="4";gt.upgrade="5";gt.noop="6";const _s=Object.create(null);Object.keys(gt).forEach(e=>{_s[gt[e]]=e});const Io={type:"error",data:"parser error"},xu=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",ku=typeof ArrayBuffer=="function",Eu=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,za=({type:e,data:t},r,i)=>xu&&t instanceof Blob?r?i(t):rc(t,i):ku&&(t instanceof ArrayBuffer||Eu(t))?r?i(t):rc(new Blob([t]),i):i(gt[e]+(t||"")),rc=(e,t)=>{const r=new FileReader;return r.onload=function(){const i=r.result.split(",")[1];t("b"+(i||""))},r.readAsDataURL(e)};function ic(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Nn;function mp(e,t){if(xu&&e.data instanceof Blob)return e.data.arrayBuffer().then(ic).then(t);if(ku&&(e.data instanceof ArrayBuffer||Eu(e.data)))return t(ic(e.data));za(e,!1,r=>{Nn||(Nn=new TextEncoder),t(Nn.encode(r))})}const sc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ii=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<sc.length;e++)ii[sc.charCodeAt(e)]=e;const vp=e=>{let t=e.length*.75,r=e.length,i,n=0,u,m,a,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const f=new ArrayBuffer(t),v=new Uint8Array(f);for(i=0;i<r;i+=4)u=ii[e.charCodeAt(i)],m=ii[e.charCodeAt(i+1)],a=ii[e.charCodeAt(i+2)],c=ii[e.charCodeAt(i+3)],v[n++]=u<<2|m>>4,v[n++]=(m&15)<<4|a>>2,v[n++]=(a&3)<<6|c&63;return f},yp=typeof ArrayBuffer=="function",Ua=(e,t)=>{if(typeof e!="string")return{type:"message",data:bu(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:Sp(e.substring(1),t)}:_s[r]?e.length>1?{type:_s[r],data:e.substring(1)}:{type:_s[r]}:Io},Sp=(e,t)=>{if(yp){const r=vp(e);return bu(r,t)}else return{base64:!0,data:e}},bu=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Lu="",wp=(e,t)=>{const r=e.length,i=new Array(r);let n=0;e.forEach((u,m)=>{za(u,!1,a=>{i[m]=a,++n===r&&t(i.join(Lu))})})},Cp=(e,t)=>{const r=e.split(Lu),i=[];for(let n=0;n<r.length;n++){const u=Ua(r[n],t);if(i.push(u),u.type==="error")break}return i};function xp(){return new TransformStream({transform(e,t){mp(e,r=>{const i=r.length;let n;if(i<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,i);else if(i<65536){n=new Uint8Array(3);const u=new DataView(n.buffer);u.setUint8(0,126),u.setUint16(1,i)}else{n=new Uint8Array(9);const u=new DataView(n.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(i))}e.data&&typeof e.data!="string"&&(n[0]|=128),t.enqueue(n),t.enqueue(r)})}})}let jn;function ts(e){return e.reduce((t,r)=>t+r.length,0)}function rs(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let i=0;for(let n=0;n<t;n++)r[n]=e[0][i++],i===e[0].length&&(e.shift(),i=0);return e.length&&i<e[0].length&&(e[0]=e[0].slice(i)),r}function kp(e,t){jn||(jn=new TextDecoder);const r=[];let i=0,n=-1,u=!1;return new TransformStream({transform(m,a){for(r.push(m);;){if(i===0){if(ts(r)<1)break;const c=rs(r,1);u=(c[0]&128)===128,n=c[0]&127,n<126?i=3:n===126?i=1:i=2}else if(i===1){if(ts(r)<2)break;const c=rs(r,2);n=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),i=3}else if(i===2){if(ts(r)<8)break;const c=rs(r,8),f=new DataView(c.buffer,c.byteOffset,c.length),v=f.getUint32(0);if(v>Math.pow(2,21)-1){a.enqueue(Io);break}n=v*Math.pow(2,32)+f.getUint32(4),i=3}else{if(ts(r)<n)break;const c=rs(r,n);a.enqueue(Ua(u?c:jn.decode(c),t)),i=0}if(n===0||n>e){a.enqueue(Io);break}}}})}const Ru=4;function ye(e){if(e)return Ep(e)}function Ep(e){for(var t in ye.prototype)e[t]=ye.prototype[t];return e}ye.prototype.on=ye.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};ye.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};ye.prototype.off=ye.prototype.removeListener=ye.prototype.removeAllListeners=ye.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var i,n=0;n<r.length;n++)if(i=r[n],i===t||i.fn===t){r.splice(n,1);break}return r.length===0&&delete this._callbacks["$"+e],this};ye.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(r){r=r.slice(0);for(var i=0,n=r.length;i<n;++i)r[i].apply(this,t)}return this};ye.prototype.emitReserved=ye.prototype.emit;ye.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};ye.prototype.hasListeners=function(e){return!!this.listeners(e).length};const nn=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Ye=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),bp="arraybuffer";function Du(e,...t){return t.reduce((r,i)=>(e.hasOwnProperty(i)&&(r[i]=e[i]),r),{})}const Lp=Ye.setTimeout,Rp=Ye.clearTimeout;function on(e,t){t.useNativeTimers?(e.setTimeoutFn=Lp.bind(Ye),e.clearTimeoutFn=Rp.bind(Ye)):(e.setTimeoutFn=Ye.setTimeout.bind(Ye),e.clearTimeoutFn=Ye.clearTimeout.bind(Ye))}const Dp=1.33;function Tp(e){return typeof e=="string"?Ap(e):Math.ceil((e.byteLength||e.size)*Dp)}function Ap(e){let t=0,r=0;for(let i=0,n=e.length;i<n;i++)t=e.charCodeAt(i),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(i++,r+=4);return r}function Tu(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Bp(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function Op(e){let t={},r=e.split("&");for(let i=0,n=r.length;i<n;i++){let u=r[i].split("=");t[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return t}class Pp extends Error{constructor(t,r,i){super(t),this.description=r,this.context=i,this.type="TransportError"}}class Wa extends ye{constructor(t){super(),this.writable=!1,on(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,i){return super.emitReserved("error",new Pp(t,r,i)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Ua(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=Bp(t);return r.length?"?"+r:""}}class Mp extends Wa{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let i=0;this._polling&&(i++,this.once("pollComplete",function(){--i||r()})),this.writable||(i++,this.once("drain",function(){--i||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=i=>{if(this.readyState==="opening"&&i.type==="open"&&this.onOpen(),i.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(i)};Cp(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,wp(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=Tu()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let Au=!1;try{Au=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Ip=Au;function Np(){}class jp extends Mp{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||i!==t.port}}doWrite(t,r){const i=this.request({method:"POST",data:t});i.on("success",r),i.on("error",(n,u)=>{this.onError("xhr post error",n,u)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,i)=>{this.onError("xhr poll error",r,i)}),this.pollXhr=t}}class _t extends ye{constructor(t,r,i){super(),this.createRequest=t,on(this,i),this._opts=i,this._method=i.method||"GET",this._uri=r,this._data=i.data!==void 0?i.data:null,this._create()}_create(){var t;const r=Du(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const i=this._xhr=this.createRequest(r);try{i.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){i.setDisableHeaderCheck&&i.setDisableHeaderCheck(!0);for(let n in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(n)&&i.setRequestHeader(n,this._opts.extraHeaders[n])}}catch{}if(this._method==="POST")try{i.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{i.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(i),"withCredentials"in i&&(i.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(i.timeout=this._opts.requestTimeout),i.onreadystatechange=()=>{var n;i.readyState===3&&((n=this._opts.cookieJar)===null||n===void 0||n.parseCookies(i.getResponseHeader("set-cookie"))),i.readyState===4&&(i.status===200||i.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof i.status=="number"?i.status:0)},0))},i.send(this._data)}catch(n){this.setTimeoutFn(()=>{this._onError(n)},0);return}typeof document<"u"&&(this._index=_t.requestsCount++,_t.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Np,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete _t.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}_t.requestsCount=0;_t.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",nc);else if(typeof addEventListener=="function"){const e="onpagehide"in Ye?"pagehide":"unload";addEventListener(e,nc,!1)}}function nc(){for(let e in _t.requests)_t.requests.hasOwnProperty(e)&&_t.requests[e].abort()}const Hp=function(){const e=Bu({xdomain:!1});return e&&e.responseType!==null}();class Fp extends jp{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=Hp&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new _t(Bu,this.uri(),t)}}function Bu(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||Ip))return new XMLHttpRequest}catch{}if(!t)try{return new Ye[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Ou=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class zp extends Wa{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,i=Ou?{}:Du(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(i.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,i)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;za(i,this.supportsBinary,u=>{try{this.doWrite(i,u)}catch{}n&&nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=Tu()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Hn=Ye.WebSocket||Ye.MozWebSocket;class Up extends zp{createSocket(t,r,i){return Ou?new Hn(t,r,i):r?new Hn(t,r):new Hn(t)}doWrite(t,r){this.ws.send(r)}}class Wp extends Wa{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=kp(Number.MAX_SAFE_INTEGER,this.socket.binaryType),i=t.readable.pipeThrough(r).getReader(),n=xp();n.readable.pipeTo(t.writable),this._writer=n.writable.getWriter();const u=()=>{i.read().then(({done:a,value:c})=>{a||(this.onPacket(c),u())}).catch(a=>{})};u();const m={type:"open"};this.query.sid&&(m.data=`{"sid":"${this.query.sid}"}`),this._writer.write(m).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const i=t[r],n=r===t.length-1;this._writer.write(i).then(()=>{n&&nn(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const $p={websocket:Up,webtransport:Wp,polling:Fp},Vp=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Kp=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function No(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),i=e.indexOf("]");r!=-1&&i!=-1&&(e=e.substring(0,r)+e.substring(r,i).replace(/:/g,";")+e.substring(i,e.length));let n=Vp.exec(e||""),u={},m=14;for(;m--;)u[Kp[m]]=n[m]||"";return r!=-1&&i!=-1&&(u.source=t,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=qp(u,u.path),u.queryKey=Xp(u,u.query),u}function qp(e,t){const r=/\/{2,9}/g,i=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&i.splice(0,1),t.slice(-1)=="/"&&i.splice(i.length-1,1),i}function Xp(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(i,n,u){n&&(r[n]=u)}),r}const jo=typeof addEventListener=="function"&&typeof removeEventListener=="function",gs=[];jo&&addEventListener("offline",()=>{gs.forEach(e=>e())},!1);class $t extends ye{constructor(t,r){if(super(),this.binaryType=bp,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const i=No(t);r.hostname=i.host,r.secure=i.protocol==="https"||i.protocol==="wss",r.port=i.port,i.query&&(r.query=i.query)}else r.host&&(r.hostname=No(r.host).host);on(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(i=>{const n=i.prototype.name;this.transports.push(n),this._transportsByName[n]=i}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Op(this.opts.query)),jo&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},gs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=Ru,r.transport=t,this.id&&(r.sid=this.id);const i=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](i)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&$t.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",$t.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let i=0;i<this.writeBuffer.length;i++){const n=this.writeBuffer[i].data;if(n&&(r+=Tp(n)),i>0&&r>this._maxPayload)return this.writeBuffer.slice(0,i);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,nn(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,i){return this._sendPacket("message",t,r,i),this}send(t,r,i){return this._sendPacket("message",t,r,i),this}_sendPacket(t,r,i,n){if(typeof r=="function"&&(n=r,r=void 0),typeof i=="function"&&(n=i,i=null),this.readyState==="closing"||this.readyState==="closed")return;i=i||{},i.compress=i.compress!==!1;const u={type:t,data:r,options:i};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),n&&this.once("flush",n),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},i=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?i():t()}):this.upgrading?i():t()),this}_onError(t){if($t.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),jo&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const i=gs.indexOf(this._offlineEventListener);i!==-1&&gs.splice(i,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}$t.protocol=Ru;class Gp extends $t{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),i=!1;$t.priorWebsocketSuccess=!1;const n=()=>{i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",d=>{if(!i)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;$t.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{i||this.readyState!=="closed"&&(v(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const _=new Error("probe error");_.transport=r.name,this.emitReserved("upgradeError",_)}}))};function u(){i||(i=!0,v(),r.close(),r=null)}const m=d=>{const _=new Error("probe error: "+d);_.transport=r.name,u(),this.emitReserved("upgradeError",_)};function a(){m("transport closed")}function c(){m("socket closed")}function f(d){r&&d.name!==r.name&&u()}const v=()=>{r.removeListener("open",n),r.removeListener("error",m),r.removeListener("close",a),this.off("close",c),this.off("upgrading",f)};r.once("open",n),r.once("error",m),r.once("close",a),this.once("close",c),this.once("upgrading",f),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{i||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let i=0;i<t.length;i++)~this.transports.indexOf(t[i])&&r.push(t[i]);return r}}let Yp=class extends Gp{constructor(t,r={}){const i=typeof t=="object"?t:r;(!i.transports||i.transports&&typeof i.transports[0]=="string")&&(i.transports=(i.transports||["polling","websocket","webtransport"]).map(n=>$p[n]).filter(n=>!!n)),super(t,i)}};function Qp(e,t="",r){let i=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),i=No(e)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const u=i.host.indexOf(":")!==-1?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+u+":"+i.port+t,i.href=i.protocol+"://"+u+(r&&r.port===i.port?"":":"+i.port),i}const Jp=typeof ArrayBuffer=="function",Zp=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Pu=Object.prototype.toString,e_=typeof Blob=="function"||typeof Blob<"u"&&Pu.call(Blob)==="[object BlobConstructor]",t_=typeof File=="function"||typeof File<"u"&&Pu.call(File)==="[object FileConstructor]";function $a(e){return Jp&&(e instanceof ArrayBuffer||Zp(e))||e_&&e instanceof Blob||t_&&e instanceof File}function ms(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,i=e.length;r<i;r++)if(ms(e[r]))return!0;return!1}if($a(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return ms(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&ms(e[r]))return!0;return!1}function r_(e){const t=[],r=e.data,i=e;return i.data=Ho(r,t),i.attachments=t.length,{packet:i,buffers:t}}function Ho(e,t){if(!e)return e;if($a(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=Ho(e[i],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=Ho(e[i],t));return r}return e}function i_(e,t){return e.data=Fo(e.data,t),delete e.attachments,e}function Fo(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Fo(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Fo(e[r],t));return e}const s_=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],n_=5;var te;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(te||(te={}));class o_{constructor(t){this.replacer=t}encode(t){return(t.type===te.EVENT||t.type===te.ACK)&&ms(t)?this.encodeAsBinary({type:t.type===te.EVENT?te.BINARY_EVENT:te.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===te.BINARY_EVENT||t.type===te.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=r_(t),i=this.encodeAsString(r.packet),n=r.buffers;return n.unshift(i),n}}function oc(e){return Object.prototype.toString.call(e)==="[object Object]"}class Va extends ye{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const i=r.type===te.BINARY_EVENT;i||r.type===te.BINARY_ACK?(r.type=i?te.EVENT:te.ACK,this.reconstructor=new a_(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if($a(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const i={type:Number(t.charAt(0))};if(te[i.type]===void 0)throw new Error("unknown packet type "+i.type);if(i.type===te.BINARY_EVENT||i.type===te.BINARY_ACK){const u=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const m=t.substring(u,r);if(m!=Number(m)||t.charAt(r)!=="-")throw new Error("Illegal attachments");i.attachments=Number(m)}if(t.charAt(r+1)==="/"){const u=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););i.nsp=t.substring(u,r)}else i.nsp="/";const n=t.charAt(r+1);if(n!==""&&Number(n)==n){const u=r+1;for(;++r;){const m=t.charAt(r);if(m==null||Number(m)!=m){--r;break}if(r===t.length)break}i.id=Number(t.substring(u,r+1))}if(t.charAt(++r)){const u=this.tryParse(t.substr(r));if(Va.isPayloadValid(i.type,u))i.data=u;else throw new Error("invalid payload")}return i}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case te.CONNECT:return oc(r);case te.DISCONNECT:return r===void 0;case te.CONNECT_ERROR:return typeof r=="string"||oc(r);case te.EVENT:case te.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&s_.indexOf(r[0])===-1);case te.ACK:case te.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class a_{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=i_(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const l_=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Va,Encoder:o_,get PacketType(){return te},protocol:n_},Symbol.toStringTag,{value:"Module"}));function st(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const c_=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Mu extends ye{constructor(t,r,i){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,i&&i.auth&&(this.auth=i.auth),this._opts=Object.assign({},i),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[st(t,"open",this.onopen.bind(this)),st(t,"packet",this.onpacket.bind(this)),st(t,"error",this.onerror.bind(this)),st(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var i,n,u;if(c_.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const m={type:te.EVENT,data:r};if(m.options={},m.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const v=this.ids++,d=r.pop();this._registerAckCallback(v,d),m.id=v}const a=(n=(i=this.io.engine)===null||i===void 0?void 0:i.transport)===null||n===void 0?void 0:n.writable,c=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(m),this.packet(m)):this.sendBuffer.push(m)),this.flags={},this}_registerAckCallback(t,r){var i;const n=(i=this.flags.timeout)!==null&&i!==void 0?i:this._opts.ackTimeout;if(n===void 0){this.acks[t]=r;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===t&&this.sendBuffer.splice(a,1);r.call(this,new Error("operation has timed out"))},n),m=(...a)=>{this.io.clearTimeoutFn(u),r.apply(this,a)};m.withError=!0,this.acks[t]=m}emitWithAck(t,...r){return new Promise((i,n)=>{const u=(m,a)=>m?n(m):i(a);u.withError=!0,r.push(u),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const i={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((n,...u)=>i!==this._queue[0]?void 0:(n!==null?i.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(n)):(this._queue.shift(),r&&r(null,...u)),i.pending=!1,this._drainQueue())),this._queue.push(i),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:te.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(i=>String(i.id)===t)){const i=this.acks[t];delete this.acks[t],i.withError&&i.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case te.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case te.EVENT:case te.BINARY_EVENT:this.onevent(t);break;case te.ACK:case te.BINARY_ACK:this.onack(t);break;case te.DISCONNECT:this.ondisconnect();break;case te.CONNECT_ERROR:this.destroy();const i=new Error(t.data.message);i.data=t.data.data,this.emitReserved("connect_error",i);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const i of r)i.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let i=!1;return function(...n){i||(i=!0,r.packet({type:te.ACK,id:t,data:n}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:te.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let i=0;i<r.length;i++)if(t===r[i])return r.splice(i,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const i of r)i.apply(this,t.data)}}}function Hr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Hr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Hr.prototype.reset=function(){this.attempts=0};Hr.prototype.setMin=function(e){this.ms=e};Hr.prototype.setMax=function(e){this.max=e};Hr.prototype.setJitter=function(e){this.jitter=e};class zo extends ye{constructor(t,r){var i;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,on(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((i=r.randomizationFactor)!==null&&i!==void 0?i:.5),this.backoff=new Hr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const n=r.parser||l_;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Yp(this.uri,this.opts);const r=this.engine,i=this;this._readyState="opening",this.skipReconnect=!1;const n=st(r,"open",function(){i.onopen(),t&&t()}),u=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),t?t(a):this.maybeReconnectOnOpen()},m=st(r,"error",u);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{n(),u(new Error("timeout")),r.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(n),this.subs.push(m),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(st(t,"ping",this.onping.bind(this)),st(t,"data",this.ondata.bind(this)),st(t,"error",this.onerror.bind(this)),st(t,"close",this.onclose.bind(this)),st(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){nn(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let i=this.nsps[t];return i?this._autoConnect&&!i.active&&i.connect():(i=new Mu(this,t,r),this.nsps[t]=i),i}_destroy(t){const r=Object.keys(this.nsps);for(const i of r)if(this.nsps[i].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let i=0;i<r.length;i++)this.engine.write(r[i],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var i;this.cleanup(),(i=this.engine)===null||i===void 0||i.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const i=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(n=>{n?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",n)):t.onreconnect()}))},r);this.opts.autoUnref&&i.unref(),this.subs.push(()=>{this.clearTimeoutFn(i)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Jr={};function fi(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=Qp(e,t.path||"/socket.io"),i=r.source,n=r.id,u=r.path,m=Jr[n]&&u in Jr[n].nsps,a=t.forceNew||t["force new connection"]||t.multiplex===!1||m;let c;return a?c=new zo(i,t):(Jr[n]||(Jr[n]=new zo(i,t)),c=Jr[n]),r.query&&!t.query&&(t.query=r.queryKey),c.socket(r.path,t)}Object.assign(fi,{Manager:zo,Socket:Mu,io:fi,connect:fi});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var h_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u_=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(e,t)=>{const r=Y.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:u=2,absoluteStrokeWidth:m,className:a="",children:c,...f},v)=>Y.createElement("svg",{ref:v,...h_,width:n,height:n,stroke:i,strokeWidth:m?Number(u)*24/Number(n):u,className:["lucide",`lucide-${u_(e)}`,a].join(" "),...f},[...t.map(([d,_])=>Y.createElement(d,_)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=le("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d_=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=le("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ac=le("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p_=le("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lc=le("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const __=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g_=le("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m_=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v_=le("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y_=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S_=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w_=le("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wo=le("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C_=le("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x_=le("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k_=le("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E_=le("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b_=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=le("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R_=le("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $o=le("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D_=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T_=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),A_=({onLogin:e,error:t})=>{const[r,i]=Y.useState(""),[n,u]=Y.useState(""),[m,a]=Y.useState(!1),[c,f]=Y.useState(!1),v=x=>/^[a-z][a-z0-9_-]{0,7}$/.test(x)&&!x.endsWith("-"),d=x=>x.length>=6&&/[a-zA-Z]/.test(x)&&/[0-9]/.test(x);Y.useEffect(()=>{const x=localStorage.getItem("linux-credentials");if(x)try{const{username:g,password:h,rememberMe:o}=JSON.parse(x);o&&(i(g||""),u(h||""),f(!0))}catch(g){console.error("读取保存的账号信息失败:",g),localStorage.removeItem("linux-credentials")}},[]);const _=async x=>{if(x.preventDefault(),!(!r.trim()||!n.trim())&&v(r)&&d(n)){a(!0);try{if(c){const g={username:r,password:n,rememberMe:!0};localStorage.setItem("linux-credentials",JSON.stringify(g))}else localStorage.removeItem("linux-credentials");await e(r,n)}finally{a(!1)}}},S=r&&n&&v(r)&&d(n);return L.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:L.jsxs("form",{onSubmit:_,className:"space-y-4",children:[L.jsxs("div",{children:[L.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"用户名"}),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx(D_,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),L.jsx("input",{type:"text",id:"username",value:r,onChange:x=>i(x.target.value.toLowerCase()),placeholder:"输入你的用户名",maxLength:8,className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-linux-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 ${r&&!S?"border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600"}`,disabled:m,autoComplete:"username",autoFocus:!0})]}),L.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[L.jsx("p",{children:"用户名规则："}),L.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[L.jsx("li",{children:"只能包含小写字母、数字、下划线、连字符"}),L.jsx("li",{children:"必须以字母开头，长度1-8字符"}),L.jsx("li",{children:"不能以连字符结尾"})]})]}),r&&!v(r)&&L.jsxs("div",{className:"mt-2 flex items-center text-sm text-red-600 dark:text-red-400",children:[L.jsx(Fn,{size:16,className:"mr-1"}),"用户名格式不正确"]})]}),L.jsxs("div",{children:[L.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"密码"}),L.jsxs("div",{className:"relative",children:[L.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:L.jsx(y_,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),L.jsx("input",{type:"password",id:"password",value:n,onChange:x=>u(x.target.value),placeholder:"设置你的密码",className:`block w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-linux-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 ${n&&!d(n)?"border-red-300 bg-red-50 dark:border-red-600 dark:bg-red-900/20":"border-gray-300 dark:border-gray-600"}`,disabled:m,autoComplete:"new-password"})]}),L.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[L.jsx("p",{children:"密码规则："}),L.jsxs("ul",{className:"list-disc list-inside space-y-1 mt-1",children:[L.jsx("li",{children:"至少6位字符"}),L.jsx("li",{children:"必须包含字母和数字"})]})]}),n&&!d(n)&&L.jsxs("div",{className:"mt-2 flex items-center text-sm text-red-600 dark:text-red-400",children:[L.jsx(Fn,{size:16,className:"mr-1"}),"密码格式不正确"]})]}),L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center",children:[L.jsx("input",{id:"remember-me",type:"checkbox",checked:c,onChange:x=>f(x.target.checked),className:"h-4 w-4 text-linux-600 focus:ring-linux-500 border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700"}),L.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700 dark:text-gray-300",children:"记住账号密码"})]}),localStorage.getItem("linux-credentials")&&L.jsx("button",{type:"button",onClick:()=>{confirm("确定要清除保存的账号信息吗？")&&(localStorage.removeItem("linux-credentials"),i(""),u(""),f(!1),alert("账号信息已清除"))},className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 underline",children:"清除保存的账号"})]}),t&&L.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-3",children:L.jsxs("div",{className:"flex items-center text-sm text-red-600 dark:text-red-400",children:[L.jsx(Fn,{size:16,className:"mr-2"}),t]})}),L.jsx("button",{type:"submit",disabled:!S||m,className:`w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-lg text-sm font-medium text-white transition-colors ${S&&!m?"bg-linux-600 hover:bg-linux-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-linux-500":"bg-gray-300 cursor-not-allowed"}`,children:m?L.jsxs(L.Fragment,{children:[L.jsx("div",{className:"loading-spinner mr-2"}),"连接中..."]}):L.jsxs(L.Fragment,{children:["创建我的容器",L.jsx(d_,{size:16,className:"ml-2"})]})})]})})};var Iu={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(globalThis,()=>(()=>{var r={4567:function(m,a,c){var f=this&&this.__decorate||function(s,l,p,w){var C,k=arguments.length,y=k<3?l:w===null?w=Object.getOwnPropertyDescriptor(l,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,p,w);else for(var b=s.length-1;b>=0;b--)(C=s[b])&&(y=(k<3?C(y):k>3?C(l,p,y):C(l,p))||y);return k>3&&y&&Object.defineProperty(l,p,y),y},v=this&&this.__param||function(s,l){return function(p,w){l(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const d=c(9042),_=c(9924),S=c(844),x=c(4725),g=c(2585),h=c(3656);let o=a.AccessibilityManager=class extends S.Disposable{constructor(s,l,p,w){super(),this._terminal=s,this._coreBrowserService=p,this._renderService=w,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let C=0;C<this._terminal.rows;C++)this._rowElements[C]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[C]);if(this._topBoundaryFocusListener=C=>this._handleBoundaryFocus(C,0),this._bottomBoundaryFocusListener=C=>this._handleBoundaryFocus(C,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(C=>this._handleResize(C.rows))),this.register(this._terminal.onRender(C=>this._refreshRows(C.start,C.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(C=>this._handleChar(C))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(C=>this._handleTab(C))),this.register(this._terminal.onKey(C=>this._handleKey(C.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this.register((0,h.addDisposableDomListener)(document,"selectionchange",()=>this._handleSelectionChange())),this.register(this._coreBrowserService.onDprChange(()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,S.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(s){for(let l=0;l<s;l++)this._handleChar(" ")}_handleChar(s){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==s&&(this._charsToAnnounce+=s):this._charsToAnnounce+=s,s===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=d.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(s){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(s)||this._charsToConsume.push(s)}_refreshRows(s,l){this._liveRegionDebouncer.refresh(s,l,this._terminal.rows)}_renderRows(s,l){const p=this._terminal.buffer,w=p.lines.length.toString();for(let C=s;C<=l;C++){const k=p.lines.get(p.ydisp+C),y=[],b=(k==null?void 0:k.translateToString(!0,void 0,void 0,y))||"",T=(p.ydisp+C+1).toString(),O=this._rowElements[C];O&&(b.length===0?(O.innerText=" ",this._rowColumns.set(O,[0,1])):(O.textContent=b,this._rowColumns.set(O,y)),O.setAttribute("aria-posinset",T),O.setAttribute("aria-setsize",w))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(s,l){const p=s.target,w=this._rowElements[l===0?1:this._rowElements.length-2];if(p.getAttribute("aria-posinset")===(l===0?"1":`${this._terminal.buffer.lines.length}`)||s.relatedTarget!==w)return;let C,k;if(l===0?(C=p,k=this._rowElements.pop(),this._rowContainer.removeChild(k)):(C=this._rowElements.shift(),k=p,this._rowContainer.removeChild(C)),C.removeEventListener("focus",this._topBoundaryFocusListener),k.removeEventListener("focus",this._bottomBoundaryFocusListener),l===0){const y=this._createAccessibilityTreeNode();this._rowElements.unshift(y),this._rowContainer.insertAdjacentElement("afterbegin",y)}else{const y=this._createAccessibilityTreeNode();this._rowElements.push(y),this._rowContainer.appendChild(y)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(l===0?-1:1),this._rowElements[l===0?1:this._rowElements.length-2].focus(),s.preventDefault(),s.stopImmediatePropagation()}_handleSelectionChange(){var b;if(this._rowElements.length===0)return;const s=document.getSelection();if(!s)return;if(s.isCollapsed)return void(this._rowContainer.contains(s.anchorNode)&&this._terminal.clearSelection());if(!s.anchorNode||!s.focusNode)return void console.error("anchorNode and/or focusNode are null");let l={node:s.anchorNode,offset:s.anchorOffset},p={node:s.focusNode,offset:s.focusOffset};if((l.node.compareDocumentPosition(p.node)&Node.DOCUMENT_POSITION_PRECEDING||l.node===p.node&&l.offset>p.offset)&&([l,p]=[p,l]),l.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(l={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(l.node))return;const w=this._rowElements.slice(-1)[0];if(p.node.compareDocumentPosition(w)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(p={node:w,offset:((b=w.textContent)==null?void 0:b.length)??0}),!this._rowContainer.contains(p.node))return;const C=({node:T,offset:O})=>{const P=T instanceof Text?T.parentNode:T;let A=parseInt(P==null?void 0:P.getAttribute("aria-posinset"),10)-1;if(isNaN(A))return console.warn("row is invalid. Race condition?"),null;const j=this._rowColumns.get(P);if(!j)return console.warn("columns is null. Race condition?"),null;let U=O<j.length?j[O]:j.slice(-1)[0]+1;return U>=this._terminal.cols&&(++A,U=0),{row:A,column:U}},k=C(l),y=C(p);if(k&&y){if(k.row>y.row||k.row===y.row&&k.column>=y.column)throw new Error("invalid range");this._terminal.select(k.column,k.row,(y.row-k.row)*this._terminal.cols-k.column+y.column)}}_handleResize(s){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let l=this._rowContainer.children.length;l<this._terminal.rows;l++)this._rowElements[l]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[l]);for(;this._rowElements.length>s;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const s=this._coreBrowserService.mainDocument.createElement("div");return s.setAttribute("role","listitem"),s.tabIndex=-1,this._refreshRowDimensions(s),s}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let s=0;s<this._terminal.rows;s++)this._refreshRowDimensions(this._rowElements[s])}}_refreshRowDimensions(s){s.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=o=f([v(1,g.IInstantiationService),v(2,x.ICoreBrowserService),v(3,x.IRenderService)],o)},3614:(m,a)=>{function c(_){return _.replace(/\r?\n/g,"\r")}function f(_,S){return S?"\x1B[200~"+_+"\x1B[201~":_}function v(_,S,x,g){_=f(_=c(_),x.decPrivateModes.bracketedPasteMode&&g.rawOptions.ignoreBracketedPasteMode!==!0),x.triggerDataEvent(_,!0),S.value=""}function d(_,S,x){const g=x.getBoundingClientRect(),h=_.clientX-g.left-10,o=_.clientY-g.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${h}px`,S.style.top=`${o}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=c,a.bracketTextForPaste=f,a.copyHandler=function(_,S){_.clipboardData&&_.clipboardData.setData("text/plain",S.selectionText),_.preventDefault()},a.handlePasteEvent=function(_,S,x,g){_.stopPropagation(),_.clipboardData&&v(_.clipboardData.getData("text/plain"),S,x,g)},a.paste=v,a.moveTextAreaUnderMouseCursor=d,a.rightClickHandler=function(_,S,x,g,h){d(_,S,x),h&&g.rightClickSelect(_),S.value=g.selectionText,S.select()}},7239:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const f=c(1505);a.ColorContrastCache=class{constructor(){this._color=new f.TwoKeyMap,this._css=new f.TwoKeyMap}setCss(v,d,_){this._css.set(v,d,_)}getCss(v,d){return this._css.get(v,d)}setColor(v,d,_){this._color.set(v,d,_)}getColor(v,d){return this._color.get(v,d)}clear(){this._color.clear(),this._css.clear()}}},3656:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(c,f,v,d){c.addEventListener(f,v,d);let _=!1;return{dispose:()=>{_||(_=!0,c.removeEventListener(f,v,d))}}}},3551:function(m,a,c){var f=this&&this.__decorate||function(o,s,l,p){var w,C=arguments.length,k=C<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,s,l,p);else for(var y=o.length-1;y>=0;y--)(w=o[y])&&(k=(C<3?w(k):C>3?w(s,l,k):w(s,l))||k);return C>3&&k&&Object.defineProperty(s,l,k),k},v=this&&this.__param||function(o,s){return function(l,p){s(l,p,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier=void 0;const d=c(3656),_=c(8460),S=c(844),x=c(2585),g=c(4725);let h=a.Linkifier=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(o,s,l,p,w){super(),this._element=o,this._mouseService=s,this._renderService=l,this._bufferService=p,this._linkProviderService=w,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{var C;this._lastMouseEvent=void 0,(C=this._activeProviderReplies)==null||C.clear()})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0})),this.register((0,d.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,d.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,d.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(o){this._lastMouseEvent=o;const s=this._positionFromMouseEvent(o,this._element,this._mouseService);if(!s)return;this._isMouseOut=!1;const l=o.composedPath();for(let p=0;p<l.length;p++){const w=l[p];if(w.classList.contains("xterm"))break;if(w.classList.contains("xterm-hover"))return}this._lastBufferCell&&s.x===this._lastBufferCell.x&&s.y===this._lastBufferCell.y||(this._handleHover(s),this._lastBufferCell=s)}_handleHover(o){if(this._activeLine!==o.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(o,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,o)||(this._clearCurrentLink(),this._askForLink(o,!0))}_askForLink(o,s){var p,w;this._activeProviderReplies&&s||((p=this._activeProviderReplies)==null||p.forEach(C=>{C==null||C.forEach(k=>{k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=o.y);let l=!1;for(const[C,k]of this._linkProviderService.linkProviders.entries())s?(w=this._activeProviderReplies)!=null&&w.get(C)&&(l=this._checkLinkProviderResult(C,o,l)):k.provideLinks(o.y,y=>{var T,O;if(this._isMouseOut)return;const b=y==null?void 0:y.map(P=>({link:P}));(T=this._activeProviderReplies)==null||T.set(C,b),l=this._checkLinkProviderResult(C,o,l),((O=this._activeProviderReplies)==null?void 0:O.size)===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(o.y,this._activeProviderReplies)})}_removeIntersectingLinks(o,s){const l=new Set;for(let p=0;p<s.size;p++){const w=s.get(p);if(w)for(let C=0;C<w.length;C++){const k=w[C],y=k.link.range.start.y<o?0:k.link.range.start.x,b=k.link.range.end.y>o?this._bufferService.cols:k.link.range.end.x;for(let T=y;T<=b;T++){if(l.has(T)){w.splice(C--,1);break}l.add(T)}}}}_checkLinkProviderResult(o,s,l){var C;if(!this._activeProviderReplies)return l;const p=this._activeProviderReplies.get(o);let w=!1;for(let k=0;k<o;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(w=!0);if(!w&&p){const k=p.find(y=>this._linkAtPosition(y.link,s));k&&(l=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!l)for(let k=0;k<this._activeProviderReplies.size;k++){const y=(C=this._activeProviderReplies.get(k))==null?void 0:C.find(b=>this._linkAtPosition(b.link,s));if(y){l=!0,this._handleNewLink(y);break}}return l}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(o){if(!this._currentLink)return;const s=this._positionFromMouseEvent(o,this._element,this._mouseService);s&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,s)&&this._currentLink.link.activate(o,this._currentLink.link.text)}_clearCurrentLink(o,s){this._currentLink&&this._lastMouseEvent&&(!o||!s||this._currentLink.link.range.start.y>=o&&this._currentLink.link.range.end.y<=s)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(o){if(!this._lastMouseEvent)return;const s=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);s&&this._linkAtPosition(o.link,s)&&(this._currentLink=o,this._currentLink.state={decorations:{underline:o.link.decorations===void 0||o.link.decorations.underline,pointerCursor:o.link.decorations===void 0||o.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,o.link,this._lastMouseEvent),o.link.decorations={},Object.defineProperties(o.link.decorations,{pointerCursor:{get:()=>{var l,p;return(p=(l=this._currentLink)==null?void 0:l.state)==null?void 0:p.decorations.pointerCursor},set:l=>{var p;(p=this._currentLink)!=null&&p.state&&this._currentLink.state.decorations.pointerCursor!==l&&(this._currentLink.state.decorations.pointerCursor=l,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",l))}},underline:{get:()=>{var l,p;return(p=(l=this._currentLink)==null?void 0:l.state)==null?void 0:p.decorations.underline},set:l=>{var p,w,C;(p=this._currentLink)!=null&&p.state&&((C=(w=this._currentLink)==null?void 0:w.state)==null?void 0:C.decorations.underline)!==l&&(this._currentLink.state.decorations.underline=l,this._currentLink.state.isHovered&&this._fireUnderlineEvent(o.link,l))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(l=>{if(!this._currentLink)return;const p=l.start===0?0:l.start+1+this._bufferService.buffer.ydisp,w=this._bufferService.buffer.ydisp+1+l.end;if(this._currentLink.link.range.start.y>=p&&this._currentLink.link.range.end.y<=w&&(this._clearCurrentLink(p,w),this._lastMouseEvent)){const C=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);C&&this._askForLink(C,!1)}})))}_linkHover(o,s,l){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!0),this._currentLink.state.decorations.pointerCursor&&o.classList.add("xterm-cursor-pointer")),s.hover&&s.hover(l,s.text)}_fireUnderlineEvent(o,s){const l=o.range,p=this._bufferService.buffer.ydisp,w=this._createLinkUnderlineEvent(l.start.x-1,l.start.y-p-1,l.end.x,l.end.y-p-1,void 0);(s?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(w)}_linkLeave(o,s,l){var p;(p=this._currentLink)!=null&&p.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(s,!1),this._currentLink.state.decorations.pointerCursor&&o.classList.remove("xterm-cursor-pointer")),s.leave&&s.leave(l,s.text)}_linkAtPosition(o,s){const l=o.range.start.y*this._bufferService.cols+o.range.start.x,p=o.range.end.y*this._bufferService.cols+o.range.end.x,w=s.y*this._bufferService.cols+s.x;return l<=w&&w<=p}_positionFromMouseEvent(o,s,l){const p=l.getCoords(o,s,this._bufferService.cols,this._bufferService.rows);if(p)return{x:p[0],y:p[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(o,s,l,p,w){return{x1:o,y1:s,x2:l,y2:p,cols:this._bufferService.cols,fg:w}}};a.Linkifier=h=f([v(1,g.IMouseService),v(2,g.IRenderService),v(3,x.IBufferService),v(4,g.ILinkProviderService)],h)},9042:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(m,a,c){var f=this&&this.__decorate||function(g,h,o,s){var l,p=arguments.length,w=p<3?h:s===null?s=Object.getOwnPropertyDescriptor(h,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,h,o,s);else for(var C=g.length-1;C>=0;C--)(l=g[C])&&(w=(p<3?l(w):p>3?l(h,o,w):l(h,o))||w);return p>3&&w&&Object.defineProperty(h,o,w),w},v=this&&this.__param||function(g,h){return function(o,s){h(o,s,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const d=c(511),_=c(2585);let S=a.OscLinkProvider=class{constructor(g,h,o){this._bufferService=g,this._optionsService=h,this._oscLinkService=o}provideLinks(g,h){var b;const o=this._bufferService.buffer.lines.get(g-1);if(!o)return void h(void 0);const s=[],l=this._optionsService.rawOptions.linkHandler,p=new d.CellData,w=o.getTrimmedLength();let C=-1,k=-1,y=!1;for(let T=0;T<w;T++)if(k!==-1||o.hasContent(T)){if(o.loadCell(T,p),p.hasExtendedAttrs()&&p.extended.urlId){if(k===-1){k=T,C=p.extended.urlId;continue}y=p.extended.urlId!==C}else k!==-1&&(y=!0);if(y||k!==-1&&T===w-1){const O=(b=this._oscLinkService.getLinkData(C))==null?void 0:b.uri;if(O){const P={start:{x:k+1,y:g},end:{x:T+(y||T!==w-1?0:1),y:g}};let A=!1;if(!(l!=null&&l.allowNonHttpProtocols))try{const j=new URL(O);["http:","https:"].includes(j.protocol)||(A=!0)}catch{A=!0}A||s.push({text:O,range:P,activate:(j,U)=>l?l.activate(j,U,P):x(0,U),hover:(j,U)=>{var W;return(W=l==null?void 0:l.hover)==null?void 0:W.call(l,j,U,P)},leave:(j,U)=>{var W;return(W=l==null?void 0:l.leave)==null?void 0:W.call(l,j,U,P)}})}y=!1,p.hasExtendedAttrs()&&p.extended.urlId?(k=T,C=p.extended.urlId):(k=-1,C=-1)}}h(s)}};function x(g,h){if(confirm(`Do you want to navigate to ${h}?

WARNING: This link could potentially be dangerous`)){const o=window.open();if(o){try{o.opener=null}catch{}o.location.href=h}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=S=f([v(0,_.IBufferService),v(1,_.IOptionsService),v(2,_.IOscLinkService)],S)},6193:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(c,f){this._renderCallback=c,this._coreBrowserService=f,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(c){return this._refreshCallbacks.push(c),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(c,f,v){this._rowCount=v,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const c=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,f),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const c of this._refreshCallbacks)c(0);this._refreshCallbacks=[]}}},3236:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const f=c(3614),v=c(3656),d=c(3551),_=c(9042),S=c(3730),x=c(1680),g=c(3107),h=c(5744),o=c(2950),s=c(1296),l=c(428),p=c(4269),w=c(5114),C=c(8934),k=c(3230),y=c(9312),b=c(4725),T=c(6731),O=c(8055),P=c(8969),A=c(8460),j=c(844),U=c(6114),W=c(8437),H=c(2584),I=c(7399),E=c(5941),R=c(9074),B=c(2585),M=c(5435),z=c(4567),K=c(779);class Q extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(N={}){super(N),this.browser=U,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new j.MutableDisposable),this._onCursorMove=this.register(new A.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new A.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new A.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new A.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new A.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new A.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new A.EventEmitter),this._onBlur=this.register(new A.EventEmitter),this._onA11yCharEmitter=this.register(new A.EventEmitter),this._onA11yTabEmitter=this.register(new A.EventEmitter),this._onWillOpen=this.register(new A.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(R.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(K.LinkProviderService),this._instantiationService.setService(b.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((D,$)=>this.refresh(D,$))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(D=>this._reportWindowsOptions(D))),this.register(this._inputHandler.onColor(D=>this._handleColorEvent(D))),this.register((0,A.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,A.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,A.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(D=>this._afterResize(D.cols,D.rows))),this.register((0,j.toDisposable)(()=>{var D,$;this._customKeyEventHandler=void 0,($=(D=this.element)==null?void 0:D.parentNode)==null||$.removeChild(this.element)}))}_handleColorEvent(N){if(this._themeService)for(const D of N){let $,F="";switch(D.index){case 256:$="foreground",F="10";break;case 257:$="background",F="11";break;case 258:$="cursor",F="12";break;default:$="ansi",F="4;"+D.index}switch(D.type){case 0:const X=O.color.toColorRGB($==="ansi"?this._themeService.colors.ansi[D.index]:this._themeService.colors[$]);this.coreService.triggerDataEvent(`${H.C0.ESC}]${F};${(0,E.toRgbString)(X)}${H.C1_ESCAPED.ST}`);break;case 1:if($==="ansi")this._themeService.modifyColors(q=>q.ansi[D.index]=O.channels.toColor(...D.color));else{const q=$;this._themeService.modifyColors(re=>re[q]=O.channels.toColor(...D.color))}break;case 2:this._themeService.restoreColor(D.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(N){N?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(N){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var N;return(N=this.textarea)==null?void 0:N.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(H.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const N=this.buffer.ybase+this.buffer.y,D=this.buffer.lines.get(N);if(!D)return;const $=Math.min(this.buffer.x,this.cols-1),F=this._renderService.dimensions.css.cell.height,X=D.getWidth($),q=this._renderService.dimensions.css.cell.width*X,re=this.buffer.y*this._renderService.dimensions.css.cell.height,pe=$*this._renderService.dimensions.css.cell.width;this.textarea.style.left=pe+"px",this.textarea.style.top=re+"px",this.textarea.style.width=q+"px",this.textarea.style.height=F+"px",this.textarea.style.lineHeight=F+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",D=>{this.hasSelection()&&(0,f.copyHandler)(D,this._selectionService)}));const N=D=>(0,f.handlePasteEvent)(D,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",N)),this.register((0,v.addDisposableDomListener)(this.element,"paste",N)),U.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",D=>{D.button===2&&(0,f.rightClickHandler)(D,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",D=>{(0,f.rightClickHandler)(D,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),U.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",D=>{D.button===1&&(0,f.moveTextAreaUnderMouseCursor)(D,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",N=>this._keyUp(N),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",N=>this._keyDown(N),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",N=>this._keyPress(N),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",N=>this._compositionHelper.compositionupdate(N))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,v.addDisposableDomListener)(this.textarea,"input",N=>this._inputEvent(N),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(N){var $;if(!N)throw new Error("Terminal requires a parent element.");if(N.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),(($=this.element)==null?void 0:$.ownerDocument.defaultView)&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=N.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),N.appendChild(this.element);const D=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),D.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",F=>this.updateCursorStyle(F))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),D.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),U.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(w.CoreBrowserService,this.textarea,N.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(b.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",F=>this._handleTextAreaFocus(F))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(l.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(b.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(T.ThemeService),this._instantiationService.setService(b.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(p.CharacterJoinerService),this._instantiationService.setService(b.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(k.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(b.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(F=>this._onRender.fire(F))),this.onResize(F=>this._renderService.resize(F.cols,F.rows)),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(o.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(C.MouseService),this._instantiationService.setService(b.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(d.Linkifier,this.screenElement)),this.element.appendChild(D);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(x.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(y.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(b.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(F=>this.scrollLines(F.amount,F.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(F=>this._renderService.handleSelectionChanged(F.start,F.end,F.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(F=>{this.textarea.value=F,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(F=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.register(this._instantiationService.createInstance(g.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",F=>this._selectionService.handleMouseDown(F))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(z.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",F=>this._handleScreenReaderModeOptionChange(F))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",F=>{!this._overviewRulerRenderer&&F&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(h.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(s.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const N=this,D=this.element;function $(q){const re=N._mouseService.getMouseReportCoords(q,N.screenElement);if(!re)return!1;let pe,_e;switch(q.overrideType||q.type){case"mousemove":_e=32,q.buttons===void 0?(pe=3,q.button!==void 0&&(pe=q.button<3?q.button:3)):pe=1&q.buttons?0:4&q.buttons?1:2&q.buttons?2:3;break;case"mouseup":_e=0,pe=q.button<3?q.button:3;break;case"mousedown":_e=1,pe=q.button<3?q.button:3;break;case"wheel":if(N._customWheelEventHandler&&N._customWheelEventHandler(q)===!1||N.viewport.getLinesScrolled(q)===0)return!1;_e=q.deltaY<0?0:1,pe=4;break;default:return!1}return!(_e===void 0||pe===void 0||pe>4)&&N.coreMouseService.triggerMouseEvent({col:re.col,row:re.row,x:re.x,y:re.y,button:pe,action:_e,ctrl:q.ctrlKey,alt:q.altKey,shift:q.shiftKey})}const F={mouseup:null,wheel:null,mousedrag:null,mousemove:null},X={mouseup:q=>($(q),q.buttons||(this._document.removeEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.removeEventListener("mousemove",F.mousedrag)),this.cancel(q)),wheel:q=>($(q),this.cancel(q,!0)),mousedrag:q=>{q.buttons&&$(q)},mousemove:q=>{q.buttons||$(q)}};this.register(this.coreMouseService.onProtocolChange(q=>{q?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(q)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&q?F.mousemove||(D.addEventListener("mousemove",X.mousemove),F.mousemove=X.mousemove):(D.removeEventListener("mousemove",F.mousemove),F.mousemove=null),16&q?F.wheel||(D.addEventListener("wheel",X.wheel,{passive:!1}),F.wheel=X.wheel):(D.removeEventListener("wheel",F.wheel),F.wheel=null),2&q?F.mouseup||(F.mouseup=X.mouseup):(this._document.removeEventListener("mouseup",F.mouseup),F.mouseup=null),4&q?F.mousedrag||(F.mousedrag=X.mousedrag):(this._document.removeEventListener("mousemove",F.mousedrag),F.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(D,"mousedown",q=>{if(q.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(q))return $(q),F.mouseup&&this._document.addEventListener("mouseup",F.mouseup),F.mousedrag&&this._document.addEventListener("mousemove",F.mousedrag),this.cancel(q)})),this.register((0,v.addDisposableDomListener)(D,"wheel",q=>{if(!F.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(q)===!1)return!1;if(!this.buffer.hasScrollback){const re=this.viewport.getLinesScrolled(q);if(re===0)return;const pe=H.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(q.deltaY<0?"A":"B");let _e="";for(let Me=0;Me<Math.abs(re);Me++)_e+=pe;return this.coreService.triggerDataEvent(_e,!0),this.cancel(q,!0)}return this.viewport.handleWheel(q)?this.cancel(q):void 0}},{passive:!1})),this.register((0,v.addDisposableDomListener)(D,"touchstart",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(q),this.cancel(q)},{passive:!0})),this.register((0,v.addDisposableDomListener)(D,"touchmove",q=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(q)?void 0:this.cancel(q)},{passive:!1}))}refresh(N,D){var $;($=this._renderService)==null||$.refreshRows(N,D)}updateCursorStyle(N){var D;(D=this._selectionService)!=null&&D.shouldColumnSelect(N)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(N,D,$=0){var F;$===1?(super.scrollLines(N,D,$),this.refresh(0,this.rows-1)):(F=this.viewport)==null||F.scrollLines(N)}paste(N){(0,f.paste)(N,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(N){this._customKeyEventHandler=N}attachCustomWheelEventHandler(N){this._customWheelEventHandler=N}registerLinkProvider(N){return this._linkProviderService.registerLinkProvider(N)}registerCharacterJoiner(N){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const D=this._characterJoinerService.register(N);return this.refresh(0,this.rows-1),D}deregisterCharacterJoiner(N){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(N)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(N){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+N)}registerDecoration(N){return this._decorationService.registerDecoration(N)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(N,D,$){this._selectionService.setSelection(N,D,$)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var N;(N=this._selectionService)==null||N.clearSelection()}selectAll(){var N;(N=this._selectionService)==null||N.selectAll()}selectLines(N,D){var $;($=this._selectionService)==null||$.selectLines(N,D)}_keyDown(N){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1)return!1;const D=this.browser.isMac&&this.options.macOptionIsMeta&&N.altKey;if(!D&&!this._compositionHelper.keydown(N))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;D||N.key!=="Dead"&&N.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const $=(0,I.evaluateKeyboardEvent)(N,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(N),$.type===3||$.type===2){const F=this.rows-1;return this.scrollLines($.type===2?-F:F),this.cancel(N,!0)}return $.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,N)||($.cancel&&this.cancel(N,!0),!$.key||!!(N.key&&!N.ctrlKey&&!N.altKey&&!N.metaKey&&N.key.length===1&&N.key.charCodeAt(0)>=65&&N.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):($.key!==H.C0.ETX&&$.key!==H.C0.CR||(this.textarea.value=""),this._onKey.fire({key:$.key,domEvent:N}),this._showCursor(),this.coreService.triggerDataEvent($.key,!0),!this.optionsService.rawOptions.screenReaderMode||N.altKey||N.ctrlKey?this.cancel(N,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(N,D){const $=N.isMac&&!this.options.macOptionIsMeta&&D.altKey&&!D.ctrlKey&&!D.metaKey||N.isWindows&&D.altKey&&D.ctrlKey&&!D.metaKey||N.isWindows&&D.getModifierState("AltGraph");return D.type==="keypress"?$:$&&(!D.keyCode||D.keyCode>47)}_keyUp(N){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1||(function(D){return D.keyCode===16||D.keyCode===17||D.keyCode===18}(N)||this.focus(),this.updateCursorStyle(N),this._keyPressHandled=!1)}_keyPress(N){let D;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(N)===!1)return!1;if(this.cancel(N),N.charCode)D=N.charCode;else if(N.which===null||N.which===void 0)D=N.keyCode;else{if(N.which===0||N.charCode===0)return!1;D=N.which}return!(!D||(N.altKey||N.ctrlKey||N.metaKey)&&!this._isThirdLevelShift(this.browser,N)||(D=String.fromCharCode(D),this._onKey.fire({key:D,domEvent:N}),this._showCursor(),this.coreService.triggerDataEvent(D,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(N){if(N.data&&N.inputType==="insertText"&&(!N.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const D=N.data;return this.coreService.triggerDataEvent(D,!0),this.cancel(N),!0}return!1}resize(N,D){N!==this.cols||D!==this.rows?super.resize(N,D):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(N,D){var $,F;($=this._charSizeService)==null||$.measure(),(F=this.viewport)==null||F.syncScrollArea(!0)}clear(){var N;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let D=1;D<this.rows;D++)this.buffer.lines.push(this.buffer.getBlankLine(W.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(N=this.viewport)==null||N.reset(),this.refresh(0,this.rows-1)}}reset(){var D,$;this.options.rows=this.rows,this.options.cols=this.cols;const N=this._customKeyEventHandler;this._setup(),super.reset(),(D=this._selectionService)==null||D.reset(),this._decorationService.reset(),($=this.viewport)==null||$.reset(),this._customKeyEventHandler=N,this.refresh(0,this.rows-1)}clearTextureAtlas(){var N;(N=this._renderService)==null||N.clearTextureAtlas()}_reportFocus(){var N;(N=this.element)!=null&&N.classList.contains("focus")?this.coreService.triggerDataEvent(H.C0.ESC+"[I"):this.coreService.triggerDataEvent(H.C0.ESC+"[O")}_reportWindowsOptions(N){if(this._renderService)switch(N){case M.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const D=this._renderService.dimensions.css.canvas.width.toFixed(0),$=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[4;${$};${D}t`);break;case M.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const F=this._renderService.dimensions.css.cell.width.toFixed(0),X=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${H.C0.ESC}[6;${X};${F}t`)}}cancel(N,D){if(this.options.cancelEvents||D)return N.preventDefault(),N.stopPropagation(),!1}}a.Terminal=Q},9924:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(c,f=1e3){this._renderCallback=c,this._debounceThresholdMS=f,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(c,f,v){this._rowCount=v,c=c!==void 0?c:0,f=f!==void 0?f:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,c):c,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,f):f;const d=Date.now();if(d-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=d,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=d-this._lastRefreshMs,S=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const c=Math.max(this._rowStart,0),f=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(c,f)}}},1680:function(m,a,c){var f=this&&this.__decorate||function(o,s,l,p){var w,C=arguments.length,k=C<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,s,l,p);else for(var y=o.length-1;y>=0;y--)(w=o[y])&&(k=(C<3?w(k):C>3?w(s,l,k):w(s,l))||k);return C>3&&k&&Object.defineProperty(s,l,k),k},v=this&&this.__param||function(o,s){return function(l,p){s(l,p,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const d=c(3656),_=c(4725),S=c(8460),x=c(844),g=c(2585);let h=a.Viewport=class extends x.Disposable{constructor(o,s,l,p,w,C,k,y){super(),this._viewportElement=o,this._scrollArea=s,this._bufferService=l,this._optionsService=p,this._charSizeService=w,this._renderService=C,this._coreBrowserService=k,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,d.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(b=>this._activeBuffer=b.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(b=>this._renderDimensions=b)),this._handleThemeChange(y.colors),this.register(y.onChangeColors(b=>this._handleThemeChange(b))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(o){this._viewportElement.style.backgroundColor=o.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(o){if(o)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const s=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==s&&(this._lastRecordedBufferHeight=s,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const o=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==o&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=o),this._refreshAnimationFrame=null}syncScrollArea(o=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(o);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(o)}_handleScroll(o){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const s=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:s,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const o=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(o*(this._smoothScrollState.target-this._smoothScrollState.origin)),o<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(o,s){const l=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(s<0&&this._viewportElement.scrollTop!==0||s>0&&l<this._lastRecordedBufferHeight)||(o.cancelable&&o.preventDefault(),!1)}handleWheel(o){const s=this._getPixelsScrolled(o);return s!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+s:this._smoothScrollState.target+=s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=s,this._bubbleScroll(o,s))}scrollLines(o){if(o!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const s=o*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+s,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:o,suppressScrollEvent:!1})}_getPixelsScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let s=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_LINE?s*=this._currentRowHeight:o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._currentRowHeight*this._bufferService.rows),s}getBufferElements(o,s){var y;let l,p="";const w=[],C=s??this._bufferService.buffer.lines.length,k=this._bufferService.buffer.lines;for(let b=o;b<C;b++){const T=k.get(b);if(!T)continue;const O=(y=k.get(b+1))==null?void 0:y.isWrapped;if(p+=T.translateToString(!O),!O||b===k.length-1){const P=document.createElement("div");P.textContent=p,w.push(P),p.length>0&&(l=P),p=""}}return{bufferElements:w,cursorElement:l}}getLinesScrolled(o){if(o.deltaY===0||o.shiftKey)return 0;let s=this._applyScrollModifier(o.deltaY,o);return o.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(s/=this._currentRowHeight+0,this._wheelPartialScroll+=s,s=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):o.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(s*=this._bufferService.rows),s}_applyScrollModifier(o,s){const l=this._optionsService.rawOptions.fastScrollModifier;return l==="alt"&&s.altKey||l==="ctrl"&&s.ctrlKey||l==="shift"&&s.shiftKey?o*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:o*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(o){this._lastTouchY=o.touches[0].pageY}handleTouchMove(o){const s=this._lastTouchY-o.touches[0].pageY;return this._lastTouchY=o.touches[0].pageY,s!==0&&(this._viewportElement.scrollTop+=s,this._bubbleScroll(o,s))}};a.Viewport=h=f([v(2,g.IBufferService),v(3,g.IOptionsService),v(4,_.ICharSizeService),v(5,_.IRenderService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],h)},3107:function(m,a,c){var f=this&&this.__decorate||function(g,h,o,s){var l,p=arguments.length,w=p<3?h:s===null?s=Object.getOwnPropertyDescriptor(h,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,h,o,s);else for(var C=g.length-1;C>=0;C--)(l=g[C])&&(w=(p<3?l(w):p>3?l(h,o,w):l(h,o))||w);return p>3&&w&&Object.defineProperty(h,o,w),w},v=this&&this.__param||function(g,h){return function(o,s){h(o,s,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const d=c(4725),_=c(844),S=c(2585);let x=a.BufferDecorationRenderer=class extends _.Disposable{constructor(g,h,o,s,l){super(),this._screenElement=g,this._bufferService=h,this._coreBrowserService=o,this._decorationService=s,this._renderService=l,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(p=>this._removeDecoration(p))),this.register((0,_.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const g of this._decorationService.decorations)this._renderDecoration(g);this._dimensionsChanged=!1}_renderDecoration(g){this._refreshStyle(g),this._dimensionsChanged&&this._refreshXPosition(g)}_createElement(g){var s;const h=this._coreBrowserService.mainDocument.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((s=g==null?void 0:g.options)==null?void 0:s.layer)==="top"),h.style.width=`${Math.round((g.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(g.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(g.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const o=g.options.x??0;return o&&o>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(g,h),h}_refreshStyle(g){const h=g.marker.line-this._bufferService.buffers.active.ydisp;if(h<0||h>=this._bufferService.rows)g.element&&(g.element.style.display="none",g.onRenderEmitter.fire(g.element));else{let o=this._decorationElements.get(g);o||(o=this._createElement(g),g.element=o,this._decorationElements.set(g,o),this._container.appendChild(o),g.onDispose(()=>{this._decorationElements.delete(g),o.remove()})),o.style.top=h*this._renderService.dimensions.css.cell.height+"px",o.style.display=this._altBufferIsActive?"none":"block",g.onRenderEmitter.fire(o)}}_refreshXPosition(g,h=g.element){if(!h)return;const o=g.options.x??0;(g.options.anchor||"left")==="right"?h.style.right=o?o*this._renderService.dimensions.css.cell.width+"px":"":h.style.left=o?o*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(g){var h;(h=this._decorationElements.get(g))==null||h.remove(),this._decorationElements.delete(g),g.dispose()}};a.BufferDecorationRenderer=x=f([v(1,S.IBufferService),v(2,d.ICoreBrowserService),v(3,S.IDecorationService),v(4,d.IRenderService)],x)},5871:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(c){if(c.options.overviewRulerOptions){for(const f of this._zones)if(f.color===c.options.overviewRulerOptions.color&&f.position===c.options.overviewRulerOptions.position){if(this._lineIntersectsZone(f,c.marker.line))return;if(this._lineAdjacentToZone(f,c.marker.line,c.options.overviewRulerOptions.position))return void this._addLineToZone(f,c.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=c.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=c.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=c.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=c.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:c.options.overviewRulerOptions.color,position:c.options.overviewRulerOptions.position,startBufferLine:c.marker.line,endBufferLine:c.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(c){this._linePadding=c}_lineIntersectsZone(c,f){return f>=c.startBufferLine&&f<=c.endBufferLine}_lineAdjacentToZone(c,f,v){return f>=c.startBufferLine-this._linePadding[v||"full"]&&f<=c.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(c,f){c.startBufferLine=Math.min(c.startBufferLine,f),c.endBufferLine=Math.max(c.endBufferLine,f)}}},5744:function(m,a,c){var f=this&&this.__decorate||function(l,p,w,C){var k,y=arguments.length,b=y<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,w):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,p,w,C);else for(var T=l.length-1;T>=0;T--)(k=l[T])&&(b=(y<3?k(b):y>3?k(p,w,b):k(p,w))||b);return y>3&&b&&Object.defineProperty(p,w,b),b},v=this&&this.__param||function(l,p){return function(w,C){p(w,C,l)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const d=c(5871),_=c(4725),S=c(844),x=c(2585),g={full:0,left:0,center:0,right:0},h={full:0,left:0,center:0,right:0},o={full:0,left:0,center:0,right:0};let s=a.OverviewRulerRenderer=class extends S.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(l,p,w,C,k,y,b){var O;super(),this._viewportElement=l,this._screenElement=p,this._bufferService=w,this._decorationService=C,this._renderService=k,this._optionsService=y,this._coreBrowserService=b,this._colorZoneStore=new d.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(O=this._viewportElement.parentElement)==null||O.insertBefore(this._canvas,this._viewportElement);const T=this._canvas.getContext("2d");if(!T)throw new Error("Ctx cannot be null");this._ctx=T,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,S.toDisposable)(()=>{var P;(P=this._canvas)==null||P.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register(this._coreBrowserService.onDprChange(()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const l=Math.floor(this._canvas.width/3),p=Math.ceil(this._canvas.width/3);h.full=this._canvas.width,h.left=l,h.center=p,h.right=l,this._refreshDrawHeightConstants(),o.full=0,o.left=0,o.center=h.left,o.right=h.left+h.center}_refreshDrawHeightConstants(){g.full=Math.round(2*this._coreBrowserService.dpr);const l=this._canvas.height/this._bufferService.buffer.lines.length,p=Math.round(Math.max(Math.min(l,12),6)*this._coreBrowserService.dpr);g.left=p,g.center=p,g.right=p}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*g.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const p of this._decorationService.decorations)this._colorZoneStore.addDecoration(p);this._ctx.lineWidth=1;const l=this._colorZoneStore.zones;for(const p of l)p.position!=="full"&&this._renderColorZone(p);for(const p of l)p.position==="full"&&this._renderColorZone(p);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(l){this._ctx.fillStyle=l.color,this._ctx.fillRect(o[l.position||"full"],Math.round((this._canvas.height-1)*(l.startBufferLine/this._bufferService.buffers.active.lines.length)-g[l.position||"full"]/2),h[l.position||"full"],Math.round((this._canvas.height-1)*((l.endBufferLine-l.startBufferLine)/this._bufferService.buffers.active.lines.length)+g[l.position||"full"]))}_queueRefresh(l,p){this._shouldUpdateDimensions=l||this._shouldUpdateDimensions,this._shouldUpdateAnchor=p||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=s=f([v(2,x.IBufferService),v(3,x.IDecorationService),v(4,_.IRenderService),v(5,x.IOptionsService),v(6,_.ICoreBrowserService)],s)},2950:function(m,a,c){var f=this&&this.__decorate||function(g,h,o,s){var l,p=arguments.length,w=p<3?h:s===null?s=Object.getOwnPropertyDescriptor(h,o):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(g,h,o,s);else for(var C=g.length-1;C>=0;C--)(l=g[C])&&(w=(p<3?l(w):p>3?l(h,o,w):l(h,o))||w);return p>3&&w&&Object.defineProperty(h,o,w),w},v=this&&this.__param||function(g,h){return function(o,s){h(o,s,g)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const d=c(4725),_=c(2585),S=c(2584);let x=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(g,h,o,s,l,p){this._textarea=g,this._compositionView=h,this._bufferService=o,this._optionsService=s,this._coreService=l,this._renderService=p,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(g){this._compositionView.textContent=g.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(g){if(this._isComposing||this._isSendingComposition){if(g.keyCode===229||g.keyCode===16||g.keyCode===17||g.keyCode===18)return!1;this._finalizeComposition(!1)}return g.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(g){if(this._compositionView.classList.remove("active"),this._isComposing=!1,g){const h={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let o;this._isSendingComposition=!1,h.start+=this._dataAlreadySent.length,o=this._isComposing?this._textarea.value.substring(h.start,h.end):this._textarea.value.substring(h.start),o.length>0&&this._coreService.triggerDataEvent(o,!0)}},0)}else{this._isSendingComposition=!1;const h=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(h,!0)}}_handleAnyTextareaChanges(){const g=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const h=this._textarea.value,o=h.replace(g,"");this._dataAlreadySent=o,h.length>g.length?this._coreService.triggerDataEvent(o,!0):h.length<g.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):h.length===g.length&&h!==g&&this._coreService.triggerDataEvent(h,!0)}},0)}updateCompositionElements(g){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const h=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),o=this._renderService.dimensions.css.cell.height,s=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,l=h*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=l+"px",this._compositionView.style.top=s+"px",this._compositionView.style.height=o+"px",this._compositionView.style.lineHeight=o+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const p=this._compositionView.getBoundingClientRect();this._textarea.style.left=l+"px",this._textarea.style.top=s+"px",this._textarea.style.width=Math.max(p.width,1)+"px",this._textarea.style.height=Math.max(p.height,1)+"px",this._textarea.style.lineHeight=p.height+"px"}g||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=x=f([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,_.ICoreService),v(5,d.IRenderService)],x)},9806:(m,a)=>{function c(f,v,d){const _=d.getBoundingClientRect(),S=f.getComputedStyle(d),x=parseInt(S.getPropertyValue("padding-left")),g=parseInt(S.getPropertyValue("padding-top"));return[v.clientX-_.left-x,v.clientY-_.top-g]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=c,a.getCoords=function(f,v,d,_,S,x,g,h,o){if(!x)return;const s=c(f,v,d);return s?(s[0]=Math.ceil((s[0]+(o?g/2:0))/g),s[1]=Math.ceil(s[1]/h),s[0]=Math.min(Math.max(s[0],1),_+(o?1:0)),s[1]=Math.min(Math.max(s[1],1),S),s):void 0}},9504:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const f=c(2584);function v(h,o,s,l){const p=h-d(h,s),w=o-d(o,s),C=Math.abs(p-w)-function(k,y,b){let T=0;const O=k-d(k,b),P=y-d(y,b);for(let A=0;A<Math.abs(O-P);A++){const j=_(k,y)==="A"?-1:1,U=b.buffer.lines.get(O+j*A);U!=null&&U.isWrapped&&T++}return T}(h,o,s);return g(C,x(_(h,o),l))}function d(h,o){let s=0,l=o.buffer.lines.get(h),p=l==null?void 0:l.isWrapped;for(;p&&h>=0&&h<o.rows;)s++,l=o.buffer.lines.get(--h),p=l==null?void 0:l.isWrapped;return s}function _(h,o){return h>o?"A":"B"}function S(h,o,s,l,p,w){let C=h,k=o,y="";for(;C!==s||k!==l;)C+=p?1:-1,p&&C>w.cols-1?(y+=w.buffer.translateBufferLineToString(k,!1,h,C),C=0,h=0,k++):!p&&C<0&&(y+=w.buffer.translateBufferLineToString(k,!1,0,h+1),C=w.cols-1,h=C,k--);return y+w.buffer.translateBufferLineToString(k,!1,h,C)}function x(h,o){const s=o?"O":"[";return f.C0.ESC+s+h}function g(h,o){h=Math.floor(h);let s="";for(let l=0;l<h;l++)s+=o;return s}a.moveToCellSequence=function(h,o,s,l){const p=s.buffer.x,w=s.buffer.y;if(!s.buffer.hasScrollback)return function(y,b,T,O,P,A){return v(b,O,P,A).length===0?"":g(S(y,b,y,b-d(b,P),!1,P).length,x("D",A))}(p,w,0,o,s,l)+v(w,o,s,l)+function(y,b,T,O,P,A){let j;j=v(b,O,P,A).length>0?O-d(O,P):b;const U=O,W=function(H,I,E,R,B,M){let z;return z=v(E,R,B,M).length>0?R-d(R,B):I,H<E&&z<=R||H>=E&&z<R?"C":"D"}(y,b,T,O,P,A);return g(S(y,j,T,U,W==="C",P).length,x(W,A))}(p,w,h,o,s,l);let C;if(w===o)return C=p>h?"D":"C",g(Math.abs(p-h),x(C,l));C=w>o?"D":"C";const k=Math.abs(w-o);return g(function(y,b){return b.cols-y}(w>o?h:p,s)+(k-1)*s.cols+1+((w>o?p:h)-1),x(C,l))}},1296:function(m,a,c){var f=this&&this.__decorate||function(A,j,U,W){var H,I=arguments.length,E=I<3?j:W===null?W=Object.getOwnPropertyDescriptor(j,U):W;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")E=Reflect.decorate(A,j,U,W);else for(var R=A.length-1;R>=0;R--)(H=A[R])&&(E=(I<3?H(E):I>3?H(j,U,E):H(j,U))||E);return I>3&&E&&Object.defineProperty(j,U,E),E},v=this&&this.__param||function(A,j){return function(U,W){j(U,W,A)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const d=c(3787),_=c(2550),S=c(2223),x=c(6171),g=c(6052),h=c(4725),o=c(8055),s=c(8460),l=c(844),p=c(2585),w="xterm-dom-renderer-owner-",C="xterm-rows",k="xterm-fg-",y="xterm-bg-",b="xterm-focus",T="xterm-selection";let O=1,P=a.DomRenderer=class extends l.Disposable{constructor(A,j,U,W,H,I,E,R,B,M,z,K,Q){super(),this._terminal=A,this._document=j,this._element=U,this._screenElement=W,this._viewportElement=H,this._helperContainer=I,this._linkifier2=E,this._charSizeService=B,this._optionsService=M,this._bufferService=z,this._coreBrowserService=K,this._themeService=Q,this._terminalClass=O++,this._rowElements=[],this._selectionRenderModel=(0,g.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new s.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(C),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(T),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,x.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(J=>this._injectCss(J))),this._injectCss(this._themeService.colors),this._rowFactory=R.createInstance(d.DomRendererRowFactory,document),this._element.classList.add(w+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(J=>this._handleLinkHover(J))),this.register(this._linkifier2.onHideLinkUnderline(J=>this._handleLinkLeave(J))),this.register((0,l.toDisposable)(()=>{this._element.classList.remove(w+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const A=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*A,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*A),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/A),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/A),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const U of this._rowElements)U.style.width=`${this.dimensions.css.canvas.width}px`,U.style.height=`${this.dimensions.css.cell.height}px`,U.style.lineHeight=`${this.dimensions.css.cell.height}px`,U.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const j=`${this._terminalSelector} .${C} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=j,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(A){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let j=`${this._terminalSelector} .${C} { color: ${A.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;j+=`${this._terminalSelector} .${C} .xterm-dim { color: ${o.color.multiplyOpacity(A.foreground,.5).css};}`,j+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const U=`blink_underline_${this._terminalClass}`,W=`blink_bar_${this._terminalClass}`,H=`blink_block_${this._terminalClass}`;j+=`@keyframes ${U} { 50% {  border-bottom-style: hidden; }}`,j+=`@keyframes ${W} { 50% {  box-shadow: none; }}`,j+=`@keyframes ${H} { 0% {  background-color: ${A.cursor.css};  color: ${A.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${A.cursor.css}; }}`,j+=`${this._terminalSelector} .${C}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${C}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${W} 1s step-end infinite;}${this._terminalSelector} .${C}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${H} 1s step-end infinite;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block { background-color: ${A.cursor.css}; color: ${A.cursorAccent.css};}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${A.cursor.css} !important; color: ${A.cursorAccent.css} !important;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${A.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${A.cursor.css} inset;}${this._terminalSelector} .${C} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${A.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,j+=`${this._terminalSelector} .${T} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${T} div { position: absolute; background-color: ${A.selectionBackgroundOpaque.css};}${this._terminalSelector} .${T} div { position: absolute; background-color: ${A.selectionInactiveBackgroundOpaque.css};}`;for(const[I,E]of A.ansi.entries())j+=`${this._terminalSelector} .${k}${I} { color: ${E.css}; }${this._terminalSelector} .${k}${I}.xterm-dim { color: ${o.color.multiplyOpacity(E,.5).css}; }${this._terminalSelector} .${y}${I} { background-color: ${E.css}; }`;j+=`${this._terminalSelector} .${k}${S.INVERTED_DEFAULT_COLOR} { color: ${o.color.opaque(A.background).css}; }${this._terminalSelector} .${k}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${o.color.multiplyOpacity(o.color.opaque(A.background),.5).css}; }${this._terminalSelector} .${y}${S.INVERTED_DEFAULT_COLOR} { background-color: ${A.foreground.css}; }`,this._themeStyleElement.textContent=j}_setDefaultSpacing(){const A=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${A}px`,this._rowFactory.defaultSpacing=A}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(A,j){for(let U=this._rowElements.length;U<=j;U++){const W=this._document.createElement("div");this._rowContainer.appendChild(W),this._rowElements.push(W)}for(;this._rowElements.length>j;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(A,j){this._refreshRowElements(A,j),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(A,j,U){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(A,j,U),this.renderRows(0,this._bufferService.rows-1),!A||!j)return;this._selectionRenderModel.update(this._terminal,A,j,U);const W=this._selectionRenderModel.viewportStartRow,H=this._selectionRenderModel.viewportEndRow,I=this._selectionRenderModel.viewportCappedStartRow,E=this._selectionRenderModel.viewportCappedEndRow;if(I>=this._bufferService.rows||E<0)return;const R=this._document.createDocumentFragment();if(U){const B=A[0]>j[0];R.appendChild(this._createSelectionElement(I,B?j[0]:A[0],B?A[0]:j[0],E-I+1))}else{const B=W===I?A[0]:0,M=I===H?j[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(I,B,M));const z=E-I-1;if(R.appendChild(this._createSelectionElement(I+1,0,this._bufferService.cols,z)),I!==E){const K=H===E?j[0]:this._bufferService.cols;R.appendChild(this._createSelectionElement(E,0,K))}}this._selectionContainer.appendChild(R)}_createSelectionElement(A,j,U,W=1){const H=this._document.createElement("div"),I=j*this.dimensions.css.cell.width;let E=this.dimensions.css.cell.width*(U-j);return I+E>this.dimensions.css.canvas.width&&(E=this.dimensions.css.canvas.width-I),H.style.height=W*this.dimensions.css.cell.height+"px",H.style.top=A*this.dimensions.css.cell.height+"px",H.style.left=`${I}px`,H.style.width=`${E}px`,H}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const A of this._rowElements)A.replaceChildren()}renderRows(A,j){const U=this._bufferService.buffer,W=U.ybase+U.y,H=Math.min(U.x,this._bufferService.cols-1),I=this._optionsService.rawOptions.cursorBlink,E=this._optionsService.rawOptions.cursorStyle,R=this._optionsService.rawOptions.cursorInactiveStyle;for(let B=A;B<=j;B++){const M=B+U.ydisp,z=this._rowElements[B],K=U.lines.get(M);if(!z||!K)break;z.replaceChildren(...this._rowFactory.createRow(K,M,M===W,E,R,H,I,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${w}${this._terminalClass}`}_handleLinkHover(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!0)}_handleLinkLeave(A){this._setCellUnderline(A.x1,A.x2,A.y1,A.y2,A.cols,!1)}_setCellUnderline(A,j,U,W,H,I){U<0&&(A=0),W<0&&(j=0);const E=this._bufferService.rows-1;U=Math.max(Math.min(U,E),0),W=Math.max(Math.min(W,E),0),H=Math.min(H,this._bufferService.cols);const R=this._bufferService.buffer,B=R.ybase+R.y,M=Math.min(R.x,H-1),z=this._optionsService.rawOptions.cursorBlink,K=this._optionsService.rawOptions.cursorStyle,Q=this._optionsService.rawOptions.cursorInactiveStyle;for(let J=U;J<=W;++J){const N=J+R.ydisp,D=this._rowElements[J],$=R.lines.get(N);if(!D||!$)break;D.replaceChildren(...this._rowFactory.createRow($,N,N===B,K,Q,M,z,this.dimensions.css.cell.width,this._widthCache,I?J===U?A:0:-1,I?(J===W?j:H)-1:-1))}}};a.DomRenderer=P=f([v(7,p.IInstantiationService),v(8,h.ICharSizeService),v(9,p.IOptionsService),v(10,p.IBufferService),v(11,h.ICoreBrowserService),v(12,h.IThemeService)],P)},3787:function(m,a,c){var f=this&&this.__decorate||function(C,k,y,b){var T,O=arguments.length,P=O<3?k:b===null?b=Object.getOwnPropertyDescriptor(k,y):b;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(C,k,y,b);else for(var A=C.length-1;A>=0;A--)(T=C[A])&&(P=(O<3?T(P):O>3?T(k,y,P):T(k,y))||P);return O>3&&P&&Object.defineProperty(k,y,P),P},v=this&&this.__param||function(C,k){return function(y,b){k(y,b,C)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const d=c(2223),_=c(643),S=c(511),x=c(2585),g=c(8055),h=c(4725),o=c(4269),s=c(6171),l=c(3734);let p=a.DomRendererRowFactory=class{constructor(C,k,y,b,T,O,P){this._document=C,this._characterJoinerService=k,this._optionsService=y,this._coreBrowserService=b,this._coreService=T,this._decorationService=O,this._themeService=P,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(C,k,y){this._selectionStart=C,this._selectionEnd=k,this._columnSelectMode=y}createRow(C,k,y,b,T,O,P,A,j,U,W){const H=[],I=this._characterJoinerService.getJoinedCharacters(k),E=this._themeService.colors;let R,B=C.getNoBgTrimmedLength();y&&B<O+1&&(B=O+1);let M=0,z="",K=0,Q=0,J=0,N=!1,D=0,$=!1,F=0;const X=[],q=U!==-1&&W!==-1;for(let re=0;re<B;re++){C.loadCell(re,this._workCell);let pe=this._workCell.getWidth();if(pe===0)continue;let _e=!1,Me=re,Z=this._workCell;if(I.length>0&&re===I[0][0]){_e=!0;const he=I.shift();Z=new o.JoinedCellData(this._workCell,C.translateToString(!0,he[0],he[1]),he[1]-he[0]),Me=he[1]-1,pe=Z.getWidth()}const Fr=this._isCellInSelection(re,k),an=y&&re===O,ln=q&&re>=U&&re<=W;let cn=!1;this._decorationService.forEachDecorationAtCell(re,k,void 0,he=>{cn=!0});let Ii=Z.getChars()||_.WHITESPACE_CELL_CHAR;if(Ii===" "&&(Z.isUnderline()||Z.isOverline())&&(Ii=" "),F=pe*A-j.get(Ii,Z.isBold(),Z.isItalic()),R){if(M&&(Fr&&$||!Fr&&!$&&Z.bg===K)&&(Fr&&$&&E.selectionForeground||Z.fg===Q)&&Z.extended.ext===J&&ln===N&&F===D&&!an&&!_e&&!cn){Z.isInvisible()?z+=_.WHITESPACE_CELL_CHAR:z+=Ii,M++;continue}M&&(R.textContent=z),R=this._document.createElement("span"),M=0,z=""}else R=this._document.createElement("span");if(K=Z.bg,Q=Z.fg,J=Z.extended.ext,N=ln,D=F,$=Fr,_e&&O>=re&&O<=Me&&(O=re),!this._coreService.isCursorHidden&&an&&this._coreService.isCursorInitialized){if(X.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&X.push("xterm-cursor-blink"),X.push(b==="bar"?"xterm-cursor-bar":b==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(T)switch(T){case"outline":X.push("xterm-cursor-outline");break;case"block":X.push("xterm-cursor-block");break;case"bar":X.push("xterm-cursor-bar");break;case"underline":X.push("xterm-cursor-underline")}}if(Z.isBold()&&X.push("xterm-bold"),Z.isItalic()&&X.push("xterm-italic"),Z.isDim()&&X.push("xterm-dim"),z=Z.isInvisible()?_.WHITESPACE_CELL_CHAR:Z.getChars()||_.WHITESPACE_CELL_CHAR,Z.isUnderline()&&(X.push(`xterm-underline-${Z.extended.underlineStyle}`),z===" "&&(z=" "),!Z.isUnderlineColorDefault()))if(Z.isUnderlineColorRGB())R.style.textDecorationColor=`rgb(${l.AttributeData.toColorRGB(Z.getUnderlineColor()).join(",")})`;else{let he=Z.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&Z.isBold()&&he<8&&(he+=8),R.style.textDecorationColor=E.ansi[he].css}Z.isOverline()&&(X.push("xterm-overline"),z===" "&&(z=" ")),Z.isStrikethrough()&&X.push("xterm-strikethrough"),ln&&(R.style.textDecoration="underline");let qe=Z.getFgColor(),zr=Z.getFgColorMode(),ct=Z.getBgColor(),Ur=Z.getBgColorMode();const hn=!!Z.isInverse();if(hn){const he=qe;qe=ct,ct=he;const Uu=zr;zr=Ur,Ur=Uu}let Lt,Ni,Rt,Wr=!1;switch(this._decorationService.forEachDecorationAtCell(re,k,void 0,he=>{he.options.layer!=="top"&&Wr||(he.backgroundColorRGB&&(Ur=50331648,ct=he.backgroundColorRGB.rgba>>8&16777215,Lt=he.backgroundColorRGB),he.foregroundColorRGB&&(zr=50331648,qe=he.foregroundColorRGB.rgba>>8&16777215,Ni=he.foregroundColorRGB),Wr=he.options.layer==="top")}),!Wr&&Fr&&(Lt=this._coreBrowserService.isFocused?E.selectionBackgroundOpaque:E.selectionInactiveBackgroundOpaque,ct=Lt.rgba>>8&16777215,Ur=50331648,Wr=!0,E.selectionForeground&&(zr=50331648,qe=E.selectionForeground.rgba>>8&16777215,Ni=E.selectionForeground)),Wr&&X.push("xterm-decoration-top"),Ur){case 16777216:case 33554432:Rt=E.ansi[ct],X.push(`xterm-bg-${ct}`);break;case 50331648:Rt=g.channels.toColor(ct>>16,ct>>8&255,255&ct),this._addStyle(R,`background-color:#${w((ct>>>0).toString(16),"0",6)}`);break;default:hn?(Rt=E.foreground,X.push(`xterm-bg-${d.INVERTED_DEFAULT_COLOR}`)):Rt=E.background}switch(Lt||Z.isDim()&&(Lt=g.color.multiplyOpacity(Rt,.5)),zr){case 16777216:case 33554432:Z.isBold()&&qe<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(qe+=8),this._applyMinimumContrast(R,Rt,E.ansi[qe],Z,Lt,void 0)||X.push(`xterm-fg-${qe}`);break;case 50331648:const he=g.channels.toColor(qe>>16&255,qe>>8&255,255&qe);this._applyMinimumContrast(R,Rt,he,Z,Lt,Ni)||this._addStyle(R,`color:#${w(qe.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(R,Rt,E.foreground,Z,Lt,Ni)||hn&&X.push(`xterm-fg-${d.INVERTED_DEFAULT_COLOR}`)}X.length&&(R.className=X.join(" "),X.length=0),an||_e||cn?R.textContent=z:M++,F!==this.defaultSpacing&&(R.style.letterSpacing=`${F}px`),H.push(R),re=Me}return R&&M&&(R.textContent=z),H}_applyMinimumContrast(C,k,y,b,T,O){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,s.treatGlyphAsBackgroundColor)(b.getCode()))return!1;const P=this._getContrastCache(b);let A;if(T||O||(A=P.getColor(k.rgba,y.rgba)),A===void 0){const j=this._optionsService.rawOptions.minimumContrastRatio/(b.isDim()?2:1);A=g.color.ensureContrastRatio(T||k,O||y,j),P.setColor((T||k).rgba,(O||y).rgba,A??null)}return!!A&&(this._addStyle(C,`color:${A.css}`),!0)}_getContrastCache(C){return C.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(C,k){C.setAttribute("style",`${C.getAttribute("style")||""}${k};`)}_isCellInSelection(C,k){const y=this._selectionStart,b=this._selectionEnd;return!(!y||!b)&&(this._columnSelectMode?y[0]<=b[0]?C>=y[0]&&k>=y[1]&&C<b[0]&&k<=b[1]:C<y[0]&&k>=y[1]&&C>=b[0]&&k<=b[1]:k>y[1]&&k<b[1]||y[1]===b[1]&&k===y[1]&&C>=y[0]&&C<b[0]||y[1]<b[1]&&k===b[1]&&C<b[0]||y[1]<b[1]&&k===y[1]&&C>=y[0])}};function w(C,k,y){for(;C.length<y;)C=k+C;return C}a.DomRendererRowFactory=p=f([v(1,h.ICharacterJoinerService),v(2,x.IOptionsService),v(3,h.ICoreBrowserService),v(4,x.ICoreService),v(5,x.IDecorationService),v(6,h.IThemeService)],p)},2550:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(c,f){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=c.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=c.createElement("span");v.classList.add("xterm-char-measure-element");const d=c.createElement("span");d.classList.add("xterm-char-measure-element"),d.style.fontWeight="bold";const _=c.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const S=c.createElement("span");S.classList.add("xterm-char-measure-element"),S.style.fontWeight="bold",S.style.fontStyle="italic",this._measureElements=[v,d,_,S],this._container.appendChild(v),this._container.appendChild(d),this._container.appendChild(_),this._container.appendChild(S),f.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(c,f,v,d){c===this._font&&f===this._fontSize&&v===this._weight&&d===this._weightBold||(this._font=c,this._fontSize=f,this._weight=v,this._weightBold=d,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${d}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${d}`,this.clear())}get(c,f,v){let d=0;if(!f&&!v&&c.length===1&&(d=c.charCodeAt(0))<256){if(this._flat[d]!==-9999)return this._flat[d];const x=this._measure(c,0);return x>0&&(this._flat[d]=x),x}let _=c;f&&(_+="B"),v&&(_+="I");let S=this._holey.get(_);if(S===void 0){let x=0;f&&(x|=1),v&&(x|=2),S=this._measure(c,x),S>0&&this._holey.set(_,S)}return S}_measure(c,f){const v=this._measureElements[f];return v.textContent=c.repeat(32),v.offsetWidth/32}}},2223:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const f=c(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=f.isFirefox||f.isLegacyEdge?"bottom":"ideographic"},6171:(m,a)=>{function c(v){return 57508<=v&&v<=57558}function f(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(a,"__esModule",{value:!0}),a.computeNextVariantOffset=a.createRenderDimensions=a.treatGlyphAsBackgroundColor=a.allowRescaling=a.isEmoji=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},a.isPowerlineGlyph=c,a.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},a.isEmoji=f,a.allowRescaling=function(v,d,_,S){return d===1&&_>Math.ceil(1.5*S)&&v!==void 0&&v>255&&!f(v)&&!c(v)&&!function(x){return 57344<=x&&x<=63743}(v)},a.treatGlyphAsBackgroundColor=function(v){return c(v)||function(d){return 9472<=d&&d<=9631}(v)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},a.computeNextVariantOffset=function(v,d,_=0){return(v-(2*Math.round(d)-_))%(2*Math.round(d))}},6052:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createSelectionRenderModel=void 0;class c{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,d,_,S=!1){if(this.selectionStart=d,this.selectionEnd=_,!d||!_||d[0]===_[0]&&d[1]===_[1])return void this.clear();const x=v.buffers.active.ydisp,g=d[1]-x,h=_[1]-x,o=Math.max(g,0),s=Math.min(h,v.rows-1);o>=v.rows||s<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=S,this.viewportStartRow=g,this.viewportEndRow=h,this.viewportCappedStartRow=o,this.viewportCappedEndRow=s,this.startCol=d[0],this.endCol=_[0])}isCellSelected(v,d,_){return!!this.hasSelection&&(_-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?d>=this.startCol&&_>=this.viewportCappedStartRow&&d<this.endCol&&_<=this.viewportCappedEndRow:d<this.startCol&&_>=this.viewportCappedStartRow&&d>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&d>=this.startCol&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&d<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&d>=this.startCol)}}a.createSelectionRenderModel=function(){return new c}},456:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(c){this._bufferService=c,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?c%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)-1]:[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[c,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const c=this.selectionStart[0]+this.selectionStartLength;return c>this._bufferService.cols?[c%this._bufferService.cols,this.selectionStart[1]+Math.floor(c/this._bufferService.cols)]:[Math.max(c,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const c=this.selectionStart,f=this.selectionEnd;return!(!c||!f)&&(c[1]>f[1]||c[1]===f[1]&&c[0]>f[0])}handleTrim(c){return this.selectionStart&&(this.selectionStart[1]-=c),this.selectionEnd&&(this.selectionEnd[1]-=c),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(m,a,c){var f=this&&this.__decorate||function(s,l,p,w){var C,k=arguments.length,y=k<3?l:w===null?w=Object.getOwnPropertyDescriptor(l,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,p,w);else for(var b=s.length-1;b>=0;b--)(C=s[b])&&(y=(k<3?C(y):k>3?C(l,p,y):C(l,p))||y);return k>3&&y&&Object.defineProperty(l,p,y),y},v=this&&this.__param||function(s,l){return function(p,w){l(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const d=c(2585),_=c(8460),S=c(844);let x=a.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(s,l,p){super(),this._optionsService=p,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new o(this._optionsService))}catch{this._measureStrategy=this.register(new h(s,l,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const s=this._measureStrategy.measure();s.width===this.width&&s.height===this.height||(this.width=s.width,this.height=s.height,this._onCharSizeChange.fire())}};a.CharSizeService=x=f([v(2,d.IOptionsService)],x);class g extends S.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(l,p){l!==void 0&&l>0&&p!==void 0&&p>0&&(this._result.width=l,this._result.height=p)}}class h extends g{constructor(l,p,w){super(),this._document=l,this._parentElement=p,this._optionsService=w,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class o extends g{constructor(l){super(),this._optionsService=l,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const p=this._ctx.measureText("W");if(!("width"in p&&"fontBoundingBoxAscent"in p&&"fontBoundingBoxDescent"in p))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const l=this._ctx.measureText("W");return this._validateAndSet(l.width,l.fontBoundingBoxAscent+l.fontBoundingBoxDescent),this._result}}},4269:function(m,a,c){var f=this&&this.__decorate||function(o,s,l,p){var w,C=arguments.length,k=C<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,l):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(o,s,l,p);else for(var y=o.length-1;y>=0;y--)(w=o[y])&&(k=(C<3?w(k):C>3?w(s,l,k):w(s,l))||k);return C>3&&k&&Object.defineProperty(s,l,k),k},v=this&&this.__param||function(o,s){return function(l,p){s(l,p,o)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const d=c(3734),_=c(643),S=c(511),x=c(2585);class g extends d.AttributeData{constructor(s,l,p){super(),this.content=0,this.combinedData="",this.fg=s.fg,this.bg=s.bg,this.combinedData=l,this._width=p}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(s){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=g;let h=a.CharacterJoinerService=class Nu{constructor(s){this._bufferService=s,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(s){const l={id:this._nextCharacterJoinerId++,handler:s};return this._characterJoiners.push(l),l.id}deregister(s){for(let l=0;l<this._characterJoiners.length;l++)if(this._characterJoiners[l].id===s)return this._characterJoiners.splice(l,1),!0;return!1}getJoinedCharacters(s){if(this._characterJoiners.length===0)return[];const l=this._bufferService.buffer.lines.get(s);if(!l||l.length===0)return[];const p=[],w=l.translateToString(!0);let C=0,k=0,y=0,b=l.getFg(0),T=l.getBg(0);for(let O=0;O<l.getTrimmedLength();O++)if(l.loadCell(O,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==b||this._workCell.bg!==T){if(O-C>1){const P=this._getJoinedRanges(w,y,k,l,C);for(let A=0;A<P.length;A++)p.push(P[A])}C=O,y=k,b=this._workCell.fg,T=this._workCell.bg}k+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-C>1){const O=this._getJoinedRanges(w,y,k,l,C);for(let P=0;P<O.length;P++)p.push(O[P])}return p}_getJoinedRanges(s,l,p,w,C){const k=s.substring(l,p);let y=[];try{y=this._characterJoiners[0].handler(k)}catch(b){console.error(b)}for(let b=1;b<this._characterJoiners.length;b++)try{const T=this._characterJoiners[b].handler(k);for(let O=0;O<T.length;O++)Nu._mergeRanges(y,T[O])}catch(T){console.error(T)}return this._stringRangesToCellRanges(y,w,C),y}_stringRangesToCellRanges(s,l,p){let w=0,C=!1,k=0,y=s[w];if(y){for(let b=p;b<this._bufferService.cols;b++){const T=l.getWidth(b),O=l.getString(b).length||_.WHITESPACE_CELL_CHAR.length;if(T!==0){if(!C&&y[0]<=k&&(y[0]=b,C=!0),y[1]<=k){if(y[1]=b,y=s[++w],!y)break;y[0]<=k?(y[0]=b,C=!0):C=!1}k+=O}}y&&(y[1]=this._bufferService.cols)}}static _mergeRanges(s,l){let p=!1;for(let w=0;w<s.length;w++){const C=s[w];if(p){if(l[1]<=C[0])return s[w-1][1]=l[1],s;if(l[1]<=C[1])return s[w-1][1]=Math.max(l[1],C[1]),s.splice(w,1),s;s.splice(w,1),w--}else{if(l[1]<=C[0])return s.splice(w,0,l),s;if(l[1]<=C[1])return C[0]=Math.min(l[0],C[0]),s;l[0]<C[1]&&(C[0]=Math.min(l[0],C[0]),p=!0)}}return p?s[s.length-1][1]=l[1]:s.push(l),s}};a.CharacterJoinerService=h=f([v(0,x.IBufferService)],h)},5114:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0;const f=c(844),v=c(8460),d=c(3656);class _ extends f.Disposable{constructor(g,h,o){super(),this._textarea=g,this._window=h,this.mainDocument=o,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new S(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange(s=>this._screenDprMonitor.setWindow(s))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get window(){return this._window}set window(g){this._window!==g&&(this._window=g,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}a.CoreBrowserService=_;class S extends f.Disposable{constructor(g){super(),this._parentWindow=g,this._windowResizeListener=this.register(new f.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,f.toDisposable)(()=>this.clearListener()))}setWindow(g){this._parentWindow=g,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,d.addDisposableDomListener)(this._parentWindow,"resize",()=>this._setDprAndFireIfDiffers())}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){var g;this._outerListener&&((g=this._resolutionMediaMatchList)==null||g.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.LinkProviderService=void 0;const f=c(844);class v extends f.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,f.toDisposable)(()=>this.linkProviders.length=0))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const S=this.linkProviders.indexOf(_);S!==-1&&this.linkProviders.splice(S,1)}}}}a.LinkProviderService=v},8934:function(m,a,c){var f=this&&this.__decorate||function(x,g,h,o){var s,l=arguments.length,p=l<3?g:o===null?o=Object.getOwnPropertyDescriptor(g,h):o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(x,g,h,o);else for(var w=x.length-1;w>=0;w--)(s=x[w])&&(p=(l<3?s(p):l>3?s(g,h,p):s(g,h))||p);return l>3&&p&&Object.defineProperty(g,h,p),p},v=this&&this.__param||function(x,g){return function(h,o){g(h,o,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const d=c(4725),_=c(9806);let S=a.MouseService=class{constructor(x,g){this._renderService=x,this._charSizeService=g}getCoords(x,g,h,o,s){return(0,_.getCoords)(window,x,g,h,o,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,s)}getMouseReportCoords(x,g){const h=(0,_.getCoordsRelativeToElement)(window,x,g);if(this._charSizeService.hasValidSize)return h[0]=Math.min(Math.max(h[0],0),this._renderService.dimensions.css.canvas.width-1),h[1]=Math.min(Math.max(h[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(h[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(h[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(h[0]),y:Math.floor(h[1])}}};a.MouseService=S=f([v(0,d.IRenderService),v(1,d.ICharSizeService)],S)},3230:function(m,a,c){var f=this&&this.__decorate||function(s,l,p,w){var C,k=arguments.length,y=k<3?l:w===null?w=Object.getOwnPropertyDescriptor(l,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,p,w);else for(var b=s.length-1;b>=0;b--)(C=s[b])&&(y=(k<3?C(y):k>3?C(l,p,y):C(l,p))||y);return k>3&&y&&Object.defineProperty(l,p,y),y},v=this&&this.__param||function(s,l){return function(p,w){l(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const d=c(6193),_=c(4725),S=c(8460),x=c(844),g=c(7226),h=c(2585);let o=a.RenderService=class extends x.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(s,l,p,w,C,k,y,b){super(),this._rowCount=s,this._charSizeService=w,this._renderer=this.register(new x.MutableDisposable),this._pausedResizeTask=new g.DebouncedIdleTask,this._observerDisposable=this.register(new x.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new S.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new S.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new S.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new S.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new d.RenderDebouncer((T,O)=>this._renderRows(T,O),y),this.register(this._renderDebouncer),this.register(y.onDprChange(()=>this.handleDevicePixelRatioChange())),this.register(k.onResize(()=>this._fullRefresh())),this.register(k.buffers.onBufferActivate(()=>{var T;return(T=this._renderer.value)==null?void 0:T.clear()})),this.register(p.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(C.onDecorationRegistered(()=>this._fullRefresh())),this.register(C.onDecorationRemoved(()=>this._fullRefresh())),this.register(p.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],()=>{this.clear(),this.handleResize(k.cols,k.rows),this._fullRefresh()})),this.register(p.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(k.buffer.y,k.buffer.y,!0))),this.register(b.onChangeColors(()=>this._fullRefresh())),this._registerIntersectionObserver(y.window,l),this.register(y.onWindowChange(T=>this._registerIntersectionObserver(T,l)))}_registerIntersectionObserver(s,l){if("IntersectionObserver"in s){const p=new s.IntersectionObserver(w=>this._handleIntersectionChange(w[w.length-1]),{threshold:0});p.observe(l),this._observerDisposable.value=(0,x.toDisposable)(()=>p.disconnect())}}_handleIntersectionChange(s){this._isPaused=s.isIntersecting===void 0?s.intersectionRatio===0:!s.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(s,l,p=!1){this._isPaused?this._needsFullRefresh=!0:(p||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(s,l,this._rowCount))}_renderRows(s,l){this._renderer.value&&(s=Math.min(s,this._rowCount-1),l=Math.min(l,this._rowCount-1),this._renderer.value.renderRows(s,l),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:s,end:l}),this._onRender.fire({start:s,end:l}),this._isNextRenderRedrawOnly=!0)}resize(s,l){this._rowCount=l,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(s){this._renderer.value=s,this._renderer.value&&(this._renderer.value.onRequestRedraw(l=>this.refreshRows(l.start,l.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(s){return this._renderDebouncer.addRefreshCallback(s)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var s,l;this._renderer.value&&((l=(s=this._renderer.value).clearTextureAtlas)==null||l.call(s),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(s,l){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>{var p;return(p=this._renderer.value)==null?void 0:p.handleResize(s,l)}):this._renderer.value.handleResize(s,l),this._fullRefresh())}handleCharSizeChanged(){var s;(s=this._renderer.value)==null||s.handleCharSizeChanged()}handleBlur(){var s;(s=this._renderer.value)==null||s.handleBlur()}handleFocus(){var s;(s=this._renderer.value)==null||s.handleFocus()}handleSelectionChanged(s,l,p){var w;this._selectionState.start=s,this._selectionState.end=l,this._selectionState.columnSelectMode=p,(w=this._renderer.value)==null||w.handleSelectionChanged(s,l,p)}handleCursorMove(){var s;(s=this._renderer.value)==null||s.handleCursorMove()}clear(){var s;(s=this._renderer.value)==null||s.clear()}};a.RenderService=o=f([v(2,h.IOptionsService),v(3,_.ICharSizeService),v(4,h.IDecorationService),v(5,h.IBufferService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],o)},9312:function(m,a,c){var f=this&&this.__decorate||function(y,b,T,O){var P,A=arguments.length,j=A<3?b:O===null?O=Object.getOwnPropertyDescriptor(b,T):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(y,b,T,O);else for(var U=y.length-1;U>=0;U--)(P=y[U])&&(j=(A<3?P(j):A>3?P(b,T,j):P(b,T))||j);return A>3&&j&&Object.defineProperty(b,T,j),j},v=this&&this.__param||function(y,b){return function(T,O){b(T,O,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const d=c(9806),_=c(9504),S=c(456),x=c(4725),g=c(8460),h=c(844),o=c(6114),s=c(4841),l=c(511),p=c(2585),w=" ",C=new RegExp(w,"g");let k=a.SelectionService=class extends h.Disposable{constructor(y,b,T,O,P,A,j,U,W){super(),this._element=y,this._screenElement=b,this._linkifier=T,this._bufferService=O,this._coreService=P,this._mouseService=A,this._optionsService=j,this._renderService=U,this._coreBrowserService=W,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new l.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new g.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new g.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new g.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new g.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=H=>this._handleMouseMove(H),this._mouseUpListener=H=>this._handleMouseUp(H),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(H=>this._handleTrim(H)),this.register(this._bufferService.buffers.onBufferActivate(H=>this._handleBufferActivate(H))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,h.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;return!(!y||!b||y[0]===b[0]&&y[1]===b[1])}get selectionText(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd;if(!y||!b)return"";const T=this._bufferService.buffer,O=[];if(this._activeSelectionMode===3){if(y[0]===b[0])return"";const P=y[0]<b[0]?y[0]:b[0],A=y[0]<b[0]?b[0]:y[0];for(let j=y[1];j<=b[1];j++){const U=T.translateBufferLineToString(j,!0,P,A);O.push(U)}}else{const P=y[1]===b[1]?b[0]:void 0;O.push(T.translateBufferLineToString(y[1],!0,y[0],P));for(let A=y[1]+1;A<=b[1]-1;A++){const j=T.lines.get(A),U=T.translateBufferLineToString(A,!0);j!=null&&j.isWrapped?O[O.length-1]+=U:O.push(U)}if(y[1]!==b[1]){const A=T.lines.get(b[1]),j=T.translateBufferLineToString(b[1],!0,0,b[0]);A&&A.isWrapped?O[O.length-1]+=j:O.push(j)}}return O.map(P=>P.replace(C," ")).join(o.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(y){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),o.isLinux&&y&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(y){const b=this._getMouseBufferCoords(y),T=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!!(T&&O&&b)&&this._areCoordsInSelection(b,T,O)}isCellInSelection(y,b){const T=this._model.finalSelectionStart,O=this._model.finalSelectionEnd;return!(!T||!O)&&this._areCoordsInSelection([y,b],T,O)}_areCoordsInSelection(y,b,T){return y[1]>b[1]&&y[1]<T[1]||b[1]===T[1]&&y[1]===b[1]&&y[0]>=b[0]&&y[0]<T[0]||b[1]<T[1]&&y[1]===T[1]&&y[0]<T[0]||b[1]<T[1]&&y[1]===b[1]&&y[0]>=b[0]}_selectWordAtCursor(y,b){var P,A;const T=(A=(P=this._linkifier.currentLink)==null?void 0:P.link)==null?void 0:A.range;if(T)return this._model.selectionStart=[T.start.x-1,T.start.y-1],this._model.selectionStartLength=(0,s.getRangeLength)(T,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const O=this._getMouseBufferCoords(y);return!!O&&(this._selectWordAt(O,b),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(y,b){this._model.clearSelection(),y=Math.max(y,0),b=Math.min(b,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,y],this._model.selectionEnd=[this._bufferService.cols,b],this.refresh(),this._onSelectionChange.fire()}_handleTrim(y){this._model.handleTrim(y)&&this.refresh()}_getMouseBufferCoords(y){const b=this._mouseService.getCoords(y,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(b)return b[0]--,b[1]--,b[1]+=this._bufferService.buffer.ydisp,b}_getMouseEventScrollAmount(y){let b=(0,d.getCoordsRelativeToElement)(this._coreBrowserService.window,y,this._screenElement)[1];const T=this._renderService.dimensions.css.canvas.height;return b>=0&&b<=T?0:(b>T&&(b-=T),b=Math.min(Math.max(b,-50),50),b/=50,b/Math.abs(b)+Math.round(14*b))}shouldForceSelection(y){return o.isMac?y.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:y.shiftKey}handleMouseDown(y){if(this._mouseDownTimeStamp=y.timeStamp,(y.button!==2||!this.hasSelection)&&y.button===0){if(!this._enabled){if(!this.shouldForceSelection(y))return;y.stopPropagation()}y.preventDefault(),this._dragScrollAmount=0,this._enabled&&y.shiftKey?this._handleIncrementalClick(y):y.detail===1?this._handleSingleClick(y):y.detail===2?this._handleDoubleClick(y):y.detail===3&&this._handleTripleClick(y),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(y){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(y))}_handleSingleClick(y){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(y)?3:0,this._model.selectionStart=this._getMouseBufferCoords(y),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const b=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);b&&b.length!==this._model.selectionStart[0]&&b.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(y){this._selectWordAtCursor(y,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(y){const b=this._getMouseBufferCoords(y);b&&(this._activeSelectionMode=2,this._selectLineAt(b[1]))}shouldColumnSelect(y){return y.altKey&&!(o.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(y){if(y.stopImmediatePropagation(),!this._model.selectionStart)return;const b=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(y),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(y),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const T=this._bufferService.buffer;if(this._model.selectionEnd[1]<T.lines.length){const O=T.lines.get(this._model.selectionEnd[1]);O&&O.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}b&&b[0]===this._model.selectionEnd[0]&&b[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const y=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(y.ydisp+this._bufferService.rows,y.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=y.ydisp),this.refresh()}}_handleMouseUp(y){const b=y.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&b<500&&y.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const T=this._mouseService.getCoords(y,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(T&&T[0]!==void 0&&T[1]!==void 0){const O=(0,_.moveToCellSequence)(T[0]-1,T[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(O,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const y=this._model.finalSelectionStart,b=this._model.finalSelectionEnd,T=!(!y||!b||y[0]===b[0]&&y[1]===b[1]);T?y&&b&&(this._oldSelectionStart&&this._oldSelectionEnd&&y[0]===this._oldSelectionStart[0]&&y[1]===this._oldSelectionStart[1]&&b[0]===this._oldSelectionEnd[0]&&b[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(y,b,T)):this._oldHasSelection&&this._fireOnSelectionChange(y,b,T)}_fireOnSelectionChange(y,b,T){this._oldSelectionStart=y,this._oldSelectionEnd=b,this._oldHasSelection=T,this._onSelectionChange.fire()}_handleBufferActivate(y){this.clearSelection(),this._trimListener.dispose(),this._trimListener=y.activeBuffer.lines.onTrim(b=>this._handleTrim(b))}_convertViewportColToCharacterIndex(y,b){let T=b;for(let O=0;b>=O;O++){const P=y.loadCell(O,this._workCell).getChars().length;this._workCell.getWidth()===0?T--:P>1&&b!==O&&(T+=P-1)}return T}setSelection(y,b,T){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[y,b],this._model.selectionStartLength=T,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(y){this._isClickInSelection(y)||(this._selectWordAtCursor(y,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(y,b,T=!0,O=!0){if(y[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,A=P.lines.get(y[1]);if(!A)return;const j=P.translateBufferLineToString(y[1],!1);let U=this._convertViewportColToCharacterIndex(A,y[0]),W=U;const H=y[0]-U;let I=0,E=0,R=0,B=0;if(j.charAt(U)===" "){for(;U>0&&j.charAt(U-1)===" ";)U--;for(;W<j.length&&j.charAt(W+1)===" ";)W++}else{let K=y[0],Q=y[0];A.getWidth(K)===0&&(I++,K--),A.getWidth(Q)===2&&(E++,Q++);const J=A.getString(Q).length;for(J>1&&(B+=J-1,W+=J-1);K>0&&U>0&&!this._isCharWordSeparator(A.loadCell(K-1,this._workCell));){A.loadCell(K-1,this._workCell);const N=this._workCell.getChars().length;this._workCell.getWidth()===0?(I++,K--):N>1&&(R+=N-1,U-=N-1),U--,K--}for(;Q<A.length&&W+1<j.length&&!this._isCharWordSeparator(A.loadCell(Q+1,this._workCell));){A.loadCell(Q+1,this._workCell);const N=this._workCell.getChars().length;this._workCell.getWidth()===2?(E++,Q++):N>1&&(B+=N-1,W+=N-1),W++,Q++}}W++;let M=U+H-I+R,z=Math.min(this._bufferService.cols,W-U+I+E-R-B);if(b||j.slice(U,W).trim()!==""){if(T&&M===0&&A.getCodePoint(0)!==32){const K=P.lines.get(y[1]-1);if(K&&A.isWrapped&&K.getCodePoint(this._bufferService.cols-1)!==32){const Q=this._getWordAt([this._bufferService.cols-1,y[1]-1],!1,!0,!1);if(Q){const J=this._bufferService.cols-Q.start;M-=J,z+=J}}}if(O&&M+z===this._bufferService.cols&&A.getCodePoint(this._bufferService.cols-1)!==32){const K=P.lines.get(y[1]+1);if(K!=null&&K.isWrapped&&K.getCodePoint(0)!==32){const Q=this._getWordAt([0,y[1]+1],!1,!1,!0);Q&&(z+=Q.length)}}return{start:M,length:z}}}_selectWordAt(y,b){const T=this._getWordAt(y,b);if(T){for(;T.start<0;)T.start+=this._bufferService.cols,y[1]--;this._model.selectionStart=[T.start,y[1]],this._model.selectionStartLength=T.length}}_selectToWordAt(y){const b=this._getWordAt(y,!0);if(b){let T=y[1];for(;b.start<0;)b.start+=this._bufferService.cols,T--;if(!this._model.areSelectionValuesReversed())for(;b.start+b.length>this._bufferService.cols;)b.length-=this._bufferService.cols,T++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?b.start:b.start+b.length,T]}}_isCharWordSeparator(y){return y.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(y.getChars())>=0}_selectLineAt(y){const b=this._bufferService.buffer.getWrappedRangeForLine(y),T={start:{x:0,y:b.first},end:{x:this._bufferService.cols-1,y:b.last}};this._model.selectionStart=[0,b.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,s.getRangeLength)(T,this._bufferService.cols)}};a.SelectionService=k=f([v(3,p.IBufferService),v(4,p.ICoreService),v(5,x.IMouseService),v(6,p.IOptionsService),v(7,x.IRenderService),v(8,x.ICoreBrowserService)],k)},4725:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ILinkProviderService=a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const f=c(8343);a.ICharSizeService=(0,f.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,f.createDecorator)("CoreBrowserService"),a.IMouseService=(0,f.createDecorator)("MouseService"),a.IRenderService=(0,f.createDecorator)("RenderService"),a.ISelectionService=(0,f.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,f.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,f.createDecorator)("ThemeService"),a.ILinkProviderService=(0,f.createDecorator)("LinkProviderService")},6731:function(m,a,c){var f=this&&this.__decorate||function(k,y,b,T){var O,P=arguments.length,A=P<3?y:T===null?T=Object.getOwnPropertyDescriptor(y,b):T;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")A=Reflect.decorate(k,y,b,T);else for(var j=k.length-1;j>=0;j--)(O=k[j])&&(A=(P<3?O(A):P>3?O(y,b,A):O(y,b))||A);return P>3&&A&&Object.defineProperty(y,b,A),A},v=this&&this.__param||function(k,y){return function(b,T){y(b,T,k)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const d=c(7239),_=c(8055),S=c(8460),x=c(844),g=c(2585),h=_.css.toColor("#ffffff"),o=_.css.toColor("#000000"),s=_.css.toColor("#ffffff"),l=_.css.toColor("#000000"),p={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const k=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],y=[0,95,135,175,215,255];for(let b=0;b<216;b++){const T=y[b/36%6|0],O=y[b/6%6|0],P=y[b%6];k.push({css:_.channels.toCss(T,O,P),rgba:_.channels.toRgba(T,O,P)})}for(let b=0;b<24;b++){const T=8+10*b;k.push({css:_.channels.toCss(T,T,T),rgba:_.channels.toRgba(T,T,T)})}return k})());let w=a.ThemeService=class extends x.Disposable{get colors(){return this._colors}constructor(k){super(),this._optionsService=k,this._contrastCache=new d.ColorContrastCache,this._halfContrastCache=new d.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:h,background:o,cursor:s,cursorAccent:l,selectionForeground:void 0,selectionBackgroundTransparent:p,selectionBackgroundOpaque:_.color.blend(o,p),selectionInactiveBackgroundTransparent:p,selectionInactiveBackgroundOpaque:_.color.blend(o,p),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(k={}){const y=this._colors;if(y.foreground=C(k.foreground,h),y.background=C(k.background,o),y.cursor=C(k.cursor,s),y.cursorAccent=C(k.cursorAccent,l),y.selectionBackgroundTransparent=C(k.selectionBackground,p),y.selectionBackgroundOpaque=_.color.blend(y.background,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundTransparent=C(k.selectionInactiveBackground,y.selectionBackgroundTransparent),y.selectionInactiveBackgroundOpaque=_.color.blend(y.background,y.selectionInactiveBackgroundTransparent),y.selectionForeground=k.selectionForeground?C(k.selectionForeground,_.NULL_COLOR):void 0,y.selectionForeground===_.NULL_COLOR&&(y.selectionForeground=void 0),_.color.isOpaque(y.selectionBackgroundTransparent)&&(y.selectionBackgroundTransparent=_.color.opacity(y.selectionBackgroundTransparent,.3)),_.color.isOpaque(y.selectionInactiveBackgroundTransparent)&&(y.selectionInactiveBackgroundTransparent=_.color.opacity(y.selectionInactiveBackgroundTransparent,.3)),y.ansi=a.DEFAULT_ANSI_COLORS.slice(),y.ansi[0]=C(k.black,a.DEFAULT_ANSI_COLORS[0]),y.ansi[1]=C(k.red,a.DEFAULT_ANSI_COLORS[1]),y.ansi[2]=C(k.green,a.DEFAULT_ANSI_COLORS[2]),y.ansi[3]=C(k.yellow,a.DEFAULT_ANSI_COLORS[3]),y.ansi[4]=C(k.blue,a.DEFAULT_ANSI_COLORS[4]),y.ansi[5]=C(k.magenta,a.DEFAULT_ANSI_COLORS[5]),y.ansi[6]=C(k.cyan,a.DEFAULT_ANSI_COLORS[6]),y.ansi[7]=C(k.white,a.DEFAULT_ANSI_COLORS[7]),y.ansi[8]=C(k.brightBlack,a.DEFAULT_ANSI_COLORS[8]),y.ansi[9]=C(k.brightRed,a.DEFAULT_ANSI_COLORS[9]),y.ansi[10]=C(k.brightGreen,a.DEFAULT_ANSI_COLORS[10]),y.ansi[11]=C(k.brightYellow,a.DEFAULT_ANSI_COLORS[11]),y.ansi[12]=C(k.brightBlue,a.DEFAULT_ANSI_COLORS[12]),y.ansi[13]=C(k.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),y.ansi[14]=C(k.brightCyan,a.DEFAULT_ANSI_COLORS[14]),y.ansi[15]=C(k.brightWhite,a.DEFAULT_ANSI_COLORS[15]),k.extendedAnsi){const b=Math.min(y.ansi.length-16,k.extendedAnsi.length);for(let T=0;T<b;T++)y.ansi[T+16]=C(k.extendedAnsi[T],a.DEFAULT_ANSI_COLORS[T+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(k){this._restoreColor(k),this._onChangeColors.fire(this.colors)}_restoreColor(k){if(k!==void 0)switch(k){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[k]=this._restoreColors.ansi[k]}else for(let y=0;y<this._restoreColors.ansi.length;++y)this._colors.ansi[y]=this._restoreColors.ansi[y]}modifyColors(k){k(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function C(k,y){if(k!==void 0)try{return _.css.toColor(k)}catch{}return y}a.ThemeService=w=f([v(0,g.IOptionsService)],w)},6349:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const f=c(8460),v=c(844);class d extends v.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new f.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new f.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new f.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const x=new Array(S);for(let g=0;g<Math.min(S,this.length);g++)x[g]=this._array[this._getCyclicIndex(g)];this._array=x,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let x=this._length;x<S;x++)this._array[x]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,x){this._array[this._getCyclicIndex(S)]=x}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,x,...g){if(x){for(let h=S;h<this._length-x;h++)this._array[this._getCyclicIndex(h)]=this._array[this._getCyclicIndex(h+x)];this._length-=x,this.onDeleteEmitter.fire({index:S,amount:x})}for(let h=this._length-1;h>=S;h--)this._array[this._getCyclicIndex(h+g.length)]=this._array[this._getCyclicIndex(h)];for(let h=0;h<g.length;h++)this._array[this._getCyclicIndex(S+h)]=g[h];if(g.length&&this.onInsertEmitter.fire({index:S,amount:g.length}),this._length+g.length>this._maxLength){const h=this._length+g.length-this._maxLength;this._startIndex+=h,this._length=this._maxLength,this.onTrimEmitter.fire(h)}else this._length+=g.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,x,g){if(!(x<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+g<0)throw new Error("Cannot shift elements in list beyond index 0");if(g>0){for(let o=x-1;o>=0;o--)this.set(S+o+g,this.get(S+o));const h=S+x+g-this._length;if(h>0)for(this._length+=h;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let h=0;h<x;h++)this.set(S+h+g,this.get(S+h))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}a.CircularList=d},1439:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function c(f,v=5){if(typeof f!="object")return f;const d=Array.isArray(f)?[]:{};for(const _ in f)d[_]=v<=1?f[_]:f[_]&&c(f[_],v-1);return d}},8055:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;let c=0,f=0,v=0,d=0;var _,S,x,g,h;function o(l){const p=l.toString(16);return p.length<2?"0"+p:p}function s(l,p){return l<p?(p+.05)/(l+.05):(l+.05)/(p+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(l){l.toCss=function(p,w,C,k){return k!==void 0?`#${o(p)}${o(w)}${o(C)}${o(k)}`:`#${o(p)}${o(w)}${o(C)}`},l.toRgba=function(p,w,C,k=255){return(p<<24|w<<16|C<<8|k)>>>0},l.toColor=function(p,w,C,k){return{css:l.toCss(p,w,C,k),rgba:l.toRgba(p,w,C,k)}}}(_||(a.channels=_={})),function(l){function p(w,C){return d=Math.round(255*C),[c,f,v]=h.toChannels(w.rgba),{css:_.toCss(c,f,v,d),rgba:_.toRgba(c,f,v,d)}}l.blend=function(w,C){if(d=(255&C.rgba)/255,d===1)return{css:C.css,rgba:C.rgba};const k=C.rgba>>24&255,y=C.rgba>>16&255,b=C.rgba>>8&255,T=w.rgba>>24&255,O=w.rgba>>16&255,P=w.rgba>>8&255;return c=T+Math.round((k-T)*d),f=O+Math.round((y-O)*d),v=P+Math.round((b-P)*d),{css:_.toCss(c,f,v),rgba:_.toRgba(c,f,v)}},l.isOpaque=function(w){return(255&w.rgba)==255},l.ensureContrastRatio=function(w,C,k){const y=h.ensureContrastRatio(w.rgba,C.rgba,k);if(y)return _.toColor(y>>24&255,y>>16&255,y>>8&255)},l.opaque=function(w){const C=(255|w.rgba)>>>0;return[c,f,v]=h.toChannels(C),{css:_.toCss(c,f,v),rgba:C}},l.opacity=p,l.multiplyOpacity=function(w,C){return d=255&w.rgba,p(w,d*C/255)},l.toColorRGB=function(w){return[w.rgba>>24&255,w.rgba>>16&255,w.rgba>>8&255]}}(S||(a.color=S={})),function(l){let p,w;try{const C=document.createElement("canvas");C.width=1,C.height=1;const k=C.getContext("2d",{willReadFrequently:!0});k&&(p=k,p.globalCompositeOperation="copy",w=p.createLinearGradient(0,0,1,1))}catch{}l.toColor=function(C){if(C.match(/#[\da-f]{3,8}/i))switch(C.length){case 4:return c=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),_.toColor(c,f,v);case 5:return c=parseInt(C.slice(1,2).repeat(2),16),f=parseInt(C.slice(2,3).repeat(2),16),v=parseInt(C.slice(3,4).repeat(2),16),d=parseInt(C.slice(4,5).repeat(2),16),_.toColor(c,f,v,d);case 7:return{css:C,rgba:(parseInt(C.slice(1),16)<<8|255)>>>0};case 9:return{css:C,rgba:parseInt(C.slice(1),16)>>>0}}const k=C.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(k)return c=parseInt(k[1]),f=parseInt(k[2]),v=parseInt(k[3]),d=Math.round(255*(k[5]===void 0?1:parseFloat(k[5]))),_.toColor(c,f,v,d);if(!p||!w)throw new Error("css.toColor: Unsupported css format");if(p.fillStyle=w,p.fillStyle=C,typeof p.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(p.fillRect(0,0,1,1),[c,f,v,d]=p.getImageData(0,0,1,1).data,d!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(c,f,v,d),css:C}}}(x||(a.css=x={})),function(l){function p(w,C,k){const y=w/255,b=C/255,T=k/255;return .2126*(y<=.03928?y/12.92:Math.pow((y+.055)/1.055,2.4))+.7152*(b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4))+.0722*(T<=.03928?T/12.92:Math.pow((T+.055)/1.055,2.4))}l.relativeLuminance=function(w){return p(w>>16&255,w>>8&255,255&w)},l.relativeLuminance2=p}(g||(a.rgb=g={})),function(l){function p(C,k,y){const b=C>>24&255,T=C>>16&255,O=C>>8&255;let P=k>>24&255,A=k>>16&255,j=k>>8&255,U=s(g.relativeLuminance2(P,A,j),g.relativeLuminance2(b,T,O));for(;U<y&&(P>0||A>0||j>0);)P-=Math.max(0,Math.ceil(.1*P)),A-=Math.max(0,Math.ceil(.1*A)),j-=Math.max(0,Math.ceil(.1*j)),U=s(g.relativeLuminance2(P,A,j),g.relativeLuminance2(b,T,O));return(P<<24|A<<16|j<<8|255)>>>0}function w(C,k,y){const b=C>>24&255,T=C>>16&255,O=C>>8&255;let P=k>>24&255,A=k>>16&255,j=k>>8&255,U=s(g.relativeLuminance2(P,A,j),g.relativeLuminance2(b,T,O));for(;U<y&&(P<255||A<255||j<255);)P=Math.min(255,P+Math.ceil(.1*(255-P))),A=Math.min(255,A+Math.ceil(.1*(255-A))),j=Math.min(255,j+Math.ceil(.1*(255-j))),U=s(g.relativeLuminance2(P,A,j),g.relativeLuminance2(b,T,O));return(P<<24|A<<16|j<<8|255)>>>0}l.blend=function(C,k){if(d=(255&k)/255,d===1)return k;const y=k>>24&255,b=k>>16&255,T=k>>8&255,O=C>>24&255,P=C>>16&255,A=C>>8&255;return c=O+Math.round((y-O)*d),f=P+Math.round((b-P)*d),v=A+Math.round((T-A)*d),_.toRgba(c,f,v)},l.ensureContrastRatio=function(C,k,y){const b=g.relativeLuminance(C>>8),T=g.relativeLuminance(k>>8);if(s(b,T)<y){if(T<b){const A=p(C,k,y),j=s(b,g.relativeLuminance(A>>8));if(j<y){const U=w(C,k,y);return j>s(b,g.relativeLuminance(U>>8))?A:U}return A}const O=w(C,k,y),P=s(b,g.relativeLuminance(O>>8));if(P<y){const A=p(C,k,y);return P>s(b,g.relativeLuminance(A>>8))?O:A}return O}},l.reduceLuminance=p,l.increaseLuminance=w,l.toChannels=function(C){return[C>>24&255,C>>16&255,C>>8&255,255&C]}}(h||(a.rgba=h={})),a.toPaddedHex=o,a.contrastRatio=s},8969:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const f=c(844),v=c(2585),d=c(4348),_=c(7866),S=c(744),x=c(7302),g=c(6975),h=c(8460),o=c(1753),s=c(1480),l=c(7994),p=c(9282),w=c(5435),C=c(5981),k=c(2660);let y=!1;class b extends f.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new h.EventEmitter),this._onScroll.event(O=>{var P;(P=this._onScrollApi)==null||P.fire(O.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(O){for(const P in O)this.optionsService.options[P]=O[P]}constructor(O){super(),this._windowsWrappingHeuristics=this.register(new f.MutableDisposable),this._onBinary=this.register(new h.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new h.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new h.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new h.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new h.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new h.EventEmitter),this._instantiationService=new d.InstantiationService,this.optionsService=this.register(new x.OptionsService(O)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(g.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(o.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(s.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(l.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(k.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new w.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,h.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,h.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,h.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,h.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new C.WriteBuffer((P,A)=>this._inputHandler.parse(P,A))),this.register((0,h.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(O,P){this._writeBuffer.write(O,P)}writeSync(O,P){this._logService.logLevel<=v.LogLevelEnum.WARN&&!y&&(this._logService.warn("writeSync is unreliable and will be removed soon."),y=!0),this._writeBuffer.writeSync(O,P)}input(O,P=!0){this.coreService.triggerDataEvent(O,P)}resize(O,P){isNaN(O)||isNaN(P)||(O=Math.max(O,S.MINIMUM_COLS),P=Math.max(P,S.MINIMUM_ROWS),this._bufferService.resize(O,P))}scroll(O,P=!1){this._bufferService.scroll(O,P)}scrollLines(O,P,A){this._bufferService.scrollLines(O,P,A)}scrollPages(O){this.scrollLines(O*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(O){const P=O-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(O,P){return this._inputHandler.registerEscHandler(O,P)}registerDcsHandler(O,P){return this._inputHandler.registerDcsHandler(O,P)}registerCsiHandler(O,P){return this._inputHandler.registerCsiHandler(O,P)}registerOscHandler(O,P){return this._inputHandler.registerOscHandler(O,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let O=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?O=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(O=!0),O?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const O=[];O.push(this.onLineFeed(p.updateWindowsModeWrappedState.bind(null,this._bufferService))),O.push(this.registerCsiHandler({final:"H"},()=>((0,p.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,f.toDisposable)(()=>{for(const P of O)P.dispose()})}}}a.CoreTerminal=b},8460:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.runAndSubscribe=a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=c=>(this._listeners.push(c),{dispose:()=>{if(!this._disposed){for(let f=0;f<this._listeners.length;f++)if(this._listeners[f]===c)return void this._listeners.splice(f,1)}}})),this._event}fire(c,f){const v=[];for(let d=0;d<this._listeners.length;d++)v.push(this._listeners[d]);for(let d=0;d<v.length;d++)v[d].call(void 0,c,f)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(c,f){return c(v=>f.fire(v))},a.runAndSubscribe=function(c,f){return f(void 0),c(v=>f(v))}},5435:function(m,a,c){var f=this&&this.__decorate||function(I,E,R,B){var M,z=arguments.length,K=z<3?E:B===null?B=Object.getOwnPropertyDescriptor(E,R):B;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")K=Reflect.decorate(I,E,R,B);else for(var Q=I.length-1;Q>=0;Q--)(M=I[Q])&&(K=(z<3?M(K):z>3?M(E,R,K):M(E,R))||K);return z>3&&K&&Object.defineProperty(E,R,K),K},v=this&&this.__param||function(I,E){return function(R,B){E(R,B,I)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const d=c(2584),_=c(7116),S=c(2015),x=c(844),g=c(482),h=c(8437),o=c(8460),s=c(643),l=c(511),p=c(3734),w=c(2585),C=c(1480),k=c(6242),y=c(6351),b=c(5941),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2},O=131072;function P(I,E){if(I>24)return E.setWinLines||!1;switch(I){case 1:return!!E.restoreWin;case 2:return!!E.minimizeWin;case 3:return!!E.setWinPosition;case 4:return!!E.setWinSizePixels;case 5:return!!E.raiseWin;case 6:return!!E.lowerWin;case 7:return!!E.refreshWin;case 8:return!!E.setWinSizeChars;case 9:return!!E.maximizeWin;case 10:return!!E.fullscreenWin;case 11:return!!E.getWinState;case 13:return!!E.getWinPosition;case 14:return!!E.getWinSizePixels;case 15:return!!E.getScreenSizePixels;case 16:return!!E.getCellSizePixels;case 18:return!!E.getWinSizeChars;case 19:return!!E.getScreenSizeChars;case 20:return!!E.getIconTitle;case 21:return!!E.getWinTitle;case 22:return!!E.pushTitle;case 23:return!!E.popTitle;case 24:return!!E.setWinLines}return!1}var A;(function(I){I[I.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",I[I.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(A||(a.WindowsOptionsReportType=A={}));let j=0;class U extends x.Disposable{getAttrData(){return this._curAttrData}constructor(E,R,B,M,z,K,Q,J,N=new S.EscapeSequenceParser){super(),this._bufferService=E,this._charsetService=R,this._coreService=B,this._logService=M,this._optionsService=z,this._oscLinkService=K,this._coreMouseService=Q,this._unicodeService=J,this._parser=N,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new g.StringToUtf32,this._utf8Decoder=new g.Utf8ToUtf32,this._workCell=new l.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new o.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new o.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new o.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new o.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new o.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new o.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new o.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new o.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new o.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new o.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new o.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new o.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new o.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new W(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(D=>this._activeBuffer=D.activeBuffer)),this._parser.setCsiHandlerFallback((D,$)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(D),params:$.toArray()})}),this._parser.setEscHandlerFallback(D=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(D)})}),this._parser.setExecuteHandlerFallback(D=>{this._logService.debug("Unknown EXECUTE code: ",{code:D})}),this._parser.setOscHandlerFallback((D,$,F)=>{this._logService.debug("Unknown OSC code: ",{identifier:D,action:$,data:F})}),this._parser.setDcsHandlerFallback((D,$,F)=>{$==="HOOK"&&(F=F.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(D),action:$,payload:F})}),this._parser.setPrintHandler((D,$,F)=>this.print(D,$,F)),this._parser.registerCsiHandler({final:"@"},D=>this.insertChars(D)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},D=>this.scrollLeft(D)),this._parser.registerCsiHandler({final:"A"},D=>this.cursorUp(D)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},D=>this.scrollRight(D)),this._parser.registerCsiHandler({final:"B"},D=>this.cursorDown(D)),this._parser.registerCsiHandler({final:"C"},D=>this.cursorForward(D)),this._parser.registerCsiHandler({final:"D"},D=>this.cursorBackward(D)),this._parser.registerCsiHandler({final:"E"},D=>this.cursorNextLine(D)),this._parser.registerCsiHandler({final:"F"},D=>this.cursorPrecedingLine(D)),this._parser.registerCsiHandler({final:"G"},D=>this.cursorCharAbsolute(D)),this._parser.registerCsiHandler({final:"H"},D=>this.cursorPosition(D)),this._parser.registerCsiHandler({final:"I"},D=>this.cursorForwardTab(D)),this._parser.registerCsiHandler({final:"J"},D=>this.eraseInDisplay(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},D=>this.eraseInDisplay(D,!0)),this._parser.registerCsiHandler({final:"K"},D=>this.eraseInLine(D,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},D=>this.eraseInLine(D,!0)),this._parser.registerCsiHandler({final:"L"},D=>this.insertLines(D)),this._parser.registerCsiHandler({final:"M"},D=>this.deleteLines(D)),this._parser.registerCsiHandler({final:"P"},D=>this.deleteChars(D)),this._parser.registerCsiHandler({final:"S"},D=>this.scrollUp(D)),this._parser.registerCsiHandler({final:"T"},D=>this.scrollDown(D)),this._parser.registerCsiHandler({final:"X"},D=>this.eraseChars(D)),this._parser.registerCsiHandler({final:"Z"},D=>this.cursorBackwardTab(D)),this._parser.registerCsiHandler({final:"`"},D=>this.charPosAbsolute(D)),this._parser.registerCsiHandler({final:"a"},D=>this.hPositionRelative(D)),this._parser.registerCsiHandler({final:"b"},D=>this.repeatPrecedingCharacter(D)),this._parser.registerCsiHandler({final:"c"},D=>this.sendDeviceAttributesPrimary(D)),this._parser.registerCsiHandler({prefix:">",final:"c"},D=>this.sendDeviceAttributesSecondary(D)),this._parser.registerCsiHandler({final:"d"},D=>this.linePosAbsolute(D)),this._parser.registerCsiHandler({final:"e"},D=>this.vPositionRelative(D)),this._parser.registerCsiHandler({final:"f"},D=>this.hVPosition(D)),this._parser.registerCsiHandler({final:"g"},D=>this.tabClear(D)),this._parser.registerCsiHandler({final:"h"},D=>this.setMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"h"},D=>this.setModePrivate(D)),this._parser.registerCsiHandler({final:"l"},D=>this.resetMode(D)),this._parser.registerCsiHandler({prefix:"?",final:"l"},D=>this.resetModePrivate(D)),this._parser.registerCsiHandler({final:"m"},D=>this.charAttributes(D)),this._parser.registerCsiHandler({final:"n"},D=>this.deviceStatus(D)),this._parser.registerCsiHandler({prefix:"?",final:"n"},D=>this.deviceStatusPrivate(D)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},D=>this.softReset(D)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},D=>this.setCursorStyle(D)),this._parser.registerCsiHandler({final:"r"},D=>this.setScrollRegion(D)),this._parser.registerCsiHandler({final:"s"},D=>this.saveCursor(D)),this._parser.registerCsiHandler({final:"t"},D=>this.windowOptions(D)),this._parser.registerCsiHandler({final:"u"},D=>this.restoreCursor(D)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},D=>this.insertColumns(D)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},D=>this.deleteColumns(D)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},D=>this.selectProtected(D)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},D=>this.requestMode(D,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},D=>this.requestMode(D,!1)),this._parser.setExecuteHandler(d.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(d.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(d.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(d.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(d.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(d.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(d.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(d.C1.IND,()=>this.index()),this._parser.setExecuteHandler(d.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(d.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(D=>(this.setTitle(D),this.setIconName(D),!0))),this._parser.registerOscHandler(1,new k.OscHandler(D=>this.setIconName(D))),this._parser.registerOscHandler(2,new k.OscHandler(D=>this.setTitle(D))),this._parser.registerOscHandler(4,new k.OscHandler(D=>this.setOrReportIndexedColor(D))),this._parser.registerOscHandler(8,new k.OscHandler(D=>this.setHyperlink(D))),this._parser.registerOscHandler(10,new k.OscHandler(D=>this.setOrReportFgColor(D))),this._parser.registerOscHandler(11,new k.OscHandler(D=>this.setOrReportBgColor(D))),this._parser.registerOscHandler(12,new k.OscHandler(D=>this.setOrReportCursorColor(D))),this._parser.registerOscHandler(104,new k.OscHandler(D=>this.restoreIndexedColor(D))),this._parser.registerOscHandler(110,new k.OscHandler(D=>this.restoreFgColor(D))),this._parser.registerOscHandler(111,new k.OscHandler(D=>this.restoreBgColor(D))),this._parser.registerOscHandler(112,new k.OscHandler(D=>this.restoreCursorColor(D))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const D in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:D},()=>this.selectCharset("("+D)),this._parser.registerEscHandler({intermediates:")",final:D},()=>this.selectCharset(")"+D)),this._parser.registerEscHandler({intermediates:"*",final:D},()=>this.selectCharset("*"+D)),this._parser.registerEscHandler({intermediates:"+",final:D},()=>this.selectCharset("+"+D)),this._parser.registerEscHandler({intermediates:"-",final:D},()=>this.selectCharset("-"+D)),this._parser.registerEscHandler({intermediates:".",final:D},()=>this.selectCharset("."+D)),this._parser.registerEscHandler({intermediates:"/",final:D},()=>this.selectCharset("/"+D));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(D=>(this._logService.error("Parsing error: ",D),D)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new y.DcsHandler((D,$)=>this.requestStatusString(D,$)))}_preserveStack(E,R,B,M){this._parseStack.paused=!0,this._parseStack.cursorStartX=E,this._parseStack.cursorStartY=R,this._parseStack.decodedLength=B,this._parseStack.position=M}_logSlowResolvingAsync(E){this._logService.logLevel<=w.LogLevelEnum.WARN&&Promise.race([E,new Promise((R,B)=>setTimeout(()=>B("#SLOW_TIMEOUT"),5e3))]).catch(R=>{if(R!=="#SLOW_TIMEOUT")throw R;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(E,R){let B,M=this._activeBuffer.x,z=this._activeBuffer.y,K=0;const Q=this._parseStack.paused;if(Q){if(B=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,R))return this._logSlowResolvingAsync(B),B;M=this._parseStack.cursorStartX,z=this._parseStack.cursorStartY,this._parseStack.paused=!1,E.length>O&&(K=this._parseStack.position+O)}if(this._logService.logLevel<=w.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof E=="string"?` "${E}"`:` "${Array.prototype.map.call(E,D=>String.fromCharCode(D)).join("")}"`),typeof E=="string"?E.split("").map(D=>D.charCodeAt(0)):E),this._parseBuffer.length<E.length&&this._parseBuffer.length<O&&(this._parseBuffer=new Uint32Array(Math.min(E.length,O))),Q||this._dirtyRowTracker.clearRange(),E.length>O)for(let D=K;D<E.length;D+=O){const $=D+O<E.length?D+O:E.length,F=typeof E=="string"?this._stringDecoder.decode(E.substring(D,$),this._parseBuffer):this._utf8Decoder.decode(E.subarray(D,$),this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,F))return this._preserveStack(M,z,F,D),this._logSlowResolvingAsync(B),B}else if(!Q){const D=typeof E=="string"?this._stringDecoder.decode(E,this._parseBuffer):this._utf8Decoder.decode(E,this._parseBuffer);if(B=this._parser.parse(this._parseBuffer,D))return this._preserveStack(M,z,D,0),this._logSlowResolvingAsync(B),B}this._activeBuffer.x===M&&this._activeBuffer.y===z||this._onCursorMove.fire();const J=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),N=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);N<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(N,this._bufferService.rows-1),Math.min(J,this._bufferService.rows-1))}print(E,R,B){let M,z;const K=this._charsetService.charset,Q=this._optionsService.rawOptions.screenReaderMode,J=this._bufferService.cols,N=this._coreService.decPrivateModes.wraparound,D=this._coreService.modes.insertMode,$=this._curAttrData;let F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&B-R>0&&F.getWidth(this._activeBuffer.x-1)===2&&F.setCellFromCodepoint(this._activeBuffer.x-1,0,1,$);let X=this._parser.precedingJoinState;for(let q=R;q<B;++q){if(M=E[q],M<127&&K){const Me=K[String.fromCharCode(M)];Me&&(M=Me.charCodeAt(0))}const re=this._unicodeService.charProperties(M,X);z=C.UnicodeService.extractWidth(re);const pe=C.UnicodeService.extractShouldJoin(re),_e=pe?C.UnicodeService.extractWidth(X):0;if(X=re,Q&&this._onA11yChar.fire((0,g.stringFromCodePoint)(M)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+z-_e>J){if(N){const Me=F;let Z=this._activeBuffer.x-_e;for(this._activeBuffer.x=_e,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),F=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),_e>0&&F instanceof h.BufferLine&&F.copyCellsFrom(Me,Z,0,_e,!1);Z<J;)Me.setCellFromCodepoint(Z++,0,1,$)}else if(this._activeBuffer.x=J-1,z===2)continue}if(pe&&this._activeBuffer.x){const Me=F.getWidth(this._activeBuffer.x-1)?1:2;F.addCodepointToCell(this._activeBuffer.x-Me,M,z);for(let Z=z-_e;--Z>=0;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}else if(D&&(F.insertCells(this._activeBuffer.x,z-_e,this._activeBuffer.getNullCell($)),F.getWidth(J-1)===2&&F.setCellFromCodepoint(J-1,s.NULL_CELL_CODE,s.NULL_CELL_WIDTH,$)),F.setCellFromCodepoint(this._activeBuffer.x++,M,z,$),z>0)for(;--z;)F.setCellFromCodepoint(this._activeBuffer.x++,0,0,$)}this._parser.precedingJoinState=X,this._activeBuffer.x<J&&B-R>0&&F.getWidth(this._activeBuffer.x)===0&&!F.hasContent(this._activeBuffer.x)&&F.setCellFromCodepoint(this._activeBuffer.x,0,1,$),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(E,R){return E.final!=="t"||E.prefix||E.intermediates?this._parser.registerCsiHandler(E,R):this._parser.registerCsiHandler(E,B=>!P(B.params[0],this._optionsService.rawOptions.windowOptions)||R(B))}registerDcsHandler(E,R){return this._parser.registerDcsHandler(E,new y.DcsHandler(R))}registerEscHandler(E,R){return this._parser.registerEscHandler(E,R)}registerOscHandler(E,R){return this._parser.registerOscHandler(E,new k.OscHandler(R))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var E;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&((E=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))!=null&&E.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);R.hasWidth(this._activeBuffer.x)&&!R.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const E=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-E),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(E=this._bufferService.cols-1){this._activeBuffer.x=Math.min(E,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(E,R){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=E,this._activeBuffer.y=this._activeBuffer.scrollTop+R):(this._activeBuffer.x=E,this._activeBuffer.y=R),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(E,R){this._restrictCursor(),this._setCursor(this._activeBuffer.x+E,this._activeBuffer.y+R)}cursorUp(E){const R=this._activeBuffer.y-this._activeBuffer.scrollTop;return R>=0?this._moveCursor(0,-Math.min(R,E.params[0]||1)):this._moveCursor(0,-(E.params[0]||1)),!0}cursorDown(E){const R=this._activeBuffer.scrollBottom-this._activeBuffer.y;return R>=0?this._moveCursor(0,Math.min(R,E.params[0]||1)):this._moveCursor(0,E.params[0]||1),!0}cursorForward(E){return this._moveCursor(E.params[0]||1,0),!0}cursorBackward(E){return this._moveCursor(-(E.params[0]||1),0),!0}cursorNextLine(E){return this.cursorDown(E),this._activeBuffer.x=0,!0}cursorPrecedingLine(E){return this.cursorUp(E),this._activeBuffer.x=0,!0}cursorCharAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(E){return this._setCursor(E.length>=2?(E.params[1]||1)-1:0,(E.params[0]||1)-1),!0}charPosAbsolute(E){return this._setCursor((E.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(E){return this._moveCursor(E.params[0]||1,0),!0}linePosAbsolute(E){return this._setCursor(this._activeBuffer.x,(E.params[0]||1)-1),!0}vPositionRelative(E){return this._moveCursor(0,E.params[0]||1),!0}hVPosition(E){return this.cursorPosition(E),!0}tabClear(E){const R=E.params[0];return R===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:R===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=E.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(E){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let R=E.params[0]||1;for(;R--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(E){const R=E.params[0];return R===1&&(this._curAttrData.bg|=536870912),R!==2&&R!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(E,R,B,M=!1,z=!1){const K=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);K.replaceCells(R,B,this._activeBuffer.getNullCell(this._eraseAttrData()),z),M&&(K.isWrapped=!1)}_resetBufferLine(E,R=!1){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+E);B&&(B.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),R),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+E),B.isWrapped=!1)}eraseInDisplay(E,R=!1){let B;switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);B<this._bufferService.rows;B++)this._resetBufferLine(B,R);this._dirtyRowTracker.markDirty(B);break;case 1:for(B=this._activeBuffer.y,this._dirtyRowTracker.markDirty(B),this._eraseInBufferLine(B,0,this._activeBuffer.x+1,!0,R),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(B+1).isWrapped=!1);B--;)this._resetBufferLine(B,R);this._dirtyRowTracker.markDirty(0);break;case 2:for(B=this._bufferService.rows,this._dirtyRowTracker.markDirty(B-1);B--;)this._resetBufferLine(B,R);this._dirtyRowTracker.markDirty(0);break;case 3:const M=this._activeBuffer.lines.length-this._bufferService.rows;M>0&&(this._activeBuffer.lines.trimStart(M),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-M,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-M,0),this._onScroll.fire(0))}return!0}eraseInLine(E,R=!1){switch(this._restrictCursor(this._bufferService.cols),E.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,R);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,R);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,R)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(E){this._restrictCursor();let R=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y,M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,z=this._bufferService.rows-1+this._activeBuffer.ybase-M+1;for(;R--;)this._activeBuffer.lines.splice(z-1,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(E){this._restrictCursor();let R=E.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const B=this._activeBuffer.ybase+this._activeBuffer.y;let M;for(M=this._bufferService.rows-1-this._activeBuffer.scrollBottom,M=this._bufferService.rows-1+this._activeBuffer.ybase-M;R--;)this._activeBuffer.lines.splice(B,1),this._activeBuffer.lines.splice(M,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.insertCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.deleteCells(this._activeBuffer.x,E.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(E){let R=E.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(E){let R=E.params[0]||1;for(;R--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(h.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);M.deleteCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);M.insertCells(0,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);M.insertCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(E){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const R=E.params[0]||1;for(let B=this._activeBuffer.scrollTop;B<=this._activeBuffer.scrollBottom;++B){const M=this._activeBuffer.lines.get(this._activeBuffer.ybase+B);M.deleteCells(this._activeBuffer.x,R,this._activeBuffer.getNullCell(this._eraseAttrData())),M.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(E){this._restrictCursor();const R=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return R&&(R.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(E.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(E){const R=this._parser.precedingJoinState;if(!R)return!0;const B=E.params[0]||1,M=C.UnicodeService.extractWidth(R),z=this._activeBuffer.x-M,K=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(z),Q=new Uint32Array(K.length*B);let J=0;for(let D=0;D<K.length;){const $=K.codePointAt(D)||0;Q[J++]=$,D+=$>65535?2:1}let N=J;for(let D=1;D<B;++D)Q.copyWithin(N,0,J),N+=J;return this.print(Q,0,N),!0}sendDeviceAttributesPrimary(E){return E.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(d.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(d.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(E){return E.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(d.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(d.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(E.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(d.C0.ESC+"[>83;40003;0c")),!0}_is(E){return(this._optionsService.rawOptions.termName+"").indexOf(E)===0}setMode(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(E){for(let R=0;R<E.length;R++)switch(E.params[R]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),E.params[R]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(E,R){const B=this._coreService.decPrivateModes,{activeProtocol:M,activeEncoding:z}=this._coreMouseService,K=this._coreService,{buffers:Q,cols:J}=this._bufferService,{active:N,alt:D}=Q,$=this._optionsService.rawOptions,F=pe=>pe?1:2,X=E.params[0];return q=X,re=R?X===2?4:X===4?F(K.modes.insertMode):X===12?3:X===20?F($.convertEol):0:X===1?F(B.applicationCursorKeys):X===3?$.windowOptions.setWinLines?J===80?2:J===132?1:0:0:X===6?F(B.origin):X===7?F(B.wraparound):X===8?3:X===9?F(M==="X10"):X===12?F($.cursorBlink):X===25?F(!K.isCursorHidden):X===45?F(B.reverseWraparound):X===66?F(B.applicationKeypad):X===67?4:X===1e3?F(M==="VT200"):X===1002?F(M==="DRAG"):X===1003?F(M==="ANY"):X===1004?F(B.sendFocus):X===1005?4:X===1006?F(z==="SGR"):X===1015?4:X===1016?F(z==="SGR_PIXELS"):X===1048?1:X===47||X===1047||X===1049?F(N===D):X===2004?F(B.bracketedPasteMode):0,K.triggerDataEvent(`${d.C0.ESC}[${R?"":"?"}${q};${re}$y`),!0;var q,re}_updateAttrColor(E,R,B,M,z){return R===2?(E|=50331648,E&=-16777216,E|=p.AttributeData.fromColorRGB([B,M,z])):R===5&&(E&=-50331904,E|=33554432|255&B),E}_extractColor(E,R,B){const M=[0,0,-1,0,0,0];let z=0,K=0;do{if(M[K+z]=E.params[R+K],E.hasSubParams(R+K)){const Q=E.getSubParams(R+K);let J=0;do M[1]===5&&(z=1),M[K+J+1+z]=Q[J];while(++J<Q.length&&J+K+1+z<M.length);break}if(M[1]===5&&K+z>=2||M[1]===2&&K+z>=5)break;M[1]&&(z=1)}while(++K+R<E.length&&K+z<M.length);for(let Q=2;Q<M.length;++Q)M[Q]===-1&&(M[Q]=0);switch(M[0]){case 38:B.fg=this._updateAttrColor(B.fg,M[1],M[3],M[4],M[5]);break;case 48:B.bg=this._updateAttrColor(B.bg,M[1],M[3],M[4],M[5]);break;case 58:B.extended=B.extended.clone(),B.extended.underlineColor=this._updateAttrColor(B.extended.underlineColor,M[1],M[3],M[4],M[5])}return K}_processUnderline(E,R){R.extended=R.extended.clone(),(!~E||E>5)&&(E=1),R.extended.underlineStyle=E,R.fg|=268435456,E===0&&(R.fg&=-268435457),R.updateExtended()}_processSGR0(E){E.fg=h.DEFAULT_ATTR_DATA.fg,E.bg=h.DEFAULT_ATTR_DATA.bg,E.extended=E.extended.clone(),E.extended.underlineStyle=0,E.extended.underlineColor&=-67108864,E.updateExtended()}charAttributes(E){if(E.length===1&&E.params[0]===0)return this._processSGR0(this._curAttrData),!0;const R=E.length;let B;const M=this._curAttrData;for(let z=0;z<R;z++)B=E.params[z],B>=30&&B<=37?(M.fg&=-50331904,M.fg|=16777216|B-30):B>=40&&B<=47?(M.bg&=-50331904,M.bg|=16777216|B-40):B>=90&&B<=97?(M.fg&=-50331904,M.fg|=16777224|B-90):B>=100&&B<=107?(M.bg&=-50331904,M.bg|=16777224|B-100):B===0?this._processSGR0(M):B===1?M.fg|=134217728:B===3?M.bg|=67108864:B===4?(M.fg|=268435456,this._processUnderline(E.hasSubParams(z)?E.getSubParams(z)[0]:1,M)):B===5?M.fg|=536870912:B===7?M.fg|=67108864:B===8?M.fg|=1073741824:B===9?M.fg|=2147483648:B===2?M.bg|=134217728:B===21?this._processUnderline(2,M):B===22?(M.fg&=-134217729,M.bg&=-134217729):B===23?M.bg&=-67108865:B===24?(M.fg&=-268435457,this._processUnderline(0,M)):B===25?M.fg&=-536870913:B===27?M.fg&=-67108865:B===28?M.fg&=-1073741825:B===29?M.fg&=2147483647:B===39?(M.fg&=-67108864,M.fg|=16777215&h.DEFAULT_ATTR_DATA.fg):B===49?(M.bg&=-67108864,M.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):B===38||B===48||B===58?z+=this._extractColor(E,z,M):B===53?M.bg|=1073741824:B===55?M.bg&=-1073741825:B===59?(M.extended=M.extended.clone(),M.extended.underlineColor=-1,M.updateExtended()):B===100?(M.fg&=-67108864,M.fg|=16777215&h.DEFAULT_ATTR_DATA.fg,M.bg&=-67108864,M.bg|=16777215&h.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",B);return!0}deviceStatus(E){switch(E.params[0]){case 5:this._coreService.triggerDataEvent(`${d.C0.ESC}[0n`);break;case 6:const R=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[${R};${B}R`)}return!0}deviceStatusPrivate(E){if(E.params[0]===6){const R=this._activeBuffer.y+1,B=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${d.C0.ESC}[?${R};${B}R`)}return!0}softReset(E){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(E){const R=E.params[0]||1;switch(R){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const B=R%2==1;return this._optionsService.options.cursorBlink=B,!0}setScrollRegion(E){const R=E.params[0]||1;let B;return(E.length<2||(B=E.params[1])>this._bufferService.rows||B===0)&&(B=this._bufferService.rows),B>R&&(this._activeBuffer.scrollTop=R-1,this._activeBuffer.scrollBottom=B-1,this._setCursor(0,0)),!0}windowOptions(E){if(!P(E.params[0],this._optionsService.rawOptions.windowOptions))return!0;const R=E.length>1?E.params[1]:0;switch(E.params[0]){case 14:R!==2&&this._onRequestWindowsOptionsReport.fire(A.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(A.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${d.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:R!==0&&R!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),R!==0&&R!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:R!==0&&R!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),R!==0&&R!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(E){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(E){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(E){return this._windowTitle=E,this._onTitleChange.fire(E),!0}setIconName(E){return this._iconName=E,!0}setOrReportIndexedColor(E){const R=[],B=E.split(";");for(;B.length>1;){const M=B.shift(),z=B.shift();if(/^\d+$/.exec(M)){const K=parseInt(M);if(H(K))if(z==="?")R.push({type:0,index:K});else{const Q=(0,b.parseColor)(z);Q&&R.push({type:1,index:K,color:Q})}}}return R.length&&this._onColor.fire(R),!0}setHyperlink(E){const R=E.split(";");return!(R.length<2)&&(R[1]?this._createHyperlink(R[0],R[1]):!R[0]&&this._finishHyperlink())}_createHyperlink(E,R){this._getCurrentLinkId()&&this._finishHyperlink();const B=E.split(":");let M;const z=B.findIndex(K=>K.startsWith("id="));return z!==-1&&(M=B[z].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:M,uri:R}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(E,R){const B=E.split(";");for(let M=0;M<B.length&&!(R>=this._specialColors.length);++M,++R)if(B[M]==="?")this._onColor.fire([{type:0,index:this._specialColors[R]}]);else{const z=(0,b.parseColor)(B[M]);z&&this._onColor.fire([{type:1,index:this._specialColors[R],color:z}])}return!0}setOrReportFgColor(E){return this._setOrReportSpecialColor(E,0)}setOrReportBgColor(E){return this._setOrReportSpecialColor(E,1)}setOrReportCursorColor(E){return this._setOrReportSpecialColor(E,2)}restoreIndexedColor(E){if(!E)return this._onColor.fire([{type:2}]),!0;const R=[],B=E.split(";");for(let M=0;M<B.length;++M)if(/^\d+$/.exec(B[M])){const z=parseInt(B[M]);H(z)&&R.push({type:2,index:z})}return R.length&&this._onColor.fire(R),!0}restoreFgColor(E){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(E){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(E){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(E){return E.length!==2?(this.selectDefaultCharset(),!0):(E[0]==="/"||this._charsetService.setgCharset(T[E[0]],_.CHARSETS[E[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const E=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,E,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=h.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=h.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(E){return this._charsetService.setgLevel(E),!0}screenAlignmentPattern(){const E=new l.CellData;E.content=4194373,E.fg=this._curAttrData.fg,E.bg=this._curAttrData.bg,this._setCursor(0,0);for(let R=0;R<this._bufferService.rows;++R){const B=this._activeBuffer.ybase+this._activeBuffer.y+R,M=this._activeBuffer.lines.get(B);M&&(M.fill(E),M.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(E,R){const B=this._bufferService.buffer,M=this._optionsService.rawOptions;return(z=>(this._coreService.triggerDataEvent(`${d.C0.ESC}${z}${d.C0.ESC}\\`),!0))(E==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:E==='"p'?'P1$r61;1"p':E==="r"?`P1$r${B.scrollTop+1};${B.scrollBottom+1}r`:E==="m"?"P1$r0m":E===" q"?`P1$r${{block:2,underline:4,bar:6}[M.cursorStyle]-(M.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(E,R){this._dirtyRowTracker.markRangeDirty(E,R)}}a.InputHandler=U;let W=class{constructor(I){this._bufferService=I,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(I){I<this.start?this.start=I:I>this.end&&(this.end=I)}markRangeDirty(I,E){I>E&&(j=I,I=E,E=j),I<this.start&&(this.start=I),E>this.end&&(this.end=E)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function H(I){return 0<=I&&I<256}W=f([v(0,w.IBufferService)],W)},844:(m,a)=>{function c(f){for(const v of f)v.dispose();f.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const f of this._disposables)f.dispose();this._disposables.length=0}register(f){return this._disposables.push(f),f}unregister(f){const v=this._disposables.indexOf(f);v!==-1&&this._disposables.splice(v,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(f){var v;this._isDisposed||f===this._value||((v=this._value)==null||v.dispose(),this._value=f)}clear(){this.value=void 0}dispose(){var f;this._isDisposed=!0,(f=this._value)==null||f.dispose(),this._value=void 0}},a.toDisposable=function(f){return{dispose:f}},a.disposeArray=c,a.getDisposeArrayDisposable=function(f){return{dispose:()=>c(f)}}},1505:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class c{constructor(){this._data={}}set(v,d,_){this._data[v]||(this._data[v]={}),this._data[v][d]=_}get(v,d){return this._data[v]?this._data[v][d]:void 0}clear(){this._data={}}}a.TwoKeyMap=c,a.FourKeyMap=class{constructor(){this._data=new c}set(f,v,d,_,S){this._data.get(f,v)||this._data.set(f,v,new c),this._data.get(f,v).set(d,_,S)}get(f,v,d,_){var S;return(S=this._data.get(f,v))==null?void 0:S.get(d,_)}clear(){this._data.clear()}}},6114:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof process<"u"&&"title"in process;const c=a.isNode?"node":navigator.userAgent,f=a.isNode?"node":navigator.platform;a.isFirefox=c.includes("Firefox"),a.isLegacyEdge=c.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(c),a.getSafariVersion=function(){if(!a.isSafari)return 0;const v=c.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(f),a.isIpad=f==="iPad",a.isIphone=f==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(f),a.isLinux=f.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(c)},6106:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let c=0;a.SortedList=class{constructor(f){this._getKey=f,this._array=[]}clear(){this._array.length=0}insert(f){this._array.length!==0?(c=this._search(this._getKey(f)),this._array.splice(c,0,f)):this._array.push(f)}delete(f){if(this._array.length===0)return!1;const v=this._getKey(f);if(v===void 0||(c=this._search(v),c===-1)||this._getKey(this._array[c])!==v)return!1;do if(this._array[c]===f)return this._array.splice(c,1),!0;while(++c<this._array.length&&this._getKey(this._array[c])===v);return!1}*getKeyIterator(f){if(this._array.length!==0&&(c=this._search(f),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===f))do yield this._array[c];while(++c<this._array.length&&this._getKey(this._array[c])===f)}forEachByKey(f,v){if(this._array.length!==0&&(c=this._search(f),!(c<0||c>=this._array.length)&&this._getKey(this._array[c])===f))do v(this._array[c]);while(++c<this._array.length&&this._getKey(this._array[c])===f)}values(){return[...this._array].values()}_search(f){let v=0,d=this._array.length-1;for(;d>=v;){let _=v+d>>1;const S=this._getKey(this._array[_]);if(S>f)d=_-1;else{if(!(S<f)){for(;_>0&&this._getKey(this._array[_-1])===f;)_--;return _}v=_+1}}return v}}},7226:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const f=c(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let x=0,g=0,h=S.timeRemaining(),o=0;for(;this._i<this._tasks.length;){if(x=Date.now(),this._tasks[this._i]()||this._i++,x=Math.max(1,Date.now()-x),g=Math.max(x,g),o=S.timeRemaining(),1.5*g>o)return h-x<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(h-x))}ms`),void this._start();h=o}this.clear()}}class d extends v{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const x=Date.now()+S;return{timeRemaining:()=>Math.max(0,x-Date.now())}}}a.PriorityTaskQueue=d,a.IdleTaskQueue=!f.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:d,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const f=c(643);a.updateWindowsModeWrappedState=function(v){const d=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),_=d==null?void 0:d.get(v.cols-1),S=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);S&&_&&(S.isWrapped=_[f.CHAR_DATA_CODE_INDEX]!==f.NULL_CELL_CODE&&_[f.CHAR_DATA_CODE_INDEX]!==f.WHITESPACE_CELL_CODE)}},3734:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class c{constructor(){this.fg=0,this.bg=0,this.extended=new f}static toColorRGB(d){return[d>>>16&255,d>>>8&255,255&d]}static fromColorRGB(d){return(255&d[0])<<16|(255&d[1])<<8|255&d[2]}clone(){const d=new c;return d.fg=this.fg,d.bg=this.bg,d.extended=this.extended.clone(),d}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}a.AttributeData=c;class f{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(d){this._ext=d}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(d){this._ext&=-469762049,this._ext|=d<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(d){this._ext&=-67108864,this._ext|=67108863&d}get urlId(){return this._urlId}set urlId(d){this._urlId=d}get underlineVariantOffset(){const d=(3758096384&this._ext)>>29;return d<0?4294967288^d:d}set underlineVariantOffset(d){this._ext&=536870911,this._ext|=d<<29&3758096384}constructor(d=0,_=0){this._ext=0,this._urlId=0,this._ext=d,this._urlId=_}clone(){return new f(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=f},9092:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const f=c(6349),v=c(7226),d=c(3734),_=c(8437),S=c(4634),x=c(511),g=c(643),h=c(4863),o=c(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(s,l,p){this._hasScrollback=s,this._optionsService=l,this._bufferService=p,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=o.DEFAULT_CHARSET,this.markers=[],this._nullCell=x.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=x.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(s){return s?(this._nullCell.fg=s.fg,this._nullCell.bg=s.bg,this._nullCell.extended=s.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new d.ExtendedAttrs),this._nullCell}getWhitespaceCell(s){return s?(this._whitespaceCell.fg=s.fg,this._whitespaceCell.bg=s.bg,this._whitespaceCell.extended=s.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new d.ExtendedAttrs),this._whitespaceCell}getBlankLine(s,l){return new _.BufferLine(this._bufferService.cols,this.getNullCell(s),l)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const s=this.ybase+this.y-this.ydisp;return s>=0&&s<this._rows}_getCorrectBufferLength(s){if(!this._hasScrollback)return s;const l=s+this._optionsService.rawOptions.scrollback;return l>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:l}fillViewportRows(s){if(this.lines.length===0){s===void 0&&(s=_.DEFAULT_ATTR_DATA);let l=this._rows;for(;l--;)this.lines.push(this.getBlankLine(s))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new f.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(s,l){const p=this.getNullCell(_.DEFAULT_ATTR_DATA);let w=0;const C=this._getCorrectBufferLength(l);if(C>this.lines.maxLength&&(this.lines.maxLength=C),this.lines.length>0){if(this._cols<s)for(let y=0;y<this.lines.length;y++)w+=+this.lines.get(y).resize(s,p);let k=0;if(this._rows<l)for(let y=this._rows;y<l;y++)this.lines.length<l+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(s,p)):this.ybase>0&&this.lines.length<=this.ybase+this.y+k+1?(this.ybase--,k++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(s,p)));else for(let y=this._rows;y>l;y--)this.lines.length>l+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(C<this.lines.maxLength){const y=this.lines.length-C;y>0&&(this.lines.trimStart(y),this.ybase=Math.max(this.ybase-y,0),this.ydisp=Math.max(this.ydisp-y,0),this.savedY=Math.max(this.savedY-y,0)),this.lines.maxLength=C}this.x=Math.min(this.x,s-1),this.y=Math.min(this.y,l-1),k&&(this.y+=k),this.savedX=Math.min(this.savedX,s-1),this.scrollTop=0}if(this.scrollBottom=l-1,this._isReflowEnabled&&(this._reflow(s,l),this._cols>s))for(let k=0;k<this.lines.length;k++)w+=+this.lines.get(k).resize(s,p);this._cols=s,this._rows=l,this._memoryCleanupQueue.clear(),w>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let s=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,s=!1);let l=0;for(;this._memoryCleanupPosition<this.lines.length;)if(l+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),l>100)return!0;return s}get _isReflowEnabled(){const s=this._optionsService.rawOptions.windowsPty;return s&&s.buildNumber?this._hasScrollback&&s.backend==="conpty"&&s.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(s,l){this._cols!==s&&(s>this._cols?this._reflowLarger(s,l):this._reflowSmaller(s,l))}_reflowLarger(s,l){const p=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,s,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(p.length>0){const w=(0,S.reflowLargerCreateNewLayout)(this.lines,p);(0,S.reflowLargerApplyNewLayout)(this.lines,w.layout),this._reflowLargerAdjustViewport(s,l,w.countRemoved)}}_reflowLargerAdjustViewport(s,l,p){const w=this.getNullCell(_.DEFAULT_ATTR_DATA);let C=p;for(;C-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<l&&this.lines.push(new _.BufferLine(s,w))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-p,0)}_reflowSmaller(s,l){const p=this.getNullCell(_.DEFAULT_ATTR_DATA),w=[];let C=0;for(let k=this.lines.length-1;k>=0;k--){let y=this.lines.get(k);if(!y||!y.isWrapped&&y.getTrimmedLength()<=s)continue;const b=[y];for(;y.isWrapped&&k>0;)y=this.lines.get(--k),b.unshift(y);const T=this.ybase+this.y;if(T>=k&&T<k+b.length)continue;const O=b[b.length-1].getTrimmedLength(),P=(0,S.reflowSmallerGetNewLineLengths)(b,this._cols,s),A=P.length-b.length;let j;j=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);const U=[];for(let B=0;B<A;B++){const M=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);U.push(M)}U.length>0&&(w.push({start:k+b.length+C,newLines:U}),C+=U.length),b.push(...U);let W=P.length-1,H=P[W];H===0&&(W--,H=P[W]);let I=b.length-A-1,E=O;for(;I>=0;){const B=Math.min(E,H);if(b[W]===void 0)break;if(b[W].copyCellsFrom(b[I],E-B,H-B,B,!0),H-=B,H===0&&(W--,H=P[W]),E-=B,E===0){I--;const M=Math.max(I,0);E=(0,S.getWrappedLineTrimmedLength)(b,M,this._cols)}}for(let B=0;B<b.length;B++)P[B]<s&&b[B].setCell(P[B],p);let R=A-j;for(;R-- >0;)this.ybase===0?this.y<l-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+C)-l&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+l-1)}if(w.length>0){const k=[],y=[];for(let W=0;W<this.lines.length;W++)y.push(this.lines.get(W));const b=this.lines.length;let T=b-1,O=0,P=w[O];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+C);let A=0;for(let W=Math.min(this.lines.maxLength-1,b+C-1);W>=0;W--)if(P&&P.start>T+A){for(let H=P.newLines.length-1;H>=0;H--)this.lines.set(W--,P.newLines[H]);W++,k.push({index:T+1,amount:P.newLines.length}),A+=P.newLines.length,P=w[++O]}else this.lines.set(W,y[T--]);let j=0;for(let W=k.length-1;W>=0;W--)k[W].index+=j,this.lines.onInsertEmitter.fire(k[W]),j+=k[W].amount;const U=Math.max(0,b+C-this.lines.maxLength);U>0&&this.lines.onTrimEmitter.fire(U)}}translateBufferLineToString(s,l,p=0,w){const C=this.lines.get(s);return C?C.translateToString(l,p,w):""}getWrappedRangeForLine(s){let l=s,p=s;for(;l>0&&this.lines.get(l).isWrapped;)l--;for(;p+1<this.lines.length&&this.lines.get(p+1).isWrapped;)p++;return{first:l,last:p}}setupTabStops(s){for(s!=null?this.tabs[s]||(s=this.prevStop(s)):(this.tabs={},s=0);s<this._cols;s+=this._optionsService.rawOptions.tabStopWidth)this.tabs[s]=!0}prevStop(s){for(s==null&&(s=this.x);!this.tabs[--s]&&s>0;);return s>=this._cols?this._cols-1:s<0?0:s}nextStop(s){for(s==null&&(s=this.x);!this.tabs[++s]&&s<this._cols;);return s>=this._cols?this._cols-1:s<0?0:s}clearMarkers(s){this._isClearing=!0;for(let l=0;l<this.markers.length;l++)this.markers[l].line===s&&(this.markers[l].dispose(),this.markers.splice(l--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].dispose(),this.markers.splice(s--,1);this._isClearing=!1}addMarker(s){const l=new h.Marker(s);return this.markers.push(l),l.register(this.lines.onTrim(p=>{l.line-=p,l.line<0&&l.dispose()})),l.register(this.lines.onInsert(p=>{l.line>=p.index&&(l.line+=p.amount)})),l.register(this.lines.onDelete(p=>{l.line>=p.index&&l.line<p.index+p.amount&&l.dispose(),l.line>p.index&&(l.line-=p.amount)})),l.register(l.onDispose(()=>this._removeMarker(l))),l}_removeMarker(s){this._isClearing||this.markers.splice(this.markers.indexOf(s),1)}}},8437:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const f=c(3734),v=c(511),d=c(643),_=c(482);a.DEFAULT_ATTR_DATA=Object.freeze(new f.AttributeData);let S=0;class x{constructor(h,o,s=!1){this.isWrapped=s,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);const l=o||v.CellData.fromCharData([0,d.NULL_CELL_CHAR,d.NULL_CELL_WIDTH,d.NULL_CELL_CODE]);for(let p=0;p<h;++p)this.setCell(p,l);this.length=h}get(h){const o=this._data[3*h+0],s=2097151&o;return[this._data[3*h+1],2097152&o?this._combined[h]:s?(0,_.stringFromCodePoint)(s):"",o>>22,2097152&o?this._combined[h].charCodeAt(this._combined[h].length-1):s]}set(h,o){this._data[3*h+1]=o[d.CHAR_DATA_ATTR_INDEX],o[d.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=o[1],this._data[3*h+0]=2097152|h|o[d.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=o[d.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|o[d.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(h){return this._data[3*h+0]>>22}hasWidth(h){return 12582912&this._data[3*h+0]}getFg(h){return this._data[3*h+1]}getBg(h){return this._data[3*h+2]}hasContent(h){return 4194303&this._data[3*h+0]}getCodePoint(h){const o=this._data[3*h+0];return 2097152&o?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&o}isCombined(h){return 2097152&this._data[3*h+0]}getString(h){const o=this._data[3*h+0];return 2097152&o?this._combined[h]:2097151&o?(0,_.stringFromCodePoint)(2097151&o):""}isProtected(h){return 536870912&this._data[3*h+2]}loadCell(h,o){return S=3*h,o.content=this._data[S+0],o.fg=this._data[S+1],o.bg=this._data[S+2],2097152&o.content&&(o.combinedData=this._combined[h]),268435456&o.bg&&(o.extended=this._extendedAttrs[h]),o}setCell(h,o){2097152&o.content&&(this._combined[h]=o.combinedData),268435456&o.bg&&(this._extendedAttrs[h]=o.extended),this._data[3*h+0]=o.content,this._data[3*h+1]=o.fg,this._data[3*h+2]=o.bg}setCellFromCodepoint(h,o,s,l){268435456&l.bg&&(this._extendedAttrs[h]=l.extended),this._data[3*h+0]=o|s<<22,this._data[3*h+1]=l.fg,this._data[3*h+2]=l.bg}addCodepointToCell(h,o,s){let l=this._data[3*h+0];2097152&l?this._combined[h]+=(0,_.stringFromCodePoint)(o):2097151&l?(this._combined[h]=(0,_.stringFromCodePoint)(2097151&l)+(0,_.stringFromCodePoint)(o),l&=-2097152,l|=2097152):l=o|4194304,s&&(l&=-12582913,l|=s<<22),this._data[3*h+0]=l}insertCells(h,o,s){if((h%=this.length)&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,s),o<this.length-h){const l=new v.CellData;for(let p=this.length-h-o-1;p>=0;--p)this.setCell(h+o+p,this.loadCell(h+p,l));for(let p=0;p<o;++p)this.setCell(h+p,s)}else for(let l=h;l<this.length;++l)this.setCell(l,s);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,s)}deleteCells(h,o,s){if(h%=this.length,o<this.length-h){const l=new v.CellData;for(let p=0;p<this.length-h-o;++p)this.setCell(h+p,this.loadCell(h+o+p,l));for(let p=this.length-o;p<this.length;++p)this.setCell(p,s)}else for(let l=h;l<this.length;++l)this.setCell(l,s);h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,s),this.getWidth(h)!==0||this.hasContent(h)||this.setCellFromCodepoint(h,0,1,s)}replaceCells(h,o,s,l=!1){if(l)for(h&&this.getWidth(h-1)===2&&!this.isProtected(h-1)&&this.setCellFromCodepoint(h-1,0,1,s),o<this.length&&this.getWidth(o-1)===2&&!this.isProtected(o)&&this.setCellFromCodepoint(o,0,1,s);h<o&&h<this.length;)this.isProtected(h)||this.setCell(h,s),h++;else for(h&&this.getWidth(h-1)===2&&this.setCellFromCodepoint(h-1,0,1,s),o<this.length&&this.getWidth(o-1)===2&&this.setCellFromCodepoint(o,0,1,s);h<o&&h<this.length;)this.setCell(h++,s)}resize(h,o){if(h===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const s=3*h;if(h>this.length){if(this._data.buffer.byteLength>=4*s)this._data=new Uint32Array(this._data.buffer,0,s);else{const l=new Uint32Array(s);l.set(this._data),this._data=l}for(let l=this.length;l<h;++l)this.setCell(l,o)}else{this._data=this._data.subarray(0,s);const l=Object.keys(this._combined);for(let w=0;w<l.length;w++){const C=parseInt(l[w],10);C>=h&&delete this._combined[C]}const p=Object.keys(this._extendedAttrs);for(let w=0;w<p.length;w++){const C=parseInt(p[w],10);C>=h&&delete this._extendedAttrs[C]}}return this.length=h,4*s*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const h=new Uint32Array(this._data.length);return h.set(this._data),this._data=h,1}return 0}fill(h,o=!1){if(o)for(let s=0;s<this.length;++s)this.isProtected(s)||this.setCell(s,h);else{this._combined={},this._extendedAttrs={};for(let s=0;s<this.length;++s)this.setCell(s,h)}}copyFrom(h){this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={};for(const o in h._combined)this._combined[o]=h._combined[o];this._extendedAttrs={};for(const o in h._extendedAttrs)this._extendedAttrs[o]=h._extendedAttrs[o];this.isWrapped=h.isWrapped}clone(){const h=new x(0);h._data=new Uint32Array(this._data),h.length=this.length;for(const o in this._combined)h._combined[o]=this._combined[o];for(const o in this._extendedAttrs)h._extendedAttrs[o]=this._extendedAttrs[o];return h.isWrapped=this.isWrapped,h}getTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0}getNoBgTrimmedLength(){for(let h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0]||50331648&this._data[3*h+2])return h+(this._data[3*h+0]>>22);return 0}copyCellsFrom(h,o,s,l,p){const w=h._data;if(p)for(let k=l-1;k>=0;k--){for(let y=0;y<3;y++)this._data[3*(s+k)+y]=w[3*(o+k)+y];268435456&w[3*(o+k)+2]&&(this._extendedAttrs[s+k]=h._extendedAttrs[o+k])}else for(let k=0;k<l;k++){for(let y=0;y<3;y++)this._data[3*(s+k)+y]=w[3*(o+k)+y];268435456&w[3*(o+k)+2]&&(this._extendedAttrs[s+k]=h._extendedAttrs[o+k])}const C=Object.keys(h._combined);for(let k=0;k<C.length;k++){const y=parseInt(C[k],10);y>=o&&(this._combined[y-o+s]=h._combined[y])}}translateToString(h,o,s,l){o=o??0,s=s??this.length,h&&(s=Math.min(s,this.getTrimmedLength())),l&&(l.length=0);let p="";for(;o<s;){const w=this._data[3*o+0],C=2097151&w,k=2097152&w?this._combined[o]:C?(0,_.stringFromCodePoint)(C):d.WHITESPACE_CELL_CHAR;if(p+=k,l)for(let y=0;y<k.length;++y)l.push(o);o+=w>>22||1}return l&&l.push(o),p}}a.BufferLine=x},4841:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(c,f){if(c.start.y>c.end.y)throw new Error(`Buffer range end (${c.end.x}, ${c.end.y}) cannot be before start (${c.start.x}, ${c.start.y})`);return f*(c.end.y-c.start.y)+(c.end.x-c.start.x+1)}},4634:(m,a)=>{function c(f,v,d){if(v===f.length-1)return f[v].getTrimmedLength();const _=!f[v].hasContent(d-1)&&f[v].getWidth(d-1)===1,S=f[v+1].getWidth(0)===2;return _&&S?d-1:d}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(f,v,d,_,S){const x=[];for(let g=0;g<f.length-1;g++){let h=g,o=f.get(++h);if(!o.isWrapped)continue;const s=[f.get(g)];for(;h<f.length&&o.isWrapped;)s.push(o),o=f.get(++h);if(_>=g&&_<h){g+=s.length-1;continue}let l=0,p=c(s,l,v),w=1,C=0;for(;w<s.length;){const y=c(s,w,v),b=y-C,T=d-p,O=Math.min(b,T);s[l].copyCellsFrom(s[w],C,p,O,!1),p+=O,p===d&&(l++,p=0),C+=O,C===y&&(w++,C=0),p===0&&l!==0&&s[l-1].getWidth(d-1)===2&&(s[l].copyCellsFrom(s[l-1],d-1,p++,1,!1),s[l-1].setCell(d-1,S))}s[l].replaceCells(p,d,S);let k=0;for(let y=s.length-1;y>0&&(y>l||s[y].getTrimmedLength()===0);y--)k++;k>0&&(x.push(g+s.length-k),x.push(k)),g+=s.length-1}return x},a.reflowLargerCreateNewLayout=function(f,v){const d=[];let _=0,S=v[_],x=0;for(let g=0;g<f.length;g++)if(S===g){const h=v[++_];f.onDeleteEmitter.fire({index:g-x,amount:h}),g+=h-1,x+=h,S=v[++_]}else d.push(g);return{layout:d,countRemoved:x}},a.reflowLargerApplyNewLayout=function(f,v){const d=[];for(let _=0;_<v.length;_++)d.push(f.get(v[_]));for(let _=0;_<d.length;_++)f.set(_,d[_]);f.length=v.length},a.reflowSmallerGetNewLineLengths=function(f,v,d){const _=[],S=f.map((o,s)=>c(f,s,v)).reduce((o,s)=>o+s);let x=0,g=0,h=0;for(;h<S;){if(S-h<d){_.push(S-h);break}x+=d;const o=c(f,g,v);x>o&&(x-=o,g++);const s=f[g].getWidth(x-1)===2;s&&x--;const l=s?d-1:d;_.push(l),h+=l}return _},a.getWrappedLineTrimmedLength=c},5295:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const f=c(8460),v=c(844),d=c(9092);class _ extends v.Disposable{constructor(x,g){super(),this._optionsService=x,this._bufferService=g,this._onBufferActivate=this.register(new f.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new d.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new d.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(x){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(x),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(x,g){this._normal.resize(x,g),this._alt.resize(x,g),this.setupTabStops(x)}setupTabStops(x){this._normal.setupTabStops(x),this._alt.setupTabStops(x)}}a.BufferSet=_},511:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const f=c(482),v=c(643),d=c(3734);class _ extends d.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new d.ExtendedAttrs,this.combinedData=""}static fromCharData(x){const g=new _;return g.setFromCharData(x),g}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,f.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(x){this.fg=x[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let g=!1;if(x[v.CHAR_DATA_CHAR_INDEX].length>2)g=!0;else if(x[v.CHAR_DATA_CHAR_INDEX].length===2){const h=x[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=h&&h<=56319){const o=x[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=o&&o<=57343?this.content=1024*(h-55296)+o-56320+65536|x[v.CHAR_DATA_WIDTH_INDEX]<<22:g=!0}else g=!0}else this.content=x[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|x[v.CHAR_DATA_WIDTH_INDEX]<<22;g&&(this.combinedData=x[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|x[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=_},643:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const f=c(8460),v=c(844);class d{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=d._nextId++,this._onDispose=this.register(new f.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}a.Marker=d,d._nextId=1},7116:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"◆",a:"▒",b:"␉",c:"␌",d:"␍",e:"␊",f:"°",g:"±",h:"␤",i:"␋",j:"┘",k:"┐",l:"┌",m:"└",n:"┼",o:"⎺",p:"⎻",q:"─",r:"⎼",s:"⎽",t:"├",u:"┤",v:"┴",w:"┬",x:"│",y:"≤",z:"≥","{":"π","|":"≠","}":"£","~":"·"},a.CHARSETS.A={"#":"£"},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"£","@":"¾","[":"ij","\\":"½","]":"|","{":"¨","|":"f","}":"¼","~":"´"},a.CHARSETS.C=a.CHARSETS[5]={"[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},a.CHARSETS.R={"#":"£","@":"à","[":"°","\\":"ç","]":"§","{":"é","|":"ù","}":"è","~":"¨"},a.CHARSETS.Q={"@":"à","[":"â","\\":"ç","]":"ê","^":"î","`":"ô","{":"é","|":"ù","}":"è","~":"û"},a.CHARSETS.K={"@":"§","[":"Ä","\\":"Ö","]":"Ü","{":"ä","|":"ö","}":"ü","~":"ß"},a.CHARSETS.Y={"#":"£","@":"§","[":"°","\\":"ç","]":"é","`":"ù","{":"à","|":"ò","}":"è","~":"ì"},a.CHARSETS.E=a.CHARSETS[6]={"@":"Ä","[":"Æ","\\":"Ø","]":"Å","^":"Ü","`":"ä","{":"æ","|":"ø","}":"å","~":"ü"},a.CHARSETS.Z={"#":"£","@":"§","[":"¡","\\":"Ñ","]":"¿","{":"°","|":"ñ","}":"ç"},a.CHARSETS.H=a.CHARSETS[7]={"@":"É","[":"Ä","\\":"Ö","]":"Å","^":"Ü","`":"é","{":"ä","|":"ö","}":"å","~":"ü"},a.CHARSETS["="]={"#":"ù","@":"à","[":"é","\\":"ç","]":"ê","^":"î",_:"è","`":"ô","{":"ä","|":"ö","}":"ü","~":"û"}},2584:(m,a)=>{var c,f,v;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(d){d.NUL="\0",d.SOH="",d.STX="",d.ETX="",d.EOT="",d.ENQ="",d.ACK="",d.BEL="\x07",d.BS="\b",d.HT="	",d.LF=`
`,d.VT="\v",d.FF="\f",d.CR="\r",d.SO="",d.SI="",d.DLE="",d.DC1="",d.DC2="",d.DC3="",d.DC4="",d.NAK="",d.SYN="",d.ETB="",d.CAN="",d.EM="",d.SUB="",d.ESC="\x1B",d.FS="",d.GS="",d.RS="",d.US="",d.SP=" ",d.DEL=""}(c||(a.C0=c={})),function(d){d.PAD="",d.HOP="",d.BPH="",d.NBH="",d.IND="",d.NEL="",d.SSA="",d.ESA="",d.HTS="",d.HTJ="",d.VTS="",d.PLD="",d.PLU="",d.RI="",d.SS2="",d.SS3="",d.DCS="",d.PU1="",d.PU2="",d.STS="",d.CCH="",d.MW="",d.SPA="",d.EPA="",d.SOS="",d.SGCI="",d.SCI="",d.CSI="",d.ST="",d.OSC="",d.PM="",d.APC=""}(f||(a.C1=f={})),function(d){d.ST=`${c.ESC}\\`}(v||(a.C1_ESCAPED=v={}))},7399:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const f=c(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(d,_,S,x){const g={type:0,cancel:!1,key:void 0},h=(d.shiftKey?1:0)|(d.altKey?2:0)|(d.ctrlKey?4:0)|(d.metaKey?8:0);switch(d.keyCode){case 0:d.key==="UIKeyInputUpArrow"?g.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A":d.key==="UIKeyInputLeftArrow"?g.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D":d.key==="UIKeyInputRightArrow"?g.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C":d.key==="UIKeyInputDownArrow"&&(g.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B");break;case 8:g.key=d.ctrlKey?"\b":f.C0.DEL,d.altKey&&(g.key=f.C0.ESC+g.key);break;case 9:if(d.shiftKey){g.key=f.C0.ESC+"[Z";break}g.key=f.C0.HT,g.cancel=!0;break;case 13:g.key=d.altKey?f.C0.ESC+f.C0.CR:f.C0.CR,g.cancel=!0;break;case 27:g.key=f.C0.ESC,d.altKey&&(g.key=f.C0.ESC+f.C0.ESC),g.cancel=!0;break;case 37:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"D",g.key===f.C0.ESC+"[1;3D"&&(g.key=f.C0.ESC+(S?"b":"[1;5D"))):g.key=_?f.C0.ESC+"OD":f.C0.ESC+"[D";break;case 39:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"C",g.key===f.C0.ESC+"[1;3C"&&(g.key=f.C0.ESC+(S?"f":"[1;5C"))):g.key=_?f.C0.ESC+"OC":f.C0.ESC+"[C";break;case 38:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"A",S||g.key!==f.C0.ESC+"[1;3A"||(g.key=f.C0.ESC+"[1;5A")):g.key=_?f.C0.ESC+"OA":f.C0.ESC+"[A";break;case 40:if(d.metaKey)break;h?(g.key=f.C0.ESC+"[1;"+(h+1)+"B",S||g.key!==f.C0.ESC+"[1;3B"||(g.key=f.C0.ESC+"[1;5B")):g.key=_?f.C0.ESC+"OB":f.C0.ESC+"[B";break;case 45:d.shiftKey||d.ctrlKey||(g.key=f.C0.ESC+"[2~");break;case 46:g.key=h?f.C0.ESC+"[3;"+(h+1)+"~":f.C0.ESC+"[3~";break;case 36:g.key=h?f.C0.ESC+"[1;"+(h+1)+"H":_?f.C0.ESC+"OH":f.C0.ESC+"[H";break;case 35:g.key=h?f.C0.ESC+"[1;"+(h+1)+"F":_?f.C0.ESC+"OF":f.C0.ESC+"[F";break;case 33:d.shiftKey?g.type=2:d.ctrlKey?g.key=f.C0.ESC+"[5;"+(h+1)+"~":g.key=f.C0.ESC+"[5~";break;case 34:d.shiftKey?g.type=3:d.ctrlKey?g.key=f.C0.ESC+"[6;"+(h+1)+"~":g.key=f.C0.ESC+"[6~";break;case 112:g.key=h?f.C0.ESC+"[1;"+(h+1)+"P":f.C0.ESC+"OP";break;case 113:g.key=h?f.C0.ESC+"[1;"+(h+1)+"Q":f.C0.ESC+"OQ";break;case 114:g.key=h?f.C0.ESC+"[1;"+(h+1)+"R":f.C0.ESC+"OR";break;case 115:g.key=h?f.C0.ESC+"[1;"+(h+1)+"S":f.C0.ESC+"OS";break;case 116:g.key=h?f.C0.ESC+"[15;"+(h+1)+"~":f.C0.ESC+"[15~";break;case 117:g.key=h?f.C0.ESC+"[17;"+(h+1)+"~":f.C0.ESC+"[17~";break;case 118:g.key=h?f.C0.ESC+"[18;"+(h+1)+"~":f.C0.ESC+"[18~";break;case 119:g.key=h?f.C0.ESC+"[19;"+(h+1)+"~":f.C0.ESC+"[19~";break;case 120:g.key=h?f.C0.ESC+"[20;"+(h+1)+"~":f.C0.ESC+"[20~";break;case 121:g.key=h?f.C0.ESC+"[21;"+(h+1)+"~":f.C0.ESC+"[21~";break;case 122:g.key=h?f.C0.ESC+"[23;"+(h+1)+"~":f.C0.ESC+"[23~";break;case 123:g.key=h?f.C0.ESC+"[24;"+(h+1)+"~":f.C0.ESC+"[24~";break;default:if(!d.ctrlKey||d.shiftKey||d.altKey||d.metaKey)if(S&&!x||!d.altKey||d.metaKey)!S||d.altKey||d.ctrlKey||d.shiftKey||!d.metaKey?d.key&&!d.ctrlKey&&!d.altKey&&!d.metaKey&&d.keyCode>=48&&d.key.length===1?g.key=d.key:d.key&&d.ctrlKey&&(d.key==="_"&&(g.key=f.C0.US),d.key==="@"&&(g.key=f.C0.NUL)):d.keyCode===65&&(g.type=1);else{const o=v[d.keyCode],s=o==null?void 0:o[d.shiftKey?1:0];if(s)g.key=f.C0.ESC+s;else if(d.keyCode>=65&&d.keyCode<=90){const l=d.ctrlKey?d.keyCode-64:d.keyCode+32;let p=String.fromCharCode(l);d.shiftKey&&(p=p.toUpperCase()),g.key=f.C0.ESC+p}else if(d.keyCode===32)g.key=f.C0.ESC+(d.ctrlKey?f.C0.NUL:" ");else if(d.key==="Dead"&&d.code.startsWith("Key")){let l=d.code.slice(3,4);d.shiftKey||(l=l.toLowerCase()),g.key=f.C0.ESC+l,g.cancel=!0}}else d.keyCode>=65&&d.keyCode<=90?g.key=String.fromCharCode(d.keyCode-64):d.keyCode===32?g.key=f.C0.NUL:d.keyCode>=51&&d.keyCode<=55?g.key=String.fromCharCode(d.keyCode-51+27):d.keyCode===56?g.key=f.C0.DEL:d.keyCode===219?g.key=f.C0.ESC:d.keyCode===220?g.key=f.C0.FS:d.keyCode===221&&(g.key=f.C0.GS)}return g}},482:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(c){return c>65535?(c-=65536,String.fromCharCode(55296+(c>>10))+String.fromCharCode(c%1024+56320)):String.fromCharCode(c)},a.utf32ToString=function(c,f=0,v=c.length){let d="";for(let _=f;_<v;++_){let S=c[_];S>65535?(S-=65536,d+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):d+=String.fromCharCode(S)}return d},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(c,f){const v=c.length;if(!v)return 0;let d=0,_=0;if(this._interim){const S=c.charCodeAt(_++);56320<=S&&S<=57343?f[d++]=1024*(this._interim-55296)+S-56320+65536:(f[d++]=this._interim,f[d++]=S),this._interim=0}for(let S=_;S<v;++S){const x=c.charCodeAt(S);if(55296<=x&&x<=56319){if(++S>=v)return this._interim=x,d;const g=c.charCodeAt(S);56320<=g&&g<=57343?f[d++]=1024*(x-55296)+g-56320+65536:(f[d++]=x,f[d++]=g)}else x!==65279&&(f[d++]=x)}return d}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(c,f){const v=c.length;if(!v)return 0;let d,_,S,x,g=0,h=0,o=0;if(this.interim[0]){let p=!1,w=this.interim[0];w&=(224&w)==192?31:(240&w)==224?15:7;let C,k=0;for(;(C=63&this.interim[++k])&&k<4;)w<<=6,w|=C;const y=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,b=y-k;for(;o<b;){if(o>=v)return 0;if(C=c[o++],(192&C)!=128){o--,p=!0;break}this.interim[k++]=C,w<<=6,w|=63&C}p||(y===2?w<128?o--:f[g++]=w:y===3?w<2048||w>=55296&&w<=57343||w===65279||(f[g++]=w):w<65536||w>1114111||(f[g++]=w)),this.interim.fill(0)}const s=v-4;let l=o;for(;l<v;){for(;!(!(l<s)||128&(d=c[l])||128&(_=c[l+1])||128&(S=c[l+2])||128&(x=c[l+3]));)f[g++]=d,f[g++]=_,f[g++]=S,f[g++]=x,l+=4;if(d=c[l++],d<128)f[g++]=d;else if((224&d)==192){if(l>=v)return this.interim[0]=d,g;if(_=c[l++],(192&_)!=128){l--;continue}if(h=(31&d)<<6|63&_,h<128){l--;continue}f[g++]=h}else if((240&d)==224){if(l>=v)return this.interim[0]=d,g;if(_=c[l++],(192&_)!=128){l--;continue}if(l>=v)return this.interim[0]=d,this.interim[1]=_,g;if(S=c[l++],(192&S)!=128){l--;continue}if(h=(15&d)<<12|(63&_)<<6|63&S,h<2048||h>=55296&&h<=57343||h===65279)continue;f[g++]=h}else if((248&d)==240){if(l>=v)return this.interim[0]=d,g;if(_=c[l++],(192&_)!=128){l--;continue}if(l>=v)return this.interim[0]=d,this.interim[1]=_,g;if(S=c[l++],(192&S)!=128){l--;continue}if(l>=v)return this.interim[0]=d,this.interim[1]=_,this.interim[2]=S,g;if(x=c[l++],(192&x)!=128){l--;continue}if(h=(7&d)<<18|(63&_)<<12|(63&S)<<6|63&x,h<65536||h>1114111)continue;f[g++]=h}}return g}}},225:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const f=c(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],d=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;a.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let S=0;S<v.length;++S)_.fill(0,v[S][0],v[S][1]+1)}}wcwidth(S){return S<32?0:S<127?1:S<65536?_[S]:function(x,g){let h,o=0,s=g.length-1;if(x<g[0][0]||x>g[s][1])return!1;for(;s>=o;)if(h=o+s>>1,x>g[h][1])o=h+1;else{if(!(x<g[h][0]))return!0;s=h-1}return!1}(S,d)?0:S>=131072&&S<=196605||S>=196608&&S<=262141?2:1}charProperties(S,x){let g=this.wcwidth(S),h=g===0&&x!==0;if(h){const o=f.UnicodeService.extractWidth(x);o===0?h=!1:o>g&&(g=o)}return f.UnicodeService.createPropertyValue(0,g,h)}}},5981:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const f=c(8460),v=c(844);class d extends v.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new f.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,x){if(x!==void 0&&this._syncCalls>x)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let g;for(this._isSyncWriting=!0;g=this._writeBuffer.shift();){this._action(g);const h=this._callbacks.shift();h&&h()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,x){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(x),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(x)}_innerWrite(S=0,x=!0){const g=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const h=this._writeBuffer[this._bufferOffset],o=this._action(h,x);if(o){const l=p=>Date.now()-g>=12?setTimeout(()=>this._innerWrite(0,p)):this._innerWrite(g,p);return void o.catch(p=>(queueMicrotask(()=>{throw p}),Promise.resolve(!1))).then(l)}const s=this._callbacks[this._bufferOffset];if(s&&s(),this._bufferOffset++,this._pendingData-=h.length,Date.now()-g>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=d},5941:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const c=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,f=/^[\da-f]+$/;function v(d,_){const S=d.toString(16),x=S.length<2?"0"+S:S;switch(_){case 4:return S[0];case 8:return x;case 12:return(x+x).slice(0,3);default:return x+x}}a.parseColor=function(d){if(!d)return;let _=d.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const S=c.exec(_);if(S){const x=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/x*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/x*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/x*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),f.exec(_)&&[3,6,9,12].includes(_.length))){const S=_.length/3,x=[0,0,0];for(let g=0;g<3;++g){const h=parseInt(_.slice(S*g,S*g+S),16);x[g]=S===1?h<<4:S===2?h:S===3?h>>4:h>>8}return x}},a.toRgbString=function(d,_=16){const[S,x,g]=d;return`rgb:${v(S,_)}/${v(x,_)}/${v(g,_)}`}},5770:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const f=c(482),v=c(8742),d=c(5770),_=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(x,g){this._handlers[x]===void 0&&(this._handlers[x]=[]);const h=this._handlers[x];return h.push(g),{dispose:()=>{const o=h.indexOf(g);o!==-1&&h.splice(o,1)}}}clearHandler(x){this._handlers[x]&&delete this._handlers[x]}setHandlerFallback(x){this._handlerFb=x}reset(){if(this._active.length)for(let x=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;x>=0;--x)this._active[x].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(x,g){if(this.reset(),this._ident=x,this._active=this._handlers[x]||_,this._active.length)for(let h=this._active.length-1;h>=0;h--)this._active[h].hook(g);else this._handlerFb(this._ident,"HOOK",g)}put(x,g,h){if(this._active.length)for(let o=this._active.length-1;o>=0;o--)this._active[o].put(x,g,h);else this._handlerFb(this._ident,"PUT",(0,f.utf32ToString)(x,g,h))}unhook(x,g=!0){if(this._active.length){let h=!1,o=this._active.length-1,s=!1;if(this._stack.paused&&(o=this._stack.loopPosition-1,h=g,s=this._stack.fallThrough,this._stack.paused=!1),!s&&h===!1){for(;o>=0&&(h=this._active[o].unhook(x),h!==!0);o--)if(h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!1,h;o--}for(;o>=0;o--)if(h=this._active[o].unhook(!1),h instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=o,this._stack.fallThrough=!0,h}else this._handlerFb(this._ident,"UNHOOK",x);this._active=_,this._ident=0}};const S=new v.Params;S.addParam(0),a.DcsHandler=class{constructor(x){this._handler=x,this._data="",this._params=S,this._hitLimit=!1}hook(x){this._params=x.length>1||x.params[0]?x.clone():S,this._data="",this._hitLimit=!1}put(x,g,h){this._hitLimit||(this._data+=(0,f.utf32ToString)(x,g,h),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(x){let g=!1;if(this._hitLimit)g=!1;else if(x&&(g=this._handler(this._data,this._params),g instanceof Promise))return g.then(h=>(this._params=S,this._data="",this._hitLimit=!1,h));return this._params=S,this._data="",this._hitLimit=!1,g}}},2015:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const f=c(844),v=c(8742),d=c(6242),_=c(6351);class S{constructor(o){this.table=new Uint8Array(o)}setDefault(o,s){this.table.fill(o<<4|s)}add(o,s,l,p){this.table[s<<8|o]=l<<4|p}addMany(o,s,l,p){for(let w=0;w<o.length;w++)this.table[s<<8|o[w]]=l<<4|p}}a.TransitionTable=S;const x=160;a.VT500_TRANSITION_TABLE=function(){const h=new S(4095),o=Array.apply(null,Array(256)).map((k,y)=>y),s=(k,y)=>o.slice(k,y),l=s(32,127),p=s(0,24);p.push(25),p.push.apply(p,s(28,32));const w=s(0,14);let C;for(C in h.setDefault(1,0),h.addMany(l,0,2,0),w)h.addMany([24,26,153,154],C,3,0),h.addMany(s(128,144),C,3,0),h.addMany(s(144,152),C,3,0),h.add(156,C,0,0),h.add(27,C,11,1),h.add(157,C,4,8),h.addMany([152,158,159],C,0,7),h.add(155,C,11,3),h.add(144,C,11,9);return h.addMany(p,0,3,0),h.addMany(p,1,3,1),h.add(127,1,0,1),h.addMany(p,8,0,8),h.addMany(p,3,3,3),h.add(127,3,0,3),h.addMany(p,4,3,4),h.add(127,4,0,4),h.addMany(p,6,3,6),h.addMany(p,5,3,5),h.add(127,5,0,5),h.addMany(p,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(l,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(s(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(l,7,0,7),h.addMany(p,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(s(64,127),3,7,0),h.addMany(s(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(s(48,60),4,8,4),h.addMany(s(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(s(32,64),6,0,6),h.add(127,6,0,6),h.addMany(s(64,127),6,0,0),h.addMany(s(32,48),3,9,5),h.addMany(s(32,48),5,9,5),h.addMany(s(48,64),5,0,6),h.addMany(s(64,127),5,7,0),h.addMany(s(32,48),4,9,5),h.addMany(s(32,48),1,9,2),h.addMany(s(32,48),2,9,2),h.addMany(s(48,127),2,10,0),h.addMany(s(48,80),1,10,0),h.addMany(s(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(s(96,127),1,10,0),h.add(80,1,11,9),h.addMany(p,9,0,9),h.add(127,9,0,9),h.addMany(s(28,32),9,0,9),h.addMany(s(32,48),9,9,12),h.addMany(s(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(p,11,0,11),h.addMany(s(32,128),11,0,11),h.addMany(s(28,32),11,0,11),h.addMany(p,10,0,10),h.add(127,10,0,10),h.addMany(s(28,32),10,0,10),h.addMany(s(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(s(32,48),10,9,12),h.addMany(p,12,0,12),h.add(127,12,0,12),h.addMany(s(28,32),12,0,12),h.addMany(s(32,48),12,9,12),h.addMany(s(48,64),12,0,11),h.addMany(s(64,127),12,12,13),h.addMany(s(64,127),10,12,13),h.addMany(s(64,127),9,12,13),h.addMany(p,13,13,13),h.addMany(l,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(x,0,2,0),h.add(x,8,5,8),h.add(x,6,0,6),h.add(x,11,0,11),h.add(x,13,13,13),h}();class g extends f.Disposable{constructor(o=a.VT500_TRANSITION_TABLE){super(),this._transitions=o,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(s,l,p)=>{},this._executeHandlerFb=s=>{},this._csiHandlerFb=(s,l)=>{},this._escHandlerFb=s=>{},this._errorHandlerFb=s=>s,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,f.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new d.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(o,s=[64,126]){let l=0;if(o.prefix){if(o.prefix.length>1)throw new Error("only one byte as prefix supported");if(l=o.prefix.charCodeAt(0),l&&60>l||l>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(o.intermediates){if(o.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let w=0;w<o.intermediates.length;++w){const C=o.intermediates.charCodeAt(w);if(32>C||C>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");l<<=8,l|=C}}if(o.final.length!==1)throw new Error("final must be a single byte");const p=o.final.charCodeAt(0);if(s[0]>p||p>s[1])throw new Error(`final must be in range ${s[0]} .. ${s[1]}`);return l<<=8,l|=p,l}identToString(o){const s=[];for(;o;)s.push(String.fromCharCode(255&o)),o>>=8;return s.reverse().join("")}setPrintHandler(o){this._printHandler=o}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(o,s){const l=this._identifier(o,[48,126]);this._escHandlers[l]===void 0&&(this._escHandlers[l]=[]);const p=this._escHandlers[l];return p.push(s),{dispose:()=>{const w=p.indexOf(s);w!==-1&&p.splice(w,1)}}}clearEscHandler(o){this._escHandlers[this._identifier(o,[48,126])]&&delete this._escHandlers[this._identifier(o,[48,126])]}setEscHandlerFallback(o){this._escHandlerFb=o}setExecuteHandler(o,s){this._executeHandlers[o.charCodeAt(0)]=s}clearExecuteHandler(o){this._executeHandlers[o.charCodeAt(0)]&&delete this._executeHandlers[o.charCodeAt(0)]}setExecuteHandlerFallback(o){this._executeHandlerFb=o}registerCsiHandler(o,s){const l=this._identifier(o);this._csiHandlers[l]===void 0&&(this._csiHandlers[l]=[]);const p=this._csiHandlers[l];return p.push(s),{dispose:()=>{const w=p.indexOf(s);w!==-1&&p.splice(w,1)}}}clearCsiHandler(o){this._csiHandlers[this._identifier(o)]&&delete this._csiHandlers[this._identifier(o)]}setCsiHandlerFallback(o){this._csiHandlerFb=o}registerDcsHandler(o,s){return this._dcsParser.registerHandler(this._identifier(o),s)}clearDcsHandler(o){this._dcsParser.clearHandler(this._identifier(o))}setDcsHandlerFallback(o){this._dcsParser.setHandlerFallback(o)}registerOscHandler(o,s){return this._oscParser.registerHandler(o,s)}clearOscHandler(o){this._oscParser.clearHandler(o)}setOscHandlerFallback(o){this._oscParser.setHandlerFallback(o)}setErrorHandler(o){this._errorHandler=o}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(o,s,l,p,w){this._parseStack.state=o,this._parseStack.handlers=s,this._parseStack.handlerPos=l,this._parseStack.transition=p,this._parseStack.chunkPos=w}parse(o,s,l){let p,w=0,C=0,k=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,k=this._parseStack.chunkPos+1;else{if(l===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const y=this._parseStack.handlers;let b=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(l===!1&&b>-1){for(;b>=0&&(p=y[b](this._params),p!==!0);b--)if(p instanceof Promise)return this._parseStack.handlerPos=b,p}this._parseStack.handlers=[];break;case 4:if(l===!1&&b>-1){for(;b>=0&&(p=y[b](),p!==!0);b--)if(p instanceof Promise)return this._parseStack.handlerPos=b,p}this._parseStack.handlers=[];break;case 6:if(w=o[this._parseStack.chunkPos],p=this._dcsParser.unhook(w!==24&&w!==26,l),p)return p;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(w=o[this._parseStack.chunkPos],p=this._oscParser.end(w!==24&&w!==26,l),p)return p;w===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,k=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let y=k;y<s;++y){switch(w=o[y],C=this._transitions.table[this.currentState<<8|(w<160?w:x)],C>>4){case 2:for(let A=y+1;;++A){if(A>=s||(w=o[A])<32||w>126&&w<x){this._printHandler(o,y,A),y=A-1;break}if(++A>=s||(w=o[A])<32||w>126&&w<x){this._printHandler(o,y,A),y=A-1;break}if(++A>=s||(w=o[A])<32||w>126&&w<x){this._printHandler(o,y,A),y=A-1;break}if(++A>=s||(w=o[A])<32||w>126&&w<x){this._printHandler(o,y,A),y=A-1;break}}break;case 3:this._executeHandlers[w]?this._executeHandlers[w]():this._executeHandlerFb(w),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:y,code:w,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const b=this._csiHandlers[this._collect<<8|w];let T=b?b.length-1:-1;for(;T>=0&&(p=b[T](this._params),p!==!0);T--)if(p instanceof Promise)return this._preserveStack(3,b,T,C,y),p;T<0&&this._csiHandlerFb(this._collect<<8|w,this._params),this.precedingJoinState=0;break;case 8:do switch(w){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(w-48)}while(++y<s&&(w=o[y])>47&&w<60);y--;break;case 9:this._collect<<=8,this._collect|=w;break;case 10:const O=this._escHandlers[this._collect<<8|w];let P=O?O.length-1:-1;for(;P>=0&&(p=O[P](),p!==!0);P--)if(p instanceof Promise)return this._preserveStack(4,O,P,C,y),p;P<0&&this._escHandlerFb(this._collect<<8|w),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|w,this._params);break;case 13:for(let A=y+1;;++A)if(A>=s||(w=o[A])===24||w===26||w===27||w>127&&w<x){this._dcsParser.put(o,y,A),y=A-1;break}break;case 14:if(p=this._dcsParser.unhook(w!==24&&w!==26),p)return this._preserveStack(6,[],0,C,y),p;w===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let A=y+1;;A++)if(A>=s||(w=o[A])<32||w>127&&w<x){this._oscParser.put(o,y,A),y=A-1;break}break;case 6:if(p=this._oscParser.end(w!==24&&w!==26),p)return this._preserveStack(5,[],0,C,y),p;w===27&&(C|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&C}}}a.EscapeSequenceParser=g},6242:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const f=c(5770),v=c(482),d=[];a.OscParser=class{constructor(){this._state=0,this._active=d,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,S){this._handlers[_]===void 0&&(this._handlers[_]=[]);const x=this._handlers[_];return x.push(S),{dispose:()=>{const g=x.indexOf(S);g!==-1&&x.splice(g,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=d}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=d,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||d,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,S,x){if(this._active.length)for(let g=this._active.length-1;g>=0;g--)this._active[g].put(_,S,x);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(_,S,x))}start(){this.reset(),this._state=1}put(_,S,x){if(this._state!==3){if(this._state===1)for(;S<x;){const g=_[S++];if(g===59){this._state=2,this._start();break}if(g<48||57<g)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+g-48}this._state===2&&x-S>0&&this._put(_,S,x)}}end(_,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let x=!1,g=this._active.length-1,h=!1;if(this._stack.paused&&(g=this._stack.loopPosition-1,x=S,h=this._stack.fallThrough,this._stack.paused=!1),!h&&x===!1){for(;g>=0&&(x=this._active[g].end(_),x!==!0);g--)if(x instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!1,x;g--}for(;g>=0;g--)if(x=this._active[g].end(!1),x instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=g,this._stack.fallThrough=!0,x}else this._handlerFb(this._id,"END",_);this._active=d,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,S,x){this._hitLimit||(this._data+=(0,v.utf32ToString)(_,S,x),this._data.length>f.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let S=!1;if(this._hitLimit)S=!1;else if(_&&(S=this._handler(this._data),S instanceof Promise))return S.then(x=>(this._data="",this._hitLimit=!1,x));return this._data="",this._hitLimit=!1,S}}},8742:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const c=2147483647;class f{static fromArray(d){const _=new f;if(!d.length)return _;for(let S=Array.isArray(d[0])?1:0;S<d.length;++S){const x=d[S];if(Array.isArray(x))for(let g=0;g<x.length;++g)_.addSubParam(x[g]);else _.addParam(x)}return _}constructor(d=32,_=32){if(this.maxLength=d,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(d),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(d),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const d=new f(this.maxLength,this.maxSubParamsLength);return d.params.set(this.params),d.length=this.length,d._subParams.set(this._subParams),d._subParamsLength=this._subParamsLength,d._subParamsIdx.set(this._subParamsIdx),d._rejectDigits=this._rejectDigits,d._rejectSubDigits=this._rejectSubDigits,d._digitIsSub=this._digitIsSub,d}toArray(){const d=[];for(let _=0;_<this.length;++_){d.push(this.params[_]);const S=this._subParamsIdx[_]>>8,x=255&this._subParamsIdx[_];x-S>0&&d.push(Array.prototype.slice.call(this._subParams,S,x))}return d}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(d){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=d>c?c:d}}addSubParam(d){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(d<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=d>c?c:d,this._subParamsIdx[this.length-1]++}}hasSubParams(d){return(255&this._subParamsIdx[d])-(this._subParamsIdx[d]>>8)>0}getSubParams(d){const _=this._subParamsIdx[d]>>8,S=255&this._subParamsIdx[d];return S-_>0?this._subParams.subarray(_,S):null}getSubParamsAll(){const d={};for(let _=0;_<this.length;++_){const S=this._subParamsIdx[_]>>8,x=255&this._subParamsIdx[_];x-S>0&&(d[_]=this._subParams.slice(S,x))}return d}addDigit(d){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,x=S[_-1];S[_-1]=~x?Math.min(10*x+d,c):d}}a.Params=f},5741:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let c=this._addons.length-1;c>=0;c--)this._addons[c].instance.dispose()}loadAddon(c,f){const v={instance:f,dispose:f.dispose,isDisposed:!1};this._addons.push(v),f.dispose=()=>this._wrappedAddonDispose(v),f.activate(c)}_wrappedAddonDispose(c){if(c.isDisposed)return;let f=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===c){f=v;break}if(f===-1)throw new Error("Could not dispose an addon that has not been loaded");c.isDisposed=!0,c.dispose.apply(c.instance),this._addons.splice(f,1)}}},8771:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const f=c(3785),v=c(511);a.BufferApiView=class{constructor(d,_){this._buffer=d,this.type=_}init(d){return this._buffer=d,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(d){const _=this._buffer.lines.get(d);if(_)return new f.BufferLineApiView(_)}getNullCell(){return new v.CellData}}},3785:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const f=c(511);a.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,d){if(!(v<0||v>=this._line.length))return d?(this._line.loadCell(v,d),d):this._line.loadCell(v,new f.CellData)}translateToString(v,d,_){return this._line.translateToString(v,d,_)}}},8285:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const f=c(8771),v=c(8460),d=c(844);class _ extends d.Disposable{constructor(x){super(),this._core=x,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new f.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new f.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=_},7975:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(c){this._core=c}registerCsiHandler(c,f){return this._core.registerCsiHandler(c,v=>f(v.toArray()))}addCsiHandler(c,f){return this.registerCsiHandler(c,f)}registerDcsHandler(c,f){return this._core.registerDcsHandler(c,(v,d)=>f(v,d.toArray()))}addDcsHandler(c,f){return this.registerDcsHandler(c,f)}registerEscHandler(c,f){return this._core.registerEscHandler(c,f)}addEscHandler(c,f){return this.registerEscHandler(c,f)}registerOscHandler(c,f){return this._core.registerOscHandler(c,f)}addOscHandler(c,f){return this.registerOscHandler(c,f)}}},7090:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(c){this._core=c}register(c){this._core.unicodeService.register(c)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(c){this._core.unicodeService.activeVersion=c}}},744:function(m,a,c){var f=this&&this.__decorate||function(h,o,s,l){var p,w=arguments.length,C=w<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(h,o,s,l);else for(var k=h.length-1;k>=0;k--)(p=h[k])&&(C=(w<3?p(C):w>3?p(o,s,C):p(o,s))||C);return w>3&&C&&Object.defineProperty(o,s,C),C},v=this&&this.__param||function(h,o){return function(s,l){o(s,l,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const d=c(8460),_=c(844),S=c(5295),x=c(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let g=a.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(h){super(),this.isUserScrolling=!1,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new d.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(h.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(h.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(h,this))}resize(h,o){this.cols=h,this.rows=o,this.buffers.resize(h,o),this._onResize.fire({cols:h,rows:o})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(h,o=!1){const s=this.buffer;let l;l=this._cachedBlankLine,l&&l.length===this.cols&&l.getFg(0)===h.fg&&l.getBg(0)===h.bg||(l=s.getBlankLine(h,o),this._cachedBlankLine=l),l.isWrapped=o;const p=s.ybase+s.scrollTop,w=s.ybase+s.scrollBottom;if(s.scrollTop===0){const C=s.lines.isFull;w===s.lines.length-1?C?s.lines.recycle().copyFrom(l):s.lines.push(l.clone()):s.lines.splice(w+1,0,l.clone()),C?this.isUserScrolling&&(s.ydisp=Math.max(s.ydisp-1,0)):(s.ybase++,this.isUserScrolling||s.ydisp++)}else{const C=w-p+1;s.lines.shiftElements(p+1,C-1,-1),s.lines.set(w,l.clone())}this.isUserScrolling||(s.ydisp=s.ybase),this._onScroll.fire(s.ydisp)}scrollLines(h,o,s){const l=this.buffer;if(h<0){if(l.ydisp===0)return;this.isUserScrolling=!0}else h+l.ydisp>=l.ybase&&(this.isUserScrolling=!1);const p=l.ydisp;l.ydisp=Math.max(Math.min(l.ydisp+h,l.ybase),0),p!==l.ydisp&&(o||this._onScroll.fire(l.ydisp))}};a.BufferService=g=f([v(0,x.IOptionsService)],g)},7994:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(c){this.glevel=c,this.charset=this._charsets[c]}setgCharset(c,f){this._charsets[c]=f,this.glevel===c&&(this.charset=f)}}},1753:function(m,a,c){var f=this&&this.__decorate||function(l,p,w,C){var k,y=arguments.length,b=y<3?p:C===null?C=Object.getOwnPropertyDescriptor(p,w):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(l,p,w,C);else for(var T=l.length-1;T>=0;T--)(k=l[T])&&(b=(y<3?k(b):y>3?k(p,w,b):k(p,w))||b);return y>3&&b&&Object.defineProperty(p,w,b),b},v=this&&this.__param||function(l,p){return function(w,C){p(w,C,l)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const d=c(2585),_=c(8460),S=c(844),x={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:l=>l.button!==4&&l.action===1&&(l.ctrl=!1,l.alt=!1,l.shift=!1,!0)},VT200:{events:19,restrict:l=>l.action!==32},DRAG:{events:23,restrict:l=>l.action!==32||l.button!==3},ANY:{events:31,restrict:l=>!0}};function g(l,p){let w=(l.ctrl?16:0)|(l.shift?4:0)|(l.alt?8:0);return l.button===4?(w|=64,w|=l.action):(w|=3&l.button,4&l.button&&(w|=64),8&l.button&&(w|=128),l.action===32?w|=32:l.action!==0||p||(w|=3)),w}const h=String.fromCharCode,o={DEFAULT:l=>{const p=[g(l,!1)+32,l.col+32,l.row+32];return p[0]>255||p[1]>255||p[2]>255?"":`\x1B[M${h(p[0])}${h(p[1])}${h(p[2])}`},SGR:l=>{const p=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${g(l,!0)};${l.col};${l.row}${p}`},SGR_PIXELS:l=>{const p=l.action===0&&l.button!==4?"m":"M";return`\x1B[<${g(l,!0)};${l.x};${l.y}${p}`}};let s=a.CoreMouseService=class extends S.Disposable{constructor(l,p){super(),this._bufferService=l,this._coreService=p,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const w of Object.keys(x))this.addProtocol(w,x[w]);for(const w of Object.keys(o))this.addEncoding(w,o[w]);this.reset()}addProtocol(l,p){this._protocols[l]=p}addEncoding(l,p){this._encodings[l]=p}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(l){if(!this._protocols[l])throw new Error(`unknown protocol "${l}"`);this._activeProtocol=l,this._onProtocolChange.fire(this._protocols[l].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(l){if(!this._encodings[l])throw new Error(`unknown encoding "${l}"`);this._activeEncoding=l}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(l){if(l.col<0||l.col>=this._bufferService.cols||l.row<0||l.row>=this._bufferService.rows||l.button===4&&l.action===32||l.button===3&&l.action!==32||l.button!==4&&(l.action===2||l.action===3)||(l.col++,l.row++,l.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,l,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(l))return!1;const p=this._encodings[this._activeEncoding](l);return p&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(p):this._coreService.triggerDataEvent(p,!0)),this._lastEvent=l,!0}explainEvents(l){return{down:!!(1&l),up:!!(2&l),drag:!!(4&l),move:!!(8&l),wheel:!!(16&l)}}_equalEvents(l,p,w){if(w){if(l.x!==p.x||l.y!==p.y)return!1}else if(l.col!==p.col||l.row!==p.row)return!1;return l.button===p.button&&l.action===p.action&&l.ctrl===p.ctrl&&l.alt===p.alt&&l.shift===p.shift}};a.CoreMouseService=s=f([v(0,d.IBufferService),v(1,d.ICoreService)],s)},6975:function(m,a,c){var f=this&&this.__decorate||function(s,l,p,w){var C,k=arguments.length,y=k<3?l:w===null?w=Object.getOwnPropertyDescriptor(l,p):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")y=Reflect.decorate(s,l,p,w);else for(var b=s.length-1;b>=0;b--)(C=s[b])&&(y=(k<3?C(y):k>3?C(l,p,y):C(l,p))||y);return k>3&&y&&Object.defineProperty(l,p,y),y},v=this&&this.__param||function(s,l){return function(p,w){l(p,w,s)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const d=c(1439),_=c(8460),S=c(844),x=c(2585),g=Object.freeze({insertMode:!1}),h=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let o=a.CoreService=class extends S.Disposable{constructor(s,l,p){super(),this._bufferService=s,this._logService=l,this._optionsService=p,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,d.clone)(g),this.decPrivateModes=(0,d.clone)(h)}reset(){this.modes=(0,d.clone)(g),this.decPrivateModes=(0,d.clone)(h)}triggerDataEvent(s,l=!1){if(this._optionsService.rawOptions.disableStdin)return;const p=this._bufferService.buffer;l&&this._optionsService.rawOptions.scrollOnUserInput&&p.ybase!==p.ydisp&&this._onRequestScrollToBottom.fire(),l&&this._onUserInput.fire(),this._logService.debug(`sending data "${s}"`,()=>s.split("").map(w=>w.charCodeAt(0))),this._onData.fire(s)}triggerBinaryEvent(s){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${s}"`,()=>s.split("").map(l=>l.charCodeAt(0))),this._onBinary.fire(s))}};a.CoreService=o=f([v(0,x.IBufferService),v(1,x.ILogService),v(2,x.IOptionsService)],o)},9074:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const f=c(8055),v=c(8460),d=c(844),_=c(6106);let S=0,x=0;class g extends d.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList(s=>s==null?void 0:s.marker.line),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,d.toDisposable)(()=>this.reset()))}registerDecoration(s){if(s.marker.isDisposed)return;const l=new h(s);if(l){const p=l.marker.onDispose(()=>l.dispose());l.onDispose(()=>{l&&(this._decorations.delete(l)&&this._onDecorationRemoved.fire(l),p.dispose())}),this._decorations.insert(l),this._onDecorationRegistered.fire(l)}return l}reset(){for(const s of this._decorations.values())s.dispose();this._decorations.clear()}*getDecorationsAtCell(s,l,p){let w=0,C=0;for(const k of this._decorations.getKeyIterator(l))w=k.options.x??0,C=w+(k.options.width??1),s>=w&&s<C&&(!p||(k.options.layer??"bottom")===p)&&(yield k)}forEachDecorationAtCell(s,l,p,w){this._decorations.forEachByKey(l,C=>{S=C.options.x??0,x=S+(C.options.width??1),s>=S&&s<x&&(!p||(C.options.layer??"bottom")===p)&&w(C)})}}a.DecorationService=g;class h extends d.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=f.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=f.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(s){super(),this.options=s,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=s.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const f=c(2585),v=c(8343);class d{constructor(...S){this._entries=new Map;for(const[x,g]of S)this.set(x,g)}set(S,x){const g=this._entries.get(S);return this._entries.set(S,x),g}forEach(S){for(const[x,g]of this._entries.entries())S(x,g)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}a.ServiceCollection=d,a.InstantiationService=class{constructor(){this._services=new d,this._services.set(f.IInstantiationService,this)}setService(_,S){this._services.set(_,S)}getService(_){return this._services.get(_)}createInstance(_,...S){const x=(0,v.getServiceDependencies)(_).sort((o,s)=>o.index-s.index),g=[];for(const o of x){const s=this._services.get(o.id);if(!s)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${o.id}.`);g.push(s)}const h=x.length>0?x[0].index:S.length;if(S.length!==h)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${h+1} conflicts with ${S.length} static arguments`);return new _(...S,...g)}}},7866:function(m,a,c){var f=this&&this.__decorate||function(h,o,s,l){var p,w=arguments.length,C=w<3?o:l===null?l=Object.getOwnPropertyDescriptor(o,s):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(h,o,s,l);else for(var k=h.length-1;k>=0;k--)(p=h[k])&&(C=(w<3?p(C):w>3?p(o,s,C):p(o,s))||C);return w>3&&C&&Object.defineProperty(o,s,C),C},v=this&&this.__param||function(h,o){return function(s,l){o(s,l,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const d=c(844),_=c(2585),S={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let x,g=a.LogService=class extends d.Disposable{get logLevel(){return this._logLevel}constructor(h){super(),this._optionsService=h,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),x=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(h){for(let o=0;o<h.length;o++)typeof h[o]=="function"&&(h[o]=h[o]())}_log(h,o,s){this._evalLazyOptionalParams(s),h.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+o,...s)}trace(h,...o){var s;this._logLevel<=_.LogLevelEnum.TRACE&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.trace.bind(this._optionsService.options.logger))??console.log,h,o)}debug(h,...o){var s;this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.debug.bind(this._optionsService.options.logger))??console.log,h,o)}info(h,...o){var s;this._logLevel<=_.LogLevelEnum.INFO&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.info.bind(this._optionsService.options.logger))??console.info,h,o)}warn(h,...o){var s;this._logLevel<=_.LogLevelEnum.WARN&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.warn.bind(this._optionsService.options.logger))??console.warn,h,o)}error(h,...o){var s;this._logLevel<=_.LogLevelEnum.ERROR&&this._log(((s=this._optionsService.options.logger)==null?void 0:s.error.bind(this._optionsService.options.logger))??console.error,h,o)}};a.LogService=g=f([v(0,_.IOptionsService)],g),a.setTraceLogger=function(h){x=h},a.traceCall=function(h,o,s){if(typeof s.value!="function")throw new Error("not supported");const l=s.value;s.value=function(...p){if(x.logLevel!==_.LogLevelEnum.TRACE)return l.apply(this,p);x.trace(`GlyphRenderer#${l.name}(${p.map(C=>JSON.stringify(C)).join(", ")})`);const w=l.apply(this,p);return x.trace(`GlyphRenderer#${l.name} return`,w),w}}},7302:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const f=c(8460),v=c(844),d=c(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:d.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends v.Disposable{constructor(g){super(),this._onOptionChange=this.register(new f.EventEmitter),this.onOptionChange=this._onOptionChange.event;const h={...a.DEFAULT_OPTIONS};for(const o in g)if(o in h)try{const s=g[o];h[o]=this._sanitizeAndValidateOption(o,s)}catch(s){console.error(s)}this.rawOptions=h,this.options={...h},this._setupOptions(),this.register((0,v.toDisposable)(()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null}))}onSpecificOptionChange(g,h){return this.onOptionChange(o=>{o===g&&h(this.rawOptions[g])})}onMultipleOptionChange(g,h){return this.onOptionChange(o=>{g.indexOf(o)!==-1&&h()})}_setupOptions(){const g=o=>{if(!(o in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);return this.rawOptions[o]},h=(o,s)=>{if(!(o in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${o}"`);s=this._sanitizeAndValidateOption(o,s),this.rawOptions[o]!==s&&(this.rawOptions[o]=s,this._onOptionChange.fire(o))};for(const o in this.rawOptions){const s={get:g.bind(this,o),set:h.bind(this,o)};Object.defineProperty(this.options,o,s)}}_sanitizeAndValidateOption(g,h){switch(g){case"cursorStyle":if(h||(h=a.DEFAULT_OPTIONS[g]),!function(o){return o==="block"||o==="underline"||o==="bar"}(h))throw new Error(`"${h}" is not a valid value for ${g}`);break;case"wordSeparator":h||(h=a.DEFAULT_OPTIONS[g]);break;case"fontWeight":case"fontWeightBold":if(typeof h=="number"&&1<=h&&h<=1e3)break;h=_.includes(h)?h:a.DEFAULT_OPTIONS[g];break;case"cursorWidth":h=Math.floor(h);case"lineHeight":case"tabStopWidth":if(h<1)throw new Error(`${g} cannot be less than 1, value: ${h}`);break;case"minimumContrastRatio":h=Math.max(1,Math.min(21,Math.round(10*h)/10));break;case"scrollback":if((h=Math.min(h,4294967295))<0)throw new Error(`${g} cannot be less than 0, value: ${h}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(h<=0)throw new Error(`${g} cannot be less than or equal to 0, value: ${h}`);break;case"rows":case"cols":if(!h&&h!==0)throw new Error(`${g} must be numeric, value: ${h}`);break;case"windowsPty":h=h??{}}return h}}a.OptionsService=S},2660:function(m,a,c){var f=this&&this.__decorate||function(S,x,g,h){var o,s=arguments.length,l=s<3?x:h===null?h=Object.getOwnPropertyDescriptor(x,g):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(S,x,g,h);else for(var p=S.length-1;p>=0;p--)(o=S[p])&&(l=(s<3?o(l):s>3?o(x,g,l):o(x,g))||l);return s>3&&l&&Object.defineProperty(x,g,l),l},v=this&&this.__param||function(S,x){return function(g,h){x(g,h,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const d=c(2585);let _=a.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const x=this._bufferService.buffer;if(S.id===void 0){const p=x.addMarker(x.ybase+x.y),w={data:S,id:this._nextId++,lines:[p]};return p.onDispose(()=>this._removeMarkerFromLink(w,p)),this._dataByLinkId.set(w.id,w),w.id}const g=S,h=this._getEntryIdKey(g),o=this._entriesWithId.get(h);if(o)return this.addLineToLink(o.id,x.ybase+x.y),o.id;const s=x.addMarker(x.ybase+x.y),l={id:this._nextId++,key:this._getEntryIdKey(g),data:g,lines:[s]};return s.onDispose(()=>this._removeMarkerFromLink(l,s)),this._entriesWithId.set(l.key,l),this._dataByLinkId.set(l.id,l),l.id}addLineToLink(S,x){const g=this._dataByLinkId.get(S);if(g&&g.lines.every(h=>h.line!==x)){const h=this._bufferService.buffer.addMarker(x);g.lines.push(h),h.onDispose(()=>this._removeMarkerFromLink(g,h))}}getLinkData(S){var x;return(x=this._dataByLinkId.get(S))==null?void 0:x.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,x){const g=S.lines.indexOf(x);g!==-1&&(S.lines.splice(g,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};a.OscLinkService=_=f([v(0,d.IBufferService)],_)},8343:(m,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const c="di$target",f="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(v){return v[f]||[]},a.createDecorator=function(v){if(a.serviceRegistry.has(v))return a.serviceRegistry.get(v);const d=function(_,S,x){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(g,h,o){h[c]===h?h[f].push({id:g,index:o}):(h[f]=[{id:g,index:o}],h[c]=h)})(d,_,x)};return d.toString=()=>v,a.serviceRegistry.set(v,d),d}},2585:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const f=c(8343);var v;a.IBufferService=(0,f.createDecorator)("BufferService"),a.ICoreMouseService=(0,f.createDecorator)("CoreMouseService"),a.ICoreService=(0,f.createDecorator)("CoreService"),a.ICharsetService=(0,f.createDecorator)("CharsetService"),a.IInstantiationService=(0,f.createDecorator)("InstantiationService"),function(d){d[d.TRACE=0]="TRACE",d[d.DEBUG=1]="DEBUG",d[d.INFO=2]="INFO",d[d.WARN=3]="WARN",d[d.ERROR=4]="ERROR",d[d.OFF=5]="OFF"}(v||(a.LogLevelEnum=v={})),a.ILogService=(0,f.createDecorator)("LogService"),a.IOptionsService=(0,f.createDecorator)("OptionsService"),a.IOscLinkService=(0,f.createDecorator)("OscLinkService"),a.IUnicodeService=(0,f.createDecorator)("UnicodeService"),a.IDecorationService=(0,f.createDecorator)("DecorationService")},1480:(m,a,c)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const f=c(8460),v=c(225);class d{static extractShouldJoin(S){return(1&S)!=0}static extractWidth(S){return S>>1&3}static extractCharKind(S){return S>>3}static createPropertyValue(S,x,g=!1){return(16777215&S)<<3|(3&x)<<1|(g?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new f.EventEmitter,this.onChange=this._onChange.event;const S=new v.UnicodeV6;this.register(S),this._active=S.version,this._activeProvider=S}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(S){if(!this._providers[S])throw new Error(`unknown Unicode version "${S}"`);this._active=S,this._activeProvider=this._providers[S],this._onChange.fire(S)}register(S){this._providers[S.version]=S}wcwidth(S){return this._activeProvider.wcwidth(S)}getStringCellWidth(S){let x=0,g=0;const h=S.length;for(let o=0;o<h;++o){let s=S.charCodeAt(o);if(55296<=s&&s<=56319){if(++o>=h)return x+this.wcwidth(s);const w=S.charCodeAt(o);56320<=w&&w<=57343?s=1024*(s-55296)+w-56320+65536:x+=this.wcwidth(w)}const l=this.charProperties(s,g);let p=d.extractWidth(l);d.extractShouldJoin(l)&&(p-=d.extractWidth(g)),x+=p,g=l}return x}charProperties(S,x){return this._activeProvider.charProperties(S,x)}}a.UnicodeService=d}},i={};function n(m){var a=i[m];if(a!==void 0)return a.exports;var c=i[m]={exports:{}};return r[m].call(c.exports,c,c.exports,n),c.exports}var u={};return(()=>{var m=u;Object.defineProperty(m,"__esModule",{value:!0}),m.Terminal=void 0;const a=n(9042),c=n(3236),f=n(844),v=n(5741),d=n(8285),_=n(7975),S=n(7090),x=["cols","rows"];class g extends f.Disposable{constructor(o){super(),this._core=this.register(new c.Terminal(o)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const s=p=>this._core.options[p],l=(p,w)=>{this._checkReadonlyOptions(p),this._core.options[p]=w};for(const p in this._core.options){const w={get:s.bind(this,p),set:l.bind(this,p)};Object.defineProperty(this._publicOptions,p,w)}}_checkReadonlyOptions(o){if(x.includes(o))throw new Error(`Option "${o}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new d.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const o=this._core.coreService.decPrivateModes;let s="none";switch(this._core.coreMouseService.activeProtocol){case"X10":s="x10";break;case"VT200":s="vt200";break;case"DRAG":s="drag";break;case"ANY":s="any"}return{applicationCursorKeysMode:o.applicationCursorKeys,applicationKeypadMode:o.applicationKeypad,bracketedPasteMode:o.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:s,originMode:o.origin,reverseWraparoundMode:o.reverseWraparound,sendFocusMode:o.sendFocus,wraparoundMode:o.wraparound}}get options(){return this._publicOptions}set options(o){for(const s in o)this._publicOptions[s]=o[s]}blur(){this._core.blur()}focus(){this._core.focus()}input(o,s=!0){this._core.input(o,s)}resize(o,s){this._verifyIntegers(o,s),this._core.resize(o,s)}open(o){this._core.open(o)}attachCustomKeyEventHandler(o){this._core.attachCustomKeyEventHandler(o)}attachCustomWheelEventHandler(o){this._core.attachCustomWheelEventHandler(o)}registerLinkProvider(o){return this._core.registerLinkProvider(o)}registerCharacterJoiner(o){return this._checkProposedApi(),this._core.registerCharacterJoiner(o)}deregisterCharacterJoiner(o){this._checkProposedApi(),this._core.deregisterCharacterJoiner(o)}registerMarker(o=0){return this._verifyIntegers(o),this._core.registerMarker(o)}registerDecoration(o){return this._checkProposedApi(),this._verifyPositiveIntegers(o.x??0,o.width??0,o.height??0),this._core.registerDecoration(o)}hasSelection(){return this._core.hasSelection()}select(o,s,l){this._verifyIntegers(o,s,l),this._core.select(o,s,l)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(o,s){this._verifyIntegers(o,s),this._core.selectLines(o,s)}dispose(){super.dispose()}scrollLines(o){this._verifyIntegers(o),this._core.scrollLines(o)}scrollPages(o){this._verifyIntegers(o),this._core.scrollPages(o)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(o){this._verifyIntegers(o),this._core.scrollToLine(o)}clear(){this._core.clear()}write(o,s){this._core.write(o,s)}writeln(o,s){this._core.write(o),this._core.write(`\r
`,s)}paste(o){this._core.paste(o)}refresh(o,s){this._verifyIntegers(o,s),this._core.refresh(o,s)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(o){this._addonManager.loadAddon(this,o)}static get strings(){return a}_verifyIntegers(...o){for(const s of o)if(s===1/0||isNaN(s)||s%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...o){for(const s of o)if(s&&(s===1/0||isNaN(s)||s%1!=0||s<0))throw new Error("This API only accepts positive integers")}}m.Terminal=g})(),u})())})(Iu);var Ka=Iu.exports,ju={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={};return(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){const n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;const u=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(u._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const n=this._terminal._core,u=n._renderService.dimensions;if(u.css.cell.width===0||u.css.cell.height===0)return;const m=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),c=parseInt(a.getPropertyValue("height")),f=Math.max(0,parseInt(a.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),d=c-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),_=f-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-m;return{cols:Math.max(2,Math.floor(_/u.css.cell.width)),rows:Math.max(1,Math.floor(d/u.css.cell.height))}}}})(),r})())})(ju);var B_=ju.exports,Hu={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(self,()=>(()=>{var r={6:(m,a)=>{function c(v){try{const d=new URL(v),_=d.password&&d.username?`${d.protocol}//${d.username}:${d.password}@${d.host}`:d.username?`${d.protocol}//${d.username}@${d.host}`:`${d.protocol}//${d.host}`;return v.toLocaleLowerCase().startsWith(_.toLocaleLowerCase())}catch{return!1}}Object.defineProperty(a,"__esModule",{value:!0}),a.LinkComputer=a.WebLinkProvider=void 0,a.WebLinkProvider=class{constructor(v,d,_,S={}){this._terminal=v,this._regex=d,this._handler=_,this._options=S}provideLinks(v,d){const _=f.computeLink(v,this._regex,this._terminal,this._handler);d(this._addCallbacks(_))}_addCallbacks(v){return v.map(d=>(d.leave=this._options.leave,d.hover=(_,S)=>{if(this._options.hover){const{range:x}=d;this._options.hover(_,S,x)}},d))}};class f{static computeLink(d,_,S,x){const g=new RegExp(_.source,(_.flags||"")+"g"),[h,o]=f._getWindowedLineStrings(d-1,S),s=h.join("");let l;const p=[];for(;l=g.exec(s);){const w=l[0];if(!c(w))continue;const[C,k]=f._mapStrIdx(S,o,0,l.index),[y,b]=f._mapStrIdx(S,C,k,w.length);if(C===-1||k===-1||y===-1||b===-1)continue;const T={start:{x:k+1,y:C+1},end:{x:b,y:y+1}};p.push({range:T,text:w,activate:x})}return p}static _getWindowedLineStrings(d,_){let S,x=d,g=d,h=0,o="";const s=[];if(S=_.buffer.active.getLine(d)){const l=S.translateToString(!0);if(S.isWrapped&&l[0]!==" "){for(h=0;(S=_.buffer.active.getLine(--x))&&h<2048&&(o=S.translateToString(!0),h+=o.length,s.push(o),S.isWrapped&&o.indexOf(" ")===-1););s.reverse()}for(s.push(l),h=0;(S=_.buffer.active.getLine(++g))&&S.isWrapped&&h<2048&&(o=S.translateToString(!0),h+=o.length,s.push(o),o.indexOf(" ")===-1););}return[s,x]}static _mapStrIdx(d,_,S,x){const g=d.buffer.active,h=g.getNullCell();let o=S;for(;x;){const s=g.getLine(_);if(!s)return[-1,-1];for(let l=o;l<s.length;++l){s.getCell(l,h);const p=h.getChars();if(h.getWidth()&&(x-=p.length||1,l===s.length-1&&p==="")){const w=g.getLine(_+1);w&&w.isWrapped&&(w.getCell(0,h),h.getWidth()===2&&(x+=1))}if(x<0)return[_,l]}_++,o=0}return[_,o]}}a.LinkComputer=f}},i={};function n(m){var a=i[m];if(a!==void 0)return a.exports;var c=i[m]={exports:{}};return r[m](c,c.exports,n),c.exports}var u={};return(()=>{var m=u;Object.defineProperty(m,"__esModule",{value:!0}),m.WebLinksAddon=void 0;const a=n(6),c=/(https?|HTTPS?):[/]{2}[^\s"'!*(){}|\\\^<>`]*[^\s"':,.!?{}|\\\^~\[\]`()<>]/;function f(v,d){const _=window.open();if(_){try{_.opener=null}catch{}_.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}m.WebLinksAddon=class{constructor(v=f,d={}){this._handler=v,this._options=d}activate(v){this._terminal=v;const d=this._options,_=d.urlRegex||c;this._linkProvider=this._terminal.registerLinkProvider(new a.WebLinkProvider(this._terminal,_,this._handler,d))}dispose(){var v;(v=this._linkProvider)==null||v.dispose()}}})(),u})())})(Hu);var O_=Hu.exports;const P_=({socket:e,username:t,onFullscreenChange:r})=>{const i=Y.useRef(null),n=Y.useRef(null),u=Y.useRef(null),[m,a]=Y.useState(!1),[c,f]=Y.useState(!1),[v,d]=Y.useState(!1);Y.useEffect(()=>{if(!e||!i.current)return;const h=new Ka.Terminal({fontSize:14,fontFamily:"monospace",cursorBlink:!0,theme:{background:"#000000",foreground:"#ffffff"}}),o=new B_.FitAddon,s=new O_.WebLinksAddon;h.loadAddon(o),h.loadAddon(s);try{h.open(i.current),console.log("Terminal opened successfully"),h.write(`\x1B[36m正在连接到容器...\x1B[0m\r
`),h.write(`\x1B[33m请稍候，正在准备您的Linux环境\x1B[0m\r
`),h.write(`\r
`),setTimeout(()=>{try{o.fit(),console.log("Terminal fitted, size:",h.cols,"x",h.rows)}catch(k){console.warn("Initial fit failed:",k)}},200)}catch(k){console.error("Terminal open failed:",k);return}n.current=h,u.current=o,h.onData(k=>{e.emit("terminal-input",k)}),e.on("terminal-output",k=>{console.log("收到终端输出:",k);try{h.hasReceivedData||(h.clear(),h.hasReceivedData=!0),h.write(k)}catch(y){console.error("写入终端失败:",y)}}),e.on("terminal-exit",()=>{h.write(`\r
\r
[终端会话已结束]\r
`)});const l=()=>{if(o&&h)try{o.fit(),e.emit("terminal-resize",{cols:h.cols,rows:h.rows})}catch(k){console.warn("Terminal resize failed:",k)}};window.addEventListener("resize",l);const p=k=>{if(k.ctrlKey&&k.key==="c"){k.preventDefault(),x();return}if(k.ctrlKey&&k.key==="v"){k.preventDefault(),g();return}if(k.ctrlKey&&k.shiftKey&&k.key==="C"){k.preventDefault(),x();return}if(k.ctrlKey&&k.shiftKey&&k.key==="V"){k.preventDefault(),g();return}};document.addEventListener("keydown",p);const w=setTimeout(()=>{l()},300),C=setTimeout(()=>{l()},1e3);return()=>{window.removeEventListener("resize",l),document.removeEventListener("keydown",p),clearTimeout(w),clearTimeout(C),e.off("terminal-output"),e.off("terminal-exit"),h&&h.dispose()}},[e]),Y.useEffect(()=>{const h=()=>{const o=document.querySelector(".terminal-container iframe");if(o)try{setTimeout(()=>{var s;try{(s=o.contentWindow)==null||s.postMessage({type:"resize",width:o.clientWidth,height:o.clientHeight},"*")}catch(l){console.warn("Failed to notify iframe of window resize:",l)}},100)}catch(s){console.warn("Failed to notify iframe of window resize:",s)}};return window.addEventListener("resize",h),()=>window.removeEventListener("resize",h)},[]);const _=()=>{const h=!m;a(h),r&&r(h),setTimeout(()=>{var s;const o=document.querySelector(".terminal-container iframe");if(o&&o.contentWindow)try{o.contentWindow.postMessage({type:"resize",fullscreen:h},"*");try{(s=o.contentWindow)==null||s.postMessage({type:"resize",width:o.clientWidth,height:o.clientHeight},"*")}catch(l){console.warn("Failed to notify iframe resize:",l)}}catch(l){console.warn("Failed to notify iframe resize:",l)}if(u.current&&n.current)try{u.current.fit(),e.emit("terminal-resize",{cols:n.current.cols,rows:n.current.rows})}catch(l){console.warn("Fullscreen resize failed:",l)}},300)},S=()=>{n.current&&n.current.clear()},x=async()=>{f(!0),setTimeout(()=>f(!1),3e3)},g=async()=>{var h;try{const o=await navigator.clipboard.readText();if(o){d(!0),setTimeout(()=>d(!1),3e3);const s=document.querySelector('iframe[title="WebSSH Terminal"]');if(s){s.focus();const l=new KeyboardEvent("keydown",{key:"V",code:"KeyV",ctrlKey:!0,shiftKey:!0,bubbles:!0});try{(h=s.contentWindow)==null||h.postMessage({type:"paste",data:o},"*")}catch(p){console.warn("Failed to send paste event:",p)}}}}catch(o){console.error("粘贴失败:",o)}};return L.jsxs("div",{className:`terminal-container ${m?"fixed inset-0 z-50":""}`,children:[L.jsxs("div",{className:"terminal-header",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsxs("div",{className:"terminal-controls",children:[L.jsx("div",{className:"terminal-control close"}),L.jsx("div",{className:"terminal-control minimize"}),L.jsx("div",{className:"terminal-control maximize"})]}),L.jsxs("span",{className:"text-gray-300 text-sm font-medium ml-4",children:[t,"@linux-container"]})]}),L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsxs("div",{className:"hidden lg:flex items-center space-x-3 text-xs text-gray-400",children:[L.jsxs("div",{className:"flex items-center space-x-1",children:[L.jsx("button",{onClick:x,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"复制选中文本",children:L.jsx(lc,{size:14})}),L.jsx("span",{children:"Ctrl+Shift+C"})]}),L.jsxs("div",{className:"flex items-center space-x-1",children:[L.jsx("button",{onClick:g,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"粘贴",children:L.jsx(ac,{size:14})}),L.jsx("span",{children:"Ctrl+Shift+V"})]})]}),L.jsxs("div",{className:"lg:hidden flex items-center space-x-2",children:[L.jsx("button",{onClick:x,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"复制选中文本 (Ctrl+Shift+C)",children:L.jsx(lc,{size:16})}),L.jsx("button",{onClick:g,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"粘贴 (Ctrl+Shift+V)",children:L.jsx(ac,{size:16})})]}),L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("button",{onClick:S,className:"p-1 text-gray-400 hover:text-white transition-colors",title:"清屏",children:L.jsx(E_,{size:16})}),L.jsx("button",{onClick:_,className:"p-1 text-gray-400 hover:text-white transition-colors",title:m?"退出全屏":"全屏",children:m?L.jsx(C_,{size:16}):L.jsx(w_,{size:16})})]})]})]}),L.jsxs("div",{className:`overflow-hidden ${m?"h-[calc(100vh-48px)]":"h-96 lg:h-[500px]"}`,style:{minHeight:m?"100vh":"300px",width:"100%",position:"relative",backgroundColor:"#000000",color:"#ffffff"},children:[L.jsx("iframe",{ref:h=>{h&&(h.onload=()=>{setTimeout(()=>{var o;try{(o=h.contentWindow)==null||o.postMessage({type:"resize",width:h.clientWidth,height:h.clientHeight},"*")}catch(s){console.warn("Failed to trigger initial iframe resize:",s)}},500)})},src:`/webssh/ssh?username=${t}`,style:{width:"100%",height:"100%",border:"none",backgroundColor:"#000000"},title:"WebSSH Terminal"}),c&&L.jsx("div",{className:"absolute top-4 right-4 bg-blue-500 text-white px-3 py-2 rounded-lg shadow-lg z-10",children:"💡 请在终端中选中文本后使用 Ctrl+Shift+C 复制"}),v&&L.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-2 rounded-lg shadow-lg z-10",children:"✅ 请在终端中使用 Ctrl+Shift+V 粘贴"})]}),L.jsxs("div",{className:"bg-gray-800 px-4 py-2 text-xs text-gray-400 flex justify-between items-center",children:[L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsxs("span",{children:["容器: ",t]}),L.jsxs("span",{className:"flex items-center",children:[L.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"已连接"]})]}),L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsx("span",{children:"UTF-8"}),L.jsx("span",{children:"Bash"})]})]})]})},cc=["bg-red-500","bg-blue-500","bg-green-500","bg-yellow-500","bg-purple-500","bg-pink-500","bg-indigo-500","bg-teal-500","bg-orange-500","bg-cyan-500","bg-lime-500","bg-emerald-500","bg-violet-500","bg-fuchsia-500","bg-rose-500","bg-sky-500","bg-amber-500","bg-slate-500"],Vo=(e,t=null)=>{if(!e)return"bg-gray-500";if(t&&t.type==="color")return t.value;if(t&&t.type==="emoji")return"bg-gray-200 dark:bg-gray-700";let r=0;for(let n=0;n<e.length;n++){const u=e.charCodeAt(n);r=(r<<5)-r+u,r=r&r}const i=Math.abs(r)%cc.length;return cc[i]},Ko=(e,t=null)=>e?t&&t.type==="emoji"?t.value:e.charAt(0).toUpperCase():"?",M_=e=>`avatar_${e}`,Fu=e=>{if(!e)return null;const t=M_(e),r=localStorage.getItem(t);return r?JSON.parse(r):null},I_=["😀","😃","😄","😁","😆","😅","😂","🤣","😊","😇","🙂","🙃","😉","😌","😍","🥰","😘","😗","😙","😚","😋","😛","😝","😜","🤪","🤨","🧐","🤓","😎","🤩","🥳","😏","😒","😞","😔","😟","😕","🙁","☹️","😣","😖","😫","😩","🥺","😢","😭","😤","😠","😡","🤬","🤯","😳","🥵","🥶","😱","😨","😰","😥","😓","🤗","🤔","🤭","🤫","🤥","😶","😐","😑","😬","🙄","😯","😦","😧","😮","😲","🥱","😴","🤤","😪","😵","🤐","🥴","🤢","🤮","🤧","😷","🤒","🤕","🤑","🤠","😈","👿","👹","👺","🤡","💩","👻","💀","☠️","👽","👾","🤖","🎃","😺","😸","😹","😻","😼","😽","🙀","😿","😾","👋","🤚","🖐️","✋","🖖","👌","🤌","🤏","✌️","🤞","🤟","🤘","🤙","👈","👉","👆","🖕","👇","☝️","👍","👎","👊","✊","🤛","🤜","👏","🙌","👐","🤲","🤝","🙏","✍️","💅","❤️","🧡","💛","💚","💙","💜","🖤","🤍","🤎","💔","❣️","💕","💞","💓","💗","💖","💘","💝","💟","☮️","✝️","☪️","🕉️","☸️","✡️","🔯","🕎","☯️","☦️","🛐","⛎","♈","♉","♊","♋","♌","♍","♎","♏","♐","♑","♒","♓","🆔","⚛️","🉑","☢️","☣️"],N_=({socket:e,messages:t,currentUsername:r,onSendMessage:i,activeUsers:n=[]})=>{const[u,m]=Y.useState(""),[a,c]=Y.useState(!1),[f,v]=Y.useState({}),[d,_]=Y.useState(!1),S=Y.useRef(null),x=Y.useRef(null),g=Y.useRef(null),h=Y.useRef(null),o=Y.useRef(null),[s,l]=Y.useState(!0);Y.useEffect(()=>{if(x.current&&t.length>0){const H=x.current;if(s){requestAnimationFrame(()=>{H.scrollTop=H.scrollHeight,l(!1)});return}H.scrollHeight-H.scrollTop-H.clientHeight<100&&requestAnimationFrame(()=>{H.scrollTop=H.scrollHeight})}},[t,s]),Y.useEffect(()=>{(()=>{const I={},E=new Set;t.forEach(R=>{R.username&&E.add(R.username)}),E.forEach(R=>{const B=Fu(R);B&&(I[R]=B)}),v(I)})()},[t]),Y.useEffect(()=>{const H=I=>{h.current&&!h.current.contains(I.target)&&c(!1)};return document.addEventListener("mousedown",H),()=>{document.removeEventListener("mousedown",H)}},[]);const p=H=>{H.preventDefault(),u.trim()&&(i({message:u.trim(),messageType:"text"}),m(""),c(!1))},w=H=>{if(H.key==="Enter"&&H.shiftKey){H.preventDefault();const I=H.target.selectionStart,E=u.substring(0,I),R=u.substring(I);m(E+`
`+R),setTimeout(()=>{H.target.selectionStart=H.target.selectionEnd=I+1,C(H.target)},0);return}if(H.key==="Enter"&&!H.shiftKey){H.preventDefault(),p(H);return}},C=H=>{H.style.height="auto";const I=H.scrollHeight,E=120;H.style.height=Math.min(I,E)+"px"},k=H=>{const I=H.target.value;m(I),C(H.target)},y=H=>{var I;m(E=>E+H),c(!1),(I=g.current)==null||I.focus()},b=()=>{c(!a)},T=async H=>{var E;const I=(E=H.clipboardData)==null?void 0:E.items;if(I)for(let R=0;R<I.length;R++){const B=I[R];if(B.type.startsWith("image/")){H.preventDefault();const M=B.getAsFile();M&&await P(M);break}}},O=H=>{const I=H.target.files[0];I&&P(I),H.target.value=""},P=async H=>{if(!H.type.startsWith("image/")){alert("只能上传图片文件");return}if(H.size>5*1024*1024){alert("图片大小不能超过5MB");return}_(!0);const I=new FormData;I.append("image",H);try{const R=await(await fetch("/api/upload-image",{method:"POST",body:I})).json();if(console.log("图片上传结果:",R),R.success){const B=R.imageUrl;console.log("发送图片消息:",{imageUrl:B}),i({message:"",messageType:"image",imageUrl:B})}else alert("图片上传失败: "+R.error)}catch(E){console.error("图片上传失败:",E),alert("图片上传失败")}finally{_(!1)}},A=H=>{if(!H)return H;const I=/@([a-zA-Z0-9_\u4e00-\u9fa5]+)/g;let E=H;return E=E.replace(I,(R,B)=>`<span
        style="font-weight: 600; cursor: pointer; ${B===r?"color: #2563eb; background-color: #dbeafe; padding: 2px 4px; border-radius: 4px;":"color: #16a34a;"}"
        onclick="window.handleMentionClick('${B}')"
        onmouseover="this.style.textDecoration='underline'"
        onmouseout="this.style.textDecoration='none'"
        title="点击@${B}"
      >@${B}</span>`),L.jsx("span",{dangerouslySetInnerHTML:{__html:E}})};Sc.useEffect(()=>(window.handleMentionClick=H=>{console.log("点击了@用户:",H),m(I=>I+(I.endsWith(" ")||I===""?"":" ")+`@${H} `),g.current&&(g.current.focus(),setTimeout(()=>{const I=u.length+(u.endsWith(" ")||u===""?0:1)+H.length+2;g.current.setSelectionRange(I,I)},0))},()=>{delete window.handleMentionClick}),[u]);const j=H=>new Date(H).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"}),U=H=>{const I=new Date(H),E=new Date,R=new Date(E);return R.setDate(R.getDate()-1),I.toDateString()===E.toDateString()?"今天":I.toDateString()===R.toDateString()?"昨天":I.toLocaleDateString("zh-CN",{month:"short",day:"numeric"})},W=t.reduce((H,I)=>{const E=U(I.createdAt||I.timestamp);return H[E]||(H[E]=[]),H[E].push(I),H},{});return L.jsxs("div",{className:"chat-container",children:[L.jsx("div",{className:"chat-header",children:L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx(Wo,{size:20}),L.jsx("span",{children:"聊天室"})]})}),L.jsxs("div",{ref:x,className:"chat-messages",children:[Object.keys(W).length===0?L.jsxs("div",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:[L.jsx(Wo,{size:32,className:"mx-auto mb-2 opacity-50"}),L.jsx("p",{children:"还没有消息"}),L.jsx("p",{className:"text-sm",children:"开始聊天吧！"})]}):Object.entries(W).map(([H,I])=>L.jsxs("div",{children:[L.jsx("div",{className:"flex items-center justify-center my-4",children:L.jsx("div",{className:"bg-gray-200 dark:bg-gray-700 text-gray-600 dark:text-gray-300 text-xs px-3 py-1 rounded-full",children:H})}),I.map((E,R)=>{const B=E.username===r,M=R===0||I[R-1].username!==E.username;return L.jsxs("div",{className:`chat-message ${B?"own":"other"} fade-in`,children:[M&&L.jsxs("div",{className:`flex items-center space-x-2 mb-1 ${B?"justify-end":"justify-start"}`,children:[!B&&L.jsx("div",{className:`w-6 h-6 ${Vo(E.username,f[E.username])} text-white rounded-full flex items-center justify-center text-xs font-medium`,children:Ko(E.username,f[E.username])}),L.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:E.username}),B&&L.jsx("div",{className:`w-6 h-6 ${Vo(E.username,f[E.username])} text-white rounded-full flex items-center justify-center text-xs font-medium`,children:Ko(E.username,f[E.username])})]}),L.jsx("div",{className:`message-bubble ${B?"own":"other"}`,children:E.messageType==="image"?L.jsxs("div",{className:"space-y-2",children:[L.jsx("img",{src:(()=>{let z=E.imageUrl;return z&&z.startsWith("http://localhost:3001/")&&(z=z.replace("http://localhost:3001","")),z})(),alt:"聊天图片",className:"max-w-xs max-h-64 rounded-lg cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{let z=E.imageUrl;z&&z.startsWith("http://localhost:3001/")&&(z=z.replace("http://localhost:3001","")),window.open(z,"_blank")},onError:z=>{console.error("图片加载失败:",E.imageUrl),z.target.style.display="none",z.target.nextSibling.style.display="block"},onLoad:()=>console.log("图片加载成功:",E.imageUrl)}),L.jsxs("div",{style:{display:"none"},className:"text-red-500 text-sm",children:["图片加载失败: ",E.imageUrl]}),E.message&&L.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm m-0",children:A(E.message)})]}):L.jsx("pre",{className:"whitespace-pre-wrap font-sans text-sm m-0",children:A(E.message)})}),L.jsx("div",{className:"message-meta",children:j(E.createdAt||E.timestamp)})]},E.id||R)})]},H)),L.jsx("div",{ref:S})]}),L.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 relative",children:[L.jsxs("form",{onSubmit:p,className:"flex space-x-2",children:[L.jsxs("div",{className:"flex-1 relative",children:[L.jsx("textarea",{ref:g,value:u,onChange:k,onKeyDown:w,onPaste:T,placeholder:"输入消息... (支持粘贴图片，输入@提及用户)",className:"w-full px-3 py-2 pr-20 border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 rounded-lg focus:outline-none focus:ring-2 focus:ring-linux-500 focus:border-transparent text-sm resize-none",maxLength:500,rows:1,style:{minHeight:"38px",maxHeight:"120px",overflowY:u.includes(`
`)?"auto":"hidden"}}),L.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex space-x-1",children:[L.jsx("button",{type:"button",onClick:()=>{var H;return(H=o.current)==null?void 0:H.click()},disabled:d,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors disabled:opacity-50",title:"上传图片",children:L.jsx(m_,{size:16})}),L.jsx("button",{type:"button",onClick:b,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",title:"表情",children:L.jsx(L_,{size:16})})]}),L.jsx("input",{ref:o,type:"file",accept:"image/*",onChange:O,className:"hidden"})]}),L.jsx("button",{type:"submit",disabled:!u.trim()||d,className:`px-3 py-2 rounded-lg text-white transition-colors ${u.trim()&&!d?"bg-linux-500 hover:bg-linux-600":"bg-gray-300 cursor-not-allowed"}`,children:d?L.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):L.jsx(b_,{size:16})})]}),a&&L.jsx("div",{ref:h,className:"absolute bottom-full right-4 mb-2 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg p-3 z-50",style:{width:"280px",maxHeight:"200px"},children:L.jsx("div",{className:"grid grid-cols-8 gap-1 overflow-y-auto max-h-40",children:I_.map((H,I)=>L.jsx("button",{type:"button",onClick:()=>y(H),className:"w-8 h-8 flex items-center justify-center text-lg hover:bg-gray-100 dark:hover:bg-gray-700 rounded transition-colors",children:H},I))})}),L.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500 dark:text-gray-400",children:[L.jsx("span",{children:"Enter 发送 • Shift+Enter 换行"}),L.jsxs("span",{children:[u.length,"/500"]})]})]})]})},j_=({progress:e,message:t,username:r})=>L.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:L.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-8 max-w-md w-full",children:L.jsxs("div",{className:"text-center",children:[L.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-linux-100 dark:bg-linux-900/20 text-linux-600 dark:text-linux-400 rounded-full mb-6",children:L.jsx(p_,{size:32})}),L.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:["正在为 ",r," 创建容器"]}),L.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-8",children:"请稍等，我们正在为你准备独立的Linux环境..."}),L.jsxs("div",{className:"mb-6",children:[L.jsx("div",{className:"progress-bar mb-3",children:L.jsx("div",{className:"progress-fill",style:{width:`${e}%`}})}),L.jsxs("div",{className:"flex justify-between text-sm text-gray-500 dark:text-gray-400",children:[L.jsx("span",{children:"0%"}),L.jsxs("span",{className:"font-medium",children:[e,"%"]}),L.jsx("span",{children:"100%"})]})]}),L.jsxs("div",{className:"flex items-center justify-center space-x-2 text-linux-600 dark:text-linux-400",children:[L.jsx(v_,{size:16,className:"animate-spin"}),L.jsx("span",{className:"text-sm font-medium",children:t})]}),L.jsxs("div",{className:"mt-8 text-left",children:[L.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 mb-3",children:"创建步骤："}),L.jsx("div",{className:"space-y-2",children:[{step:"拉取Ubuntu镜像",threshold:20},{step:"创建容器",threshold:40},{step:"配置环境",threshold:60},{step:"启动服务",threshold:80},{step:"容器就绪",threshold:100}].map((i,n)=>L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("div",{className:`w-2 h-2 rounded-full ${e>=i.threshold?"bg-green-500":e>=i.threshold-20?"bg-linux-500 animate-pulse":"bg-gray-300 dark:bg-gray-600"}`}),L.jsx("span",{className:`text-sm ${e>=i.threshold?"text-green-600 dark:text-green-400 font-medium":e>=i.threshold-20?"text-linux-600 dark:text-linux-400":"text-gray-500 dark:text-gray-400"}`,children:i.step}),e>=i.threshold&&L.jsx("span",{className:"text-green-500 text-xs",children:"✓"})]},n))})]}),L.jsx("div",{className:"mt-8 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:L.jsxs("div",{className:"text-sm text-blue-800 dark:text-blue-300",children:[L.jsx("p",{className:"font-medium mb-1",children:"💡 小贴士"}),L.jsx("p",{children:"容器创建完成后，你将获得："}),L.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1 text-xs",children:[L.jsx("li",{children:"完整的Ubuntu 22.04环境"}),L.jsx("li",{children:"sudo权限，可安装任何软件"}),L.jsx("li",{children:"2小时的使用时间"}),L.jsx("li",{children:"与其他用户完全隔离"})]})]})})]})})}),zu=Y.createContext(),H_=()=>{const e=Y.useContext(zu);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},F_=({children:e})=>{const[t,r]=Y.useState(()=>{const u=localStorage.getItem("theme");return u?u==="dark":!0});Y.useEffect(()=>{localStorage.setItem("theme",t?"dark":"light"),t?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")},[t]);const n={isDarkMode:t,toggleTheme:()=>{r(u=>!u)},theme:t?"dark":"light"};return L.jsx(zu.Provider,{value:n,children:e})},z_=()=>{const{isDarkMode:e,toggleTheme:t}=H_();return L.jsx("button",{onClick:t,className:"p-2 rounded-lg transition-colors duration-200 bg-gray-100 hover:bg-gray-200 dark:bg-gray-800 dark:hover:bg-gray-700",title:e?"切换到明亮模式":"切换到黑暗模式",children:e?L.jsx(R_,{className:"h-5 w-5 text-yellow-500"}):L.jsx(k_,{className:"h-5 w-5 text-gray-600"})})},zn=({username:e,onLogout:t,onlineCount:r=0})=>{const[i,n]=Y.useState(!1),u=Y.useRef(null),m=[{id:1,title:"欢迎使用Linux Analytics！",content:"支持多用户机器学习协作，每人一个独立的容器环境。",time:"2024-01-15",type:"info"},{id:2,title:"新功能上线",content:"现在支持终端复制粘贴功能，使用Ctrl+Shift+C/V进行操作。",time:"2024-01-14",type:"feature"},{id:3,title:"聊天室更新",content:"聊天室现在支持Shift+Enter换行，可以发送多行消息了！",time:"2024-01-13",type:"update"}],a=()=>{n(!i)};return Y.useEffect(()=>{const c=f=>{u.current&&!u.current.contains(f.target)&&n(!1)};return i&&document.addEventListener("mousedown",c),()=>{document.removeEventListener("mousedown",c)}},[i]),L.jsxs("header",{className:"bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-700",children:[L.jsx("div",{className:"container mx-auto px-4",children:L.jsxs("div",{className:"flex items-center h-16",children:[L.jsxs("div",{className:"flex items-center space-x-3",children:[L.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-linux-500 text-white rounded-lg",children:L.jsx($o,{size:24})}),L.jsxs("div",{children:[L.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Linux Analytics"}),L.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 hidden sm:block",children:"机器学习容器管理平台"})]})]}),L.jsxs("div",{className:"hidden lg:flex flex-1 justify-center mx-8 relative",children:[L.jsxs("button",{onClick:a,className:"bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-4 py-2 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 transform hover:scale-105 flex items-center space-x-2 relative",children:[L.jsx(f_,{size:16,className:"animate-pulse"}),L.jsx("span",{className:"text-sm font-medium",children:"点我查看通知"}),L.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-ping"}),L.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"})]}),i&&L.jsxs("div",{ref:u,className:"absolute top-full mt-2 w-96 bg-white dark:bg-gray-800 rounded-lg shadow-2xl border border-gray-200 dark:border-gray-700 z-50",children:[L.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[L.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"系统通知"}),L.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:L.jsx(T_,{size:20})})]}),L.jsx("div",{className:"max-h-80 overflow-y-auto",children:m.map(c=>L.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 last:border-b-0",children:L.jsxs("div",{className:"flex items-start space-x-3",children:[L.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${c.type==="info"?"bg-blue-500":c.type==="feature"?"bg-green-500":"bg-purple-500"}`}),L.jsxs("div",{className:"flex-1",children:[L.jsx("h4",{className:"text-sm font-medium text-gray-900 dark:text-white mb-1",children:c.title}),L.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:c.content}),L.jsx("span",{className:"text-xs text-gray-400",children:c.time})]})]})},c.id))})]})]}),L.jsxs("div",{className:"flex items-center space-x-4",children:[e&&L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:"hidden sm:flex items-center space-x-3",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),L.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e})]}),L.jsxs("div",{className:"flex items-center space-x-1 text-xs text-gray-500 dark:text-gray-400",children:[L.jsx("span",{children:"在线:"}),L.jsx("span",{className:"font-medium text-linux-600 dark:text-linux-400",children:r})]})]}),L.jsxs("button",{onClick:t,className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[L.jsx(S_,{size:16}),L.jsx("span",{className:"hidden sm:inline",children:"退出"})]})]}),L.jsx(z_,{}),L.jsxs("a",{href:"https://github.com/ml-analytics",target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg transition-colors",children:[L.jsx(g_,{size:16}),L.jsx("span",{className:"hidden sm:inline",children:"GitHub"})]})]})]})}),e&&L.jsx("div",{className:"bg-linux-50 dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700",children:L.jsx("div",{className:"container mx-auto px-4 py-2",children:L.jsxs("div",{className:"flex items-center justify-between text-sm",children:[L.jsxs("div",{className:"flex items-center space-x-4",children:[L.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["容器状态: ",L.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"运行中"})]}),L.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["用户: ",L.jsx("span",{className:"font-medium",children:e})]})]}),L.jsxs("div",{className:"flex items-center space-x-2 text-gray-500 dark:text-gray-400",children:[L.jsx(Uo,{size:14}),L.jsx("span",{children:"Made with ❤️ by ML Analytics Team"})]})]})})})]})},U_=()=>{const e=Y.useRef(null);return Y.useEffect(()=>{if(!e.current)return;console.log("Creating test terminal...");const t=new Ka.Terminal({fontSize:16,fontFamily:"monospace",theme:{background:"#000000",foreground:"#ffffff"},cursorBlink:!0});let r="";try{t.open(e.current),console.log("Test terminal opened"),t.write(`=== XTerm.js Test ===\r
`),t.write(`If you can see this text, XTerm.js is working!\r
`),t.write("Terminal size: "+t.cols+"x"+t.rows+`\r
`),t.write(`Type something and press Enter:\r
`),t.write("$ "),t.onData(i=>{const n=i.charCodeAt(0);n===13?(t.write(`\r
`),r.trim()&&t.write("You typed: "+r+`\r
`),r="",t.write("$ ")):n===127?r.length>0&&(r=r.slice(0,-1),t.write("\b \b")):n>=32&&(r+=i,t.write(i))}),console.log("Test text written to terminal")}catch(i){console.error("Failed to create test terminal:",i)}return()=>{t.dispose()}},[]),L.jsxs("div",{className:"p-4",children:[L.jsx("h2",{className:"text-xl font-bold mb-4 text-white",children:"XTerm.js 测试"}),L.jsx("div",{ref:e,style:{width:"800px",height:"400px",backgroundColor:"#000000",border:"1px solid #666"}})]})},W_=({socket:e,currentUsername:t,activeUsers:r})=>{const[i,n]=Y.useState({}),[u,m]=Y.useState({}),[a,c]=Y.useState({}),f=Y.useRef({}),v=Y.useRef({}),d=r.filter(h=>h!==t),_=Y.useCallback((h,o)=>{if(!o||v.current[h])return;const s=new Ka.Terminal({rows:20,cols:80,theme:{background:"#000000",foreground:"#ffffff",cursor:"#ffffff",selection:"#ffffff40"},fontSize:12,fontFamily:'Monaco, Menlo, "Ubuntu Mono", monospace',cursorBlink:!1,disableStdin:!0});s.open(o),v.current[h]=s,u[h]&&s.write(u[h])},[u]),S=Y.useCallback(h=>{const o=f.current[h];o&&(o.scrollTop=o.scrollHeight)},[]);Y.useEffect(()=>{(()=>{const o={};d.forEach(s=>{const l=Fu(s);l&&(o[s]=l)}),c(o)})()},[d.length]);const x=Y.useRef({});Y.useEffect(()=>{Object.keys(u).forEach(h=>{u[h]!==x.current[h]&&d.includes(h)&&setTimeout(()=>S(h),50)}),x.current={...u}},[u]),Y.useEffect(()=>{if(e)return e.on("user-terminal-output",h=>{const{username:o,data:s}=h;if(o!==t){m(p=>({...p,[o]:(p[o]||"")+s}));const l=v.current[o];l&&l.write(s)}}),e.on("likes-updated",h=>{n(o=>({...o,[h.username]:h.likes}))}),e.on("all-likes",h=>{n(h)}),e.on("user-liked",()=>{}),e.emit("get-all-likes"),()=>{e.off("user-terminal-output"),e.off("likes-updated"),e.off("all-likes"),e.off("user-liked")}},[e,t]),Y.useEffect(()=>()=>{Object.values(v.current).forEach(h=>{h&&h.dispose()}),v.current={}},[]);const g=h=>{e&&e.emit("like-user",{targetUsername:h})};return d.length===0?L.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6 text-center",children:[L.jsx(x_,{className:"mx-auto h-12 w-12 text-gray-400 dark:text-gray-500 mb-3"}),L.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-2",children:"暂无其他用户"}),L.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"当有其他用户在线时，你可以在这里观看他们的终端操作"})]}):L.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700",children:[L.jsx("div",{className:"px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:L.jsxs("div",{className:"flex items-center justify-between",children:[L.jsxs("h3",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 flex items-center",children:[L.jsx(__,{className:"h-5 w-5 mr-2 text-blue-500"}),"其他用户终端"]}),L.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[d.length," 个用户在线"]})]})}),L.jsxs("div",{className:"p-4",children:[L.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:d.map(h=>L.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[L.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 border-b border-gray-200 dark:border-gray-600 flex items-center justify-between",children:[L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-medium text-sm ${Vo(h,a[h])}`,children:Ko(h,a[h])}),L.jsxs("div",{children:[L.jsx("div",{className:"font-medium text-gray-900 dark:text-gray-100",children:h}),L.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center",children:[L.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-1"}),"运行中"]})]})]}),L.jsxs("div",{className:"flex items-center space-x-2",children:[L.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i[h]||0," ❤️"]}),L.jsx("button",{onClick:()=>g(h),className:"p-2 rounded-full transition-colors bg-gray-100 dark:bg-gray-600 hover:bg-red-100 dark:hover:bg-red-900 text-gray-600 dark:text-gray-300 hover:text-red-500 dark:hover:text-red-400",title:"给TA点赞",children:L.jsx(Uo,{className:"h-4 w-4"})})]})]}),L.jsx("div",{ref:o=>{f.current[h]=o,o&&_(h,o)},className:"bg-black h-64",children:!u[h]&&L.jsx("div",{className:"flex items-center justify-center h-full text-gray-500 italic text-sm",children:"等待用户操作..."})}),L.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 px-3 py-2 text-xs text-gray-500 dark:text-gray-400 flex justify-between",children:[L.jsx("span",{children:"只读模式"}),L.jsx("span",{children:"实时同步"})]})]},h))}),L.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:L.jsxs("div",{className:"flex items-start space-x-2",children:[L.jsx(Uo,{className:"h-4 w-4 text-blue-500 mt-0.5"}),L.jsxs("div",{className:"text-sm text-blue-700 dark:text-blue-300",children:[L.jsx("p",{className:"font-medium",children:"互动功能"}),L.jsx("p",{className:"text-blue-600 dark:text-blue-400 mt-1",children:"观看其他用户的实时操作，给优秀的操作点赞鼓励！可以无限制点赞支持。"})]})]})})]})]})};function $_(){const[e,t]=Y.useState(!1),[r,i]=Y.useState(null),[n,u]=Y.useState(""),[m,a]=Y.useState(!1),[c,f]=Y.useState(!1),[v,d]=Y.useState({progress:0,message:""}),[_,S]=Y.useState([]),[x,g]=Y.useState([]),[h,o]=Y.useState(""),[s,l]=Y.useState("terminal"),[p,w]=Y.useState(!1);Y.useEffect(()=>{const P=new URLSearchParams(window.location.search),A=P.get("username"),j=P.get("login");if(A&&j==="success"){window.history.replaceState({},document.title,window.location.pathname),u(A),k(A);return}const U=window.location.origin;console.log("连接到后端URL:",U);const W=fi(U,{autoConnect:!1,timeout:2e4,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,maxReconnectionAttempts:5,forceNew:!0});return W.on("connect",()=>{console.log("Socket连接成功");const H=setInterval(()=>{W.connected?W.emit("ping"):clearInterval(H)},3e4);W.heartbeatInterval=H}),W.on("disconnect",()=>{console.log("Socket连接断开"),a(!1),W.heartbeatInterval&&(clearInterval(W.heartbeatInterval),W.heartbeatInterval=null)}),W.on("error",H=>{console.log("Socket错误:",H),o(H.message),f(!1)}),W.on("container-creating",H=>{f(!0),d({progress:0,message:H.message})}),W.on("container-progress",H=>{d(H)}),W.on("container-ready",H=>{console.log("容器就绪:",H),f(!1),a(!0),o(""),setTimeout(()=>{W.emit("get-user-list")},200),setTimeout(()=>{W.emit("get-user-list")},1e3),setTimeout(()=>{W.emit("get-user-list")},2e3)}),W.on("user-joined",H=>{console.log("用户加入:",H.username)}),W.on("user-left",H=>{console.log("用户离开:",H.username)}),W.on("user-list-updated",H=>{console.log("用户列表更新 (主监听器):",H),S(H)}),y(W),i(W),()=>{W.close()}},[]);const C=(P,A)=>{r&&(u(P),o(""),r.connected?(r.emit("join",{username:P,password:A}),r.emit("get-chat-history"),r.emit("get-user-list")):(r.connect(),r.once("connect",()=>{console.log("Socket连接成功，发送join事件"),r.emit("join",{username:P,password:A}),r.emit("get-chat-history"),r.emit("get-user-list")})))},k=P=>{const A=window.location.origin;console.log("自动登录连接到后端URL:",A);const j=fi(A,{autoConnect:!0});i(j),u(P),o(""),j.on("connect",()=>{console.log("Socket连接成功"),j.emit("join",{username:P}),j.emit("get-chat-history"),j.emit("get-user-list")}),y(j)},y=P=>{P.on("container-creating",()=>{f(!0),d({progress:0,message:"正在创建容器..."})}),P.on("container-progress",j=>{d(j)}),P.on("container-ready",j=>{console.log("容器就绪 (setupSocketListeners):",j),a(!0),f(!1),d({progress:100,message:j.message||"容器就绪!"})}),P.on("chat-message",j=>{console.log("收到新聊天消息:",j),g(U=>{const W=[...U,j];return console.log("更新聊天消息列表:",W),W})}),P.on("chat-history",j=>{console.log("收到聊天历史:",j),g(j)}),P.on("user-joined",j=>{console.log("用户加入 (setupSocketListeners):",j.username),setTimeout(()=>{P.emit("get-user-list")},500)}),P.on("user-left",j=>{console.log("用户离开 (setupSocketListeners):",j.username),setTimeout(()=>{P.emit("get-user-list")},500)}),P.on("user-list-updated",j=>{console.log("用户列表更新 (setupSocketListeners):",j),S(j)});const A=setInterval(()=>{P.connected&&P.emit("get-user-list")},1e4);return()=>{clearInterval(A)}},b=P=>{if(!r||!m){console.error("无法发送消息: socket未连接",{socket:!!r,isConnected:m});return}console.log("发送聊天消息:",{messageData:P,username:n,isConnected:m}),r.emit("chat-message",P)},T=P=>{w(P)},O=()=>{r&&r.disconnect(),u(""),a(!1),f(!1),d({progress:0,message:""}),g([]),o("")};return e?L.jsx("div",{className:"min-h-screen bg-gray-900",children:L.jsxs("div",{className:"p-4",children:[L.jsx("button",{onClick:()=>t(!1),className:"mb-4 px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"退出测试模式"}),L.jsx(U_,{})]})}):!m&&!c?L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-linux-50 to-linux-100 dark:from-gray-900 dark:to-gray-800",children:[L.jsx(zn,{}),L.jsx("div",{className:"container mx-auto px-4 py-8",children:L.jsxs("div",{className:"max-w-md mx-auto",children:[L.jsxs("div",{className:"text-center mb-8",children:[L.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-linux-500 text-white rounded-full mb-4",children:L.jsx($o,{size:32})}),L.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:"欢迎来到Linux Analytics"}),L.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"输入用户名获得你的专属机器学习容器"})]}),L.jsx(A_,{onLogin:C,error:h}),L.jsxs("div",{className:"mt-8 text-center text-sm text-gray-500 dark:text-gray-400",children:[L.jsx("p",{children:"🐳 每个用户独立容器"}),L.jsx("p",{children:"🛡️ 完全安全隔离"}),L.jsx("p",{children:"⏰ 20分钟无活动自动清理"})]})]})})]}):c?L.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-linux-50 to-linux-100 dark:from-gray-900 dark:to-gray-800",children:[L.jsx(zn,{}),L.jsx(j_,{progress:v.progress,message:v.message,username:n})]}):L.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[L.jsx(zn,{username:n,onLogout:O,onlineCount:_.length}),L.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700",children:L.jsxs("div",{className:"flex",children:[L.jsxs("button",{onClick:()=>l("terminal"),className:`flex-1 flex items-center justify-center py-3 px-4 text-sm font-medium ${s==="terminal"?"text-linux-600 border-b-2 border-linux-600":"text-gray-500 dark:text-gray-400"}`,children:[L.jsx($o,{size:18,className:"mr-2"}),"终端"]}),L.jsxs("button",{onClick:()=>l("chat"),className:`flex-1 flex items-center justify-center py-3 px-4 text-sm font-medium ${s==="chat"?"text-linux-600 border-b-2 border-linux-600":"text-gray-500 dark:text-gray-400"}`,children:[L.jsx(Wo,{size:18,className:"mr-2"}),"聊天"]})]})}),L.jsxs("div",{className:"container mx-auto px-4 py-6 relative",children:[L.jsx("div",{className:"mb-8",children:L.jsx("div",{className:`${p?"w-full":"lg:w-[62%]"} ${s!=="terminal"?"hidden lg:block":""}`,children:L.jsx(P_,{socket:r,username:n,onFullscreenChange:T})})}),!p&&L.jsx("div",{className:"lg:absolute lg:top-6 lg:right-4 lg:w-[36%] space-y-6 z-50",children:L.jsx("div",{className:`${s!=="chat"?"hidden lg:block":""}`,children:L.jsx(N_,{socket:r,messages:x,currentUsername:n,activeUsers:_,onSendMessage:b})})})]}),L.jsx("div",{className:"container mx-auto px-4 pb-6",children:L.jsxs("div",{className:"w-full",children:[console.log("App.jsx - activeUsers:",_),console.log("App.jsx - username:",n),L.jsx(W_,{socket:r,currentUsername:n,activeUsers:_})]})})]})}const V_=()=>L.jsx(F_,{children:L.jsx($_,{})});Un.createRoot(document.getElementById("root")).render(L.jsx(Sc.StrictMode,{children:L.jsx(V_,{})}));
